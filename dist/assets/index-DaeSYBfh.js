var _K=Object.defineProperty;var xK=(n,e,t)=>e in n?_K(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var tR=(n,e,t)=>xK(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Oi(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const wn={},wf=[],Ci=()=>{},Fd=()=>!1,Eh=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),qw=n=>n.startsWith("onUpdate:"),Sn=Object.assign,Yw=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},AK=Object.prototype.hasOwnProperty,Wn=(n,e)=>AK.call(n,e),wt=Array.isArray,Sf=n=>Yf(n)==="[object Map]",Th=n=>Yf(n)==="[object Set]",q1=n=>Yf(n)==="[object Date]",M2=n=>Yf(n)==="[object RegExp]",Bt=n=>typeof n=="function",qt=n=>typeof n=="string",Vs=n=>typeof n=="symbol",Gn=n=>n!==null&&typeof n=="object",Xw=n=>(Gn(n)||Bt(n))&&Bt(n.then)&&Bt(n.catch),sA=Object.prototype.toString,Yf=n=>sA.call(n),N2=n=>Yf(n).slice(8,-1),my=n=>Yf(n)==="[object Object]",Jw=n=>qt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Rc=Oi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),L2=Oi("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),Qw=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},IK=/-(\w)/g,cr=Qw(n=>n.replace(IK,(e,t)=>t?t.toUpperCase():"")),CK=/\B([A-Z])/g,cs=Qw(n=>n.replace(CK,"-$1").toLowerCase()),_h=Qw(n=>n.charAt(0).toUpperCase()+n.slice(1)),Ef=Qw(n=>n?`on${_h(n)}`:""),ss=(n,e)=>!Object.is(n,e),Tf=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},oA=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},_g=n=>{const e=parseFloat(n);return isNaN(e)?n:e},xg=n=>{const e=qt(n)?Number(n):NaN;return isNaN(e)?n:e};let nR;const gy=()=>nR||(nR=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),OK=/^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;function kK(n){return OK.test(n)?`__props.${n}`:`__props[${JSON.stringify(n)}]`}function RK(n,e){return n+JSON.stringify(e,(t,r)=>typeof r=="function"?r.toString():r)}const PK={TEXT:1,1:"TEXT",CLASS:2,2:"CLASS",STYLE:4,4:"STYLE",PROPS:8,8:"PROPS",FULL_PROPS:16,16:"FULL_PROPS",NEED_HYDRATION:32,32:"NEED_HYDRATION",STABLE_FRAGMENT:64,64:"STABLE_FRAGMENT",KEYED_FRAGMENT:128,128:"KEYED_FRAGMENT",UNKEYED_FRAGMENT:256,256:"UNKEYED_FRAGMENT",NEED_PATCH:512,512:"NEED_PATCH",DYNAMIC_SLOTS:1024,1024:"DYNAMIC_SLOTS",DEV_ROOT_FRAGMENT:2048,2048:"DEV_ROOT_FRAGMENT",CACHED:-1,"-1":"CACHED",BAIL:-2,"-2":"BAIL"},DK={1:"TEXT",2:"CLASS",4:"STYLE",8:"PROPS",16:"FULL_PROPS",32:"NEED_HYDRATION",64:"STABLE_FRAGMENT",128:"KEYED_FRAGMENT",256:"UNKEYED_FRAGMENT",512:"NEED_PATCH",1024:"DYNAMIC_SLOTS",2048:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},MK={ELEMENT:1,1:"ELEMENT",FUNCTIONAL_COMPONENT:2,2:"FUNCTIONAL_COMPONENT",STATEFUL_COMPONENT:4,4:"STATEFUL_COMPONENT",TEXT_CHILDREN:8,8:"TEXT_CHILDREN",ARRAY_CHILDREN:16,16:"ARRAY_CHILDREN",SLOTS_CHILDREN:32,32:"SLOTS_CHILDREN",TELEPORT:64,64:"TELEPORT",SUSPENSE:128,128:"SUSPENSE",COMPONENT_SHOULD_KEEP_ALIVE:256,256:"COMPONENT_SHOULD_KEEP_ALIVE",COMPONENT_KEPT_ALIVE:512,512:"COMPONENT_KEPT_ALIVE",COMPONENT:6,6:"COMPONENT"},NK={STABLE:1,1:"STABLE",DYNAMIC:2,2:"DYNAMIC",FORWARDED:3,3:"FORWARDED"},LK={1:"STABLE",2:"DYNAMIC",3:"FORWARDED"},VK="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",aA=Oi(VK),FK=aA,rR=2;function V2(n,e=0,t=n.length){if(e=Math.max(0,Math.min(e,n.length)),t=Math.max(0,Math.min(t,n.length)),e>t)return"";let r=n.split(/(\r?\n)/);const i=r.filter((a,l)=>l%2===1);r=r.filter((a,l)=>l%2===0);let s=0;const o=[];for(let a=0;a<r.length;a++)if(s+=r[a].length+(i[a]&&i[a].length||0),s>=e){for(let l=a-rR;l<=a+rR||t>s;l++){if(l<0||l>=r.length)continue;const c=l+1;o.push(`${c}${" ".repeat(Math.max(3-String(c).length,0))}|  ${r[l]}`);const h=r[l].length,d=i[l]&&i[l].length||0;if(l===a){const p=e-(s-(h+d)),y=Math.max(1,t>s?h-p:t-e);o.push("   |  "+" ".repeat(p)+"^".repeat(y))}else if(l>a){if(t>s){const p=Math.max(Math.min(t-s,h),1);o.push("   |  "+"^".repeat(p))}s+=h+d}}break}return o.join(`
`)}function Xf(n){if(wt(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=qt(r)?lA(r):Xf(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(qt(n)||Gn(n))return n}const BK=/;(?![^(]*\))/g,UK=/:([^]+)/,$K=/\/\*[^]*?\*\//g;function lA(n){const e={};return n.replace($K,"").split(BK).forEach(t=>{if(t){const r=t.split(UK);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function HK(n){if(!n)return"";if(qt(n))return n;let e="";for(const t in n){const r=n[t];if(qt(r)||typeof r=="number"){const i=t.startsWith("--")?t:cs(t);e+=`${i}:${r};`}}return e}function pi(n){let e="";if(qt(n))e=n;else if(wt(n))for(let t=0;t<n.length;t++){const r=pi(n[t]);r&&(e+=r+" ")}else if(Gn(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function cA(n){if(!n)return null;let{class:e,style:t}=n;return e&&!qt(e)&&(n.class=pi(e)),t&&(n.style=Xf(t)),n}const WK="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",zK="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",jK="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",KK="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",F2=Oi(WK),B2=Oi(zK),U2=Oi(jK),$2=Oi(KK),H2="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",W2=Oi(H2),GK=Oi(H2+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function uA(n){return!!n||n===""}const qK=/[>/="'\u0009\u000a\u000c\u0020]/,vT={};function YK(n){if(vT.hasOwnProperty(n))return vT[n];const e=qK.test(n);return e&&console.error(`unsafe attribute name: ${n}`),vT[n]=!e}const XK={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},JK=Oi("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap"),QK=Oi("xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan"),ZK=Oi("accent,accentunder,actiontype,align,alignmentscope,altimg,altimg-height,altimg-valign,altimg-width,alttext,bevelled,close,columnsalign,columnlines,columnspan,denomalign,depth,dir,display,displaystyle,encoding,equalcolumns,equalrows,fence,fontstyle,fontweight,form,frame,framespacing,groupalign,height,href,id,indentalign,indentalignfirst,indentalignlast,indentshift,indentshiftfirst,indentshiftlast,indextype,justify,largetop,largeop,lquote,lspace,mathbackground,mathcolor,mathsize,mathvariant,maxsize,minlabelspacing,mode,other,overflow,position,rowalign,rowlines,rowspan,rquote,rspace,scriptlevel,scriptminsize,scriptsizemultiplier,selection,separator,separators,shift,side,src,stackalign,stretchy,subscriptshift,superscriptshift,symmetric,voffset,width,widths,xlink:href,xlink:show,xlink:type,xmlns");function e7(n){if(n==null)return!1;const e=typeof n;return e==="string"||e==="number"||e==="boolean"}const t7=/["'&<>]/;function n7(n){const e=""+n,t=t7.exec(e);if(!t)return e;let r="",i,s,o=0;for(s=t.index;s<e.length;s++){switch(e.charCodeAt(s)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#39;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}o!==s&&(r+=e.slice(o,s)),o=s+1,r+=i}return o!==s?r+e.slice(o,s):r}const r7=/^-?>|<!--|-->|--!>|<!-$/g;function i7(n){return n.replace(r7,"")}const z2=/[ !"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g;function s7(n,e){return n.replace(z2,t=>e?t==='"'?'\\\\\\"':`\\\\${t}`:`\\${t}`)}function o7(n,e){if(n.length!==e.length)return!1;let t=!0;for(let r=0;t&&r<n.length;r++)t=Bc(n[r],e[r]);return t}function Bc(n,e){if(n===e)return!0;let t=q1(n),r=q1(e);if(t||r)return t&&r?n.getTime()===e.getTime():!1;if(t=Vs(n),r=Vs(e),t||r)return n===e;if(t=wt(n),r=wt(e),t||r)return t&&r?o7(n,e):!1;if(t=Gn(n),r=Gn(e),t||r){if(!t||!r)return!1;const i=Object.keys(n).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Bc(n[o],e[o]))return!1}}return String(n)===String(e)}function yy(n,e){return n.findIndex(t=>Bc(t,e))}const j2=n=>!!(n&&n.__v_isRef===!0),or=n=>qt(n)?n:n==null?"":wt(n)||Gn(n)&&(n.toString===sA||!Bt(n.toString))?j2(n)?or(n.value):JSON.stringify(n,K2,2):String(n),K2=(n,e)=>j2(e)?K2(n,e.value):Sf(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],s)=>(t[bT(r,s)+" =>"]=i,t),{})}:Th(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>bT(t))}:Vs(e)?bT(e):Gn(e)&&!wt(e)&&!my(e)?String(e):e,bT=(n,e="")=>{var t;return Vs(n)?`Symbol(${(t=n.description)!=null?t:e})`:n},a7=Object.freeze(Object.defineProperty({__proto__:null,EMPTY_ARR:wf,EMPTY_OBJ:wn,NO:Fd,NOOP:Ci,PatchFlagNames:DK,PatchFlags:PK,ShapeFlags:MK,SlotFlags:NK,camelize:cr,capitalize:_h,cssVarNameEscapeSymbolsRE:z2,def:oA,escapeHtml:n7,escapeHtmlComment:i7,extend:Sn,genCacheKey:RK,genPropsAccessExp:kK,generateCodeFrame:V2,getEscapedCssVarName:s7,getGlobalThis:gy,hasChanged:ss,hasOwn:Wn,hyphenate:cs,includeBooleanAttr:uA,invokeArrayFns:Tf,isArray:wt,isBooleanAttr:GK,isBuiltInDirective:L2,isDate:q1,isFunction:Bt,isGloballyAllowed:aA,isGloballyWhitelisted:FK,isHTMLTag:F2,isIntegerKey:Jw,isKnownHtmlAttr:JK,isKnownMathMLAttr:ZK,isKnownSvgAttr:QK,isMap:Sf,isMathMLTag:U2,isModelListener:qw,isObject:Gn,isOn:Eh,isPlainObject:my,isPromise:Xw,isRegExp:M2,isRenderableAttrValue:e7,isReservedProp:Rc,isSSRSafeAttrName:YK,isSVGTag:B2,isSet:Th,isSpecialBooleanAttr:W2,isString:qt,isSymbol:Vs,isVoidTag:$2,looseEqual:Bc,looseIndexOf:yy,looseToNumber:_g,makeMap:Oi,normalizeClass:pi,normalizeProps:cA,normalizeStyle:Xf,objectToString:sA,parseStringStyle:lA,propsToAttrMap:XK,remove:Yw,slotFlagsText:LK,stringifyStyle:HK,toDisplayString:or,toHandlerKey:Ef,toNumber:xg,toRawType:N2,toTypeString:Yf},Symbol.toStringTag,{value:"Module"}));/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Cs;class hA{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Cs,!e&&Cs&&(this.index=(Cs.scopes||(Cs.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Cs;try{return Cs=this,e()}finally{Cs=t}}}on(){Cs=this}off(){Cs=this.parent}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function fA(n){return new hA(n)}function Zw(){return Cs}function dA(n,e=!1){Cs&&Cs.cleanups.push(n)}let ir;const wT=new WeakSet;class Ag{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Cs&&Cs.active&&Cs.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wT.has(this)&&(wT.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||q2(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,iR(this),Y2(this);const e=ir,t=Ya;ir=this,Ya=!0;try{return this.fn()}finally{X2(this),ir=e,Ya=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)gA(e);this.deps=this.depsTail=void 0,iR(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wT.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Y1(this)&&this.run()}get dirty(){return Y1(this)}}let G2=0,eg,tg;function q2(n,e=!1){if(n.flags|=8,e){n.next=tg,tg=n;return}n.next=eg,eg=n}function pA(){G2++}function mA(){if(--G2>0)return;if(tg){let e=tg;for(tg=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;eg;){let e=eg;for(eg=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function Y2(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function X2(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),gA(r),l7(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function Y1(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(J2(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function J2(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Ig))return;n.globalVersion=Ig;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!Y1(n)){n.flags&=-3;return}const t=ir,r=Ya;ir=n,Ya=!0;try{Y2(n);const i=n.fn(n._value);(e.version===0||ss(i,n._value))&&(n._value=i,e.version++)}catch(i){throw e.version++,i}finally{ir=t,Ya=r,X2(n),n.flags&=-3}}function gA(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)gA(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function l7(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}function c7(n,e){n.effect instanceof Ag&&(n=n.effect.fn);const t=new Ag(n);e&&Sn(t,e);try{t.run()}catch(i){throw t.stop(),i}const r=t.run.bind(t);return r.effect=t,r}function u7(n){n.effect.stop()}let Ya=!0;const Q2=[];function xh(){Q2.push(Ya),Ya=!1}function Ah(){const n=Q2.pop();Ya=n===void 0?!0:n}function iR(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=ir;ir=void 0;try{e()}finally{ir=t}}}let Ig=0;class h7{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class eS{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ir||!Ya||ir===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==ir)t=this.activeLink=new h7(ir,this),ir.deps?(t.prevDep=ir.depsTail,ir.depsTail.nextDep=t,ir.depsTail=t):ir.deps=ir.depsTail=t,Z2(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=ir.depsTail,t.nextDep=void 0,ir.depsTail.nextDep=t,ir.depsTail=t,ir.deps===t&&(ir.deps=r)}return t}trigger(e){this.version++,Ig++,this.notify(e)}notify(e){pA();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{mA()}}}function Z2(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Z2(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const xb=new WeakMap,_f=Symbol(""),X1=Symbol(""),Cg=Symbol("");function os(n,e,t){if(Ya&&ir){let r=xb.get(n);r||xb.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new eS),i.map=r,i.key=t),i.track()}}function Sc(n,e,t,r,i,s){const o=xb.get(n);if(!o){Ig++;return}const a=l=>{l&&l.trigger()};if(pA(),e==="clear")o.forEach(a);else{const l=wt(n),c=l&&Jw(t);if(l&&t==="length"){const h=Number(r);o.forEach((d,p)=>{(p==="length"||p===Cg||!Vs(p)&&p>=h)&&a(d)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),c&&a(o.get(Cg)),e){case"add":l?c&&a(o.get("length")):(a(o.get(_f)),Sf(n)&&a(o.get(X1)));break;case"delete":l||(a(o.get(_f)),Sf(n)&&a(o.get(X1)));break;case"set":Sf(n)&&a(o.get(_f));break}}mA()}function f7(n,e){const t=xb.get(n);return t&&t.get(e)}function yd(n){const e=_n(n);return e===n?e:(os(e,"iterate",Cg),Vo(n)?e:e.map(as))}function tS(n){return os(n=_n(n),"iterate",Cg),n}const d7={__proto__:null,[Symbol.iterator](){return ST(this,Symbol.iterator,as)},concat(...n){return yd(this).concat(...n.map(e=>wt(e)?yd(e):e))},entries(){return ST(this,"entries",n=>(n[1]=as(n[1]),n))},every(n,e){return gc(this,"every",n,e,void 0,arguments)},filter(n,e){return gc(this,"filter",n,e,t=>t.map(as),arguments)},find(n,e){return gc(this,"find",n,e,as,arguments)},findIndex(n,e){return gc(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return gc(this,"findLast",n,e,as,arguments)},findLastIndex(n,e){return gc(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return gc(this,"forEach",n,e,void 0,arguments)},includes(...n){return ET(this,"includes",n)},indexOf(...n){return ET(this,"indexOf",n)},join(n){return yd(this).join(n)},lastIndexOf(...n){return ET(this,"lastIndexOf",n)},map(n,e){return gc(this,"map",n,e,void 0,arguments)},pop(){return wm(this,"pop")},push(...n){return wm(this,"push",n)},reduce(n,...e){return sR(this,"reduce",n,e)},reduceRight(n,...e){return sR(this,"reduceRight",n,e)},shift(){return wm(this,"shift")},some(n,e){return gc(this,"some",n,e,void 0,arguments)},splice(...n){return wm(this,"splice",n)},toReversed(){return yd(this).toReversed()},toSorted(n){return yd(this).toSorted(n)},toSpliced(...n){return yd(this).toSpliced(...n)},unshift(...n){return wm(this,"unshift",n)},values(){return ST(this,"values",as)}};function ST(n,e,t){const r=tS(n),i=r[e]();return r!==n&&!Vo(n)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=t(s.value)),s}),i}const p7=Array.prototype;function gc(n,e,t,r,i,s){const o=tS(n),a=o!==n&&!Vo(n),l=o[e];if(l!==p7[e]){const d=l.apply(n,s);return a?as(d):d}let c=t;o!==n&&(a?c=function(d,p){return t.call(this,as(d),p,n)}:t.length>2&&(c=function(d,p){return t.call(this,d,p,n)}));const h=l.call(o,c,r);return a&&i?i(h):h}function sR(n,e,t,r){const i=tS(n);let s=t;return i!==n&&(Vo(n)?t.length>3&&(s=function(o,a,l){return t.call(this,o,a,l,n)}):s=function(o,a,l){return t.call(this,o,as(a),l,n)}),i[e](s,...r)}function ET(n,e,t){const r=_n(n);os(r,"iterate",Cg);const i=r[e](...t);return(i===-1||i===!1)&&iS(t[0])?(t[0]=_n(t[0]),r[e](...t)):i}function wm(n,e,t=[]){xh(),pA();const r=_n(n)[e].apply(n,t);return mA(),Ah(),r}const m7=Oi("__proto__,__v_isRef,__isVue"),eL=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Vs));function g7(n){Vs(n)||(n=String(n));const e=_n(this);return os(e,"has",n),e.hasOwnProperty(n)}class tL{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?aL:oL:s?sL:iL).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=wt(e);if(!i){let l;if(o&&(l=d7[t]))return l;if(t==="hasOwnProperty")return g7}const a=Reflect.get(e,t,gr(e)?e:r);return(Vs(t)?eL.has(t):m7(t))||(i||os(e,"get",t),s)?a:gr(a)?o&&Jw(t)?a:a.value:Gn(a)?i?ro(a):Mp(a):a}}class nL extends tL{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];if(!this._isShallow){const l=oh(s);if(!Vo(r)&&!oh(r)&&(s=_n(s),r=_n(r)),!wt(e)&&gr(s)&&!gr(r))return l?!1:(s.value=r,!0)}const o=wt(e)&&Jw(t)?Number(t)<e.length:Wn(e,t),a=Reflect.set(e,t,r,gr(e)?e:i);return e===_n(i)&&(o?ss(r,s)&&Sc(e,"set",t,r):Sc(e,"add",t,r)),a}deleteProperty(e,t){const r=Wn(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&Sc(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!Vs(t)||!eL.has(t))&&os(e,"has",t),r}ownKeys(e){return os(e,"iterate",wt(e)?"length":_f),Reflect.ownKeys(e)}}class rL extends tL{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const y7=new nL,v7=new rL,b7=new nL(!0),w7=new rL(!0),J1=n=>n,Cv=n=>Reflect.getPrototypeOf(n);function S7(n,e,t){return function(...r){const i=this.__v_raw,s=_n(i),o=Sf(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=i[n](...r),h=t?J1:e?Q1:as;return!e&&os(s,"iterate",l?X1:_f),{next(){const{value:d,done:p}=c.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function Ov(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function E7(n,e){const t={get(i){const s=this.__v_raw,o=_n(s),a=_n(i);n||(ss(i,a)&&os(o,"get",i),os(o,"get",a));const{has:l}=Cv(o),c=e?J1:n?Q1:as;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!n&&os(_n(i),"iterate",_f),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=_n(s),a=_n(i);return n||(ss(i,a)&&os(o,"has",i),os(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=_n(a),c=e?J1:n?Q1:as;return!n&&os(l,"iterate",_f),a.forEach((h,d)=>i.call(s,c(h),c(d),o))}};return Sn(t,n?{add:Ov("add"),set:Ov("set"),delete:Ov("delete"),clear:Ov("clear")}:{add(i){!e&&!Vo(i)&&!oh(i)&&(i=_n(i));const s=_n(this);return Cv(s).has.call(s,i)||(s.add(i),Sc(s,"add",i,i)),this},set(i,s){!e&&!Vo(s)&&!oh(s)&&(s=_n(s));const o=_n(this),{has:a,get:l}=Cv(o);let c=a.call(o,i);c||(i=_n(i),c=a.call(o,i));const h=l.call(o,i);return o.set(i,s),c?ss(s,h)&&Sc(o,"set",i,s):Sc(o,"add",i,s),this},delete(i){const s=_n(this),{has:o,get:a}=Cv(s);let l=o.call(s,i);l||(i=_n(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&Sc(s,"delete",i,void 0),c},clear(){const i=_n(this),s=i.size!==0,o=i.clear();return s&&Sc(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=S7(i,n,e)}),t}function nS(n,e){const t=E7(n,e);return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(Wn(t,i)&&i in r?t:r,i,s)}const T7={get:nS(!1,!1)},_7={get:nS(!1,!0)},x7={get:nS(!0,!1)},A7={get:nS(!0,!0)},iL=new WeakMap,sL=new WeakMap,oL=new WeakMap,aL=new WeakMap;function I7(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function C7(n){return n.__v_skip||!Object.isExtensible(n)?0:I7(N2(n))}function Mp(n){return oh(n)?n:rS(n,!1,y7,T7,iL)}function lL(n){return rS(n,!1,b7,_7,sL)}function ro(n){return rS(n,!0,v7,x7,oL)}function O7(n){return rS(n,!0,w7,A7,aL)}function rS(n,e,t,r,i){if(!Gn(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=i.get(n);if(s)return s;const o=C7(n);if(o===0)return n;const a=new Proxy(n,o===2?r:t);return i.set(n,a),a}function Xa(n){return oh(n)?Xa(n.__v_raw):!!(n&&n.__v_isReactive)}function oh(n){return!!(n&&n.__v_isReadonly)}function Vo(n){return!!(n&&n.__v_isShallow)}function iS(n){return n?!!n.__v_raw:!1}function _n(n){const e=n&&n.__v_raw;return e?_n(e):n}function sS(n){return!Wn(n,"__v_skip")&&Object.isExtensible(n)&&oA(n,"__v_skip",!0),n}const as=n=>Gn(n)?Mp(n):n,Q1=n=>Gn(n)?ro(n):n;function gr(n){return n?n.__v_isRef===!0:!1}function Nt(n){return cL(n,!1)}function ah(n){return cL(n,!0)}function cL(n,e){return gr(n)?n:new k7(n,e)}class k7{constructor(e,t){this.dep=new eS,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:_n(e),this._value=t?e:as(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||Vo(e)||oh(e);e=r?e:_n(e),ss(e,t)&&(this._rawValue=e,this._value=r?e:as(e),this.dep.trigger())}}function R7(n){n.dep&&n.dep.trigger()}function sa(n){return gr(n)?n.value:n}function Ja(n){return Bt(n)?n():sa(n)}const P7={get:(n,e,t)=>e==="__v_raw"?n:sa(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return gr(i)&&!gr(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function yA(n){return Xa(n)?n:new Proxy(n,P7)}class D7{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new eS,{get:r,set:i}=e(t.track.bind(t),t.trigger.bind(t));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function vA(n){return new D7(n)}function uL(n){const e=wt(n)?new Array(n.length):{};for(const t in n)e[t]=hL(n,t);return e}class M7{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return f7(_n(this._object),this._key)}}class N7{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function bA(n,e,t){return gr(n)?n:Bt(n)?new N7(n):Gn(n)&&arguments.length>1?hL(n,e,t):Nt(n)}function hL(n,e,t){const r=n[e];return gr(r)?r:new M7(n,e,t)}class L7{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new eS(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ig-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ir!==this)return q2(this,!0),!0}get value(){const e=this.dep.track();return J2(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function V7(n,e,t=!1){let r,i;return Bt(n)?r=n:(r=n.get,i=n.set),new L7(r,i,t)}const F7={GET:"get",HAS:"has",ITERATE:"iterate"},B7={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},kv={},Ab=new WeakMap;let Cu;function U7(){return Cu}function fL(n,e=!1,t=Cu){if(t){let r=Ab.get(t);r||Ab.set(t,r=[]),r.push(n)}}function $7(n,e,t=wn){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=t,c=F=>i?F:Vo(F)||i===!1||i===0?Ec(F,1):Ec(F);let h,d,p,y,w=!1,S=!1;if(gr(n)?(d=()=>n.value,w=Vo(n)):Xa(n)?(d=()=>c(n),w=!0):wt(n)?(S=!0,w=n.some(F=>Xa(F)||Vo(F)),d=()=>n.map(F=>{if(gr(F))return F.value;if(Xa(F))return c(F);if(Bt(F))return l?l(F,2):F()})):Bt(n)?e?d=l?()=>l(n,2):n:d=()=>{if(p){xh();try{p()}finally{Ah()}}const F=Cu;Cu=h;try{return l?l(n,3,[y]):n(y)}finally{Cu=F}}:d=Ci,e&&i){const F=d,U=i===!0?1/0:i;d=()=>Ec(F(),U)}const E=Zw(),C=()=>{h.stop(),E&&E.active&&Yw(E.effects,h)};if(s&&e){const F=e;e=(...U)=>{F(...U),C()}}let L=S?new Array(n.length).fill(kv):kv;const P=F=>{if(!(!(h.flags&1)||!h.dirty&&!F))if(e){const U=h.run();if(i||w||(S?U.some((j,N)=>ss(j,L[N])):ss(U,L))){p&&p();const j=Cu;Cu=h;try{const N=[U,L===kv?void 0:S&&L[0]===kv?[]:L,y];l?l(e,3,N):e(...N),L=U}finally{Cu=j}}}else h.run()};return a&&a(P),h=new Ag(d),h.scheduler=o?()=>o(P,!1):P,y=F=>fL(F,!1,h),p=h.onStop=()=>{const F=Ab.get(h);if(F){if(l)l(F,4);else for(const U of F)U();Ab.delete(h)}},e?r?P(!0):L=h.run():o?o(P.bind(null,!0),!0):h.run(),C.pause=h.pause.bind(h),C.resume=h.resume.bind(h),C.stop=C,C}function Ec(n,e=1/0,t){if(e<=0||!Gn(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,gr(n))Ec(n.value,e,t);else if(wt(n))for(let r=0;r<n.length;r++)Ec(n[r],e,t);else if(Th(n)||Sf(n))n.forEach(r=>{Ec(r,e,t)});else if(my(n)){for(const r in n)Ec(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&Ec(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const dL=[];function H7(n){dL.push(n)}function W7(){dL.pop()}function z7(n,e){}const j7={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},K7={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Np(n,e,t,r){try{return r?n(...r):n()}catch(i){Jf(i,e,t)}}function ga(n,e,t,r){if(Bt(n)){const i=Np(n,e,t,r);return i&&Xw(i)&&i.catch(s=>{Jf(s,e,t)}),i}if(wt(n)){const i=[];for(let s=0;s<n.length;s++)i.push(ga(n[s],e,t,r));return i}}function Jf(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||wn;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](n,l,c)===!1)return}a=a.parent}if(s){xh(),Np(s,null,10,[n,l,c]),Ah();return}}G7(n,t,i,r,o)}function G7(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const Os=[];let Cl=-1;const jd=[];let Ou=null,Cd=0;const pL=Promise.resolve();let Ib=null;function Qa(n){const e=Ib||pL;return n?e.then(this?n.bind(this):n):e}function q7(n){let e=Cl+1,t=Os.length;for(;e<t;){const r=e+t>>>1,i=Os[r],s=kg(i);s<n||s===n&&i.flags&2?e=r+1:t=r}return e}function wA(n){if(!(n.flags&1)){const e=kg(n),t=Os[Os.length-1];!t||!(n.flags&2)&&e>=kg(t)?Os.push(n):Os.splice(q7(e),0,n),n.flags|=1,mL()}}function mL(){Ib||(Ib=pL.then(gL))}function Og(n){wt(n)?jd.push(...n):Ou&&n.id===-1?Ou.splice(Cd+1,0,n):n.flags&1||(jd.push(n),n.flags|=1),mL()}function oR(n,e,t=Cl+1){for(;t<Os.length;t++){const r=Os[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Os.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Cb(n){if(jd.length){const e=[...new Set(jd)].sort((t,r)=>kg(t)-kg(r));if(jd.length=0,Ou){Ou.push(...e);return}for(Ou=e,Cd=0;Cd<Ou.length;Cd++){const t=Ou[Cd];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Ou=null,Cd=0}}const kg=n=>n.id==null?n.flags&2?-1:1/0:n.id;function gL(n){try{for(Cl=0;Cl<Os.length;Cl++){const e=Os[Cl];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Np(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Cl<Os.length;Cl++){const e=Os[Cl];e&&(e.flags&=-2)}Cl=-1,Os.length=0,Cb(),Ib=null,(Os.length||jd.length)&&gL()}}let Od,Rv=[];function yL(n,e){var t,r;Od=n,Od?(Od.enabled=!0,Rv.forEach(({event:i,args:s})=>Od.emit(i,...s)),Rv=[]):typeof window<"u"&&window.HTMLElement&&!((r=(t=window.navigator)==null?void 0:t.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{yL(s,e)}),setTimeout(()=>{Od||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Rv=[])},3e3)):Rv=[]}let yi=null,oS=null;function Rg(n){const e=yi;return yi=n,oS=n&&n.type.__scopeId||null,e}function Y7(n){oS=n}function X7(){oS=null}const J7=n=>Tc;function Tc(n,e=yi,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&o_(-1);const s=Rg(e);let o;try{o=n(...i)}finally{Rg(s),r._d&&o_(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Pc(n,e){if(yi===null)return n;const t=Sy(yi),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=wn]=e[i];s&&(Bt(s)&&(s={mounted:s,updated:s}),s.deep&&Ec(o),r.push({dir:s,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function Ol(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(xh(),ga(l,t,8,[n.el,a,n,e]),Ah())}}const vL=Symbol("_vte"),bL=n=>n.__isTeleport,ng=n=>n&&(n.disabled||n.disabled===""),aR=n=>n&&(n.defer||n.defer===""),lR=n=>typeof SVGElement<"u"&&n instanceof SVGElement,cR=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,Z1=(n,e)=>{const t=n&&n.to;return qt(t)?e?e(t):null:t},wL={name:"Teleport",__isTeleport:!0,process(n,e,t,r,i,s,o,a,l,c){const{mc:h,pc:d,pbc:p,o:{insert:y,querySelector:w,createText:S,createComment:E}}=c,C=ng(e.props);let{shapeFlag:L,children:P,dynamicChildren:F}=e;if(n==null){const U=e.el=S(""),j=e.anchor=S("");y(U,t,r),y(j,t,r);const N=(A,R)=>{L&16&&(i&&i.isCE&&(i.ce._teleportTarget=A),h(P,A,R,i,s,o,a,l))},O=()=>{const A=e.target=Z1(e.props,w),R=SL(A,e,S,y);A&&(o!=="svg"&&lR(A)?o="svg":o!=="mathml"&&cR(A)&&(o="mathml"),C||(N(A,R),P0(e,!1)))};C&&(N(t,j),P0(e,!0)),aR(e.props)?fi(()=>{O(),e.el.__isMounted=!0},s):O()}else{if(aR(e.props)&&!n.el.__isMounted){fi(()=>{wL.process(n,e,t,r,i,s,o,a,l,c),delete n.el.__isMounted},s);return}e.el=n.el,e.targetStart=n.targetStart;const U=e.anchor=n.anchor,j=e.target=n.target,N=e.targetAnchor=n.targetAnchor,O=ng(n.props),A=O?t:j,R=O?U:N;if(o==="svg"||lR(j)?o="svg":(o==="mathml"||cR(j))&&(o="mathml"),F?(p(n.dynamicChildren,F,A,i,s,o,a),RA(n,e,!0)):l||d(n,e,A,R,i,s,o,a,!1),C)O?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):Pv(e,t,U,c,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const k=e.target=Z1(e.props,w);k&&Pv(e,k,null,c,0)}else O&&Pv(e,j,N,c,1);P0(e,C)}},remove(n,e,t,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:h,target:d,props:p}=n;if(d&&(i(c),i(h)),s&&i(l),o&16){const y=s||!ng(p);for(let w=0;w<a.length;w++){const S=a[w];r(S,e,t,y,!!S.dynamicChildren)}}},move:Pv,hydrate:Q7};function Pv(n,e,t,{o:{insert:r},m:i},s=2){s===0&&r(n.targetAnchor,e,t);const{el:o,anchor:a,shapeFlag:l,children:c,props:h}=n,d=s===2;if(d&&r(o,e,t),(!d||ng(h))&&l&16)for(let p=0;p<c.length;p++)i(c[p],e,t,2);d&&r(a,e,t)}function Q7(n,e,t,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:h}},d){const p=e.target=Z1(e.props,l);if(p){const y=ng(e.props),w=p._lpa||p.firstChild;if(e.shapeFlag&16)if(y)e.anchor=d(o(n),e,a(n),t,r,i,s),e.targetStart=w,e.targetAnchor=w&&o(w);else{e.anchor=o(n);let S=w;for(;S;){if(S&&S.nodeType===8){if(S.data==="teleport start anchor")e.targetStart=S;else if(S.data==="teleport anchor"){e.targetAnchor=S,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}S=o(S)}e.targetAnchor||SL(p,e,h,c),d(w&&o(w),e,p,t,r,i,s)}P0(e,y)}return e.anchor&&o(e.anchor)}const Z7=wL;function P0(n,e){const t=n.ctx;if(t&&t.ut){let r,i;for(e?(r=n.el,i=n.anchor):(r=n.targetStart,i=n.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function SL(n,e,t,r){const i=e.targetStart=t(""),s=e.targetAnchor=t("");return i[vL]=s,n&&(r(i,n),r(s,n)),s}const ku=Symbol("_leaveCb"),Dv=Symbol("_enterCb");function SA(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Fs(()=>{n.isMounted=!0}),Qf(()=>{n.isUnmounting=!0}),n}const ta=[Function,Array],EA={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ta,onEnter:ta,onAfterEnter:ta,onEnterCancelled:ta,onBeforeLeave:ta,onLeave:ta,onAfterLeave:ta,onLeaveCancelled:ta,onBeforeAppear:ta,onAppear:ta,onAfterAppear:ta,onAppearCancelled:ta},EL=n=>{const e=n.subTree;return e.component?EL(e.component):e},eG={name:"BaseTransition",props:EA,setup(n,{slots:e}){const t=vs(),r=SA();return()=>{const i=e.default&&aS(e.default(),!0);if(!i||!i.length)return;const s=TL(i),o=_n(n),{mode:a}=o;if(r.isLeaving)return TT(s);const l=uR(s);if(!l)return TT(s);let c=op(l,o,r,t,d=>c=d);l.type!==oi&&Uc(l,c);let h=t.subTree&&uR(t.subTree);if(h&&h.type!==oi&&!Ka(l,h)&&EL(t).type!==oi){let d=op(h,o,r,t);if(Uc(h,d),a==="out-in"&&l.type!==oi)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete d.afterLeave,h=void 0},TT(s);a==="in-out"&&l.type!==oi?d.delayLeave=(p,y,w)=>{const S=xL(r,h);S[String(h.key)]=h,p[ku]=()=>{y(),p[ku]=void 0,delete c.delayedLeave,h=void 0},c.delayedLeave=()=>{w(),delete c.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return s}}};function TL(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==oi){e=t;break}}return e}const _L=eG;function xL(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function op(n,e,t,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:y,onAfterLeave:w,onLeaveCancelled:S,onBeforeAppear:E,onAppear:C,onAfterAppear:L,onAppearCancelled:P}=e,F=String(n.key),U=xL(t,n),j=(A,R)=>{A&&ga(A,r,9,R)},N=(A,R)=>{const k=R[1];j(A,R),wt(A)?A.every(V=>V.length<=1)&&k():A.length<=1&&k()},O={mode:o,persisted:a,beforeEnter(A){let R=l;if(!t.isMounted)if(s)R=E||l;else return;A[ku]&&A[ku](!0);const k=U[F];k&&Ka(n,k)&&k.el[ku]&&k.el[ku](),j(R,[A])},enter(A){let R=c,k=h,V=d;if(!t.isMounted)if(s)R=C||c,k=L||h,V=P||d;else return;let D=!1;const Z=A[Dv]=le=>{D||(D=!0,le?j(V,[A]):j(k,[A]),O.delayedLeave&&O.delayedLeave(),A[Dv]=void 0)};R?N(R,[A,Z]):Z()},leave(A,R){const k=String(n.key);if(A[Dv]&&A[Dv](!0),t.isUnmounting)return R();j(p,[A]);let V=!1;const D=A[ku]=Z=>{V||(V=!0,R(),Z?j(S,[A]):j(w,[A]),A[ku]=void 0,U[k]===n&&delete U[k])};U[k]=n,y?N(y,[A,D]):D()},clone(A){const R=op(A,e,t,r,i);return i&&i(R),R}};return O}function TT(n){if(vy(n))return n=Wl(n),n.children=null,n}function uR(n){if(!vy(n))return bL(n.type)&&n.children?TL(n.children):n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Bt(t.default))return t.default()}}function Uc(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Uc(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function aS(n,e=!1,t){let r=[],i=0;for(let s=0;s<n.length;s++){let o=n[s];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===lr?(o.patchFlag&128&&i++,r=r.concat(aS(o.children,e,a))):(e||o.type!==oi)&&r.push(a!=null?Wl(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function TA(n,e){return Bt(n)?Sn({name:n.name},e,{setup:n}):n}function tG(){const n=vs();return n?(n.appContext.config.idPrefix||"v")+"-"+n.ids[0]+n.ids[1]++:""}function _A(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function nG(n){const e=vs(),t=ah(null);if(e){const i=e.refs===wn?e.refs={}:e.refs;Object.defineProperty(i,n,{enumerable:!0,get:()=>t.value,set:s=>t.value=s})}return t}function Pg(n,e,t,r,i=!1){if(wt(n)){n.forEach((w,S)=>Pg(w,e&&(wt(e)?e[S]:e),t,r,i));return}if(Xu(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Pg(n,e,t,r.component.subTree);return}const s=r.shapeFlag&4?Sy(r.component):r.el,o=i?null:s,{i:a,r:l}=n,c=e&&e.r,h=a.refs===wn?a.refs={}:a.refs,d=a.setupState,p=_n(d),y=d===wn?()=>!1:w=>Wn(p,w);if(c!=null&&c!==l&&(qt(c)?(h[c]=null,y(c)&&(d[c]=null)):gr(c)&&(c.value=null)),Bt(l))Np(l,a,12,[o,h]);else{const w=qt(l),S=gr(l);if(w||S){const E=()=>{if(n.f){const C=w?y(l)?d[l]:h[l]:l.value;i?wt(C)&&Yw(C,s):wt(C)?C.includes(s)||C.push(s):w?(h[l]=[s],y(l)&&(d[l]=h[l])):(l.value=[s],n.k&&(h[n.k]=l.value))}else w?(h[l]=o,y(l)&&(d[l]=o)):S&&(l.value=o,n.k&&(h[n.k]=o))};o?(E.id=-1,fi(E,t)):E()}}}let hR=!1;const vd=()=>{hR||(console.error("Hydration completed but contains mismatches."),hR=!0)},rG=n=>n.namespaceURI.includes("svg")&&n.tagName!=="foreignObject",iG=n=>n.namespaceURI.includes("MathML"),Mv=n=>{if(n.nodeType===1){if(rG(n))return"svg";if(iG(n))return"mathml"}},Bd=n=>n.nodeType===8;function sG(n){const{mt:e,p:t,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:c}}=n,h=(P,F)=>{if(!F.hasChildNodes()){t(null,P,F),Cb(),F._vnode=P;return}d(F.firstChild,P,null,null,null),Cb(),F._vnode=P},d=(P,F,U,j,N,O=!1)=>{O=O||!!F.dynamicChildren;const A=Bd(P)&&P.data==="[",R=()=>S(P,F,U,j,N,A),{type:k,ref:V,shapeFlag:D,patchFlag:Z}=F;let le=P.nodeType;F.el=P,Z===-2&&(O=!1,F.dynamicChildren=null);let Q=null;switch(k){case Ju:le!==3?F.children===""?(l(F.el=i(""),o(P),P),Q=P):Q=R():(P.data!==F.children&&(vd(),P.data=F.children),Q=s(P));break;case oi:L(P)?(Q=s(P),C(F.el=P.content.firstChild,P,U)):le!==8||A?Q=R():Q=s(P);break;case Af:if(A&&(P=s(P),le=P.nodeType),le===1||le===3){Q=P;const re=!F.children.length;for(let ae=0;ae<F.staticCount;ae++)re&&(F.children+=Q.nodeType===1?Q.outerHTML:Q.data),ae===F.staticCount-1&&(F.anchor=Q),Q=s(Q);return A?s(Q):Q}else R();break;case lr:A?Q=w(P,F,U,j,N,O):Q=R();break;default:if(D&1)(le!==1||F.type.toLowerCase()!==P.tagName.toLowerCase())&&!L(P)?Q=R():Q=p(P,F,U,j,N,O);else if(D&6){F.slotScopeIds=N;const re=o(P);if(A?Q=E(P):Bd(P)&&P.data==="teleport start"?Q=E(P,P.data,"teleport end"):Q=s(P),e(F,re,null,U,j,Mv(re),O),Xu(F)&&!F.type.__asyncResolved){let ae;A?(ae=hn(lr),ae.anchor=Q?Q.previousSibling:re.lastChild):ae=P.nodeType===3?PA(""):hn("div"),ae.el=P,F.component.subTree=ae}}else D&64?le!==8?Q=R():Q=F.type.hydrate(P,F,U,j,N,O,n,y):D&128&&(Q=F.type.hydrate(P,F,U,j,Mv(o(P)),N,O,n,d))}return V!=null&&Pg(V,null,j,F),Q},p=(P,F,U,j,N,O)=>{O=O||!!F.dynamicChildren;const{type:A,props:R,patchFlag:k,shapeFlag:V,dirs:D,transition:Z}=F,le=A==="input"||A==="option";if(le||k!==-1){D&&Ol(F,null,U,"created");let Q=!1;if(L(P)){Q=ZL(null,Z)&&U&&U.vnode.props&&U.vnode.props.appear;const ae=P.content.firstChild;Q&&Z.beforeEnter(ae),C(ae,P,U),F.el=P=ae}if(V&16&&!(R&&(R.innerHTML||R.textContent))){let ae=y(P.firstChild,F,P,U,j,N,O);for(;ae;){Nv(P,1)||vd();const Ce=ae;ae=ae.nextSibling,a(Ce)}}else if(V&8){let ae=F.children;ae[0]===`
`&&(P.tagName==="PRE"||P.tagName==="TEXTAREA")&&(ae=ae.slice(1)),P.textContent!==ae&&(Nv(P,0)||vd(),P.textContent=F.children)}if(R){if(le||!O||k&48){const ae=P.tagName.includes("-");for(const Ce in R)(le&&(Ce.endsWith("value")||Ce==="indeterminate")||Eh(Ce)&&!Rc(Ce)||Ce[0]==="."||ae)&&r(P,Ce,null,R[Ce],void 0,U)}else if(R.onClick)r(P,"onClick",null,R.onClick,void 0,U);else if(k&4&&Xa(R.style))for(const ae in R.style)R.style[ae]}let re;(re=R&&R.onVnodeBeforeMount)&&no(re,U,F),D&&Ol(F,null,U,"beforeMount"),((re=R&&R.onVnodeMounted)||D||Q)&&cV(()=>{re&&no(re,U,F),Q&&Z.enter(P),D&&Ol(F,null,U,"mounted")},j)}return P.nextSibling},y=(P,F,U,j,N,O,A)=>{A=A||!!F.dynamicChildren;const R=F.children,k=R.length;for(let V=0;V<k;V++){const D=A?R[V]:R[V]=so(R[V]),Z=D.type===Ju;P?(Z&&!A&&V+1<k&&so(R[V+1]).type===Ju&&(l(i(P.data.slice(D.children.length)),U,s(P)),P.data=D.children),P=d(P,D,j,N,O,A)):Z&&!D.children?l(D.el=i(""),U):(Nv(U,1)||vd(),t(null,D,U,null,j,N,Mv(U),O))}return P},w=(P,F,U,j,N,O)=>{const{slotScopeIds:A}=F;A&&(N=N?N.concat(A):A);const R=o(P),k=y(s(P),F,R,U,j,N,O);return k&&Bd(k)&&k.data==="]"?s(F.anchor=k):(vd(),l(F.anchor=c("]"),R,k),k)},S=(P,F,U,j,N,O)=>{if(Nv(P.parentElement,1)||vd(),F.el=null,O){const k=E(P);for(;;){const V=s(P);if(V&&V!==k)a(V);else break}}const A=s(P),R=o(P);return a(P),t(null,F,R,A,U,j,Mv(R),N),U&&(U.vnode.el=F.el,fS(U,F.el)),A},E=(P,F="[",U="]")=>{let j=0;for(;P;)if(P=s(P),P&&Bd(P)&&(P.data===F&&j++,P.data===U)){if(j===0)return s(P);j--}return P},C=(P,F,U)=>{const j=F.parentNode;j&&j.replaceChild(P,F);let N=U;for(;N;)N.vnode.el===F&&(N.vnode.el=N.subTree.el=P),N=N.parent},L=P=>P.nodeType===1&&P.tagName==="TEMPLATE";return[h,d]}const fR="data-allow-mismatch",oG={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Nv(n,e){if(e===0||e===1)for(;n&&!n.hasAttribute(fR);)n=n.parentElement;const t=n&&n.getAttribute(fR);if(t==null)return!1;if(t==="")return!0;{const r=t.split(",");return e===0&&r.includes("children")?!0:t.split(",").includes(oG[e])}}const aG=gy().requestIdleCallback||(n=>setTimeout(n,1)),lG=gy().cancelIdleCallback||(n=>clearTimeout(n)),cG=(n=1e4)=>e=>{const t=aG(e,{timeout:n});return()=>lG(t)};function uG(n){const{top:e,left:t,bottom:r,right:i}=n.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(e>0&&e<s||r>0&&r<s)&&(t>0&&t<o||i>0&&i<o)}const hG=n=>(e,t)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),e();break}},n);return t(i=>{if(i instanceof Element){if(uG(i))return e(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},fG=n=>e=>{if(n){const t=matchMedia(n);if(t.matches)e();else return t.addEventListener("change",e,{once:!0}),()=>t.removeEventListener("change",e)}},dG=(n=[])=>(e,t)=>{qt(n)&&(n=[n]);let r=!1;const i=o=>{r||(r=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{t(o=>{for(const a of n)o.removeEventListener(a,i)})};return t(o=>{for(const a of n)o.addEventListener(a,i,{once:!0})}),s};function pG(n,e){if(Bd(n)&&n.data==="["){let t=1,r=n.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(Bd(r))if(r.data==="]"){if(--t===0)break}else r.data==="["&&t++;r=r.nextSibling}}else e(n)}const Xu=n=>!!n.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function mG(n){Bt(n)&&(n={loader:n});const{loader:e,loadingComponent:t,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=n;let c=null,h,d=0;const p=()=>(d++,c=null,y()),y=()=>{let w;return c||(w=c=e().catch(S=>{if(S=S instanceof Error?S:new Error(String(S)),l)return new Promise((E,C)=>{l(S,()=>E(p()),()=>C(S),d+1)});throw S}).then(S=>w!==c&&c?c:(S&&(S.__esModule||S[Symbol.toStringTag]==="Module")&&(S=S.default),h=S,S)))};return TA({name:"AsyncComponentWrapper",__asyncLoader:y,__asyncHydrate(w,S,E){const C=s?()=>{const L=s(E,P=>pG(w,P));L&&(S.bum||(S.bum=[])).push(L)}:E;h?C():y().then(()=>!S.isUnmounted&&C())},get __asyncResolved(){return h},setup(){const w=gi;if(_A(w),h)return()=>_T(h,w);const S=P=>{c=null,Jf(P,w,13,!r)};if(a&&w.suspense||ap)return y().then(P=>()=>_T(P,w)).catch(P=>(S(P),()=>r?hn(r,{error:P}):null));const E=Nt(!1),C=Nt(),L=Nt(!!i);return i&&setTimeout(()=>{L.value=!1},i),o!=null&&setTimeout(()=>{if(!E.value&&!C.value){const P=new Error(`Async component timed out after ${o}ms.`);S(P),C.value=P}},o),y().then(()=>{E.value=!0,w.parent&&vy(w.parent.vnode)&&w.parent.update()}).catch(P=>{S(P),C.value=P}),()=>{if(E.value&&h)return _T(h,w);if(C.value&&r)return hn(r,{error:C.value});if(t&&!L.value)return hn(t)}}})}function _T(n,e){const{ref:t,props:r,children:i,ce:s}=e.vnode,o=hn(n,r,i);return o.ref=t,o.ce=s,delete e.vnode.ce,o}const vy=n=>n.type.__isKeepAlive,gG={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:e}){const t=vs(),r=t.ctx;if(!r.renderer)return()=>{const L=e.default&&e.default();return L&&L.length===1?L[0]:L};const i=new Map,s=new Set;let o=null;const a=t.suspense,{renderer:{p:l,m:c,um:h,o:{createElement:d}}}=r,p=d("div");r.activate=(L,P,F,U,j)=>{const N=L.component;c(L,P,F,0,a),l(N.vnode,L,P,F,N,a,U,L.slotScopeIds,j),fi(()=>{N.isDeactivated=!1,N.a&&Tf(N.a);const O=L.props&&L.props.onVnodeMounted;O&&no(O,N.parent,L)},a)},r.deactivate=L=>{const P=L.component;kb(P.m),kb(P.a),c(L,p,null,1,a),fi(()=>{P.da&&Tf(P.da);const F=L.props&&L.props.onVnodeUnmounted;F&&no(F,P.parent,L),P.isDeactivated=!0},a)};function y(L){xT(L),h(L,t,a,!0)}function w(L){i.forEach((P,F)=>{const U=h_(P.type);U&&!L(U)&&S(F)})}function S(L){const P=i.get(L);P&&(!o||!Ka(P,o))?y(P):o&&xT(o),i.delete(L),s.delete(L)}wi(()=>[n.include,n.exclude],([L,P])=>{L&&w(F=>Mm(L,F)),P&&w(F=>!Mm(P,F))},{flush:"post",deep:!0});let E=null;const C=()=>{E!=null&&(Rb(t.subTree.type)?fi(()=>{i.set(E,Lv(t.subTree))},t.subTree.suspense):i.set(E,Lv(t.subTree)))};return Fs(C),cS(C),Qf(()=>{i.forEach(L=>{const{subTree:P,suspense:F}=t,U=Lv(P);if(L.type===U.type&&L.key===U.key){xT(U);const j=U.component.da;j&&fi(j,F);return}y(L)})}),()=>{if(E=null,!e.default)return o=null;const L=e.default(),P=L[0];if(L.length>1)return o=null,L;if(!$c(P)||!(P.shapeFlag&4)&&!(P.shapeFlag&128))return o=null,P;let F=Lv(P);if(F.type===oi)return o=null,F;const U=F.type,j=h_(Xu(F)?F.type.__asyncResolved||{}:U),{include:N,exclude:O,max:A}=n;if(N&&(!j||!Mm(N,j))||O&&j&&Mm(O,j))return F.shapeFlag&=-257,o=F,P;const R=F.key==null?U:F.key,k=i.get(R);return F.el&&(F=Wl(F),P.shapeFlag&128&&(P.ssContent=F)),E=R,k?(F.el=k.el,F.component=k.component,F.transition&&Uc(F,F.transition),F.shapeFlag|=512,s.delete(R),s.add(R)):(s.add(R),A&&s.size>parseInt(A,10)&&S(s.values().next().value)),F.shapeFlag|=256,o=F,Rb(P.type)?P:F}}},yG=gG;function Mm(n,e){return wt(n)?n.some(t=>Mm(t,e)):qt(n)?n.split(",").includes(e):M2(n)?(n.lastIndex=0,n.test(e)):!1}function AL(n,e){CL(n,"a",e)}function IL(n,e){CL(n,"da",e)}function CL(n,e,t=gi){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(lS(e,r,t),t){let i=t.parent;for(;i&&i.parent;)vy(i.parent.vnode)&&vG(r,e,t,i),i=i.parent}}function vG(n,e,t,r){const i=lS(e,n,r,!0);by(()=>{Yw(r[e],i)},t)}function xT(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function Lv(n){return n.shapeFlag&128?n.ssContent:n}function lS(n,e,t=gi,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{xh();const a=Mf(t),l=ga(e,t,n,o);return a(),Ah(),l});return r?i.unshift(s):i.push(s),s}}const Yc=n=>(e,t=gi)=>{(!ap||n==="sp")&&lS(n,(...r)=>e(...r),t)},OL=Yc("bm"),Fs=Yc("m"),xA=Yc("bu"),cS=Yc("u"),Qf=Yc("bum"),by=Yc("um"),kL=Yc("sp"),RL=Yc("rtg"),PL=Yc("rtc");function DL(n,e=gi){lS("ec",n,e)}const AA="components",bG="directives";function es(n,e){return IA(AA,n,!0,e)||n}const ML=Symbol.for("v-ndc");function NL(n){return qt(n)?IA(AA,n,!1)||n:n||ML}function wG(n){return IA(bG,n)}function IA(n,e,t=!0,r=!1){const i=yi||gi;if(i){const s=i.type;if(n===AA){const a=h_(s,!1);if(a&&(a===e||a===cr(e)||a===_h(cr(e))))return s}const o=dR(i[n]||s[n],e)||dR(i.appContext[n],e);return!o&&r?s:o}}function dR(n,e){return n&&(n[e]||n[cr(e)]||n[_h(cr(e))])}function Pf(n,e,t,r){let i;const s=t&&t[r],o=wt(n);if(o||qt(n)){const a=o&&Xa(n);let l=!1;a&&(l=!Vo(n),n=tS(n)),i=new Array(n.length);for(let c=0,h=n.length;c<h;c++)i[c]=e(l?as(n[c]):n[c],c,void 0,s&&s[c])}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(Gn(n))if(n[Symbol.iterator])i=Array.from(n,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(n);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];i[l]=e(n[h],h,l,s&&s[l])}}else i=[];return t&&(t[r]=i),i}function SG(n,e){for(let t=0;t<e.length;t++){const r=e[t];if(wt(r))for(let i=0;i<r.length;i++)n[r[i].name]=r[i].fn;else r&&(n[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return n}function LL(n,e,t={},r,i){if(yi.ce||yi.parent&&Xu(yi.parent)&&yi.parent.ce)return e!=="default"&&(t.name=e),nt(),Za(lr,null,[hn("slot",t,r&&r())],64);let s=n[e];s&&s._c&&(s._d=!1),nt();const o=s&&CA(s(t)),a=t.key||o&&o.key,l=Za(lr,{key:(a&&!Vs(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&n._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function CA(n){return n.some(e=>$c(e)?!(e.type===oi||e.type===lr&&!CA(e.children)):!0)?n:null}function EG(n,e){const t={};for(const r in n)t[e&&/[A-Z]/.test(r)?`on:${r}`:Ef(r)]=n[r];return t}const e_=n=>n?mV(n)?Sy(n):e_(n.parent):null,rg=Sn(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>e_(n.parent),$root:n=>e_(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>OA(n),$forceUpdate:n=>n.f||(n.f=()=>{wA(n.update)}),$nextTick:n=>n.n||(n.n=Qa.bind(n.proxy)),$watch:n=>JG.bind(n)}),AT=(n,e)=>n!==wn&&!n.__isScriptSetup&&Wn(n,e),t_={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const y=o[e];if(y!==void 0)switch(y){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(AT(r,e))return o[e]=1,r[e];if(i!==wn&&Wn(i,e))return o[e]=2,i[e];if((c=n.propsOptions[0])&&Wn(c,e))return o[e]=3,s[e];if(t!==wn&&Wn(t,e))return o[e]=4,t[e];n_&&(o[e]=0)}}const h=rg[e];let d,p;if(h)return e==="$attrs"&&os(n.attrs,"get",""),h(n);if((d=a.__cssModules)&&(d=d[e]))return d;if(t!==wn&&Wn(t,e))return o[e]=4,t[e];if(p=l.config.globalProperties,Wn(p,e))return p[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return AT(i,e)?(i[e]=t,!0):r!==wn&&Wn(r,e)?(r[e]=t,!0):Wn(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!t[o]||n!==wn&&Wn(n,o)||AT(e,o)||(a=s[0])&&Wn(a,o)||Wn(r,o)||Wn(rg,o)||Wn(i.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Wn(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}},TG=Sn({},t_,{get(n,e){if(e!==Symbol.unscopables)return t_.get(n,e,n)},has(n,e){return e[0]!=="_"&&!aA(e)}});function _G(){return null}function xG(){return null}function AG(n){}function IG(n){}function CG(){return null}function OG(){}function kG(n,e){return null}function VL(){return FL().slots}function RG(){return FL().attrs}function FL(){const n=vs();return n.setupContext||(n.setupContext=vV(n))}function Dg(n){return wt(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}function PG(n,e){const t=Dg(n);for(const r in e){if(r.startsWith("__skip"))continue;let i=t[r];i?wt(i)||Bt(i)?i=t[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=t[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return t}function DG(n,e){return!n||!e?n||e:wt(n)&&wt(e)?n.concat(e):Sn({},Dg(n),Dg(e))}function MG(n,e){const t={};for(const r in n)e.includes(r)||Object.defineProperty(t,r,{enumerable:!0,get:()=>n[r]});return t}function NG(n){const e=vs();let t=n();return l_(),Xw(t)&&(t=t.catch(r=>{throw Mf(e),r})),[t,()=>Mf(e)]}let n_=!0;function LG(n){const e=OA(n),t=n.proxy,r=n.ctx;n_=!1,e.beforeCreate&&pR(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:d,mounted:p,beforeUpdate:y,updated:w,activated:S,deactivated:E,beforeDestroy:C,beforeUnmount:L,destroyed:P,unmounted:F,render:U,renderTracked:j,renderTriggered:N,errorCaptured:O,serverPrefetch:A,expose:R,inheritAttrs:k,components:V,directives:D,filters:Z}=e;if(c&&VG(c,r,null),o)for(const re in o){const ae=o[re];Bt(ae)&&(r[re]=ae.bind(t))}if(i){const re=i.call(t,t);Gn(re)&&(n.data=Mp(re))}if(n_=!0,s)for(const re in s){const ae=s[re],Ce=Bt(ae)?ae.bind(t,t):Bt(ae.get)?ae.get.bind(t,t):Ci,He=!Bt(ae)&&Bt(ae.set)?ae.set.bind(t):Ci,Ge=gn({get:Ce,set:He});Object.defineProperty(r,re,{enumerable:!0,configurable:!0,get:()=>Ge.value,set:ot=>Ge.value=ot})}if(a)for(const re in a)BL(a[re],r,t,re);if(l){const re=Bt(l)?l.call(t):l;Reflect.ownKeys(re).forEach(ae=>{kl(ae,re[ae])})}h&&pR(h,n,"c");function Q(re,ae){wt(ae)?ae.forEach(Ce=>re(Ce.bind(t))):ae&&re(ae.bind(t))}if(Q(OL,d),Q(Fs,p),Q(xA,y),Q(cS,w),Q(AL,S),Q(IL,E),Q(DL,O),Q(PL,j),Q(RL,N),Q(Qf,L),Q(by,F),Q(kL,A),wt(R))if(R.length){const re=n.exposed||(n.exposed={});R.forEach(ae=>{Object.defineProperty(re,ae,{get:()=>t[ae],set:Ce=>t[ae]=Ce})})}else n.exposed||(n.exposed={});U&&n.render===Ci&&(n.render=U),k!=null&&(n.inheritAttrs=k),V&&(n.components=V),D&&(n.directives=D),A&&_A(n)}function VG(n,e,t=Ci){wt(n)&&(n=r_(n));for(const r in n){const i=n[r];let s;Gn(i)?"default"in i?s=ks(i.from||r,i.default,!0):s=ks(i.from||r):s=ks(i),gr(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function pR(n,e,t){ga(wt(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function BL(n,e,t,r){let i=r.includes(".")?sV(t,r):()=>t[r];if(qt(n)){const s=e[n];Bt(s)&&wi(i,s)}else if(Bt(n))wi(i,n.bind(t));else if(Gn(n))if(wt(n))n.forEach(s=>BL(s,e,t,r));else{const s=Bt(n.handler)?n.handler.bind(t):e[n.handler];Bt(s)&&wi(i,s,n)}}function OA(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!t&&!r?l=e:(l={},i.length&&i.forEach(c=>Ob(l,c,o,!0)),Ob(l,e,o)),Gn(e)&&s.set(e,l),l}function Ob(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&Ob(n,s,t,!0),i&&i.forEach(o=>Ob(n,o,t,!0));for(const o in e)if(!(r&&o==="expose")){const a=FG[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const FG={data:mR,props:gR,emits:gR,methods:Nm,computed:Nm,beforeCreate:As,created:As,beforeMount:As,mounted:As,beforeUpdate:As,updated:As,beforeDestroy:As,beforeUnmount:As,destroyed:As,unmounted:As,activated:As,deactivated:As,errorCaptured:As,serverPrefetch:As,components:Nm,directives:Nm,watch:UG,provide:mR,inject:BG};function mR(n,e){return e?n?function(){return Sn(Bt(n)?n.call(this,this):n,Bt(e)?e.call(this,this):e)}:e:n}function BG(n,e){return Nm(r_(n),r_(e))}function r_(n){if(wt(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function As(n,e){return n?[...new Set([].concat(n,e))]:e}function Nm(n,e){return n?Sn(Object.create(null),n,e):e}function gR(n,e){return n?wt(n)&&wt(e)?[...new Set([...n,...e])]:Sn(Object.create(null),Dg(n),Dg(e??{})):e}function UG(n,e){if(!n)return e;if(!e)return n;const t=Sn(Object.create(null),n);for(const r in e)t[r]=As(n[r],e[r]);return t}function UL(){return{app:null,config:{isNativeTag:Fd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $G=0;function HG(n,e){return function(r,i=null){Bt(r)||(r=Sn({},r)),i!=null&&!Gn(i)&&(i=null);const s=UL(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:$G++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:wV,get config(){return s.config},set config(h){},use(h,...d){return o.has(h)||(h&&Bt(h.install)?(o.add(h),h.install(c,...d)):Bt(h)&&(o.add(h),h(c,...d))),c},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),c},component(h,d){return d?(s.components[h]=d,c):s.components[h]},directive(h,d){return d?(s.directives[h]=d,c):s.directives[h]},mount(h,d,p){if(!l){const y=c._ceVNode||hn(r,i);return y.appContext=s,p===!0?p="svg":p===!1&&(p=void 0),d&&e?e(y,h):n(y,h,p),l=!0,c._container=h,h.__vue_app__=c,Sy(y.component)}},onUnmount(h){a.push(h)},unmount(){l&&(ga(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(h,d){return s.provides[h]=d,c},runWithContext(h){const d=xf;xf=c;try{return h()}finally{xf=d}}};return c}}let xf=null;function kl(n,e){if(gi){let t=gi.provides;const r=gi.parent&&gi.parent.provides;r===t&&(t=gi.provides=Object.create(r)),t[n]=e}}function ks(n,e,t=!1){const r=gi||yi;if(r||xf){const i=xf?xf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Bt(e)?e.call(r&&r.proxy):e}}function uS(){return!!(gi||yi||xf)}const $L={},HL=()=>Object.create($L),WL=n=>Object.getPrototypeOf(n)===$L;function WG(n,e,t,r=!1){const i={},s=HL();n.propsDefaults=Object.create(null),zL(n,e,i,s);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);t?n.props=r?i:lL(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function zG(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=n,a=_n(i),[l]=n.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=n.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(hS(n.emitsOptions,p))continue;const y=e[p];if(l)if(Wn(s,p))y!==s[p]&&(s[p]=y,c=!0);else{const w=cr(p);i[w]=i_(l,a,w,y,n,!1)}else y!==s[p]&&(s[p]=y,c=!0)}}}else{zL(n,e,i,s)&&(c=!0);let h;for(const d in a)(!e||!Wn(e,d)&&((h=cs(d))===d||!Wn(e,h)))&&(l?t&&(t[d]!==void 0||t[h]!==void 0)&&(i[d]=i_(l,a,d,void 0,n,!0)):delete i[d]);if(s!==a)for(const d in s)(!e||!Wn(e,d))&&(delete s[d],c=!0)}c&&Sc(n.attrs,"set","")}function zL(n,e,t,r){const[i,s]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(Rc(l))continue;const c=e[l];let h;i&&Wn(i,h=cr(l))?!s||!s.includes(h)?t[h]=c:(a||(a={}))[h]=c:hS(n.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=_n(t),c=a||wn;for(let h=0;h<s.length;h++){const d=s[h];t[d]=i_(i,l,d,c[d],n,!Wn(c,d))}}return o}function i_(n,e,t,r,i,s){const o=n[t];if(o!=null){const a=Wn(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Bt(l)){const{propsDefaults:c}=i;if(t in c)r=c[t];else{const h=Mf(i);r=c[t]=l.call(null,e),h()}}else r=l;i.ce&&i.ce._setProp(t,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===cs(t))&&(r=!0))}return r}const jG=new WeakMap;function jL(n,e,t=!1){const r=t?jG:e.propsCache,i=r.get(n);if(i)return i;const s=n.props,o={},a=[];let l=!1;if(!Bt(n)){const h=d=>{l=!0;const[p,y]=jL(d,e,!0);Sn(o,p),y&&a.push(...y)};!t&&e.mixins.length&&e.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}if(!s&&!l)return Gn(n)&&r.set(n,wf),wf;if(wt(s))for(let h=0;h<s.length;h++){const d=cr(s[h]);yR(d)&&(o[d]=wn)}else if(s)for(const h in s){const d=cr(h);if(yR(d)){const p=s[h],y=o[d]=wt(p)||Bt(p)?{type:p}:Sn({},p),w=y.type;let S=!1,E=!0;if(wt(w))for(let C=0;C<w.length;++C){const L=w[C],P=Bt(L)&&L.name;if(P==="Boolean"){S=!0;break}else P==="String"&&(E=!1)}else S=Bt(w)&&w.name==="Boolean";y[0]=S,y[1]=E,(S||Wn(y,"default"))&&a.push(d)}}const c=[o,a];return Gn(n)&&r.set(n,c),c}function yR(n){return n[0]!=="$"&&!Rc(n)}const KL=n=>n[0]==="_"||n==="$stable",kA=n=>wt(n)?n.map(so):[so(n)],KG=(n,e,t)=>{if(e._n)return e;const r=Tc((...i)=>kA(e(...i)),t);return r._c=!1,r},GL=(n,e,t)=>{const r=n._ctx;for(const i in n){if(KL(i))continue;const s=n[i];if(Bt(s))e[i]=KG(i,s,r);else if(s!=null){const o=kA(s);e[i]=()=>o}}},qL=(n,e)=>{const t=kA(e);n.slots.default=()=>t},YL=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},GG=(n,e,t)=>{const r=n.slots=HL();if(n.vnode.shapeFlag&32){const i=e._;i?(YL(r,e,t),t&&oA(r,"_",i,!0)):GL(e,r)}else e&&qL(n,e)},qG=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,o=wn;if(r.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:YL(i,e,t):(s=!e.$stable,GL(e,i)),o=e}else e&&(qL(n,e),o={default:1});if(s)for(const a in i)!KL(a)&&o[a]==null&&delete i[a]},fi=cV;function XL(n){return QL(n)}function JL(n){return QL(n,sG)}function QL(n,e){const t=gy();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:d,nextSibling:p,setScopeId:y=Ci,insertStaticContent:w}=n,S=(X,ee,be,Ue=null,ke=null,Ke=null,at=void 0,Xe=null,Le=!!ee.dynamicChildren)=>{if(X===ee)return;X&&!Ka(X,ee)&&(Ue=oe(X),ot(X,ke,Ke,!0),X=null),ee.patchFlag===-2&&(Le=!1,ee.dynamicChildren=null);const{type:ze,ref:Et,shapeFlag:lt}=ee;switch(ze){case Ju:E(X,ee,be,Ue);break;case oi:C(X,ee,be,Ue);break;case Af:X==null&&L(ee,be,Ue,at);break;case lr:V(X,ee,be,Ue,ke,Ke,at,Xe,Le);break;default:lt&1?U(X,ee,be,Ue,ke,Ke,at,Xe,Le):lt&6?D(X,ee,be,Ue,ke,Ke,at,Xe,Le):(lt&64||lt&128)&&ze.process(X,ee,be,Ue,ke,Ke,at,Xe,Le,Ie)}Et!=null&&ke&&Pg(Et,X&&X.ref,Ke,ee||X,!ee)},E=(X,ee,be,Ue)=>{if(X==null)r(ee.el=a(ee.children),be,Ue);else{const ke=ee.el=X.el;ee.children!==X.children&&c(ke,ee.children)}},C=(X,ee,be,Ue)=>{X==null?r(ee.el=l(ee.children||""),be,Ue):ee.el=X.el},L=(X,ee,be,Ue)=>{[X.el,X.anchor]=w(X.children,ee,be,Ue,X.el,X.anchor)},P=({el:X,anchor:ee},be,Ue)=>{let ke;for(;X&&X!==ee;)ke=p(X),r(X,be,Ue),X=ke;r(ee,be,Ue)},F=({el:X,anchor:ee})=>{let be;for(;X&&X!==ee;)be=p(X),i(X),X=be;i(ee)},U=(X,ee,be,Ue,ke,Ke,at,Xe,Le)=>{ee.type==="svg"?at="svg":ee.type==="math"&&(at="mathml"),X==null?j(ee,be,Ue,ke,Ke,at,Xe,Le):A(X,ee,ke,Ke,at,Xe,Le)},j=(X,ee,be,Ue,ke,Ke,at,Xe)=>{let Le,ze;const{props:Et,shapeFlag:lt,transition:mt,dirs:ft}=X;if(Le=X.el=o(X.type,Ke,Et&&Et.is,Et),lt&8?h(Le,X.children):lt&16&&O(X.children,Le,null,Ue,ke,IT(X,Ke),at,Xe),ft&&Ol(X,null,Ue,"created"),N(Le,X,X.scopeId,at,Ue),Et){for(const Wt in Et)Wt!=="value"&&!Rc(Wt)&&s(Le,Wt,null,Et[Wt],Ke,Ue);"value"in Et&&s(Le,"value",null,Et.value,Ke),(ze=Et.onVnodeBeforeMount)&&no(ze,Ue,X)}ft&&Ol(X,null,Ue,"beforeMount");const Tt=ZL(ke,mt);Tt&&mt.beforeEnter(Le),r(Le,ee,be),((ze=Et&&Et.onVnodeMounted)||Tt||ft)&&fi(()=>{ze&&no(ze,Ue,X),Tt&&mt.enter(Le),ft&&Ol(X,null,Ue,"mounted")},ke)},N=(X,ee,be,Ue,ke)=>{if(be&&y(X,be),Ue)for(let Ke=0;Ke<Ue.length;Ke++)y(X,Ue[Ke]);if(ke){let Ke=ke.subTree;if(ee===Ke||Rb(Ke.type)&&(Ke.ssContent===ee||Ke.ssFallback===ee)){const at=ke.vnode;N(X,at,at.scopeId,at.slotScopeIds,ke.parent)}}},O=(X,ee,be,Ue,ke,Ke,at,Xe,Le=0)=>{for(let ze=Le;ze<X.length;ze++){const Et=X[ze]=Xe?Ru(X[ze]):so(X[ze]);S(null,Et,ee,be,Ue,ke,Ke,at,Xe)}},A=(X,ee,be,Ue,ke,Ke,at)=>{const Xe=ee.el=X.el;let{patchFlag:Le,dynamicChildren:ze,dirs:Et}=ee;Le|=X.patchFlag&16;const lt=X.props||wn,mt=ee.props||wn;let ft;if(be&&ef(be,!1),(ft=mt.onVnodeBeforeUpdate)&&no(ft,be,ee,X),Et&&Ol(ee,X,be,"beforeUpdate"),be&&ef(be,!0),(lt.innerHTML&&mt.innerHTML==null||lt.textContent&&mt.textContent==null)&&h(Xe,""),ze?R(X.dynamicChildren,ze,Xe,be,Ue,IT(ee,ke),Ke):at||ae(X,ee,Xe,null,be,Ue,IT(ee,ke),Ke,!1),Le>0){if(Le&16)k(Xe,lt,mt,be,ke);else if(Le&2&&lt.class!==mt.class&&s(Xe,"class",null,mt.class,ke),Le&4&&s(Xe,"style",lt.style,mt.style,ke),Le&8){const Tt=ee.dynamicProps;for(let Wt=0;Wt<Tt.length;Wt++){const de=Tt[Wt],ge=lt[de],Se=mt[de];(Se!==ge||de==="value")&&s(Xe,de,ge,Se,ke,be)}}Le&1&&X.children!==ee.children&&h(Xe,ee.children)}else!at&&ze==null&&k(Xe,lt,mt,be,ke);((ft=mt.onVnodeUpdated)||Et)&&fi(()=>{ft&&no(ft,be,ee,X),Et&&Ol(ee,X,be,"updated")},Ue)},R=(X,ee,be,Ue,ke,Ke,at)=>{for(let Xe=0;Xe<ee.length;Xe++){const Le=X[Xe],ze=ee[Xe],Et=Le.el&&(Le.type===lr||!Ka(Le,ze)||Le.shapeFlag&70)?d(Le.el):be;S(Le,ze,Et,null,Ue,ke,Ke,at,!0)}},k=(X,ee,be,Ue,ke)=>{if(ee!==be){if(ee!==wn)for(const Ke in ee)!Rc(Ke)&&!(Ke in be)&&s(X,Ke,ee[Ke],null,ke,Ue);for(const Ke in be){if(Rc(Ke))continue;const at=be[Ke],Xe=ee[Ke];at!==Xe&&Ke!=="value"&&s(X,Ke,Xe,at,ke,Ue)}"value"in be&&s(X,"value",ee.value,be.value,ke)}},V=(X,ee,be,Ue,ke,Ke,at,Xe,Le)=>{const ze=ee.el=X?X.el:a(""),Et=ee.anchor=X?X.anchor:a("");let{patchFlag:lt,dynamicChildren:mt,slotScopeIds:ft}=ee;ft&&(Xe=Xe?Xe.concat(ft):ft),X==null?(r(ze,be,Ue),r(Et,be,Ue),O(ee.children||[],be,Et,ke,Ke,at,Xe,Le)):lt>0&&lt&64&&mt&&X.dynamicChildren?(R(X.dynamicChildren,mt,be,ke,Ke,at,Xe),(ee.key!=null||ke&&ee===ke.subTree)&&RA(X,ee,!0)):ae(X,ee,be,Et,ke,Ke,at,Xe,Le)},D=(X,ee,be,Ue,ke,Ke,at,Xe,Le)=>{ee.slotScopeIds=Xe,X==null?ee.shapeFlag&512?ke.ctx.activate(ee,be,Ue,at,Le):Z(ee,be,Ue,ke,Ke,at,Le):le(X,ee,Le)},Z=(X,ee,be,Ue,ke,Ke,at)=>{const Xe=X.component=pV(X,Ue,ke);if(vy(X)&&(Xe.ctx.renderer=Ie),gV(Xe,!1,at),Xe.asyncDep){if(ke&&ke.registerDep(Xe,Q,at),!X.el){const Le=Xe.subTree=hn(oi);C(null,Le,ee,be)}}else Q(Xe,X,ee,be,ke,Ke,at)},le=(X,ee,be)=>{const Ue=ee.component=X.component;if(rq(X,ee,be))if(Ue.asyncDep&&!Ue.asyncResolved){re(Ue,ee,be);return}else Ue.next=ee,Ue.update();else ee.el=X.el,Ue.vnode=ee},Q=(X,ee,be,Ue,ke,Ke,at)=>{const Xe=()=>{if(X.isMounted){let{next:lt,bu:mt,u:ft,parent:Tt,vnode:Wt}=X;{const rt=eV(X);if(rt){lt&&(lt.el=Wt.el,re(X,lt,at)),rt.asyncDep.then(()=>{X.isUnmounted||Xe()});return}}let de=lt,ge;ef(X,!1),lt?(lt.el=Wt.el,re(X,lt,at)):lt=Wt,mt&&Tf(mt),(ge=lt.props&&lt.props.onVnodeBeforeUpdate)&&no(ge,Tt,lt,Wt),ef(X,!0);const Se=D0(X),Pe=X.subTree;X.subTree=Se,S(Pe,Se,d(Pe.el),oe(Pe),X,ke,Ke),lt.el=Se.el,de===null&&fS(X,Se.el),ft&&fi(ft,ke),(ge=lt.props&&lt.props.onVnodeUpdated)&&fi(()=>no(ge,Tt,lt,Wt),ke)}else{let lt;const{el:mt,props:ft}=ee,{bm:Tt,m:Wt,parent:de,root:ge,type:Se}=X,Pe=Xu(ee);if(ef(X,!1),Tt&&Tf(Tt),!Pe&&(lt=ft&&ft.onVnodeBeforeMount)&&no(lt,de,ee),ef(X,!0),mt&&Ye){const rt=()=>{X.subTree=D0(X),Ye(mt,X.subTree,X,ke,null)};Pe&&Se.__asyncHydrate?Se.__asyncHydrate(mt,X,rt):rt()}else{ge.ce&&ge.ce._injectChildStyle(Se);const rt=X.subTree=D0(X);S(null,rt,be,Ue,X,ke,Ke),ee.el=rt.el}if(Wt&&fi(Wt,ke),!Pe&&(lt=ft&&ft.onVnodeMounted)){const rt=ee;fi(()=>no(lt,de,rt),ke)}(ee.shapeFlag&256||de&&Xu(de.vnode)&&de.vnode.shapeFlag&256)&&X.a&&fi(X.a,ke),X.isMounted=!0,ee=be=Ue=null}};X.scope.on();const Le=X.effect=new Ag(Xe);X.scope.off();const ze=X.update=Le.run.bind(Le),Et=X.job=Le.runIfDirty.bind(Le);Et.i=X,Et.id=X.uid,Le.scheduler=()=>wA(Et),ef(X,!0),ze()},re=(X,ee,be)=>{ee.component=X;const Ue=X.vnode.props;X.vnode=ee,X.next=null,zG(X,ee.props,Ue,be),qG(X,ee.children,be),xh(),oR(X),Ah()},ae=(X,ee,be,Ue,ke,Ke,at,Xe,Le=!1)=>{const ze=X&&X.children,Et=X?X.shapeFlag:0,lt=ee.children,{patchFlag:mt,shapeFlag:ft}=ee;if(mt>0){if(mt&128){He(ze,lt,be,Ue,ke,Ke,at,Xe,Le);return}else if(mt&256){Ce(ze,lt,be,Ue,ke,Ke,at,Xe,Le);return}}ft&8?(Et&16&&Ne(ze,ke,Ke),lt!==ze&&h(be,lt)):Et&16?ft&16?He(ze,lt,be,Ue,ke,Ke,at,Xe,Le):Ne(ze,ke,Ke,!0):(Et&8&&h(be,""),ft&16&&O(lt,be,Ue,ke,Ke,at,Xe,Le))},Ce=(X,ee,be,Ue,ke,Ke,at,Xe,Le)=>{X=X||wf,ee=ee||wf;const ze=X.length,Et=ee.length,lt=Math.min(ze,Et);let mt;for(mt=0;mt<lt;mt++){const ft=ee[mt]=Le?Ru(ee[mt]):so(ee[mt]);S(X[mt],ft,be,null,ke,Ke,at,Xe,Le)}ze>Et?Ne(X,ke,Ke,!0,!1,lt):O(ee,be,Ue,ke,Ke,at,Xe,Le,lt)},He=(X,ee,be,Ue,ke,Ke,at,Xe,Le)=>{let ze=0;const Et=ee.length;let lt=X.length-1,mt=Et-1;for(;ze<=lt&&ze<=mt;){const ft=X[ze],Tt=ee[ze]=Le?Ru(ee[ze]):so(ee[ze]);if(Ka(ft,Tt))S(ft,Tt,be,null,ke,Ke,at,Xe,Le);else break;ze++}for(;ze<=lt&&ze<=mt;){const ft=X[lt],Tt=ee[mt]=Le?Ru(ee[mt]):so(ee[mt]);if(Ka(ft,Tt))S(ft,Tt,be,null,ke,Ke,at,Xe,Le);else break;lt--,mt--}if(ze>lt){if(ze<=mt){const ft=mt+1,Tt=ft<Et?ee[ft].el:Ue;for(;ze<=mt;)S(null,ee[ze]=Le?Ru(ee[ze]):so(ee[ze]),be,Tt,ke,Ke,at,Xe,Le),ze++}}else if(ze>mt)for(;ze<=lt;)ot(X[ze],ke,Ke,!0),ze++;else{const ft=ze,Tt=ze,Wt=new Map;for(ze=Tt;ze<=mt;ze++){const je=ee[ze]=Le?Ru(ee[ze]):so(ee[ze]);je.key!=null&&Wt.set(je.key,ze)}let de,ge=0;const Se=mt-Tt+1;let Pe=!1,rt=0;const Ot=new Array(Se);for(ze=0;ze<Se;ze++)Ot[ze]=0;for(ze=ft;ze<=lt;ze++){const je=X[ze];if(ge>=Se){ot(je,ke,Ke,!0);continue}let tn;if(je.key!=null)tn=Wt.get(je.key);else for(de=Tt;de<=mt;de++)if(Ot[de-Tt]===0&&Ka(je,ee[de])){tn=de;break}tn===void 0?ot(je,ke,Ke,!0):(Ot[tn-Tt]=ze+1,tn>=rt?rt=tn:Pe=!0,S(je,ee[tn],be,null,ke,Ke,at,Xe,Le),ge++)}const Rt=Pe?YG(Ot):wf;for(de=Rt.length-1,ze=Se-1;ze>=0;ze--){const je=Tt+ze,tn=ee[je],kt=je+1<Et?ee[je+1].el:Ue;Ot[ze]===0?S(null,tn,be,kt,ke,Ke,at,Xe,Le):Pe&&(de<0||ze!==Rt[de]?Ge(tn,be,kt,2):de--)}}},Ge=(X,ee,be,Ue,ke=null)=>{const{el:Ke,type:at,transition:Xe,children:Le,shapeFlag:ze}=X;if(ze&6){Ge(X.component.subTree,ee,be,Ue);return}if(ze&128){X.suspense.move(ee,be,Ue);return}if(ze&64){at.move(X,ee,be,Ie);return}if(at===lr){r(Ke,ee,be);for(let lt=0;lt<Le.length;lt++)Ge(Le[lt],ee,be,Ue);r(X.anchor,ee,be);return}if(at===Af){P(X,ee,be);return}if(Ue!==2&&ze&1&&Xe)if(Ue===0)Xe.beforeEnter(Ke),r(Ke,ee,be),fi(()=>Xe.enter(Ke),ke);else{const{leave:lt,delayLeave:mt,afterLeave:ft}=Xe,Tt=()=>r(Ke,ee,be),Wt=()=>{lt(Ke,()=>{Tt(),ft&&ft()})};mt?mt(Ke,Tt,Wt):Wt()}else r(Ke,ee,be)},ot=(X,ee,be,Ue=!1,ke=!1)=>{const{type:Ke,props:at,ref:Xe,children:Le,dynamicChildren:ze,shapeFlag:Et,patchFlag:lt,dirs:mt,cacheIndex:ft}=X;if(lt===-2&&(ke=!1),Xe!=null&&Pg(Xe,null,be,X,!0),ft!=null&&(ee.renderCache[ft]=void 0),Et&256){ee.ctx.deactivate(X);return}const Tt=Et&1&&mt,Wt=!Xu(X);let de;if(Wt&&(de=at&&at.onVnodeBeforeUnmount)&&no(de,ee,X),Et&6)_e(X.component,be,Ue);else{if(Et&128){X.suspense.unmount(be,Ue);return}Tt&&Ol(X,null,ee,"beforeUnmount"),Et&64?X.type.remove(X,ee,be,Ie,Ue):ze&&!ze.hasOnce&&(Ke!==lr||lt>0&&lt&64)?Ne(ze,ee,be,!1,!0):(Ke===lr&&lt&384||!ke&&Et&16)&&Ne(Le,ee,be),Ue&&ut(X)}(Wt&&(de=at&&at.onVnodeUnmounted)||Tt)&&fi(()=>{de&&no(de,ee,X),Tt&&Ol(X,null,ee,"unmounted")},be)},ut=X=>{const{type:ee,el:be,anchor:Ue,transition:ke}=X;if(ee===lr){Mt(be,Ue);return}if(ee===Af){F(X);return}const Ke=()=>{i(be),ke&&!ke.persisted&&ke.afterLeave&&ke.afterLeave()};if(X.shapeFlag&1&&ke&&!ke.persisted){const{leave:at,delayLeave:Xe}=ke,Le=()=>at(be,Ke);Xe?Xe(X.el,Ke,Le):Le()}else Ke()},Mt=(X,ee)=>{let be;for(;X!==ee;)be=p(X),i(X),X=be;i(ee)},_e=(X,ee,be)=>{const{bum:Ue,scope:ke,job:Ke,subTree:at,um:Xe,m:Le,a:ze}=X;kb(Le),kb(ze),Ue&&Tf(Ue),ke.stop(),Ke&&(Ke.flags|=8,ot(at,X,ee,be)),Xe&&fi(Xe,ee),fi(()=>{X.isUnmounted=!0},ee),ee&&ee.pendingBranch&&!ee.isUnmounted&&X.asyncDep&&!X.asyncResolved&&X.suspenseId===ee.pendingId&&(ee.deps--,ee.deps===0&&ee.resolve())},Ne=(X,ee,be,Ue=!1,ke=!1,Ke=0)=>{for(let at=Ke;at<X.length;at++)ot(X[at],ee,be,Ue,ke)},oe=X=>{if(X.shapeFlag&6)return oe(X.component.subTree);if(X.shapeFlag&128)return X.suspense.next();const ee=p(X.anchor||X.el),be=ee&&ee[vL];return be?p(be):ee};let Ee=!1;const me=(X,ee,be)=>{X==null?ee._vnode&&ot(ee._vnode,null,null,!0):S(ee._vnode||null,X,ee,null,null,null,be),ee._vnode=X,Ee||(Ee=!0,oR(),Cb(),Ee=!1)},Ie={p:S,um:ot,m:Ge,r:ut,mt:Z,mc:O,pc:ae,pbc:R,n:oe,o:n};let Me,Ye;return e&&([Me,Ye]=e(Ie)),{render:me,hydrate:Me,createApp:HG(me,Me)}}function IT({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function ef({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function ZL(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function RA(n,e,t=!1){const r=n.children,i=e.children;if(wt(r)&&wt(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Ru(i[s]),a.el=o.el),!t&&a.patchFlag!==-2&&RA(o,a)),a.type===Ju&&(a.el=o.el)}}function YG(n){const e=n.slice(),t=[0];let r,i,s,o,a;const l=n.length;for(r=0;r<l;r++){const c=n[r];if(c!==0){if(i=t[t.length-1],n[i]<c){e[r]=i,t.push(r);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,n[t[a]]<c?s=a+1:o=a;c<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}function eV(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:eV(e)}function kb(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const tV=Symbol.for("v-scx"),nV=()=>ks(tV);function rV(n,e){return wy(n,null,e)}function XG(n,e){return wy(n,null,{flush:"post"})}function iV(n,e){return wy(n,null,{flush:"sync"})}function wi(n,e,t){return wy(n,e,t)}function wy(n,e,t=wn){const{immediate:r,deep:i,flush:s,once:o}=t,a=Sn({},t),l=e&&r||!e&&s!=="post";let c;if(ap){if(s==="sync"){const y=nV();c=y.__watcherHandles||(y.__watcherHandles=[])}else if(!l){const y=()=>{};return y.stop=Ci,y.resume=Ci,y.pause=Ci,y}}const h=gi;a.call=(y,w,S)=>ga(y,h,w,S);let d=!1;s==="post"?a.scheduler=y=>{fi(y,h&&h.suspense)}:s!=="sync"&&(d=!0,a.scheduler=(y,w)=>{w?y():wA(y)}),a.augmentJob=y=>{e&&(y.flags|=4),d&&(y.flags|=2,h&&(y.id=h.uid,y.i=h))};const p=$7(n,e,a);return ap&&(c?c.push(p):l&&p()),p}function JG(n,e,t){const r=this.proxy,i=qt(n)?n.includes(".")?sV(r,n):()=>r[n]:n.bind(r,r);let s;Bt(e)?s=e:(s=e.handler,t=e);const o=Mf(this),a=wy(i,s.bind(r),t);return o(),a}function sV(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}function QG(n,e,t=wn){const r=vs(),i=cr(e),s=cs(e),o=oV(n,i),a=vA((l,c)=>{let h,d=wn,p;return iV(()=>{const y=n[i];ss(h,y)&&(h=y,c())}),{get(){return l(),t.get?t.get(h):h},set(y){const w=t.set?t.set(y):y;if(!ss(w,h)&&!(d!==wn&&ss(y,d)))return;const S=r.vnode.props;S&&(e in S||i in S||s in S)&&(`onUpdate:${e}`in S||`onUpdate:${i}`in S||`onUpdate:${s}`in S)||(h=y,c()),r.emit(`update:${e}`,w),ss(y,w)&&ss(y,d)&&!ss(w,p)&&c(),d=y,p=w}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||wn:a,done:!1}:{done:!0}}}},a}const oV=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${cr(e)}Modifiers`]||n[`${cs(e)}Modifiers`];function ZG(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||wn;let i=t;const s=e.startsWith("update:"),o=s&&oV(r,e.slice(7));o&&(o.trim&&(i=t.map(h=>qt(h)?h.trim():h)),o.number&&(i=t.map(_g)));let a,l=r[a=Ef(e)]||r[a=Ef(cr(e))];!l&&s&&(l=r[a=Ef(cs(e))]),l&&ga(l,n,6,i);const c=r[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,ga(c,n,6,i)}}function aV(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let o={},a=!1;if(!Bt(n)){const l=c=>{const h=aV(c,e,!0);h&&(a=!0,Sn(o,h))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!a?(Gn(n)&&r.set(n,null),null):(wt(s)?s.forEach(l=>o[l]=null):Sn(o,s),Gn(n)&&r.set(n,o),o)}function hS(n,e){return!n||!Eh(e)?!1:(e=e.slice(2).replace(/Once$/,""),Wn(n,e[0].toLowerCase()+e.slice(1))||Wn(n,cs(e))||Wn(n,e))}function D0(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:d,data:p,setupState:y,ctx:w,inheritAttrs:S}=n,E=Rg(n);let C,L;try{if(t.shapeFlag&4){const F=i||r,U=F;C=so(c.call(U,F,h,d,y,p,w)),L=a}else{const F=e;C=so(F.length>1?F(d,{attrs:a,slots:o,emit:l}):F(d,null)),L=e.props?a:tq(a)}}catch(F){ig.length=0,Jf(F,n,1),C=hn(oi)}let P=C;if(L&&S!==!1){const F=Object.keys(L),{shapeFlag:U}=P;F.length&&U&7&&(s&&F.some(qw)&&(L=nq(L,s)),P=Wl(P,L,!1,!0))}return t.dirs&&(P=Wl(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(t.dirs):t.dirs),t.transition&&Uc(P,t.transition),C=P,Rg(E),C}function eq(n,e=!0){let t;for(let r=0;r<n.length;r++){const i=n[r];if($c(i)){if(i.type!==oi||i.children==="v-if"){if(t)return;t=i}}else return}return t}const tq=n=>{let e;for(const t in n)(t==="class"||t==="style"||Eh(t))&&((e||(e={}))[t]=n[t]);return e},nq=(n,e)=>{const t={};for(const r in n)(!qw(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function rq(n,e,t){const{props:r,children:i,component:s}=n,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?vR(r,o,c):!!o;if(l&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==r[p]&&!hS(c,p))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?vR(r,o,c):!0:!!o;return!1}function vR(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!hS(t,s))return!0}return!1}function fS({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const Rb=n=>n.__isSuspense;let s_=0;const iq={name:"Suspense",__isSuspense:!0,process(n,e,t,r,i,s,o,a,l,c){if(n==null)oq(e,t,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!n.suspense.isInFallback){e.suspense=n.suspense,e.suspense.vnode=e,e.el=n.el;return}aq(n,e,t,r,i,o,a,l,c)}},hydrate:lq,normalize:cq},sq=iq;function Mg(n,e){const t=n.props&&n.props[e];Bt(t)&&t()}function oq(n,e,t,r,i,s,o,a,l){const{p:c,o:{createElement:h}}=l,d=h("div"),p=n.suspense=lV(n,i,r,e,d,t,s,o,a,l);c(null,p.pendingBranch=n.ssContent,d,null,r,p,s,o),p.deps>0?(Mg(n,"onPending"),Mg(n,"onFallback"),c(null,n.ssFallback,e,t,r,null,s,o),Kd(p,n.ssFallback)):p.resolve(!1,!0)}function aq(n,e,t,r,i,s,o,a,{p:l,um:c,o:{createElement:h}}){const d=e.suspense=n.suspense;d.vnode=e,e.el=n.el;const p=e.ssContent,y=e.ssFallback,{activeBranch:w,pendingBranch:S,isInFallback:E,isHydrating:C}=d;if(S)d.pendingBranch=p,Ka(p,S)?(l(S,p,d.hiddenContainer,null,i,d,s,o,a),d.deps<=0?d.resolve():E&&(C||(l(w,y,t,r,i,null,s,o,a),Kd(d,y)))):(d.pendingId=s_++,C?(d.isHydrating=!1,d.activeBranch=S):c(S,i,d),d.deps=0,d.effects.length=0,d.hiddenContainer=h("div"),E?(l(null,p,d.hiddenContainer,null,i,d,s,o,a),d.deps<=0?d.resolve():(l(w,y,t,r,i,null,s,o,a),Kd(d,y))):w&&Ka(p,w)?(l(w,p,t,r,i,d,s,o,a),d.resolve(!0)):(l(null,p,d.hiddenContainer,null,i,d,s,o,a),d.deps<=0&&d.resolve()));else if(w&&Ka(p,w))l(w,p,t,r,i,d,s,o,a),Kd(d,p);else if(Mg(e,"onPending"),d.pendingBranch=p,p.shapeFlag&512?d.pendingId=p.component.suspenseId:d.pendingId=s_++,l(null,p,d.hiddenContainer,null,i,d,s,o,a),d.deps<=0)d.resolve();else{const{timeout:L,pendingId:P}=d;L>0?setTimeout(()=>{d.pendingId===P&&d.fallback(y)},L):L===0&&d.fallback(y)}}function lV(n,e,t,r,i,s,o,a,l,c,h=!1){const{p:d,m:p,um:y,n:w,o:{parentNode:S,remove:E}}=c;let C;const L=uq(n);L&&e&&e.pendingBranch&&(C=e.pendingId,e.deps++);const P=n.props?xg(n.props.timeout):void 0,F=s,U={vnode:n,parent:e,parentComponent:t,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:s_++,timeout:typeof P=="number"?P:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(j=!1,N=!1){const{vnode:O,activeBranch:A,pendingBranch:R,pendingId:k,effects:V,parentComponent:D,container:Z}=U;let le=!1;U.isHydrating?U.isHydrating=!1:j||(le=A&&R.transition&&R.transition.mode==="out-in",le&&(A.transition.afterLeave=()=>{k===U.pendingId&&(p(R,Z,s===F?w(A):s,0),Og(V))}),A&&(S(A.el)===Z&&(s=w(A)),y(A,D,U,!0)),le||p(R,Z,s,0)),Kd(U,R),U.pendingBranch=null,U.isInFallback=!1;let Q=U.parent,re=!1;for(;Q;){if(Q.pendingBranch){Q.effects.push(...V),re=!0;break}Q=Q.parent}!re&&!le&&Og(V),U.effects=[],L&&e&&e.pendingBranch&&C===e.pendingId&&(e.deps--,e.deps===0&&!N&&e.resolve()),Mg(O,"onResolve")},fallback(j){if(!U.pendingBranch)return;const{vnode:N,activeBranch:O,parentComponent:A,container:R,namespace:k}=U;Mg(N,"onFallback");const V=w(O),D=()=>{U.isInFallback&&(d(null,j,R,V,A,null,k,a,l),Kd(U,j))},Z=j.transition&&j.transition.mode==="out-in";Z&&(O.transition.afterLeave=D),U.isInFallback=!0,y(O,A,null,!0),Z||D()},move(j,N,O){U.activeBranch&&p(U.activeBranch,j,N,O),U.container=j},next(){return U.activeBranch&&w(U.activeBranch)},registerDep(j,N,O){const A=!!U.pendingBranch;A&&U.deps++;const R=j.vnode.el;j.asyncDep.catch(k=>{Jf(k,j,0)}).then(k=>{if(j.isUnmounted||U.isUnmounted||U.pendingId!==j.suspenseId)return;j.asyncResolved=!0;const{vnode:V}=j;c_(j,k,!1),R&&(V.el=R);const D=!R&&j.subTree.el;N(j,V,S(R||j.subTree.el),R?null:w(j.subTree),U,o,O),D&&E(D),fS(j,V.el),A&&--U.deps===0&&U.resolve()})},unmount(j,N){U.isUnmounted=!0,U.activeBranch&&y(U.activeBranch,t,j,N),U.pendingBranch&&y(U.pendingBranch,t,j,N)}};return U}function lq(n,e,t,r,i,s,o,a,l){const c=e.suspense=lV(e,r,t,n.parentNode,document.createElement("div"),null,i,s,o,a,!0),h=l(n,c.pendingBranch=e.ssContent,t,c,s,o);return c.deps===0&&c.resolve(!1,!0),h}function cq(n){const{shapeFlag:e,children:t}=n,r=e&32;n.ssContent=bR(r?t.default:t),n.ssFallback=r?bR(t.fallback):hn(oi)}function bR(n){let e;if(Bt(n)){const t=Df&&n._c;t&&(n._d=!1,nt()),n=n(),t&&(n._d=!0,e=ds,uV())}return wt(n)&&(n=eq(n)),n=so(n),e&&!n.dynamicChildren&&(n.dynamicChildren=e.filter(t=>t!==n)),n}function cV(n,e){e&&e.pendingBranch?wt(n)?e.effects.push(...n):e.effects.push(n):Og(n)}function Kd(n,e){n.activeBranch=e;const{vnode:t,parentComponent:r}=n;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;t.el=i,r&&r.subTree===t&&(r.vnode.el=i,fS(r,i))}function uq(n){const e=n.props&&n.props.suspensible;return e!=null&&e!==!1}const lr=Symbol.for("v-fgt"),Ju=Symbol.for("v-txt"),oi=Symbol.for("v-cmt"),Af=Symbol.for("v-stc"),ig=[];let ds=null;function nt(n=!1){ig.push(ds=n?null:[])}function uV(){ig.pop(),ds=ig[ig.length-1]||null}let Df=1;function o_(n,e=!1){Df+=n,n<0&&ds&&e&&(ds.hasOnce=!0)}function hV(n){return n.dynamicChildren=Df>0?ds||wf:null,uV(),Df>0&&ds&&ds.push(n),n}function pt(n,e,t,r,i,s){return hV(Qe(n,e,t,r,i,s,!0))}function Za(n,e,t,r,i){return hV(hn(n,e,t,r,i,!0))}function $c(n){return n?n.__v_isVNode===!0:!1}function Ka(n,e){return n.type===e.type&&n.key===e.key}function hq(n){}const fV=({key:n})=>n??null,M0=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?qt(n)||gr(n)||Bt(n)?{i:yi,r:n,k:e,f:!!t}:n:null);function Qe(n,e=null,t=null,r=0,i=null,s=n===lr?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&fV(e),ref:e&&M0(e),scopeId:oS,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:yi};return a?(MA(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=qt(t)?8:16),Df>0&&!o&&ds&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&ds.push(l),l}const hn=fq;function fq(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===ML)&&(n=oi),$c(n)){const a=Wl(n,e,!0);return t&&MA(a,t),Df>0&&!s&&ds&&(a.shapeFlag&6?ds[ds.indexOf(n)]=a:ds.push(a)),a.patchFlag=-2,a}if(bq(n)&&(n=n.__vccOpts),e){e=dV(e);let{class:a,style:l}=e;a&&!qt(a)&&(e.class=pi(a)),Gn(l)&&(iS(l)&&!wt(l)&&(l=Sn({},l)),e.style=Xf(l))}const o=qt(n)?1:Rb(n)?128:bL(n)?64:Gn(n)?4:Bt(n)?2:0;return Qe(n,e,t,r,i,o,s,!0)}function dV(n){return n?iS(n)||WL(n)?Sn({},n):n:null}function Wl(n,e,t=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=n,c=e?NA(i||{},e):i,h={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&fV(c),ref:e&&e.ref?t&&s?wt(s)?s.concat(M0(e)):[s,M0(e)]:M0(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==lr?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Wl(n.ssContent),ssFallback:n.ssFallback&&Wl(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&r&&Uc(h,l.clone(h)),h}function PA(n=" ",e=0){return hn(Ju,null,n,e)}function DA(n,e){const t=hn(Af,null,n);return t.staticCount=e,t}function Br(n="",e=!1){return e?(nt(),Za(oi,null,n)):hn(oi,null,n)}function so(n){return n==null||typeof n=="boolean"?hn(oi):wt(n)?hn(lr,null,n.slice()):$c(n)?Ru(n):hn(Ju,null,String(n))}function Ru(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Wl(n)}function MA(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(wt(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),MA(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!WL(e)?e._ctx=yi:i===3&&yi&&(yi.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Bt(e)?(e={default:e,_ctx:yi},t=32):(e=String(e),r&64?(t=16,e=[PA(e)]):t=8);n.children=e,n.shapeFlag|=t}function NA(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=pi([e.class,r.class]));else if(i==="style")e.style=Xf([e.style,r.style]);else if(Eh(i)){const s=e[i],o=r[i];o&&s!==o&&!(wt(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function no(n,e,t,r=null){ga(n,e,7,[t,r])}const dq=UL();let pq=0;function pV(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||dq,s={uid:pq++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new hA(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jL(r,i),emitsOptions:aV(r,i),emit:null,emitted:null,propsDefaults:wn,inheritAttrs:r.inheritAttrs,ctx:wn,data:wn,props:wn,attrs:wn,slots:wn,refs:wn,setupState:wn,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=ZG.bind(null,s),n.ce&&n.ce(s),s}let gi=null;const vs=()=>gi||yi;let Pb,a_;{const n=gy(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Pb=e("__VUE_INSTANCE_SETTERS__",t=>gi=t),a_=e("__VUE_SSR_SETTERS__",t=>ap=t)}const Mf=n=>{const e=gi;return Pb(n),n.scope.on(),()=>{n.scope.off(),Pb(e)}},l_=()=>{gi&&gi.scope.off(),Pb(null)};function mV(n){return n.vnode.shapeFlag&4}let ap=!1;function gV(n,e=!1,t=!1){e&&a_(e);const{props:r,children:i}=n.vnode,s=mV(n);WG(n,r,s,e),GG(n,i,t);const o=s?mq(n,e):void 0;return e&&a_(!1),o}function mq(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,t_);const{setup:r}=t;if(r){xh();const i=n.setupContext=r.length>1?vV(n):null,s=Mf(n),o=Np(r,n,0,[n.props,i]),a=Xw(o);if(Ah(),s(),(a||n.sp)&&!Xu(n)&&_A(n),a){if(o.then(l_,l_),e)return o.then(l=>{c_(n,l,e)}).catch(l=>{Jf(l,n,0)});n.asyncDep=o}else c_(n,o,e)}else yV(n,e)}function c_(n,e,t){Bt(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Gn(e)&&(n.setupState=yA(e)),yV(n,t)}let Db,u_;function gq(n){Db=n,u_=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,TG))}}const yq=()=>!Db;function yV(n,e,t){const r=n.type;if(!n.render){if(!e&&Db&&!r.render){const i=r.template||OA(n).template;if(i){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Sn(Sn({isCustomElement:s,delimiters:a},o),l);r.render=Db(i,c)}}n.render=r.render||Ci,u_&&u_(n)}{const i=Mf(n);xh();try{LG(n)}finally{Ah(),i()}}}const vq={get(n,e){return os(n,"get",""),n[e]}};function vV(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,vq),slots:n.slots,emit:n.emit,expose:e}}function Sy(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(yA(sS(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in rg)return rg[t](n)},has(e,t){return t in e||t in rg}})):n.proxy}function h_(n,e=!0){return Bt(n)?n.displayName||n.name:n.name||e&&n.__name}function bq(n){return Bt(n)&&"__vccOpts"in n}const gn=(n,e)=>V7(n,e,ap);function LA(n,e,t){const r=arguments.length;return r===2?Gn(e)&&!wt(e)?$c(e)?hn(n,null,[e]):hn(n,e):hn(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&$c(t)&&(t=[t]),hn(n,e,t))}function wq(){}function Sq(n,e,t,r){const i=t[r];if(i&&bV(i,n))return i;const s=e();return s.memo=n.slice(),s.cacheIndex=r,t[r]=s}function bV(n,e){const t=n.memo;if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(ss(t[r],e[r]))return!1;return Df>0&&ds&&ds.push(n),!0}const wV="3.5.13",Eq=Ci,Tq=K7,_q=Od,xq=yL,Aq={createComponentInstance:pV,setupComponent:gV,renderComponentRoot:D0,setCurrentRenderingInstance:Rg,isVNode:$c,normalizeVNode:so,getComponentPublicInstance:Sy,ensureValidVNode:CA,pushWarningContext:H7,popWarningContext:W7},Iq=Aq,Cq=null,Oq=null,kq=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let f_;const wR=typeof window<"u"&&window.trustedTypes;if(wR)try{f_=wR.createPolicy("vue",{createHTML:n=>n})}catch{}const SV=f_?n=>f_.createHTML(n):n=>n,Rq="http://www.w3.org/2000/svg",Pq="http://www.w3.org/1998/Math/MathML",wc=typeof document<"u"?document:null,SR=wc&&wc.createElement("template"),Dq={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?wc.createElementNS(Rq,n):e==="mathml"?wc.createElementNS(Pq,n):t?wc.createElement(n,{is:t}):wc.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>wc.createTextNode(n),createComment:n=>wc.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>wc.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const o=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{SR.innerHTML=SV(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const a=SR.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Su="transition",Sm="animation",lp=Symbol("_vtc"),EV={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TV=Sn({},EA,EV),Mq=n=>(n.displayName="Transition",n.props=TV,n),d_=Mq((n,{slots:e})=>LA(_L,_V(n),e)),tf=(n,e=[])=>{wt(n)?n.forEach(t=>t(...e)):n&&n(...e)},ER=n=>n?wt(n)?n.some(e=>e.length>1):n.length>1:!1;function _V(n){const e={};for(const V in n)V in EV||(e[V]=n[V]);if(n.css===!1)return e;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:h=a,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:p=`${t}-leave-active`,leaveToClass:y=`${t}-leave-to`}=n,w=Nq(i),S=w&&w[0],E=w&&w[1],{onBeforeEnter:C,onEnter:L,onEnterCancelled:P,onLeave:F,onLeaveCancelled:U,onBeforeAppear:j=C,onAppear:N=L,onAppearCancelled:O=P}=e,A=(V,D,Z,le)=>{V._enterCancelled=le,Au(V,D?h:a),Au(V,D?c:o),Z&&Z()},R=(V,D)=>{V._isLeaving=!1,Au(V,d),Au(V,y),Au(V,p),D&&D()},k=V=>(D,Z)=>{const le=V?N:L,Q=()=>A(D,V,Z);tf(le,[D,Q]),TR(()=>{Au(D,V?l:s),Al(D,V?h:a),ER(le)||_R(D,r,S,Q)})};return Sn(e,{onBeforeEnter(V){tf(C,[V]),Al(V,s),Al(V,o)},onBeforeAppear(V){tf(j,[V]),Al(V,l),Al(V,c)},onEnter:k(!1),onAppear:k(!0),onLeave(V,D){V._isLeaving=!0;const Z=()=>R(V,D);Al(V,d),V._enterCancelled?(Al(V,p),p_()):(p_(),Al(V,p)),TR(()=>{V._isLeaving&&(Au(V,d),Al(V,y),ER(F)||_R(V,r,E,Z))}),tf(F,[V,Z])},onEnterCancelled(V){A(V,!1,void 0,!0),tf(P,[V])},onAppearCancelled(V){A(V,!0,void 0,!0),tf(O,[V])},onLeaveCancelled(V){R(V),tf(U,[V])}})}function Nq(n){if(n==null)return null;if(Gn(n))return[CT(n.enter),CT(n.leave)];{const e=CT(n);return[e,e]}}function CT(n){return xg(n)}function Al(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[lp]||(n[lp]=new Set)).add(e)}function Au(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[lp];t&&(t.delete(e),t.size||(n[lp]=void 0))}function TR(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let Lq=0;function _R(n,e,t,r){const i=n._endId=++Lq,s=()=>{i===n._endId&&r()};if(t!=null)return setTimeout(s,t);const{type:o,timeout:a,propCount:l}=xV(n,e);if(!o)return r();const c=o+"end";let h=0;const d=()=>{n.removeEventListener(c,p),s()},p=y=>{y.target===n&&++h>=l&&d()};setTimeout(()=>{h<l&&d()},a+1),n.addEventListener(c,p)}function xV(n,e){const t=window.getComputedStyle(n),r=w=>(t[w]||"").split(", "),i=r(`${Su}Delay`),s=r(`${Su}Duration`),o=xR(i,s),a=r(`${Sm}Delay`),l=r(`${Sm}Duration`),c=xR(a,l);let h=null,d=0,p=0;e===Su?o>0&&(h=Su,d=o,p=s.length):e===Sm?c>0&&(h=Sm,d=c,p=l.length):(d=Math.max(o,c),h=d>0?o>c?Su:Sm:null,p=h?h===Su?s.length:l.length:0);const y=h===Su&&/\b(transform|all)(,|$)/.test(r(`${Su}Property`).toString());return{type:h,timeout:d,propCount:p,hasTransform:y}}function xR(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>AR(t)+AR(n[r])))}function AR(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function p_(){return document.body.offsetHeight}function Vq(n,e,t){const r=n[lp];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Mb=Symbol("_vod"),AV=Symbol("_vsh"),IV={beforeMount(n,{value:e},{transition:t}){n[Mb]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Em(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),Em(n,!0),r.enter(n)):r.leave(n,()=>{Em(n,!1)}):Em(n,e))},beforeUnmount(n,{value:e}){Em(n,e)}};function Em(n,e){n.style.display=e?n[Mb]:"none",n[AV]=!e}function Fq(){IV.getSSRProps=({value:n})=>{if(!n)return{style:{display:"none"}}}}const CV=Symbol("");function Bq(n){const e=vs();if(!e)return;const t=e.ut=(i=n(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>Nb(s,i))},r=()=>{const i=n(e.proxy);e.ce?Nb(e.ce,i):m_(e.subTree,i),t(i)};xA(()=>{Og(r)}),Fs(()=>{wi(r,Ci,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),by(()=>i.disconnect())})}function m_(n,e){if(n.shapeFlag&128){const t=n.suspense;n=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{m_(t.activeBranch,e)})}for(;n.component;)n=n.component.subTree;if(n.shapeFlag&1&&n.el)Nb(n.el,e);else if(n.type===lr)n.children.forEach(t=>m_(t,e));else if(n.type===Af){let{el:t,anchor:r}=n;for(;t&&(Nb(t,e),t!==r);)t=t.nextSibling}}function Nb(n,e){if(n.nodeType===1){const t=n.style;let r="";for(const i in e)t.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;t[CV]=r}}const Uq=/(^|;)\s*display\s*:/;function $q(n,e,t){const r=n.style,i=qt(t);let s=!1;if(t&&!i){if(e)if(qt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&N0(r,a,"")}else for(const o in e)t[o]==null&&N0(r,o,"");for(const o in t)o==="display"&&(s=!0),N0(r,o,t[o])}else if(i){if(e!==t){const o=r[CV];o&&(t+=";"+o),r.cssText=t,s=Uq.test(t)}}else e&&n.removeAttribute("style");Mb in n&&(n[Mb]=s?r.display:"",n[AV]&&(r.display="none"))}const IR=/\s*!important$/;function N0(n,e,t){if(wt(t))t.forEach(r=>N0(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=Hq(n,e);IR.test(t)?n.setProperty(cs(r),t.replace(IR,""),"important"):n[r]=t}}const CR=["Webkit","Moz","ms"],OT={};function Hq(n,e){const t=OT[e];if(t)return t;let r=cr(e);if(r!=="filter"&&r in n)return OT[e]=r;r=_h(r);for(let i=0;i<CR.length;i++){const s=CR[i]+r;if(s in n)return OT[e]=s}return e}const OR="http://www.w3.org/1999/xlink";function kR(n,e,t,r,i,s=W2(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(OR,e.slice(6,e.length)):n.setAttributeNS(OR,e,t):t==null||s&&!uA(t)?n.removeAttribute(e):n.setAttribute(e,s?"":Vs(t)?String(t):t)}function RR(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?SV(t):t);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=uA(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(i||e)}function _c(n,e,t,r){n.addEventListener(e,t,r)}function Wq(n,e,t,r){n.removeEventListener(e,t,r)}const PR=Symbol("_vei");function zq(n,e,t,r,i=null){const s=n[PR]||(n[PR]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=jq(e);if(r){const c=s[e]=qq(r,i);_c(n,a,c,l)}else o&&(Wq(n,a,o,l),s[e]=void 0)}}const DR=/(?:Once|Passive|Capture)$/;function jq(n){let e;if(DR.test(n)){e={};let r;for(;r=n.match(DR);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):cs(n.slice(2)),e]}let kT=0;const Kq=Promise.resolve(),Gq=()=>kT||(Kq.then(()=>kT=0),kT=Date.now());function qq(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;ga(Yq(r,t.value),e,5,[r])};return t.value=n,t.attached=Gq(),t}function Yq(n,e){if(wt(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const MR=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,Xq=(n,e,t,r,i,s)=>{const o=i==="svg";e==="class"?Vq(n,r,o):e==="style"?$q(n,t,r):Eh(e)?qw(e)||zq(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Jq(n,e,r,o))?(RR(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&kR(n,e,r,o,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!qt(r))?RR(n,cr(e),r,s,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),kR(n,e,r,o))};function Jq(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&MR(e)&&Bt(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return MR(e)&&qt(t)?!1:e in n}const NR={};/*! #__NO_SIDE_EFFECTS__ */function OV(n,e,t){const r=TA(n,e);my(r)&&Sn(r,e);class i extends dS{constructor(o){super(r,o,t)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const Qq=(n,e)=>OV(n,e,$V),Zq=typeof HTMLElement<"u"?HTMLElement:class{};class dS extends Zq{constructor(e,t={},r=Vb){super(),this._def=e,this._props=t,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==Vb?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof dS){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,Qa(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let a;if(s&&!wt(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=xg(this._props[l])),(a||(a=Object.create(null)))[cr(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},t=this._def.__asyncLoader;t?this._pendingResolve=t().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const t=this._instance&&this._instance.exposed;if(t)for(const r in t)Wn(this,r)||Object.defineProperty(this,r,{get:()=>sa(t[r])})}_resolveProps(e){const{props:t}=e,r=wt(t)?t:Object.keys(t||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(cr))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const t=this.hasAttribute(e);let r=t?this.getAttribute(e):NR;const i=cr(e);t&&this._numberProps&&this._numberProps[i]&&(r=xg(r)),this._setProp(i,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,t,r=!0,i=!1){if(t!==this._props[e]&&(t===NR?delete this._props[e]:(this._props[e]=t,e==="key"&&this._app&&(this._app._ceVNode.key=t)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),t===!0?this.setAttribute(cs(e),""):typeof t=="string"||typeof t=="number"?this.setAttribute(cs(e),t+""):t||this.removeAttribute(cs(e)),s&&s.observe(this,{attributes:!0})}}_update(){UV(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const t=hn(this._def,Sn(e,this._props));return this._instance||(t.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,my(o[0])?Sn({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),cs(s)!==s&&i(cs(s),o)},this._setParent()}),t}_applyStyles(e,t){if(!e)return;if(t){if(t===this._def||this._styleChildren.has(t))return;this._styleChildren.add(t)}const r=this._nonce;for(let i=e.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=e[i],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let t;for(;t=this.firstChild;){const r=t.nodeType===1&&t.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(t),this.removeChild(t)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),t=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const i=e[r],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(t&&l.nodeType===1){const c=t+"-s",h=document.createTreeWalker(l,1);l.setAttribute(c,"");let d;for(;d=h.nextNode();)d.setAttribute(c,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function kV(n){const e=vs(),t=e&&e.ce;return t||null}function eY(){const n=kV();return n&&n.shadowRoot}function tY(n="$style"){{const e=vs();if(!e)return wn;const t=e.type.__cssModules;if(!t)return wn;const r=t[n];return r||wn}}const RV=new WeakMap,PV=new WeakMap,Lb=Symbol("_moveCb"),LR=Symbol("_enterCb"),nY=n=>(delete n.props.mode,n),rY=nY({name:"TransitionGroup",props:Sn({},TV,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=vs(),r=SA();let i,s;return cS(()=>{if(!i.length)return;const o=n.moveClass||`${n.name||"v"}-move`;if(!lY(i[0].el,t.vnode.el,o))return;i.forEach(sY),i.forEach(oY);const a=i.filter(aY);p_(),a.forEach(l=>{const c=l.el,h=c.style;Al(c,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=c[Lb]=p=>{p&&p.target!==c||(!p||/transform$/.test(p.propertyName))&&(c.removeEventListener("transitionend",d),c[Lb]=null,Au(c,o))};c.addEventListener("transitionend",d)})}),()=>{const o=_n(n),a=_V(o);let l=o.tag||lr;if(i=[],s)for(let c=0;c<s.length;c++){const h=s[c];h.el&&h.el instanceof Element&&(i.push(h),Uc(h,op(h,a,r,t)),RV.set(h,h.el.getBoundingClientRect()))}s=e.default?aS(e.default()):[];for(let c=0;c<s.length;c++){const h=s[c];h.key!=null&&Uc(h,op(h,a,r,t))}return hn(l,null,s)}}}),iY=rY;function sY(n){const e=n.el;e[Lb]&&e[Lb](),e[LR]&&e[LR]()}function oY(n){PV.set(n,n.el.getBoundingClientRect())}function aY(n){const e=RV.get(n),t=PV.get(n),r=e.left-t.left,i=e.top-t.top;if(r||i){const s=n.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",n}}function lY(n,e,t){const r=n.cloneNode(),i=n[lp];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),t.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=xV(r);return s.removeChild(r),o}const lh=n=>{const e=n.props["onUpdate:modelValue"]||!1;return wt(e)?t=>Tf(e,t):e};function cY(n){n.target.composing=!0}function VR(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ua=Symbol("_assign"),el={created(n,{modifiers:{lazy:e,trim:t,number:r}},i){n[ua]=lh(i);const s=r||i.props&&i.props.type==="number";_c(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),s&&(a=_g(a)),n[ua](a)}),t&&_c(n,"change",()=>{n.value=n.value.trim()}),e||(_c(n,"compositionstart",cY),_c(n,"compositionend",VR),_c(n,"change",VR))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:i,number:s}},o){if(n[ua]=lh(o),n.composing)return;const a=(s||n.type==="number")&&!/^0\d/.test(n.value)?_g(n.value):n.value,l=e??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||i&&n.value.trim()===l)||(n.value=l))}},VA={deep:!0,created(n,e,t){n[ua]=lh(t),_c(n,"change",()=>{const r=n._modelValue,i=cp(n),s=n.checked,o=n[ua];if(wt(r)){const a=yy(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(Th(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(DV(n,s))})},mounted:FR,beforeUpdate(n,e,t){n[ua]=lh(t),FR(n,e,t)}};function FR(n,{value:e,oldValue:t},r){n._modelValue=e;let i;if(wt(e))i=yy(e,r.props.value)>-1;else if(Th(e))i=e.has(r.props.value);else{if(e===t)return;i=Bc(e,DV(n,!0))}n.checked!==i&&(n.checked=i)}const FA={created(n,{value:e},t){n.checked=Bc(e,t.props.value),n[ua]=lh(t),_c(n,"change",()=>{n[ua](cp(n))})},beforeUpdate(n,{value:e,oldValue:t},r){n[ua]=lh(r),e!==t&&(n.checked=Bc(e,r.props.value))}},BA={deep:!0,created(n,{value:e,modifiers:{number:t}},r){const i=Th(e);_c(n,"change",()=>{const s=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?_g(cp(o)):cp(o));n[ua](n.multiple?i?new Set(s):s:s[0]),n._assigning=!0,Qa(()=>{n._assigning=!1})}),n[ua]=lh(r)},mounted(n,{value:e}){BR(n,e)},beforeUpdate(n,e,t){n[ua]=lh(t)},updated(n,{value:e}){n._assigning||BR(n,e)}};function BR(n,e){const t=n.multiple,r=wt(e);if(!(t&&!r&&!Th(e))){for(let i=0,s=n.options.length;i<s;i++){const o=n.options[i],a=cp(o);if(t)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=yy(e,a)>-1}else o.selected=e.has(a);else if(Bc(cp(o),e)){n.selectedIndex!==i&&(n.selectedIndex=i);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function cp(n){return"_value"in n?n._value:n.value}function DV(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const MV={created(n,e,t){Vv(n,e,t,null,"created")},mounted(n,e,t){Vv(n,e,t,null,"mounted")},beforeUpdate(n,e,t,r){Vv(n,e,t,r,"beforeUpdate")},updated(n,e,t,r){Vv(n,e,t,r,"updated")}};function NV(n,e){switch(n){case"SELECT":return BA;case"TEXTAREA":return el;default:switch(e){case"checkbox":return VA;case"radio":return FA;default:return el}}}function Vv(n,e,t,r,i){const o=NV(n.tagName,t.props&&t.props.type)[i];o&&o(n,e,t,r)}function uY(){el.getSSRProps=({value:n})=>({value:n}),FA.getSSRProps=({value:n},e)=>{if(e.props&&Bc(e.props.value,n))return{checked:!0}},VA.getSSRProps=({value:n},e)=>{if(wt(n)){if(e.props&&yy(n,e.props.value)>-1)return{checked:!0}}else if(Th(n)){if(e.props&&n.has(e.props.value))return{checked:!0}}else if(n)return{checked:!0}},MV.getSSRProps=(n,e)=>{if(typeof e.type!="string")return;const t=NV(e.type.toUpperCase(),e.props&&e.props.type);if(t.getSSRProps)return t.getSSRProps(n,e)}}const hY=["ctrl","shift","alt","meta"],fY={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>hY.some(t=>n[`${t}Key`]&&!e.includes(t))},Ud=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=fY[e[o]];if(a&&a(i,e))return}return n(i,...s)})},dY={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},LV=(n,e)=>{const t=n._withKeys||(n._withKeys={}),r=e.join(".");return t[r]||(t[r]=i=>{if(!("key"in i))return;const s=cs(i.key);if(e.some(o=>o===s||dY[o]===s))return n(i)})},VV=Sn({patchProp:Xq},Dq);let sg,UR=!1;function FV(){return sg||(sg=XL(VV))}function BV(){return sg=UR?sg:JL(VV),UR=!0,sg}const UV=(...n)=>{FV().render(...n)},pY=(...n)=>{BV().hydrate(...n)},Vb=(...n)=>{const e=FV().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=WV(r);if(!i)return;const s=e._component;!Bt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,HV(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},$V=(...n)=>{const e=BV().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=WV(r);if(i)return t(i,!0,HV(i))},e};function HV(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function WV(n){return qt(n)?document.querySelector(n):n}let $R=!1;const mY=()=>{$R||($R=!0,uY(),Fq())},gY=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:_L,BaseTransitionPropsValidators:EA,Comment:oi,DeprecationTypes:kq,EffectScope:hA,ErrorCodes:j7,ErrorTypeStrings:Tq,Fragment:lr,KeepAlive:yG,ReactiveEffect:Ag,Static:Af,Suspense:sq,Teleport:Z7,Text:Ju,TrackOpTypes:F7,Transition:d_,TransitionGroup:iY,TriggerOpTypes:B7,VueElement:dS,assertNumber:z7,callWithAsyncErrorHandling:ga,callWithErrorHandling:Np,camelize:cr,capitalize:_h,cloneVNode:Wl,compatUtils:Oq,computed:gn,createApp:Vb,createBlock:Za,createCommentVNode:Br,createElementBlock:pt,createElementVNode:Qe,createHydrationRenderer:JL,createPropsRestProxy:MG,createRenderer:XL,createSSRApp:$V,createSlots:SG,createStaticVNode:DA,createTextVNode:PA,createVNode:hn,customRef:vA,defineAsyncComponent:mG,defineComponent:TA,defineCustomElement:OV,defineEmits:xG,defineExpose:AG,defineModel:OG,defineOptions:IG,defineProps:_G,defineSSRCustomElement:Qq,defineSlots:CG,devtools:_q,effect:c7,effectScope:fA,getCurrentInstance:vs,getCurrentScope:Zw,getCurrentWatcher:U7,getTransitionRawChildren:aS,guardReactiveProps:dV,h:LA,handleError:Jf,hasInjectionContext:uS,hydrate:pY,hydrateOnIdle:cG,hydrateOnInteraction:dG,hydrateOnMediaQuery:fG,hydrateOnVisible:hG,initCustomFormatter:wq,initDirectivesForSSR:mY,inject:ks,isMemoSame:bV,isProxy:iS,isReactive:Xa,isReadonly:oh,isRef:gr,isRuntimeOnly:yq,isShallow:Vo,isVNode:$c,markRaw:sS,mergeDefaults:PG,mergeModels:DG,mergeProps:NA,nextTick:Qa,normalizeClass:pi,normalizeProps:cA,normalizeStyle:Xf,onActivated:AL,onBeforeMount:OL,onBeforeUnmount:Qf,onBeforeUpdate:xA,onDeactivated:IL,onErrorCaptured:DL,onMounted:Fs,onRenderTracked:PL,onRenderTriggered:RL,onScopeDispose:dA,onServerPrefetch:kL,onUnmounted:by,onUpdated:cS,onWatcherCleanup:fL,openBlock:nt,popScopeId:X7,provide:kl,proxyRefs:yA,pushScopeId:Y7,queuePostFlushCb:Og,reactive:Mp,readonly:ro,ref:Nt,registerRuntimeCompiler:gq,render:UV,renderList:Pf,renderSlot:LL,resolveComponent:es,resolveDirective:wG,resolveDynamicComponent:NL,resolveFilter:Cq,resolveTransitionHooks:op,setBlockTracking:o_,setDevtoolsHook:xq,setTransitionHooks:Uc,shallowReactive:lL,shallowReadonly:O7,shallowRef:ah,ssrContextKey:tV,ssrUtils:Iq,stop:u7,toDisplayString:or,toHandlerKey:Ef,toHandlers:EG,toRaw:_n,toRef:bA,toRefs:uL,toValue:Ja,transformVNodeArgs:hq,triggerRef:R7,unref:sa,useAttrs:RG,useCssModule:tY,useCssVars:Bq,useHost:kV,useId:tG,useModel:QG,useSSRContext:nV,useShadowRoot:eY,useSlots:VL,useTemplateRef:nG,useTransitionState:SA,vModelCheckbox:VA,vModelDynamic:MV,vModelRadio:FA,vModelSelect:BA,vModelText:el,vShow:IV,version:wV,warn:Eq,watch:wi,watchEffect:rV,watchPostEffect:XG,watchSyncEffect:iV,withAsyncContext:NG,withCtx:Tc,withDefaults:kG,withDirectives:Pc,withKeys:LV,withMemo:Sq,withModifiers:Ud,withScopeId:J7},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v3.0.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let zV;const pS=n=>zV=n,jV=Symbol();function g_(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var og;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(og||(og={}));function yY(){const n=fA(!0),e=n.run(()=>Nt({}));let t=[],r=[];const i=sS({install(s){pS(i),i._a=s,s.provide(jV,i),s.config.globalProperties.$pinia=i,r.forEach(o=>t.push(o)),r=[]},use(s){return this._a?t.push(s):r.push(s),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return i}const KV=()=>{};function HR(n,e,t,r=KV){n.push(e);const i=()=>{const s=n.indexOf(e);s>-1&&(n.splice(s,1),r())};return!t&&Zw()&&dA(i),i}function bd(n,...e){n.slice().forEach(t=>{t(...e)})}const vY=n=>n(),WR=Symbol(),RT=Symbol();function y_(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,r)=>n.set(r,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const r=e[t],i=n[t];g_(i)&&g_(r)&&n.hasOwnProperty(t)&&!gr(r)&&!Xa(r)?n[t]=y_(i,r):n[t]=r}return n}const bY=Symbol();function wY(n){return!g_(n)||!n.hasOwnProperty(bY)}const{assign:Iu}=Object;function SY(n){return!!(gr(n)&&n.effect)}function EY(n,e,t,r){const{state:i,actions:s,getters:o}=e,a=t.state.value[n];let l;function c(){a||(t.state.value[n]=i?i():{});const h=uL(t.state.value[n]);return Iu(h,s,Object.keys(o||{}).reduce((d,p)=>(d[p]=sS(gn(()=>{pS(t);const y=t._s.get(n);return o[p].call(y,y)})),d),{}))}return l=GV(n,c,e,t,r,!0),l}function GV(n,e,t={},r,i,s){let o;const a=Iu({actions:{}},t),l={deep:!0};let c,h,d=[],p=[],y;const w=r.state.value[n];!s&&!w&&(r.state.value[n]={}),Nt({});let S;function E(O){let A;c=h=!1,typeof O=="function"?(O(r.state.value[n]),A={type:og.patchFunction,storeId:n,events:y}):(y_(r.state.value[n],O),A={type:og.patchObject,payload:O,storeId:n,events:y});const R=S=Symbol();Qa().then(()=>{S===R&&(c=!0)}),h=!0,bd(d,A,r.state.value[n])}const C=s?function(){const{state:A}=t,R=A?A():{};this.$patch(k=>{Iu(k,R)})}:KV;function L(){o.stop(),d=[],p=[],r._s.delete(n)}const P=(O,A="")=>{if(WR in O)return O[RT]=A,O;const R=function(){pS(r);const k=Array.from(arguments),V=[],D=[];function Z(re){V.push(re)}function le(re){D.push(re)}bd(p,{args:k,name:R[RT],store:U,after:Z,onError:le});let Q;try{Q=O.apply(this&&this.$id===n?this:U,k)}catch(re){throw bd(D,re),re}return Q instanceof Promise?Q.then(re=>(bd(V,re),re)).catch(re=>(bd(D,re),Promise.reject(re))):(bd(V,Q),Q)};return R[WR]=!0,R[RT]=A,R},F={_p:r,$id:n,$onAction:HR.bind(null,p),$patch:E,$reset:C,$subscribe(O,A={}){const R=HR(d,O,A.detached,()=>k()),k=o.run(()=>wi(()=>r.state.value[n],V=>{(A.flush==="sync"?h:c)&&O({storeId:n,type:og.direct,events:y},V)},Iu({},l,A)));return R},$dispose:L},U=Mp(F);r._s.set(n,U);const N=(r._a&&r._a.runWithContext||vY)(()=>r._e.run(()=>(o=fA()).run(()=>e({action:P}))));for(const O in N){const A=N[O];if(gr(A)&&!SY(A)||Xa(A))s||(w&&wY(A)&&(gr(A)?A.value=w[O]:y_(A,w[O])),r.state.value[n][O]=A);else if(typeof A=="function"){const R=P(A,O);N[O]=R,a.actions[O]=A}}return Iu(U,N),Iu(_n(U),N),Object.defineProperty(U,"$state",{get:()=>r.state.value[n],set:O=>{E(A=>{Iu(A,O)})}}),r._p.forEach(O=>{Iu(U,o.run(()=>O({store:U,app:r._a,pinia:r,options:a})))}),w&&s&&t.hydrate&&t.hydrate(U.$state,w),c=!0,h=!0,U}/*! #__NO_SIDE_EFFECTS__ */function UA(n,e,t){let r;const i=typeof e=="function";r=i?t:e;function s(o,a){const l=uS();return o=o||(l?ks(jV,null):null),o&&pS(o),o=zV,o._s.has(n)||(i?GV(n,e,r,o):EY(n,r,o)),o._s.get(n)}return s.$id=n,s}function TY(n){const e=_n(n),t={};for(const r in e){const i=e[r];i.effect?t[r]=gn({get:()=>n[r],set(s){n[r]=s}}):(gr(i)||Xa(i))&&(t[r]=bA(n,r))}return t}function _Y(n){return Zw()?(dA(n),!0):!1}const PT=new WeakMap,xY=(...n)=>{var e;const t=n[0],r=(e=vs())==null?void 0:e.proxy;if(r==null&&!uS())throw new Error("injectLocal must be called in setup");return r&&PT.has(r)&&t in PT.get(r)?PT.get(r)[t]:ks(...n)},AY=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const IY=Object.prototype.toString,CY=n=>IY.call(n)==="[object Object]",OY=()=>{};function kY(n,e){function t(...r){return new Promise((i,s)=>{Promise.resolve(n(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(i).catch(s)})}return t}const qV=n=>n();function RY(n=qV,e={}){const{initialState:t="active"}=e,r=YV(t==="active");function i(){r.value=!1}function s(){r.value=!0}const o=(...a)=>{r.value&&n(...a)};return{isActive:ro(r),pause:i,resume:s,eventFilter:o}}function zR(n){return n.endsWith("rem")?Number.parseFloat(n)*16:Number.parseFloat(n)}function PY(n){return vs()}function DT(n){return Array.isArray(n)?n:[n]}function YV(...n){if(n.length!==1)return bA(...n);const e=n[0];return typeof e=="function"?ro(vA(()=>({get:e,set:OY}))):Nt(e)}function DY(n,e,t={}){const{eventFilter:r=qV,...i}=t;return wi(n,kY(r,e),i)}function MY(n,e,t={}){const{eventFilter:r,initialState:i="active",...s}=t,{eventFilter:o,pause:a,resume:l,isActive:c}=RY(r,{initialState:i});return{stop:DY(n,e,{...s,eventFilter:o}),pause:a,resume:l,isActive:c}}function XV(n,e=!0,t){PY()?Fs(n,t):e?n():Qa(n)}function NY(n=!1,e={}){const{truthyValue:t=!0,falsyValue:r=!1}=e,i=gr(n),s=Nt(n);function o(a){if(arguments.length)return s.value=a,s.value;{const l=Ja(t);return s.value=s.value===l?Ja(r):l,s.value}}return i?o:[s,o]}function LY(n,e,t){return wi(n,e,{...t,immediate:!0})}const up=AY?window:void 0;function JV(n){var e;const t=Ja(n);return(e=t==null?void 0:t.$el)!=null?e:t}function Gd(...n){const e=[],t=()=>{e.forEach(a=>a()),e.length=0},r=(a,l,c,h)=>(a.addEventListener(l,c,h),()=>a.removeEventListener(l,c,h)),i=gn(()=>{const a=DT(Ja(n[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),s=LY(()=>{var a,l;return[(l=(a=i.value)==null?void 0:a.map(c=>JV(c)))!=null?l:[up].filter(c=>c!=null),DT(Ja(i.value?n[1]:n[0])),DT(sa(i.value?n[2]:n[1])),Ja(i.value?n[3]:n[2])]},([a,l,c,h])=>{if(t(),!(a!=null&&a.length)||!(l!=null&&l.length)||!(c!=null&&c.length))return;const d=CY(h)?{...h}:h;e.push(...a.flatMap(p=>l.flatMap(y=>c.map(w=>r(p,y,w,d)))))},{flush:"post"}),o=()=>{s(),t()};return _Y(t),o}function VY(){const n=ah(!1),e=vs();return e&&Fs(()=>{n.value=!0},e),n}function QV(n){const e=VY();return gn(()=>(e.value,!!n()))}const FY=Symbol("vueuse-ssr-width");function BY(){const n=uS()?xY(FY,null):null;return typeof n=="number"?n:void 0}function UY(n,e={}){const{window:t=up,ssrWidth:r=BY()}=e,i=QV(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function"),s=Nt(typeof r=="number"),o=ah(),a=ah(!1),l=c=>{a.value=c.matches};return rV(()=>{if(s.value){s.value=!i.value;const c=Ja(n).split(",");a.value=c.some(h=>{const d=h.includes("not all"),p=h.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),y=h.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let w=!!(p||y);return p&&w&&(w=r>=zR(p[1])),y&&w&&(w=r<=zR(y[1])),d?!w:w});return}i.value&&(o.value=t.matchMedia(Ja(n)),a.value=o.value.matches)}),Gd(o,"change",l,{passive:!0}),gn(()=>a.value)}const Fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bv="__vueuse_ssr_handlers__",$Y=HY();function HY(){return Bv in Fv||(Fv[Bv]=Fv[Bv]||{}),Fv[Bv]}function ZV(n,e){return $Y[n]||e}function WY(n){return UY("(prefers-color-scheme: dark)",n)}function zY(n){return n==null?"any":n instanceof Set?"set":n instanceof Map?"map":n instanceof Date?"date":typeof n=="boolean"?"boolean":typeof n=="string"?"string":typeof n=="object"?"object":Number.isNaN(n)?"any":"number"}const jY={boolean:{read:n=>n==="true",write:n=>String(n)},object:{read:n=>JSON.parse(n),write:n=>JSON.stringify(n)},number:{read:n=>Number.parseFloat(n),write:n=>String(n)},any:{read:n=>n,write:n=>String(n)},string:{read:n=>n,write:n=>String(n)},map:{read:n=>new Map(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n.entries()))},set:{read:n=>new Set(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n))},date:{read:n=>new Date(n),write:n=>n.toISOString()}},jR="vueuse-storage";function KY(n,e,t,r={}){var i;const{flush:s="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:l=!0,mergeDefaults:c=!1,shallow:h,window:d=up,eventFilter:p,onError:y=k=>{console.error(k)},initOnMounted:w}=r,S=(h?ah:Nt)(typeof e=="function"?e():e),E=gn(()=>Ja(n));if(!t)try{t=ZV("getDefaultStorage",()=>{var k;return(k=up)==null?void 0:k.localStorage})()}catch(k){y(k)}if(!t)return S;const C=Ja(e),L=zY(C),P=(i=r.serializer)!=null?i:jY[L],{pause:F,resume:U}=MY(S,()=>N(S.value),{flush:s,deep:o,eventFilter:p});wi(E,()=>A(),{flush:s}),d&&a&&XV(()=>{t instanceof Storage?Gd(d,"storage",A,{passive:!0}):Gd(d,jR,R),w&&A()}),w||A();function j(k,V){if(d){const D={key:E.value,oldValue:k,newValue:V,storageArea:t};d.dispatchEvent(t instanceof Storage?new StorageEvent("storage",D):new CustomEvent(jR,{detail:D}))}}function N(k){try{const V=t.getItem(E.value);if(k==null)j(V,null),t.removeItem(E.value);else{const D=P.write(k);V!==D&&(t.setItem(E.value,D),j(V,D))}}catch(V){y(V)}}function O(k){const V=k?k.newValue:t.getItem(E.value);if(V==null)return l&&C!=null&&t.setItem(E.value,P.write(C)),C;if(!k&&c){const D=P.read(V);return typeof c=="function"?c(D,C):L==="object"&&!Array.isArray(D)?{...C,...D}:D}else return typeof V!="string"?V:P.read(V)}function A(k){if(!(k&&k.storageArea!==t)){if(k&&k.key==null){S.value=C;return}if(!(k&&k.key!==E.value)){F();try{(k==null?void 0:k.newValue)!==P.write(S.value)&&(S.value=O(k))}catch(V){y(V)}finally{k?Qa(U):U()}}}}function R(k){A(k.detail)}return S}const GY="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function qY(n={}){const{selector:e="html",attribute:t="class",initialValue:r="auto",window:i=up,storage:s,storageKey:o="vueuse-color-scheme",listenToStorageChanges:a=!0,storageRef:l,emitAuto:c,disableTransition:h=!0}=n,d={auto:"",light:"light",dark:"dark",...n.modes||{}},p=WY({window:i}),y=gn(()=>p.value?"dark":"light"),w=l||(o==null?YV(r):KY(o,r,s,{window:i,listenToStorageChanges:a})),S=gn(()=>w.value==="auto"?y.value:w.value),E=ZV("updateHTMLAttrs",(F,U,j)=>{const N=typeof F=="string"?i==null?void 0:i.document.querySelector(F):JV(F);if(!N)return;const O=new Set,A=new Set;let R=null;if(U==="class"){const V=j.split(/\s/g);Object.values(d).flatMap(D=>(D||"").split(/\s/g)).filter(Boolean).forEach(D=>{V.includes(D)?O.add(D):A.add(D)})}else R={key:U,value:j};if(O.size===0&&A.size===0&&R===null)return;let k;h&&(k=i.document.createElement("style"),k.appendChild(document.createTextNode(GY)),i.document.head.appendChild(k));for(const V of O)N.classList.add(V);for(const V of A)N.classList.remove(V);R&&N.setAttribute(R.key,R.value),h&&(i.getComputedStyle(k).opacity,document.head.removeChild(k))});function C(F){var U;E(e,t,(U=d[F])!=null?U:F)}function L(F){n.onChanged?n.onChanged(F,C):C(F)}wi(S,L,{flush:"post",immediate:!0}),XV(()=>L(S.value));const P=gn({get(){return c?w.value:S.value},set(F){w.value=F}});return Object.assign(P,{store:w,system:y,state:S})}function eF(n={}){const{valueDark:e="dark",valueLight:t=""}=n,r=qY({...n,onChanged:(o,a)=>{var l;n.onChanged?(l=n.onChanged)==null||l.call(n,o==="dark",a,o):a(o)},modes:{dark:e,light:t}}),i=gn(()=>r.system.value);return gn({get(){return r.value==="dark"},set(o){const a=o?"dark":"light";i.value===a?r.value="auto":r.value=a}})}function YY(n={}){const{window:e=up}=n,t=e==null?void 0:e.navigator,r=QV(()=>t&&"connection"in t),i=ah(!0),s=ah(!1),o=Nt(void 0),a=Nt(void 0),l=Nt(void 0),c=Nt(void 0),h=Nt(void 0),d=Nt(void 0),p=Nt("unknown"),y=r.value&&t.connection;function w(){t&&(i.value=t.onLine,o.value=i.value?void 0:Date.now(),a.value=i.value?Date.now():void 0,y&&(l.value=y.downlink,c.value=y.downlinkMax,d.value=y.effectiveType,h.value=y.rtt,s.value=y.saveData,p.value=y.type))}const S={passive:!0};return e&&(Gd(e,"offline",()=>{i.value=!1,o.value=Date.now()},S),Gd(e,"online",()=>{i.value=!0,a.value=Date.now()},S)),y&&Gd(y,"change",w,S),w(),{isSupported:r,isOnline:ro(i),saveData:ro(s),offlineAt:ro(o),onlineAt:ro(a),downlink:ro(l),downlinkMax:ro(c),effectiveType:ro(d),rtt:ro(h),type:ro(p)}}function XY(n={}){const{isOnline:e}=YY(n);return e}var Lm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function mS(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var L0={exports:{}},JY=L0.exports,KR;function QY(){return KR||(KR=1,function(n,e){(function(t,r){n.exports=r()})(JY,function(){var t=function(g,b){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,I){T.__proto__=I}||function(T,I){for(var B in I)Object.prototype.hasOwnProperty.call(I,B)&&(T[B]=I[B])})(g,b)},r=function(){return(r=Object.assign||function(g){for(var b,T=1,I=arguments.length;T<I;T++)for(var B in b=arguments[T])Object.prototype.hasOwnProperty.call(b,B)&&(g[B]=b[B]);return g}).apply(this,arguments)};function i(g,b,T){for(var I,B=0,z=b.length;B<z;B++)!I&&B in b||((I=I||Array.prototype.slice.call(b,0,B))[B]=b[B]);return g.concat(I||Array.prototype.slice.call(b))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Lm,o=Object.keys,a=Array.isArray;function l(g,b){return typeof b!="object"||o(b).forEach(function(T){g[T]=b[T]}),g}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var c=Object.getPrototypeOf,h={}.hasOwnProperty;function d(g,b){return h.call(g,b)}function p(g,b){typeof b=="function"&&(b=b(c(g))),(typeof Reflect>"u"?o:Reflect.ownKeys)(b).forEach(function(T){w(g,T,b[T])})}var y=Object.defineProperty;function w(g,b,T,I){y(g,b,l(T&&d(T,"get")&&typeof T.get=="function"?{get:T.get,set:T.set,configurable:!0}:{value:T,configurable:!0,writable:!0},I))}function S(g){return{from:function(b){return g.prototype=Object.create(b.prototype),w(g.prototype,"constructor",g),{extend:p.bind(null,g.prototype)}}}}var E=Object.getOwnPropertyDescriptor,C=[].slice;function L(g,b,T){return C.call(g,b,T)}function P(g,b){return b(g)}function F(g){if(!g)throw new Error("Assertion Failed")}function U(g){s.setImmediate?setImmediate(g):setTimeout(g,0)}function j(g,b){if(typeof b=="string"&&d(g,b))return g[b];if(!b)return g;if(typeof b!="string"){for(var T=[],I=0,B=b.length;I<B;++I){var z=j(g,b[I]);T.push(z)}return T}var J=b.indexOf(".");if(J!==-1){var ie=g[b.substr(0,J)];return ie==null?void 0:j(ie,b.substr(J+1))}}function N(g,b,T){if(g&&b!==void 0&&!("isFrozen"in Object&&Object.isFrozen(g)))if(typeof b!="string"&&"length"in b){F(typeof T!="string"&&"length"in T);for(var I=0,B=b.length;I<B;++I)N(g,b[I],T[I])}else{var z,J,ie=b.indexOf(".");ie!==-1?(z=b.substr(0,ie),(J=b.substr(ie+1))===""?T===void 0?a(g)&&!isNaN(parseInt(z))?g.splice(z,1):delete g[z]:g[z]=T:N(ie=!(ie=g[z])||!d(g,z)?g[z]={}:ie,J,T)):T===void 0?a(g)&&!isNaN(parseInt(b))?g.splice(b,1):delete g[b]:g[b]=T}}function O(g){var b,T={};for(b in g)d(g,b)&&(T[b]=g[b]);return T}var A=[].concat;function R(g){return A.apply([],g)}var ft="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(R([8,16,32,64].map(function(g){return["Int","Uint","Float"].map(function(b){return b+g+"Array"})}))).filter(function(g){return s[g]}),k=new Set(ft.map(function(g){return s[g]})),V=null;function D(g){return V=new WeakMap,g=function b(T){if(!T||typeof T!="object")return T;var I=V.get(T);if(I)return I;if(a(T)){I=[],V.set(T,I);for(var B=0,z=T.length;B<z;++B)I.push(b(T[B]))}else if(k.has(T.constructor))I=T;else{var J,ie=c(T);for(J in I=ie===Object.prototype?{}:Object.create(ie),V.set(T,I),T)d(T,J)&&(I[J]=b(T[J]))}return I}(g),V=null,g}var Z={}.toString;function le(g){return Z.call(g).slice(8,-1)}var Q=typeof Symbol<"u"?Symbol.iterator:"@@iterator",re=typeof Q=="symbol"?function(g){var b;return g!=null&&(b=g[Q])&&b.apply(g)}:function(){return null};function ae(g,b){return b=g.indexOf(b),0<=b&&g.splice(b,1),0<=b}var Ce={};function He(g){var b,T,I,B;if(arguments.length===1){if(a(g))return g.slice();if(this===Ce&&typeof g=="string")return[g];if(B=re(g)){for(T=[];!(I=B.next()).done;)T.push(I.value);return T}if(g==null)return[g];if(typeof(b=g.length)!="number")return[g];for(T=new Array(b);b--;)T[b]=g[b];return T}for(b=arguments.length,T=new Array(b);b--;)T[b]=arguments[b];return T}var Ge=typeof Symbol<"u"?function(g){return g[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},mt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],qs=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(mt),ot={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ut(g,b){this.name=g,this.message=b}function Mt(g,b){return g+". Errors: "+Object.keys(b).map(function(T){return b[T].toString()}).filter(function(T,I,B){return B.indexOf(T)===I}).join(`
`)}function _e(g,b,T,I){this.failures=b,this.failedKeys=I,this.successCount=T,this.message=Mt(g,b)}function Ne(g,b){this.name="BulkError",this.failures=Object.keys(b).map(function(T){return b[T]}),this.failuresByPos=b,this.message=Mt(g,this.failures)}S(ut).from(Error).extend({toString:function(){return this.name+": "+this.message}}),S(_e).from(ut),S(Ne).from(ut);var oe=qs.reduce(function(g,b){return g[b]=b+"Error",g},{}),Ee=ut,me=qs.reduce(function(g,b){var T=b+"Error";function I(B,z){this.name=T,B?typeof B=="string"?(this.message="".concat(B).concat(z?`
 `+z:""),this.inner=z||null):typeof B=="object"&&(this.message="".concat(B.name," ").concat(B.message),this.inner=B):(this.message=ot[b]||T,this.inner=null)}return S(I).from(Ee),g[b]=I,g},{});me.Syntax=SyntaxError,me.Type=TypeError,me.Range=RangeError;var Ie=mt.reduce(function(g,b){return g[b+"Error"]=me[b],g},{}),Me=qs.reduce(function(g,b){return["Syntax","Type","Range"].indexOf(b)===-1&&(g[b+"Error"]=me[b]),g},{});function Ye(){}function X(g){return g}function ee(g,b){return g==null||g===X?b:function(T){return b(g(T))}}function be(g,b){return function(){g.apply(this,arguments),b.apply(this,arguments)}}function Ue(g,b){return g===Ye?b:function(){var T=g.apply(this,arguments);T!==void 0&&(arguments[0]=T);var I=this.onsuccess,B=this.onerror;this.onsuccess=null,this.onerror=null;var z=b.apply(this,arguments);return I&&(this.onsuccess=this.onsuccess?be(I,this.onsuccess):I),B&&(this.onerror=this.onerror?be(B,this.onerror):B),z!==void 0?z:T}}function ke(g,b){return g===Ye?b:function(){g.apply(this,arguments);var T=this.onsuccess,I=this.onerror;this.onsuccess=this.onerror=null,b.apply(this,arguments),T&&(this.onsuccess=this.onsuccess?be(T,this.onsuccess):T),I&&(this.onerror=this.onerror?be(I,this.onerror):I)}}function Ke(g,b){return g===Ye?b:function(T){var I=g.apply(this,arguments);l(T,I);var B=this.onsuccess,z=this.onerror;return this.onsuccess=null,this.onerror=null,T=b.apply(this,arguments),B&&(this.onsuccess=this.onsuccess?be(B,this.onsuccess):B),z&&(this.onerror=this.onerror?be(z,this.onerror):z),I===void 0?T===void 0?void 0:T:l(I,T)}}function at(g,b){return g===Ye?b:function(){return b.apply(this,arguments)!==!1&&g.apply(this,arguments)}}function Xe(g,b){return g===Ye?b:function(){var T=g.apply(this,arguments);if(T&&typeof T.then=="function"){for(var I=this,B=arguments.length,z=new Array(B);B--;)z[B]=arguments[B];return T.then(function(){return b.apply(I,z)})}return b.apply(this,arguments)}}Me.ModifyError=_e,Me.DexieError=ut,Me.BulkError=Ne;var Le=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ze(g){Le=g}var Et={},lt=100,ft=typeof Promise>"u"?[]:function(){var g=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[g,c(g),g];var b=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[b,c(b),g]}(),mt=ft[0],qs=ft[1],ft=ft[2],qs=qs&&qs.then,Tt=mt&&mt.constructor,Wt=!!ft,de=function(g,b){tn.push([g,b]),Se&&(queueMicrotask(Ph),Se=!1)},ge=!0,Se=!0,Pe=[],rt=[],Ot=X,Rt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ye,pgp:!1,env:{},finalize:Ye},je=Rt,tn=[],kt=0,At=[];function Oe(g){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var b=this._PSD=je;if(typeof g!="function"){if(g!==Et)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&yr(this,this._value))}this._state=null,this._value=null,++b.ref,function T(I,B){try{B(function(z){if(I._state===null){if(z===I)throw new TypeError("A promise cannot be resolved with itself.");var J=I._lib&&Bs();z&&typeof z.then=="function"?T(I,function(ie,fe){z instanceof Oe?z._then(ie,fe):z.then(ie,fe)}):(I._state=!0,I._value=z,ji(I)),J&&Ea()}},yr.bind(null,I))}catch(z){yr(I,z)}}(this,g)}var zt={get:function(){var g=je,b=eu;function T(I,B){var z=this,J=!g.global&&(g!==je||b!==eu),ie=J&&!Us(),fe=new Oe(function(H,Y){cl(z,new on(tu(I,g,J,ie),tu(B,g,J,ie),H,Y,g))});return this._consoleTask&&(fe._consoleTask=this._consoleTask),fe}return T.prototype=Et,T},set:function(g){w(this,"then",g&&g.prototype===Et?zt:{get:function(){return g},set:zt.set})}};function on(g,b,T,I,B){this.onFulfilled=typeof g=="function"?g:null,this.onRejected=typeof b=="function"?b:null,this.resolve=T,this.reject=I,this.psd=B}function yr(g,b){var T,I;rt.push(b),g._state===null&&(T=g._lib&&Bs(),b=Ot(b),g._state=!1,g._value=b,I=g,Pe.some(function(B){return B._value===I._value})||Pe.push(I),ji(g),T&&Ea())}function ji(g){var b=g._listeners;g._listeners=[];for(var T=0,I=b.length;T<I;++T)cl(g,b[T]);var B=g._PSD;--B.ref||B.finalize(),kt===0&&(++kt,de(function(){--kt==0&&Hr()},[]))}function cl(g,b){if(g._state!==null){var T=g._state?b.onFulfilled:b.onRejected;if(T===null)return(g._state?b.resolve:b.reject)(g._value);++b.psd.ref,++kt,de(yo,[T,g,b])}else g._listeners.push(b)}function yo(g,b,T){try{var I,B=b._value;!b._state&&rt.length&&(rt=[]),I=Le&&b._consoleTask?b._consoleTask.run(function(){return g(B)}):g(B),b._state||rt.indexOf(B)!==-1||function(z){for(var J=Pe.length;J;)if(Pe[--J]._value===z._value)return Pe.splice(J,1)}(b),T.resolve(I)}catch(z){T.reject(z)}finally{--kt==0&&Hr(),--T.psd.ref||T.psd.finalize()}}function Ph(){wo(Rt,function(){Bs()&&Ea()})}function Bs(){var g=ge;return Se=ge=!1,g}function Ea(){var g,b,T;do for(;0<tn.length;)for(g=tn,tn=[],T=g.length,b=0;b<T;++b){var I=g[b];I[0].apply(null,I[1])}while(0<tn.length);Se=ge=!0}function Hr(){var g=Pe;Pe=[],g.forEach(function(I){I._PSD.onunhandled.call(null,I._value,I)});for(var b=At.slice(0),T=b.length;T;)b[--T]()}function Ta(g){return new Oe(Et,!1,g)}function Hn(g,b){var T=je;return function(){var I=Bs(),B=je;try{return bo(T,!0),g.apply(this,arguments)}catch(z){b&&b(z)}finally{bo(B,!1),I&&Ea()}}}p(Oe.prototype,{then:zt,_then:function(g,b){cl(this,new on(null,null,g,b,je))},catch:function(g){if(arguments.length===1)return this.then(null,g);var b=g,T=arguments[1];return typeof b=="function"?this.then(null,function(I){return(I instanceof b?T:Ta)(I)}):this.then(null,function(I){return(I&&I.name===b?T:Ta)(I)})},finally:function(g){return this.then(function(b){return Oe.resolve(g()).then(function(){return b})},function(b){return Oe.resolve(g()).then(function(){return Ta(b)})})},timeout:function(g,b){var T=this;return g<1/0?new Oe(function(I,B){var z=setTimeout(function(){return B(new me.Timeout(b))},g);T.then(I,B).finally(clearTimeout.bind(null,z))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&w(Oe.prototype,Symbol.toStringTag,"Dexie.Promise"),Rt.env=Dh(),p(Oe,{all:function(){var g=He.apply(null,arguments).map($o);return new Oe(function(b,T){g.length===0&&b([]);var I=g.length;g.forEach(function(B,z){return Oe.resolve(B).then(function(J){g[z]=J,--I||b(g)},T)})})},resolve:function(g){return g instanceof Oe?g:g&&typeof g.then=="function"?new Oe(function(b,T){g.then(b,T)}):new Oe(Et,!0,g)},reject:Ta,race:function(){var g=He.apply(null,arguments).map($o);return new Oe(function(b,T){g.map(function(I){return Oe.resolve(I).then(b,T)})})},PSD:{get:function(){return je},set:function(g){return je=g}},totalEchoes:{get:function(){return eu}},newPSD:ws,usePSD:wo,scheduler:{get:function(){return de},set:function(g){de=g}},rejectionMapper:{get:function(){return Ot},set:function(g){Ot=g}},follow:function(g,b){return new Oe(function(T,I){return ws(function(B,z){var J=je;J.unhandleds=[],J.onunhandled=z,J.finalize=be(function(){var ie,fe=this;ie=function(){fe.unhandleds.length===0?B():z(fe.unhandleds[0])},At.push(function H(){ie(),At.splice(At.indexOf(H),1)}),++kt,de(function(){--kt==0&&Hr()},[])},J.finalize),g()},b,T,I)})}}),Tt&&(Tt.allSettled&&w(Oe,"allSettled",function(){var g=He.apply(null,arguments).map($o);return new Oe(function(b){g.length===0&&b([]);var T=g.length,I=new Array(T);g.forEach(function(B,z){return Oe.resolve(B).then(function(J){return I[z]={status:"fulfilled",value:J}},function(J){return I[z]={status:"rejected",reason:J}}).then(function(){return--T||b(I)})})})}),Tt.any&&typeof AggregateError<"u"&&w(Oe,"any",function(){var g=He.apply(null,arguments).map($o);return new Oe(function(b,T){g.length===0&&T(new AggregateError([]));var I=g.length,B=new Array(I);g.forEach(function(z,J){return Oe.resolve(z).then(function(ie){return b(ie)},function(ie){B[J]=ie,--I||T(new AggregateError(B))})})})}),Tt.withResolvers&&(Oe.withResolvers=Tt.withResolvers));var Zn={awaits:0,echoes:0,id:0},tm=0,Zc=[],vo=0,eu=0,nm=0;function ws(g,b,T,I){var B=je,z=Object.create(B);return z.parent=B,z.ref=0,z.global=!1,z.id=++nm,Rt.env,z.env=Wt?{Promise:Oe,PromiseProp:{value:Oe,configurable:!0,writable:!0},all:Oe.all,race:Oe.race,allSettled:Oe.allSettled,any:Oe.any,resolve:Oe.resolve,reject:Oe.reject}:{},b&&l(z,b),++B.ref,z.finalize=function(){--this.parent.ref||this.parent.finalize()},I=wo(z,g,T,I),z.ref===0&&z.finalize(),I}function _a(){return Zn.id||(Zn.id=++tm),++Zn.awaits,Zn.echoes+=lt,Zn.id}function Us(){return!!Zn.awaits&&(--Zn.awaits==0&&(Zn.id=0),Zn.echoes=Zn.awaits*lt,!0)}function $o(g){return Zn.echoes&&g&&g.constructor===Tt?(_a(),g.then(function(b){return Us(),b},function(b){return Us(),Qn(b)})):g}function Ho(){var g=Zc[Zc.length-1];Zc.pop(),bo(g,!1)}function bo(g,b){var T,I=je;(b?!Zn.echoes||vo++&&g===je:!vo||--vo&&g===je)||queueMicrotask(b?(function(B){++eu,Zn.echoes&&--Zn.echoes!=0||(Zn.echoes=Zn.awaits=Zn.id=0),Zc.push(je),bo(B,!0)}).bind(null,g):Ho),g!==je&&(je=g,I===Rt&&(Rt.env=Dh()),Wt&&(T=Rt.env.Promise,b=g.env,(I.global||g.global)&&(Object.defineProperty(s,"Promise",b.PromiseProp),T.all=b.all,T.race=b.race,T.resolve=b.resolve,T.reject=b.reject,b.allSettled&&(T.allSettled=b.allSettled),b.any&&(T.any=b.any))))}function Dh(){var g=s.Promise;return Wt?{Promise:g,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:g.all,race:g.race,allSettled:g.allSettled,any:g.any,resolve:g.resolve,reject:g.reject}:{}}function wo(g,b,T,I,B){var z=je;try{return bo(g,!0),b(T,I,B)}finally{bo(z,!1)}}function tu(g,b,T,I){return typeof g!="function"?g:function(){var B=je;T&&_a(),bo(b,!0);try{return g.apply(this,arguments)}finally{bo(B,!1),I&&queueMicrotask(Us)}}}function nu(g){Promise===Tt&&Zn.echoes===0?vo===0?g():enqueueNativeMicroTask(g):setTimeout(g,0)}(""+qs).indexOf("[native code]")===-1&&(_a=Us=Ye);var Qn=Oe.reject,xa="",ci="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Mh="String expected.",Wo=[],zo="__dbnames",$s="readonly",ul="readwrite";function jo(g,b){return g?b?function(){return g.apply(this,arguments)&&b.apply(this,arguments)}:g:b}var Nh={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Jl(g){return typeof g!="string"||/\./.test(g)?function(b){return b}:function(b){return b[g]===void 0&&g in b&&delete(b=D(b))[g],b}}function Lh(){throw me.Type()}function cn(g,b){try{var T=Ql(g),I=Ql(b);if(T!==I)return T==="Array"?1:I==="Array"?-1:T==="binary"?1:I==="binary"?-1:T==="string"?1:I==="string"?-1:T==="Date"?1:I!=="Date"?NaN:-1;switch(T){case"number":case"Date":case"string":return b<g?1:g<b?-1:0;case"binary":return function(B,z){for(var J=B.length,ie=z.length,fe=J<ie?J:ie,H=0;H<fe;++H)if(B[H]!==z[H])return B[H]<z[H]?-1:1;return J===ie?0:J<ie?-1:1}(ru(g),ru(b));case"Array":return function(B,z){for(var J=B.length,ie=z.length,fe=J<ie?J:ie,H=0;H<fe;++H){var Y=cn(B[H],z[H]);if(Y!==0)return Y}return J===ie?0:J<ie?-1:1}(g,b)}}catch{}return NaN}function Ql(g){var b=typeof g;return b!="object"?b:ArrayBuffer.isView(g)?"binary":(g=le(g),g==="ArrayBuffer"?"binary":g)}function ru(g){return g instanceof Uint8Array?g:ArrayBuffer.isView(g)?new Uint8Array(g.buffer,g.byteOffset,g.byteLength):new Uint8Array(g)}var iu=(zn.prototype._trans=function(g,b,T){var I=this._tx||je.trans,B=this.name,z=Le&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(g==="readonly"?"read":"write"," ").concat(this.name));function J(H,Y,W){if(!W.schema[B])throw new me.NotFound("Table "+B+" not part of transaction");return b(W.idbtrans,W)}var ie=Bs();try{var fe=I&&I.db._novip===this.db._novip?I===je.trans?I._promise(g,J,T):ws(function(){return I._promise(g,J,T)},{trans:I,transless:je.transless||je}):function H(Y,W,se,te){if(Y.idbdb&&(Y._state.openComplete||je.letThrough||Y._vip)){var ue=Y._createTransaction(W,se,Y._dbSchema);try{ue.create(),Y._state.PR1398_maxLoop=3}catch(pe){return pe.name===oe.InvalidState&&Y.isOpen()&&0<--Y._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Y.close({disableAutoOpen:!1}),Y.open().then(function(){return H(Y,W,se,te)})):Qn(pe)}return ue._promise(W,function(pe,ce){return ws(function(){return je.trans=ue,te(pe,ce,ue)})}).then(function(pe){if(W==="readwrite")try{ue.idbtrans.commit()}catch{}return W==="readonly"?pe:ue._completion.then(function(){return pe})})}if(Y._state.openComplete)return Qn(new me.DatabaseClosed(Y._state.dbOpenError));if(!Y._state.isBeingOpened){if(!Y._state.autoOpen)return Qn(new me.DatabaseClosed);Y.open().catch(Ye)}return Y._state.dbReadyPromise.then(function(){return H(Y,W,se,te)})}(this.db,g,[this.name],J);return z&&(fe._consoleTask=z,fe=fe.catch(function(H){return console.trace(H),Qn(H)})),fe}finally{ie&&Ea()}},zn.prototype.get=function(g,b){var T=this;return g&&g.constructor===Object?this.where(g).first(b):g==null?Qn(new me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(I){return T.core.get({trans:I,key:g}).then(function(B){return T.hook.reading.fire(B)})}).then(b)},zn.prototype.where=function(g){if(typeof g=="string")return new this.db.WhereClause(this,g);if(a(g))return new this.db.WhereClause(this,"[".concat(g.join("+"),"]"));var b=o(g);if(b.length===1)return this.where(b[0]).equals(g[b[0]]);var T=this.schema.indexes.concat(this.schema.primKey).filter(function(ie){if(ie.compound&&b.every(function(H){return 0<=ie.keyPath.indexOf(H)})){for(var fe=0;fe<b.length;++fe)if(b.indexOf(ie.keyPath[fe])===-1)return!1;return!0}return!1}).sort(function(ie,fe){return ie.keyPath.length-fe.keyPath.length})[0];if(T&&this.db._maxKey!==xa){var z=T.keyPath.slice(0,b.length);return this.where(z).equals(z.map(function(fe){return g[fe]}))}!T&&Le&&console.warn("The query ".concat(JSON.stringify(g)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(b.join("+"),"]"));var I=this.schema.idxByName;function B(ie,fe){return cn(ie,fe)===0}var J=b.reduce(function(W,fe){var H=W[0],Y=W[1],W=I[fe],se=g[fe];return[H||W,H||!W?jo(Y,W&&W.multi?function(te){return te=j(te,fe),a(te)&&te.some(function(ue){return B(se,ue)})}:function(te){return B(se,j(te,fe))}):Y]},[null,null]),z=J[0],J=J[1];return z?this.where(z.name).equals(g[z.keyPath]).filter(J):T?this.filter(J):this.where(b).equals("")},zn.prototype.filter=function(g){return this.toCollection().and(g)},zn.prototype.count=function(g){return this.toCollection().count(g)},zn.prototype.offset=function(g){return this.toCollection().offset(g)},zn.prototype.limit=function(g){return this.toCollection().limit(g)},zn.prototype.each=function(g){return this.toCollection().each(g)},zn.prototype.toArray=function(g){return this.toCollection().toArray(g)},zn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},zn.prototype.orderBy=function(g){return new this.db.Collection(new this.db.WhereClause(this,a(g)?"[".concat(g.join("+"),"]"):g))},zn.prototype.reverse=function(){return this.toCollection().reverse()},zn.prototype.mapToClass=function(g){var b,T=this.db,I=this.name;function B(){return b!==null&&b.apply(this,arguments)||this}(this.schema.mappedClass=g).prototype instanceof Lh&&(function(fe,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function Y(){this.constructor=fe}t(fe,H),fe.prototype=H===null?Object.create(H):(Y.prototype=H.prototype,new Y)}(B,b=g),Object.defineProperty(B.prototype,"db",{get:function(){return T},enumerable:!1,configurable:!0}),B.prototype.table=function(){return I},g=B);for(var z=new Set,J=g.prototype;J;J=c(J))Object.getOwnPropertyNames(J).forEach(function(fe){return z.add(fe)});function ie(fe){if(!fe)return fe;var H,Y=Object.create(g.prototype);for(H in fe)if(!z.has(H))try{Y[H]=fe[H]}catch{}return Y}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=ie,this.hook("reading",ie),g},zn.prototype.defineClass=function(){return this.mapToClass(function(g){l(this,g)})},zn.prototype.add=function(g,b){var T=this,I=this.schema.primKey,B=I.auto,z=I.keyPath,J=g;return z&&B&&(J=Jl(z)(g)),this._trans("readwrite",function(ie){return T.core.mutate({trans:ie,type:"add",keys:b!=null?[b]:null,values:[J]})}).then(function(ie){return ie.numFailures?Oe.reject(ie.failures[0]):ie.lastResult}).then(function(ie){if(z)try{N(g,z,ie)}catch{}return ie})},zn.prototype.update=function(g,b){return typeof g!="object"||a(g)?this.where(":id").equals(g).modify(b):(g=j(g,this.schema.primKey.keyPath),g===void 0?Qn(new me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(g).modify(b))},zn.prototype.put=function(g,b){var T=this,I=this.schema.primKey,B=I.auto,z=I.keyPath,J=g;return z&&B&&(J=Jl(z)(g)),this._trans("readwrite",function(ie){return T.core.mutate({trans:ie,type:"put",values:[J],keys:b!=null?[b]:null})}).then(function(ie){return ie.numFailures?Oe.reject(ie.failures[0]):ie.lastResult}).then(function(ie){if(z)try{N(g,z,ie)}catch{}return ie})},zn.prototype.delete=function(g){var b=this;return this._trans("readwrite",function(T){return b.core.mutate({trans:T,type:"delete",keys:[g]})}).then(function(T){return T.numFailures?Oe.reject(T.failures[0]):void 0})},zn.prototype.clear=function(){var g=this;return this._trans("readwrite",function(b){return g.core.mutate({trans:b,type:"deleteRange",range:Nh})}).then(function(b){return b.numFailures?Oe.reject(b.failures[0]):void 0})},zn.prototype.bulkGet=function(g){var b=this;return this._trans("readonly",function(T){return b.core.getMany({keys:g,trans:T}).then(function(I){return I.map(function(B){return b.hook.reading.fire(B)})})})},zn.prototype.bulkAdd=function(g,b,T){var I=this,B=Array.isArray(b)?b:void 0,z=(T=T||(B?void 0:b))?T.allKeys:void 0;return this._trans("readwrite",function(J){var H=I.schema.primKey,ie=H.auto,H=H.keyPath;if(H&&B)throw new me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(B&&B.length!==g.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var fe=g.length,H=H&&ie?g.map(Jl(H)):g;return I.core.mutate({trans:J,type:"add",keys:B,values:H,wantResults:z}).then(function(ue){var W=ue.numFailures,se=ue.results,te=ue.lastResult,ue=ue.failures;if(W===0)return z?se:te;throw new Ne("".concat(I.name,".bulkAdd(): ").concat(W," of ").concat(fe," operations failed"),ue)})})},zn.prototype.bulkPut=function(g,b,T){var I=this,B=Array.isArray(b)?b:void 0,z=(T=T||(B?void 0:b))?T.allKeys:void 0;return this._trans("readwrite",function(J){var H=I.schema.primKey,ie=H.auto,H=H.keyPath;if(H&&B)throw new me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(B&&B.length!==g.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var fe=g.length,H=H&&ie?g.map(Jl(H)):g;return I.core.mutate({trans:J,type:"put",keys:B,values:H,wantResults:z}).then(function(ue){var W=ue.numFailures,se=ue.results,te=ue.lastResult,ue=ue.failures;if(W===0)return z?se:te;throw new Ne("".concat(I.name,".bulkPut(): ").concat(W," of ").concat(fe," operations failed"),ue)})})},zn.prototype.bulkUpdate=function(g){var b=this,T=this.core,I=g.map(function(J){return J.key}),B=g.map(function(J){return J.changes}),z=[];return this._trans("readwrite",function(J){return T.getMany({trans:J,keys:I,cache:"clone"}).then(function(ie){var fe=[],H=[];g.forEach(function(W,se){var te=W.key,ue=W.changes,pe=ie[se];if(pe){for(var ce=0,we=Object.keys(ue);ce<we.length;ce++){var xe=we[ce],Te=ue[xe];if(xe===b.schema.primKey.keyPath){if(cn(Te,te)!==0)throw new me.Constraint("Cannot update primary key in bulkUpdate()")}else N(pe,xe,Te)}z.push(se),fe.push(te),H.push(pe)}});var Y=fe.length;return T.mutate({trans:J,type:"put",keys:fe,values:H,updates:{keys:I,changeSpecs:B}}).then(function(W){var se=W.numFailures,te=W.failures;if(se===0)return Y;for(var ue=0,pe=Object.keys(te);ue<pe.length;ue++){var ce,we=pe[ue],xe=z[Number(we)];xe!=null&&(ce=te[we],delete te[we],te[xe]=ce)}throw new Ne("".concat(b.name,".bulkUpdate(): ").concat(se," of ").concat(Y," operations failed"),te)})})})},zn.prototype.bulkDelete=function(g){var b=this,T=g.length;return this._trans("readwrite",function(I){return b.core.mutate({trans:I,type:"delete",keys:g})}).then(function(J){var B=J.numFailures,z=J.lastResult,J=J.failures;if(B===0)return z;throw new Ne("".concat(b.name,".bulkDelete(): ").concat(B," of ").concat(T," operations failed"),J)})},zn);function zn(){}function Zl(g){function b(J,ie){if(ie){for(var fe=arguments.length,H=new Array(fe-1);--fe;)H[fe-1]=arguments[fe];return T[J].subscribe.apply(null,H),g}if(typeof J=="string")return T[J]}var T={};b.addEventType=z;for(var I=1,B=arguments.length;I<B;++I)z(arguments[I]);return b;function z(J,ie,fe){if(typeof J!="object"){var H;ie=ie||at;var Y={subscribers:[],fire:fe=fe||Ye,subscribe:function(W){Y.subscribers.indexOf(W)===-1&&(Y.subscribers.push(W),Y.fire=ie(Y.fire,W))},unsubscribe:function(W){Y.subscribers=Y.subscribers.filter(function(se){return se!==W}),Y.fire=Y.subscribers.reduce(ie,fe)}};return T[J]=b[J]=Y}o(H=J).forEach(function(W){var se=H[W];if(a(se))z(W,H[W][0],H[W][1]);else{if(se!=="asap")throw new me.InvalidArgument("Invalid event config");var te=z(W,X,function(){for(var ue=arguments.length,pe=new Array(ue);ue--;)pe[ue]=arguments[ue];te.subscribers.forEach(function(ce){U(function(){ce.apply(null,pe)})})})}})}}function Aa(g,b){return S(b).from({prototype:g}),b}function Hs(g,b){return!(g.filter||g.algorithm||g.or)&&(b?g.justLimit:!g.replayFilter)}function su(g,b){g.filter=jo(g.filter,b)}function So(g,b,T){var I=g.replayFilter;g.replayFilter=I?function(){return jo(I(),b())}:b,g.justLimit=T&&!I}function ki(g,b){if(g.isPrimKey)return b.primaryKey;var T=b.getIndexByKeyPath(g.index);if(!T)throw new me.Schema("KeyPath "+g.index+" on object store "+b.name+" is not indexed");return T}function hl(g,b,T){var I=ki(g,b.schema);return b.openCursor({trans:T,values:!g.keysOnly,reverse:g.dir==="prev",unique:!!g.unique,query:{index:I,range:g.range}})}function Eo(g,b,T,I){var B=g.replayFilter?jo(g.filter,g.replayFilter()):g.filter;if(g.or){var z={},J=function(ie,fe,H){var Y,W;B&&!B(fe,H,function(se){return fe.stop(se)},function(se){return fe.fail(se)})||((W=""+(Y=fe.primaryKey))=="[object ArrayBuffer]"&&(W=""+new Uint8Array(Y)),d(z,W)||(z[W]=!0,b(ie,fe,H)))};return Promise.all([g.or._iterate(J,T),Vh(hl(g,I,T),g.algorithm,J,!g.keysOnly&&g.valueMapper)])}return Vh(hl(g,I,T),jo(g.algorithm,B),b,!g.keysOnly&&g.valueMapper)}function Vh(g,b,T,I){var B=Hn(I?function(z,J,ie){return T(I(z),J,ie)}:T);return g.then(function(z){if(z)return z.start(function(){var J=function(){return z.continue()};b&&!b(z,function(ie){return J=ie},function(ie){z.stop(ie),J=Ye},function(ie){z.fail(ie),J=Ye})||B(z.value,z,function(ie){return J=ie}),J()})})}var Pn=(Ia.prototype.execute=function(g){var b=this["@@propmod"];if(b.add!==void 0){var T=b.add;if(a(T))return i(i([],a(g)?g:[],!0),T).sort();if(typeof T=="number")return(Number(g)||0)+T;if(typeof T=="bigint")try{return BigInt(g)+T}catch{return BigInt(0)+T}throw new TypeError("Invalid term ".concat(T))}if(b.remove!==void 0){var I=b.remove;if(a(I))return a(g)?g.filter(function(B){return!I.includes(B)}).sort():[];if(typeof I=="number")return Number(g)-I;if(typeof I=="bigint")try{return BigInt(g)-I}catch{return BigInt(0)-I}throw new TypeError("Invalid subtrahend ".concat(I))}return T=(T=b.replacePrefix)===null||T===void 0?void 0:T[0],T&&typeof g=="string"&&g.startsWith(T)?b.replacePrefix[1]+g.substring(T.length):g},Ia);function Ia(g){this["@@propmod"]=g}var Ca=(Qt.prototype._read=function(g,b){var T=this._ctx;return T.error?T.table._trans(null,Qn.bind(null,T.error)):T.table._trans("readonly",g).then(b)},Qt.prototype._write=function(g){var b=this._ctx;return b.error?b.table._trans(null,Qn.bind(null,b.error)):b.table._trans("readwrite",g,"locked")},Qt.prototype._addAlgorithm=function(g){var b=this._ctx;b.algorithm=jo(b.algorithm,g)},Qt.prototype._iterate=function(g,b){return Eo(this._ctx,g,b,this._ctx.table.core)},Qt.prototype.clone=function(g){var b=Object.create(this.constructor.prototype),T=Object.create(this._ctx);return g&&l(T,g),b._ctx=T,b},Qt.prototype.raw=function(){return this._ctx.valueMapper=null,this},Qt.prototype.each=function(g){var b=this._ctx;return this._read(function(T){return Eo(b,g,T,b.table.core)})},Qt.prototype.count=function(g){var b=this;return this._read(function(T){var I=b._ctx,B=I.table.core;if(Hs(I,!0))return B.count({trans:T,query:{index:ki(I,B.schema),range:I.range}}).then(function(J){return Math.min(J,I.limit)});var z=0;return Eo(I,function(){return++z,!1},T,B).then(function(){return z})}).then(g)},Qt.prototype.sortBy=function(g,b){var T=g.split(".").reverse(),I=T[0],B=T.length-1;function z(fe,H){return H?z(fe[T[H]],H-1):fe[I]}var J=this._ctx.dir==="next"?1:-1;function ie(fe,H){return cn(z(fe,B),z(H,B))*J}return this.toArray(function(fe){return fe.sort(ie)}).then(b)},Qt.prototype.toArray=function(g){var b=this;return this._read(function(T){var I=b._ctx;if(I.dir==="next"&&Hs(I,!0)&&0<I.limit){var B=I.valueMapper,z=ki(I,I.table.core.schema);return I.table.core.query({trans:T,limit:I.limit,values:!0,query:{index:z,range:I.range}}).then(function(ie){return ie=ie.result,B?ie.map(B):ie})}var J=[];return Eo(I,function(ie){return J.push(ie)},T,I.table.core).then(function(){return J})},g)},Qt.prototype.offset=function(g){var b=this._ctx;return g<=0||(b.offset+=g,Hs(b)?So(b,function(){var T=g;return function(I,B){return T===0||(T===1?--T:B(function(){I.advance(T),T=0}),!1)}}):So(b,function(){var T=g;return function(){return--T<0}})),this},Qt.prototype.limit=function(g){return this._ctx.limit=Math.min(this._ctx.limit,g),So(this._ctx,function(){var b=g;return function(T,I,B){return--b<=0&&I(B),0<=b}},!0),this},Qt.prototype.until=function(g,b){return su(this._ctx,function(T,I,B){return!g(T.value)||(I(B),b)}),this},Qt.prototype.first=function(g){return this.limit(1).toArray(function(b){return b[0]}).then(g)},Qt.prototype.last=function(g){return this.reverse().first(g)},Qt.prototype.filter=function(g){var b;return su(this._ctx,function(T){return g(T.value)}),(b=this._ctx).isMatch=jo(b.isMatch,g),this},Qt.prototype.and=function(g){return this.filter(g)},Qt.prototype.or=function(g){return new this.db.WhereClause(this._ctx.table,g,this)},Qt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Qt.prototype.desc=function(){return this.reverse()},Qt.prototype.eachKey=function(g){var b=this._ctx;return b.keysOnly=!b.isMatch,this.each(function(T,I){g(I.key,I)})},Qt.prototype.eachUniqueKey=function(g){return this._ctx.unique="unique",this.eachKey(g)},Qt.prototype.eachPrimaryKey=function(g){var b=this._ctx;return b.keysOnly=!b.isMatch,this.each(function(T,I){g(I.primaryKey,I)})},Qt.prototype.keys=function(g){var b=this._ctx;b.keysOnly=!b.isMatch;var T=[];return this.each(function(I,B){T.push(B.key)}).then(function(){return T}).then(g)},Qt.prototype.primaryKeys=function(g){var b=this._ctx;if(b.dir==="next"&&Hs(b,!0)&&0<b.limit)return this._read(function(I){var B=ki(b,b.table.core.schema);return b.table.core.query({trans:I,values:!1,limit:b.limit,query:{index:B,range:b.range}})}).then(function(I){return I.result}).then(g);b.keysOnly=!b.isMatch;var T=[];return this.each(function(I,B){T.push(B.primaryKey)}).then(function(){return T}).then(g)},Qt.prototype.uniqueKeys=function(g){return this._ctx.unique="unique",this.keys(g)},Qt.prototype.firstKey=function(g){return this.limit(1).keys(function(b){return b[0]}).then(g)},Qt.prototype.lastKey=function(g){return this.reverse().firstKey(g)},Qt.prototype.distinct=function(){var g=this._ctx,g=g.index&&g.table.schema.idxByName[g.index];if(!g||!g.multi)return this;var b={};return su(this._ctx,function(B){var I=B.primaryKey.toString(),B=d(b,I);return b[I]=!0,!B}),this},Qt.prototype.modify=function(g){var b=this,T=this._ctx;return this._write(function(I){var B,z,J;J=typeof g=="function"?g:(B=o(g),z=B.length,function(ce){for(var we=!1,xe=0;xe<z;++xe){var Te=B[xe],Re=g[Te],et=j(ce,Te);Re instanceof Pn?(N(ce,Te,Re.execute(et)),we=!0):et!==Re&&(N(ce,Te,Re),we=!0)}return we});var ie=T.table.core,W=ie.schema.primaryKey,fe=W.outbound,H=W.extractKey,Y=200,W=b.db._options.modifyChunkSize;W&&(Y=typeof W=="object"?W[ie.name]||W["*"]||200:W);function se(ce,Te){var xe=Te.failures,Te=Te.numFailures;ue+=ce-Te;for(var Re=0,et=o(xe);Re<et.length;Re++){var it=et[Re];te.push(xe[it])}}var te=[],ue=0,pe=[];return b.clone().primaryKeys().then(function(ce){function we(Te){var Re=Math.min(Y,ce.length-Te);return ie.getMany({trans:I,keys:ce.slice(Te,Te+Re),cache:"immutable"}).then(function(et){for(var it=[],Ze=[],tt=fe?[]:null,qe=[],ct=0;ct<Re;++ct){var _t=et[ct],Yt={value:D(_t),primKey:ce[Te+ct]};J.call(Yt,Yt.value,Yt)!==!1&&(Yt.value==null?qe.push(ce[Te+ct]):fe||cn(H(_t),H(Yt.value))===0?(Ze.push(Yt.value),fe&&tt.push(ce[Te+ct])):(qe.push(ce[Te+ct]),it.push(Yt.value)))}return Promise.resolve(0<it.length&&ie.mutate({trans:I,type:"add",values:it}).then(function(fn){for(var dn in fn.failures)qe.splice(parseInt(dn),1);se(it.length,fn)})).then(function(){return(0<Ze.length||xe&&typeof g=="object")&&ie.mutate({trans:I,type:"put",keys:tt,values:Ze,criteria:xe,changeSpec:typeof g!="function"&&g,isAdditionalChunk:0<Te}).then(function(fn){return se(Ze.length,fn)})}).then(function(){return(0<qe.length||xe&&g===ou)&&ie.mutate({trans:I,type:"delete",keys:qe,criteria:xe,isAdditionalChunk:0<Te}).then(function(fn){return se(qe.length,fn)})}).then(function(){return ce.length>Te+Re&&we(Te+Y)})})}var xe=Hs(T)&&T.limit===1/0&&(typeof g!="function"||g===ou)&&{index:T.index,range:T.range};return we(0).then(function(){if(0<te.length)throw new _e("Error modifying one or more objects",te,ue,pe);return ce.length})})})},Qt.prototype.delete=function(){var g=this._ctx,b=g.range;return Hs(g)&&(g.isPrimKey||b.type===3)?this._write(function(T){var I=g.table.core.schema.primaryKey,B=b;return g.table.core.count({trans:T,query:{index:I,range:B}}).then(function(z){return g.table.core.mutate({trans:T,type:"deleteRange",range:B}).then(function(J){var ie=J.failures;if(J.lastResult,J.results,J=J.numFailures,J)throw new _e("Could not delete some values",Object.keys(ie).map(function(fe){return ie[fe]}),z-J);return z-J})})}):this.modify(ou)},Qt);function Qt(){}var ou=function(g,b){return b.value=null};function Fh(g,b){return g<b?-1:g===b?0:1}function rm(g,b){return b<g?-1:g===b?0:1}function Ti(g,b,T){return g=g instanceof Bh?new g.Collection(g):g,g._ctx.error=new(T||TypeError)(b),g}function Oa(g){return new g.Collection(g,function(){return To("")}).limit(0)}function ec(g,b,T,I){var B,z,J,ie,fe,H,Y,W=T.length;if(!T.every(function(ue){return typeof ue=="string"}))return Ti(g,Mh);function se(ue){B=ue==="next"?function(ce){return ce.toUpperCase()}:function(ce){return ce.toLowerCase()},z=ue==="next"?function(ce){return ce.toLowerCase()}:function(ce){return ce.toUpperCase()},J=ue==="next"?Fh:rm;var pe=T.map(function(ce){return{lower:z(ce),upper:B(ce)}}).sort(function(ce,we){return J(ce.lower,we.lower)});ie=pe.map(function(ce){return ce.upper}),fe=pe.map(function(ce){return ce.lower}),Y=(H=ue)==="next"?"":I}se("next"),g=new g.Collection(g,function(){return Ri(ie[0],fe[W-1]+I)}),g._ondirectionchange=function(ue){se(ue)};var te=0;return g._addAlgorithm(function(ue,pe,ce){var we=ue.key;if(typeof we!="string")return!1;var xe=z(we);if(b(xe,fe,te))return!0;for(var Te=null,Re=te;Re<W;++Re){var et=function(it,Ze,tt,qe,ct,_t){for(var Yt=Math.min(it.length,qe.length),fn=-1,dn=0;dn<Yt;++dn){var Es=Ze[dn];if(Es!==qe[dn])return ct(it[dn],tt[dn])<0?it.substr(0,dn)+tt[dn]+tt.substr(dn+1):ct(it[dn],qe[dn])<0?it.substr(0,dn)+qe[dn]+tt.substr(dn+1):0<=fn?it.substr(0,fn)+Ze[fn]+tt.substr(fn+1):null;ct(it[dn],Es)<0&&(fn=dn)}return Yt<qe.length&&_t==="next"?it+tt.substr(it.length):Yt<it.length&&_t==="prev"?it.substr(0,tt.length):fn<0?null:it.substr(0,fn)+qe[fn]+tt.substr(fn+1)}(we,xe,ie[Re],fe[Re],J,H);et===null&&Te===null?te=Re+1:(Te===null||0<J(Te,et))&&(Te=et)}return pe(Te!==null?function(){ue.continue(Te+Y)}:ce),!1}),g}function Ri(g,b,T,I){return{type:2,lower:g,upper:b,lowerOpen:T,upperOpen:I}}function To(g){return{type:1,lower:g,upper:g}}var Bh=(Object.defineProperty(_r.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),_r.prototype.between=function(g,b,T,I){T=T!==!1,I=I===!0;try{return 0<this._cmp(g,b)||this._cmp(g,b)===0&&(T||I)&&(!T||!I)?Oa(this):new this.Collection(this,function(){return Ri(g,b,!T,!I)})}catch{return Ti(this,ci)}},_r.prototype.equals=function(g){return g==null?Ti(this,ci):new this.Collection(this,function(){return To(g)})},_r.prototype.above=function(g){return g==null?Ti(this,ci):new this.Collection(this,function(){return Ri(g,void 0,!0)})},_r.prototype.aboveOrEqual=function(g){return g==null?Ti(this,ci):new this.Collection(this,function(){return Ri(g,void 0,!1)})},_r.prototype.below=function(g){return g==null?Ti(this,ci):new this.Collection(this,function(){return Ri(void 0,g,!1,!0)})},_r.prototype.belowOrEqual=function(g){return g==null?Ti(this,ci):new this.Collection(this,function(){return Ri(void 0,g)})},_r.prototype.startsWith=function(g){return typeof g!="string"?Ti(this,Mh):this.between(g,g+xa,!0,!0)},_r.prototype.startsWithIgnoreCase=function(g){return g===""?this.startsWith(g):ec(this,function(b,T){return b.indexOf(T[0])===0},[g],xa)},_r.prototype.equalsIgnoreCase=function(g){return ec(this,function(b,T){return b===T[0]},[g],"")},_r.prototype.anyOfIgnoreCase=function(){var g=He.apply(Ce,arguments);return g.length===0?Oa(this):ec(this,function(b,T){return T.indexOf(b)!==-1},g,"")},_r.prototype.startsWithAnyOfIgnoreCase=function(){var g=He.apply(Ce,arguments);return g.length===0?Oa(this):ec(this,function(b,T){return T.some(function(I){return b.indexOf(I)===0})},g,xa)},_r.prototype.anyOf=function(){var g=this,b=He.apply(Ce,arguments),T=this._cmp;try{b.sort(T)}catch{return Ti(this,ci)}if(b.length===0)return Oa(this);var I=new this.Collection(this,function(){return Ri(b[0],b[b.length-1])});I._ondirectionchange=function(z){T=z==="next"?g._ascending:g._descending,b.sort(T)};var B=0;return I._addAlgorithm(function(z,J,ie){for(var fe=z.key;0<T(fe,b[B]);)if(++B===b.length)return J(ie),!1;return T(fe,b[B])===0||(J(function(){z.continue(b[B])}),!1)}),I},_r.prototype.notEqual=function(g){return this.inAnyRange([[-1/0,g],[g,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},_r.prototype.noneOf=function(){var g=He.apply(Ce,arguments);if(g.length===0)return new this.Collection(this);try{g.sort(this._ascending)}catch{return Ti(this,ci)}var b=g.reduce(function(T,I){return T?T.concat([[T[T.length-1][1],I]]):[[-1/0,I]]},null);return b.push([g[g.length-1],this.db._maxKey]),this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})},_r.prototype.inAnyRange=function(we,b){var T=this,I=this._cmp,B=this._ascending,z=this._descending,J=this._min,ie=this._max;if(we.length===0)return Oa(this);if(!we.every(function(xe){return xe[0]!==void 0&&xe[1]!==void 0&&B(xe[0],xe[1])<=0}))return Ti(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",me.InvalidArgument);var fe=!b||b.includeLowers!==!1,H=b&&b.includeUppers===!0,Y,W=B;function se(xe,Te){return W(xe[0],Te[0])}try{(Y=we.reduce(function(xe,Te){for(var Re=0,et=xe.length;Re<et;++Re){var it=xe[Re];if(I(Te[0],it[1])<0&&0<I(Te[1],it[0])){it[0]=J(it[0],Te[0]),it[1]=ie(it[1],Te[1]);break}}return Re===et&&xe.push(Te),xe},[])).sort(se)}catch{return Ti(this,ci)}var te=0,ue=H?function(xe){return 0<B(xe,Y[te][1])}:function(xe){return 0<=B(xe,Y[te][1])},pe=fe?function(xe){return 0<z(xe,Y[te][0])}:function(xe){return 0<=z(xe,Y[te][0])},ce=ue,we=new this.Collection(this,function(){return Ri(Y[0][0],Y[Y.length-1][1],!fe,!H)});return we._ondirectionchange=function(xe){W=xe==="next"?(ce=ue,B):(ce=pe,z),Y.sort(se)},we._addAlgorithm(function(xe,Te,Re){for(var et,it=xe.key;ce(it);)if(++te===Y.length)return Te(Re),!1;return!ue(et=it)&&!pe(et)||(T._cmp(it,Y[te][1])===0||T._cmp(it,Y[te][0])===0||Te(function(){W===B?xe.continue(Y[te][0]):xe.continue(Y[te][1])}),!1)}),we},_r.prototype.startsWithAnyOf=function(){var g=He.apply(Ce,arguments);return g.every(function(b){return typeof b=="string"})?g.length===0?Oa(this):this.inAnyRange(g.map(function(b){return[b,b+xa]})):Ti(this,"startsWithAnyOf() only works with strings")},_r);function _r(){}function Ki(g){return Hn(function(b){return Ws(b),g(b.target.error),!1})}function Ws(g){g.stopPropagation&&g.stopPropagation(),g.preventDefault&&g.preventDefault()}var tc="storagemutated",Uh="x-storagemutated-1",Ko=Zl(null,tc),zs=(js.prototype._lock=function(){return F(!je.global),++this._reculock,this._reculock!==1||je.global||(je.lockOwnerFor=this),this},js.prototype._unlock=function(){if(F(!je.global),--this._reculock==0)for(je.global||(je.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var g=this._blockedFuncs.shift();try{wo(g[1],g[0])}catch{}}return this},js.prototype._locked=function(){return this._reculock&&je.lockOwnerFor!==this},js.prototype.create=function(g){var b=this;if(!this.mode)return this;var T=this.db.idbdb,I=this.db._state.dbOpenError;if(F(!this.idbtrans),!g&&!T)switch(I&&I.name){case"DatabaseClosedError":throw new me.DatabaseClosed(I);case"MissingAPIError":throw new me.MissingAPI(I.message,I);default:throw new me.OpenFailed(I)}if(!this.active)throw new me.TransactionInactive;return F(this._completion._state===null),(g=this.idbtrans=g||(this.db.core||T).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Hn(function(B){Ws(B),b._reject(g.error)}),g.onabort=Hn(function(B){Ws(B),b.active&&b._reject(new me.Abort(g.error)),b.active=!1,b.on("abort").fire(B)}),g.oncomplete=Hn(function(){b.active=!1,b._resolve(),"mutatedParts"in g&&Ko.storagemutated.fire(g.mutatedParts)}),this},js.prototype._promise=function(g,b,T){var I=this;if(g==="readwrite"&&this.mode!=="readwrite")return Qn(new me.ReadOnly("Transaction is readonly"));if(!this.active)return Qn(new me.TransactionInactive);if(this._locked())return new Oe(function(z,J){I._blockedFuncs.push([function(){I._promise(g,b,T).then(z,J)},je])});if(T)return ws(function(){var z=new Oe(function(J,ie){I._lock();var fe=b(J,ie,I);fe&&fe.then&&fe.then(J,ie)});return z.finally(function(){return I._unlock()}),z._lib=!0,z});var B=new Oe(function(z,J){var ie=b(z,J,I);ie&&ie.then&&ie.then(z,J)});return B._lib=!0,B},js.prototype._root=function(){return this.parent?this.parent._root():this},js.prototype.waitFor=function(g){var b,T=this._root(),I=Oe.resolve(g);T._waitingFor?T._waitingFor=T._waitingFor.then(function(){return I}):(T._waitingFor=I,T._waitingQueue=[],b=T.idbtrans.objectStore(T.storeNames[0]),function z(){for(++T._spinCount;T._waitingQueue.length;)T._waitingQueue.shift()();T._waitingFor&&(b.get(-1/0).onsuccess=z)}());var B=T._waitingFor;return new Oe(function(z,J){I.then(function(ie){return T._waitingQueue.push(Hn(z.bind(null,ie)))},function(ie){return T._waitingQueue.push(Hn(J.bind(null,ie)))}).finally(function(){T._waitingFor===B&&(T._waitingFor=null)})})},js.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new me.Abort))},js.prototype.table=function(g){var b=this._memoizedTables||(this._memoizedTables={});if(d(b,g))return b[g];var T=this.schema[g];if(!T)throw new me.NotFound("Table "+g+" not part of transaction");return T=new this.db.Table(g,T,this),T.core=this.db.core.table(g),b[g]=T},js);function js(){}function $h(g,b,T,I,B,z,J){return{name:g,keyPath:b,unique:T,multi:I,auto:B,compound:z,src:(T&&!J?"&":"")+(I?"*":"")+(B?"++":"")+nc(b)}}function nc(g){return typeof g=="string"?g:g?"["+[].join.call(g,"+")+"]":""}function fl(g,b,T){return{name:g,primKey:b,indexes:T,mappedClass:null,idxByName:(I=function(B){return[B.name,B]},T.reduce(function(B,z,J){return J=I(z,J),J&&(B[J[0]]=J[1]),B},{}))};var I}var dl=function(g){try{return g.only([[]]),dl=function(){return[[]]},[[]]}catch{return dl=function(){return xa},xa}};function In(g){return g==null?function(){}:typeof g=="string"?(b=g).split(".").length===1?function(T){return T[b]}:function(T){return j(T,b)}:function(T){return j(T,g)};var b}function Cn(g){return[].slice.call(g)}var sd=0;function ka(g){return g==null?":id":typeof g=="string"?g:"[".concat(g.join("+"),"]")}function nr(g,b,fe){function I(ce){if(ce.type===3)return null;if(ce.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var te=ce.lower,ue=ce.upper,pe=ce.lowerOpen,ce=ce.upperOpen;return te===void 0?ue===void 0?null:b.upperBound(ue,!!ce):ue===void 0?b.lowerBound(te,!!pe):b.bound(te,ue,!!pe,!!ce)}function B(se){var te,ue=se.name;return{name:ue,schema:se,mutate:function(pe){var ce=pe.trans,we=pe.type,xe=pe.keys,Te=pe.values,Re=pe.range;return new Promise(function(et,it){et=Hn(et);var Ze=ce.objectStore(ue),tt=Ze.keyPath==null,qe=we==="put"||we==="add";if(!qe&&we!=="delete"&&we!=="deleteRange")throw new Error("Invalid operation type: "+we);var ct,_t=(xe||Te||{length:1}).length;if(xe&&Te&&xe.length!==Te.length)throw new Error("Given keys array must have same length as given values array.");if(_t===0)return et({numFailures:0,failures:{},results:[],lastResult:void 0});function Yt(ei){++Es,Ws(ei)}var fn=[],dn=[],Es=0;if(we==="deleteRange"){if(Re.type===4)return et({numFailures:Es,failures:dn,results:[],lastResult:void 0});Re.type===3?fn.push(ct=Ze.clear()):fn.push(ct=Ze.delete(I(Re)))}else{var tt=qe?tt?[Te,xe]:[Te,null]:[xe,null],jt=tt[0],ur=tt[1];if(qe)for(var jr=0;jr<_t;++jr)fn.push(ct=ur&&ur[jr]!==void 0?Ze[we](jt[jr],ur[jr]):Ze[we](jt[jr])),ct.onerror=Yt;else for(jr=0;jr<_t;++jr)fn.push(ct=Ze[we](jt[jr])),ct.onerror=Yt}function jh(ei){ei=ei.target.result,fn.forEach(function(bl,ld){return bl.error!=null&&(dn[ld]=bl.error)}),et({numFailures:Es,failures:dn,results:we==="delete"?xe:fn.map(function(bl){return bl.result}),lastResult:ei})}ct.onerror=function(ei){Yt(ei),jh(ei)},ct.onsuccess=jh})},getMany:function(pe){var ce=pe.trans,we=pe.keys;return new Promise(function(xe,Te){xe=Hn(xe);for(var Re,et=ce.objectStore(ue),it=we.length,Ze=new Array(it),tt=0,qe=0,ct=function(fn){fn=fn.target,Ze[fn._pos]=fn.result,++qe===tt&&xe(Ze)},_t=Ki(Te),Yt=0;Yt<it;++Yt)we[Yt]!=null&&((Re=et.get(we[Yt]))._pos=Yt,Re.onsuccess=ct,Re.onerror=_t,++tt);tt===0&&xe(Ze)})},get:function(pe){var ce=pe.trans,we=pe.key;return new Promise(function(xe,Te){xe=Hn(xe);var Re=ce.objectStore(ue).get(we);Re.onsuccess=function(et){return xe(et.target.result)},Re.onerror=Ki(Te)})},query:(te=H,function(pe){return new Promise(function(ce,we){ce=Hn(ce);var xe,Te,Re,tt=pe.trans,et=pe.values,it=pe.limit,ct=pe.query,Ze=it===1/0?void 0:it,qe=ct.index,ct=ct.range,tt=tt.objectStore(ue),qe=qe.isPrimaryKey?tt:tt.index(qe.name),ct=I(ct);if(it===0)return ce({result:[]});te?((Ze=et?qe.getAll(ct,Ze):qe.getAllKeys(ct,Ze)).onsuccess=function(_t){return ce({result:_t.target.result})},Ze.onerror=Ki(we)):(xe=0,Te=!et&&"openKeyCursor"in qe?qe.openKeyCursor(ct):qe.openCursor(ct),Re=[],Te.onsuccess=function(_t){var Yt=Te.result;return Yt?(Re.push(et?Yt.value:Yt.primaryKey),++xe===it?ce({result:Re}):void Yt.continue()):ce({result:Re})},Te.onerror=Ki(we))})}),openCursor:function(pe){var ce=pe.trans,we=pe.values,xe=pe.query,Te=pe.reverse,Re=pe.unique;return new Promise(function(et,it){et=Hn(et);var qe=xe.index,Ze=xe.range,tt=ce.objectStore(ue),tt=qe.isPrimaryKey?tt:tt.index(qe.name),qe=Te?Re?"prevunique":"prev":Re?"nextunique":"next",ct=!we&&"openKeyCursor"in tt?tt.openKeyCursor(I(Ze),qe):tt.openCursor(I(Ze),qe);ct.onerror=Ki(it),ct.onsuccess=Hn(function(_t){var Yt,fn,dn,Es,jt=ct.result;jt?(jt.___id=++sd,jt.done=!1,Yt=jt.continue.bind(jt),fn=(fn=jt.continuePrimaryKey)&&fn.bind(jt),dn=jt.advance.bind(jt),Es=function(){throw new Error("Cursor not stopped")},jt.trans=ce,jt.stop=jt.continue=jt.continuePrimaryKey=jt.advance=function(){throw new Error("Cursor not started")},jt.fail=Hn(it),jt.next=function(){var ur=this,jr=1;return this.start(function(){return jr--?ur.continue():ur.stop()}).then(function(){return ur})},jt.start=function(ur){function jr(){if(ct.result)try{ur()}catch(ei){jt.fail(ei)}else jt.done=!0,jt.start=function(){throw new Error("Cursor behind last entry")},jt.stop()}var jh=new Promise(function(ei,bl){ei=Hn(ei),ct.onerror=Ki(bl),jt.fail=bl,jt.stop=function(ld){jt.stop=jt.continue=jt.continuePrimaryKey=jt.advance=Es,ei(ld)}});return ct.onsuccess=Hn(function(ei){ct.onsuccess=jr,jr()}),jt.continue=Yt,jt.continuePrimaryKey=fn,jt.advance=dn,jr(),jh},et(jt)):et(null)},it)})},count:function(pe){var ce=pe.query,we=pe.trans,xe=ce.index,Te=ce.range;return new Promise(function(Re,et){var it=we.objectStore(ue),Ze=xe.isPrimaryKey?it:it.index(xe.name),it=I(Te),Ze=it?Ze.count(it):Ze.count();Ze.onsuccess=Hn(function(tt){return Re(tt.target.result)}),Ze.onerror=Ki(et)})}}}var z,J,ie,Y=(J=fe,ie=Cn((z=g).objectStoreNames),{schema:{name:z.name,tables:ie.map(function(se){return J.objectStore(se)}).map(function(se){var te=se.keyPath,ce=se.autoIncrement,ue=a(te),pe={},ce={name:se.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:te==null,compound:ue,keyPath:te,autoIncrement:ce,unique:!0,extractKey:In(te)},indexes:Cn(se.indexNames).map(function(we){return se.index(we)}).map(function(Re){var xe=Re.name,Te=Re.unique,et=Re.multiEntry,Re=Re.keyPath,et={name:xe,compound:a(Re),keyPath:Re,unique:Te,multiEntry:et,extractKey:In(Re)};return pe[ka(Re)]=et}),getIndexByKeyPath:function(we){return pe[ka(we)]}};return pe[":id"]=ce.primaryKey,te!=null&&(pe[ka(te)]=ce.primaryKey),ce})},hasGetAll:0<ie.length&&"getAll"in J.objectStore(ie[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),fe=Y.schema,H=Y.hasGetAll,Y=fe.tables.map(B),W={};return Y.forEach(function(se){return W[se.name]=se}),{stack:"dbcore",transaction:g.transaction.bind(g),table:function(se){if(!W[se])throw new Error("Table '".concat(se,"' not found"));return W[se]},MIN_KEY:-1/0,MAX_KEY:dl(b),schema:fe}}function im(g,b,T,I){var B=T.IDBKeyRange;return T.indexedDB,{dbcore:(I=nr(b,B,I),g.dbcore.reduce(function(z,J){return J=J.create,r(r({},z),J(z))},I))}}function au(g,I){var T=I.db,I=im(g._middlewares,T,g._deps,I);g.core=I.dbcore,g.tables.forEach(function(B){var z=B.name;g.core.schema.tables.some(function(J){return J.name===z})&&(B.core=g.core.table(z),g[z]instanceof g.Table&&(g[z].core=B.core))})}function rc(g,b,T,I){T.forEach(function(B){var z=I[B];b.forEach(function(J){var ie=function fe(H,Y){return E(H,Y)||(H=c(H))&&fe(H,Y)}(J,B);(!ie||"value"in ie&&ie.value===void 0)&&(J===g.Transaction.prototype||J instanceof g.Transaction?w(J,B,{get:function(){return this.table(B)},set:function(fe){y(this,B,{value:fe,writable:!0,configurable:!0,enumerable:!0})}}):J[B]=new g.Table(B,z))})})}function ic(g,b){b.forEach(function(T){for(var I in T)T[I]instanceof g.Table&&delete T[I]})}function od(g,b){return g._cfg.version-b._cfg.version}function vr(g,b,T,I){var B=g._dbSchema;T.objectStoreNames.contains("$meta")&&!B.$meta&&(B.$meta=fl("$meta",ml("")[0],[]),g._storeNames.push("$meta"));var z=g._createTransaction("readwrite",g._storeNames,B);z.create(T),z._completion.catch(I);var J=z._reject.bind(z),ie=je.transless||je;ws(function(){return je.trans=z,je.transless=ie,b!==0?(au(g,T),H=b,((fe=z).storeNames.includes("$meta")?fe.table("$meta").get("version").then(function(Y){return Y??H}):Oe.resolve(H)).then(function(Y){return se=Y,te=z,ue=T,pe=[],Y=(W=g)._versions,ce=W._dbSchema=pl(0,W.idbdb,ue),(Y=Y.filter(function(we){return we._cfg.version>=se})).length!==0?(Y.forEach(function(we){pe.push(function(){var xe=ce,Te=we._cfg.dbschema;Ra(W,xe,ue),Ra(W,Te,ue),ce=W._dbSchema=Te;var Re=Wr(xe,Te);Re.add.forEach(function(qe){sc(ue,qe[0],qe[1].primKey,qe[1].indexes)}),Re.change.forEach(function(qe){if(qe.recreate)throw new me.Upgrade("Not yet support for changing primary key");var ct=ue.objectStore(qe.name);qe.add.forEach(function(_t){return xr(ct,_t)}),qe.change.forEach(function(_t){ct.deleteIndex(_t.name),xr(ct,_t)}),qe.del.forEach(function(_t){return ct.deleteIndex(_t)})});var et=we._cfg.contentUpgrade;if(et&&we._cfg.version>se){au(W,ue),te._memoizedTables={};var it=O(Te);Re.del.forEach(function(qe){it[qe]=xe[qe]}),ic(W,[W.Transaction.prototype]),rc(W,[W.Transaction.prototype],o(it),it),te.schema=it;var Ze,tt=Ge(et);return tt&&_a(),Re=Oe.follow(function(){var qe;(Ze=et(te))&&tt&&(qe=Us.bind(null,null),Ze.then(qe,qe))}),Ze&&typeof Ze.then=="function"?Oe.resolve(Ze):Re.then(function(){return Ze})}}),pe.push(function(xe){var Te,Re,et=we._cfg.dbschema;Te=et,Re=xe,[].slice.call(Re.db.objectStoreNames).forEach(function(it){return Te[it]==null&&Re.db.deleteObjectStore(it)}),ic(W,[W.Transaction.prototype]),rc(W,[W.Transaction.prototype],W._storeNames,W._dbSchema),te.schema=W._dbSchema}),pe.push(function(xe){W.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(W.idbdb.version/10)===we._cfg.version?(W.idbdb.deleteObjectStore("$meta"),delete W._dbSchema.$meta,W._storeNames=W._storeNames.filter(function(Te){return Te!=="$meta"})):xe.objectStore("$meta").put(we._cfg.version,"version"))})}),function we(){return pe.length?Oe.resolve(pe.shift()(te.idbtrans)).then(we):Oe.resolve()}().then(function(){cu(ce,ue)})):Oe.resolve();var W,se,te,ue,pe,ce}).catch(J)):(o(B).forEach(function(Y){sc(T,Y,B[Y].primKey,B[Y].indexes)}),au(g,T),void Oe.follow(function(){return g.on.populate.fire(z)}).catch(J));var fe,H})}function lu(g,b){cu(g._dbSchema,b),b.db.version%10!=0||b.objectStoreNames.contains("$meta")||b.db.createObjectStore("$meta").add(Math.ceil(b.db.version/10-1),"version");var T=pl(0,g.idbdb,b);Ra(g,g._dbSchema,b);for(var I=0,B=Wr(T,g._dbSchema).change;I<B.length;I++){var z=function(J){if(J.change.length||J.recreate)return console.warn("Unable to patch indexes of table ".concat(J.name," because it has changes on the type of index or primary key.")),{value:void 0};var ie=b.objectStore(J.name);J.add.forEach(function(fe){Le&&console.debug("Dexie upgrade patch: Creating missing index ".concat(J.name,".").concat(fe.src)),xr(ie,fe)})}(B[I]);if(typeof z=="object")return z.value}}function Wr(g,b){var T,I={del:[],add:[],change:[]};for(T in g)b[T]||I.del.push(T);for(T in b){var B=g[T],z=b[T];if(B){var J={name:T,def:z,recreate:!1,del:[],add:[],change:[]};if(""+(B.primKey.keyPath||"")!=""+(z.primKey.keyPath||"")||B.primKey.auto!==z.primKey.auto)J.recreate=!0,I.change.push(J);else{var ie=B.idxByName,fe=z.idxByName,H=void 0;for(H in ie)fe[H]||J.del.push(H);for(H in fe){var Y=ie[H],W=fe[H];Y?Y.src!==W.src&&J.change.push(W):J.add.push(W)}(0<J.del.length||0<J.add.length||0<J.change.length)&&I.change.push(J)}}else I.add.push([T,z])}return I}function sc(g,b,T,I){var B=g.db.createObjectStore(b,T.keyPath?{keyPath:T.keyPath,autoIncrement:T.auto}:{autoIncrement:T.auto});return I.forEach(function(z){return xr(B,z)}),B}function cu(g,b){o(g).forEach(function(T){b.db.objectStoreNames.contains(T)||(Le&&console.debug("Dexie: Creating missing table",T),sc(b,T,g[T].primKey,g[T].indexes))})}function xr(g,b){g.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function pl(g,b,T){var I={};return L(b.objectStoreNames,0).forEach(function(B){for(var z=T.objectStore(B),J=$h(nc(H=z.keyPath),H||"",!0,!1,!!z.autoIncrement,H&&typeof H!="string",!0),ie=[],fe=0;fe<z.indexNames.length;++fe){var Y=z.index(z.indexNames[fe]),H=Y.keyPath,Y=$h(Y.name,H,!!Y.unique,!!Y.multiEntry,!1,H&&typeof H!="string",!1);ie.push(Y)}I[B]=fl(B,J,ie)}),I}function Ra(g,b,T){for(var I=T.db.objectStoreNames,B=0;B<I.length;++B){var z=I[B],J=T.objectStore(z);g._hasGetAll="getAll"in J;for(var ie=0;ie<J.indexNames.length;++ie){var fe=J.indexNames[ie],H=J.index(fe).keyPath,Y=typeof H=="string"?H:"["+L(H).join("+")+"]";!b[z]||(H=b[z].idxByName[Y])&&(H.name=fe,delete b[z].idxByName[Y],b[z].idxByName[fe]=H)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(g._hasGetAll=!1)}function ml(g){return g.split(",").map(function(b,T){var I=(b=b.trim()).replace(/([&*]|\+\+)/g,""),B=/^\[/.test(I)?I.match(/^\[(.*)\]$/)[1].split("+"):I;return $h(I,B||null,/\&/.test(b),/\*/.test(b),/\+\+/.test(b),a(B),T===0)})}var Hh=(Go.prototype._parseStoresSpec=function(g,b){o(g).forEach(function(T){if(g[T]!==null){var I=ml(g[T]),B=I.shift();if(B.unique=!0,B.multi)throw new me.Schema("Primary key cannot be multi-valued");I.forEach(function(z){if(z.auto)throw new me.Schema("Only primary key can be marked as autoIncrement (++)");if(!z.keyPath)throw new me.Schema("Index must have a name and cannot be an empty string")}),b[T]=fl(T,B,I)}})},Go.prototype.stores=function(T){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,T):T;var T=b._versions,I={},B={};return T.forEach(function(z){l(I,z._cfg.storesSource),B=z._cfg.dbschema={},z._parseStoresSpec(I,B)}),b._dbSchema=B,ic(b,[b._allTables,b,b.Transaction.prototype]),rc(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],o(B),B),b._storeNames=o(B),this},Go.prototype.upgrade=function(g){return this._cfg.contentUpgrade=Xe(this._cfg.contentUpgrade||Ye,g),this},Go);function Go(){}function uu(g,b){var T=g._dbNamesDB;return T||(T=g._dbNamesDB=new Na(zo,{addons:[],indexedDB:g,IDBKeyRange:b})).version(1).stores({dbnames:"name"}),T.table("dbnames")}function Qr(g){return g&&typeof g.databases=="function"}function Pa(g){return ws(function(){return je.letThrough=!0,g()})}function ui(g){return!("from"in g)}var zr=function(g,b){if(!this){var T=new zr;return g&&"d"in g&&l(T,g),T}l(this,arguments.length?{d:1,from:g,to:1<arguments.length?b:g}:{d:0})};function qo(g,b,T){var I=cn(b,T);if(!isNaN(I)){if(0<I)throw RangeError();if(ui(g))return l(g,{from:b,to:T,d:1});var B=g.l,I=g.r;if(cn(T,g.from)<0)return B?qo(B,b,T):g.l={from:b,to:T,d:1,l:null,r:null},qn(g);if(0<cn(b,g.to))return I?qo(I,b,T):g.r={from:b,to:T,d:1,l:null,r:null},qn(g);cn(b,g.from)<0&&(g.from=b,g.l=null,g.d=I?I.d+1:1),0<cn(T,g.to)&&(g.to=T,g.r=null,g.d=g.l?g.l.d+1:1),T=!g.r,B&&!g.l&&_i(g,B),I&&T&&_i(g,I)}}function _i(g,b){ui(b)||function T(I,fe){var z=fe.from,J=fe.to,ie=fe.l,fe=fe.r;qo(I,z,J),ie&&T(I,ie),fe&&T(I,fe)}(g,b)}function gl(g,b){var T=_o(b),I=T.next();if(I.done)return!1;for(var B=I.value,z=_o(g),J=z.next(B.from),ie=J.value;!I.done&&!J.done;){if(cn(ie.from,B.to)<=0&&0<=cn(ie.to,B.from))return!0;cn(B.from,ie.from)<0?B=(I=T.next(ie.from)).value:ie=(J=z.next(B.from)).value}return!1}function _o(g){var b=ui(g)?null:{s:0,n:g};return{next:function(T){for(var I=0<arguments.length;b;)switch(b.s){case 0:if(b.s=1,I)for(;b.n.l&&cn(T,b.n.from)<0;)b={up:b,n:b.n.l,s:1};else for(;b.n.l;)b={up:b,n:b.n.l,s:1};case 1:if(b.s=2,!I||cn(T,b.n.to)<=0)return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3,b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function qn(g){var b,T,I=(((b=g.r)===null||b===void 0?void 0:b.d)||0)-(((T=g.l)===null||T===void 0?void 0:T.d)||0),B=1<I?"r":I<-1?"l":"";B&&(b=B=="r"?"l":"r",T=r({},g),I=g[B],g.from=I.from,g.to=I.to,g[B]=I[B],T[B]=I[b],(g[b]=T).d=Ks(T)),g.d=Ks(g)}function Ks(T){var b=T.r,T=T.l;return(b?T?Math.max(b.d,T.d):b.d:T?T.d:0)+1}function Gi(g,b){return o(b).forEach(function(T){g[T]?_i(g[T],b[T]):g[T]=function I(B){var z,J,ie={};for(z in B)d(B,z)&&(J=B[z],ie[z]=!J||typeof J!="object"||k.has(J.constructor)?J:I(J));return ie}(b[T])}),g}function hu(g,b){return g.all||b.all||Object.keys(g).some(function(T){return b[T]&&gl(b[T],g[T])})}p(zr.prototype,((qs={add:function(g){return _i(this,g),this},addKey:function(g){return qo(this,g,g),this},addKeys:function(g){var b=this;return g.forEach(function(T){return qo(b,T,T)}),this},hasKey:function(g){var b=_o(this).next(g).value;return b&&cn(b.from,g)<=0&&0<=cn(b.to,g)}})[Q]=function(){return _o(this)},qs));var Gs={},fu={},du=!1;function Da(g){Gi(fu,g),du||(du=!0,setTimeout(function(){du=!1,Zr(fu,!(fu={}))},0))}function Zr(g,b){b===void 0&&(b=!1);var T=new Set;if(g.all)for(var I=0,B=Object.values(Gs);I<B.length;I++)yl(J=B[I],g,T,b);else for(var z in g){var J,ie=/^idb\:\/\/(.*)\/(.*)\//.exec(z);ie&&(z=ie[1],ie=ie[2],(J=Gs["idb://".concat(z,"/").concat(ie)])&&yl(J,g,T,b))}T.forEach(function(fe){return fe()})}function yl(g,b,T,I){for(var B=[],z=0,J=Object.entries(g.queries.query);z<J.length;z++){for(var ie=J[z],fe=ie[0],H=[],Y=0,W=ie[1];Y<W.length;Y++){var se=W[Y];hu(b,se.obsSet)?se.subscribers.forEach(function(ce){return T.add(ce)}):I&&H.push(se)}I&&B.push([fe,H])}if(I)for(var te=0,ue=B;te<ue.length;te++){var pe=ue[te],fe=pe[0],H=pe[1];g.queries.query[fe]=H}}function Ma(g){var b=g._state,T=g._deps.indexedDB;if(b.isBeingOpened||g.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?Qn(b.dbOpenError):g});b.isBeingOpened=!0,b.dbOpenError=null,b.openComplete=!1;var I=b.openCanceller,B=Math.round(10*g.verno),z=!1;function J(){if(b.openCanceller!==I)throw new me.DatabaseClosed("db.open() was cancelled")}function ie(){return new Oe(function(se,te){if(J(),!T)throw new me.MissingAPI;var ue=g.name,pe=b.autoSchema||!B?T.open(ue):T.open(ue,B);if(!pe)throw new me.MissingAPI;pe.onerror=Ki(te),pe.onblocked=Hn(g._fireOnBlocked),pe.onupgradeneeded=Hn(function(ce){var we;Y=pe.transaction,b.autoSchema&&!g._options.allowEmptyDB?(pe.onerror=Ws,Y.abort(),pe.result.close(),(we=T.deleteDatabase(ue)).onsuccess=we.onerror=Hn(function(){te(new me.NoSuchDatabase("Database ".concat(ue," doesnt exist")))})):(Y.onerror=Ki(te),ce=ce.oldVersion>Math.pow(2,62)?0:ce.oldVersion,W=ce<1,g.idbdb=pe.result,z&&lu(g,Y),vr(g,ce/10,Y,te))},te),pe.onsuccess=Hn(function(){Y=null;var ce,we,xe,Te,Re,et=g.idbdb=pe.result,it=L(et.objectStoreNames);if(0<it.length)try{var Ze=et.transaction((Te=it).length===1?Te[0]:Te,"readonly");if(b.autoSchema)we=et,xe=Ze,(ce=g).verno=we.version/10,xe=ce._dbSchema=pl(0,we,xe),ce._storeNames=L(we.objectStoreNames,0),rc(ce,[ce._allTables],o(xe),xe);else if(Ra(g,g._dbSchema,Ze),((Re=Wr(pl(0,(Re=g).idbdb,Ze),Re._dbSchema)).add.length||Re.change.some(function(tt){return tt.add.length||tt.change.length}))&&!z)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),et.close(),B=et.version+1,z=!0,se(ie());au(g,Ze)}catch{}Wo.push(g),et.onversionchange=Hn(function(tt){b.vcFired=!0,g.on("versionchange").fire(tt)}),et.onclose=Hn(function(tt){g.on("close").fire(tt)}),W&&(Re=g._deps,Ze=ue,et=Re.indexedDB,Re=Re.IDBKeyRange,Qr(et)||Ze===zo||uu(et,Re).put({name:Ze}).catch(Ye)),se()},te)}).catch(function(se){switch(se==null?void 0:se.name){case"UnknownError":if(0<b.PR1398_maxLoop)return b.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),ie();break;case"VersionError":if(0<B)return B=0,ie()}return Oe.reject(se)})}var fe,H=b.dbReadyResolve,Y=null,W=!1;return Oe.race([I,(typeof navigator>"u"?Oe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(se){function te(){return indexedDB.databases().finally(se)}fe=setInterval(te,100),te()}).finally(function(){return clearInterval(fe)}):Promise.resolve()).then(ie)]).then(function(){return J(),b.onReadyBeingFired=[],Oe.resolve(Pa(function(){return g.on.ready.fire(g.vip)})).then(function se(){if(0<b.onReadyBeingFired.length){var te=b.onReadyBeingFired.reduce(Xe,Ye);return b.onReadyBeingFired=[],Oe.resolve(Pa(function(){return te(g.vip)})).then(se)}})}).finally(function(){b.openCanceller===I&&(b.onReadyBeingFired=null,b.isBeingOpened=!1)}).catch(function(se){b.dbOpenError=se;try{Y&&Y.abort()}catch{}return I===b.openCanceller&&g._close(),Qn(se)}).finally(function(){b.openComplete=!0,H()}).then(function(){var se;return W&&(se={},g.tables.forEach(function(te){te.schema.indexes.forEach(function(ue){ue.name&&(se["idb://".concat(g.name,"/").concat(te.name,"/").concat(ue.name)]=new zr(-1/0,[[[]]]))}),se["idb://".concat(g.name,"/").concat(te.name,"/")]=se["idb://".concat(g.name,"/").concat(te.name,"/:dels")]=new zr(-1/0,[[[]]])}),Ko(tc).fire(se),Zr(se,!0)),g})}function Yo(g){function b(z){return g.next(z)}var T=B(b),I=B(function(z){return g.throw(z)});function B(z){return function(fe){var ie=z(fe),fe=ie.value;return ie.done?fe:fe&&typeof fe.then=="function"?fe.then(T,I):a(fe)?Promise.all(fe).then(T,I):T(fe)}}return B(b)()}function m(g,b,T){for(var I=a(g)?g.slice():[g],B=0;B<T;++B)I.push(b);return I}var _={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(g){return r(r({},g),{table:function(b){var T=g.table(b),I=T.schema,B={},z=[];function J(W,se,te){var ue=ka(W),pe=B[ue]=B[ue]||[],ce=W==null?0:typeof W=="string"?1:W.length,we=0<se,we=r(r({},te),{name:we?"".concat(ue,"(virtual-from:").concat(te.name,")"):te.name,lowLevelIndex:te,isVirtual:we,keyTail:se,keyLength:ce,extractKey:In(W),unique:!we&&te.unique});return pe.push(we),we.isPrimaryKey||z.push(we),1<ce&&J(ce===2?W[0]:W.slice(0,ce-1),se+1,te),pe.sort(function(xe,Te){return xe.keyTail-Te.keyTail}),we}b=J(I.primaryKey.keyPath,0,I.primaryKey),B[":id"]=[b];for(var ie=0,fe=I.indexes;ie<fe.length;ie++){var H=fe[ie];J(H.keyPath,0,H)}function Y(W){var se,te=W.query.index;return te.isVirtual?r(r({},W),{query:{index:te.lowLevelIndex,range:(se=W.query.range,te=te.keyTail,{type:se.type===1?2:se.type,lower:m(se.lower,se.lowerOpen?g.MAX_KEY:g.MIN_KEY,te),lowerOpen:!0,upper:m(se.upper,se.upperOpen?g.MIN_KEY:g.MAX_KEY,te),upperOpen:!0})}}):W}return r(r({},T),{schema:r(r({},I),{primaryKey:b,indexes:z,getIndexByKeyPath:function(W){return(W=B[ka(W)])&&W[0]}}),count:function(W){return T.count(Y(W))},query:function(W){return T.query(Y(W))},openCursor:function(W){var se=W.query.index,te=se.keyTail,ue=se.isVirtual,pe=se.keyLength;return ue?T.openCursor(Y(W)).then(function(we){return we&&ce(we)}):T.openCursor(W);function ce(we){return Object.create(we,{continue:{value:function(xe){xe!=null?we.continue(m(xe,W.reverse?g.MAX_KEY:g.MIN_KEY,te)):W.unique?we.continue(we.key.slice(0,pe).concat(W.reverse?g.MIN_KEY:g.MAX_KEY,te)):we.continue()}},continuePrimaryKey:{value:function(xe,Te){we.continuePrimaryKey(m(xe,g.MAX_KEY,te),Te)}},primaryKey:{get:function(){return we.primaryKey}},key:{get:function(){var xe=we.key;return pe===1?xe[0]:xe.slice(0,pe)}},value:{get:function(){return we.value}}})}}})}})}};function M(g,b,T,I){return T=T||{},I=I||"",o(g).forEach(function(B){var z,J,ie;d(b,B)?(z=g[B],J=b[B],typeof z=="object"&&typeof J=="object"&&z&&J?(ie=le(z))!==le(J)?T[I+B]=b[B]:ie==="Object"?M(z,J,T,I+B+"."):z!==J&&(T[I+B]=b[B]):z!==J&&(T[I+B]=b[B])):T[I+B]=void 0}),o(b).forEach(function(B){d(g,B)||(T[I+B]=b[B])}),T}function G(g,b){return b.type==="delete"?b.keys:b.keys||b.values.map(g.extractKey)}var ve={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(g){return r(r({},g),{table:function(b){var T=g.table(b),I=T.schema.primaryKey;return r(r({},T),{mutate:function(B){var z=je.trans,J=z.table(b).hook,ie=J.deleting,fe=J.creating,H=J.updating;switch(B.type){case"add":if(fe.fire===Ye)break;return z._promise("readwrite",function(){return Y(B)},!0);case"put":if(fe.fire===Ye&&H.fire===Ye)break;return z._promise("readwrite",function(){return Y(B)},!0);case"delete":if(ie.fire===Ye)break;return z._promise("readwrite",function(){return Y(B)},!0);case"deleteRange":if(ie.fire===Ye)break;return z._promise("readwrite",function(){return function W(se,te,ue){return T.query({trans:se,values:!1,query:{index:I,range:te},limit:ue}).then(function(pe){var ce=pe.result;return Y({type:"delete",keys:ce,trans:se}).then(function(we){return 0<we.numFailures?Promise.reject(we.failures[0]):ce.length<ue?{failures:[],numFailures:0,lastResult:void 0}:W(se,r(r({},te),{lower:ce[ce.length-1],lowerOpen:!0}),ue)})})}(B.trans,B.range,1e4)},!0)}return T.mutate(B);function Y(W){var se,te,ue,pe=je.trans,ce=W.keys||G(I,W);if(!ce)throw new Error("Keys missing");return(W=W.type==="add"||W.type==="put"?r(r({},W),{keys:ce}):r({},W)).type!=="delete"&&(W.values=i([],W.values)),W.keys&&(W.keys=i([],W.keys)),se=T,ue=ce,((te=W).type==="add"?Promise.resolve([]):se.getMany({trans:te.trans,keys:ue,cache:"immutable"})).then(function(we){var xe=ce.map(function(Te,Re){var et,it,Ze,tt=we[Re],qe={onerror:null,onsuccess:null};return W.type==="delete"?ie.fire.call(qe,Te,tt,pe):W.type==="add"||tt===void 0?(et=fe.fire.call(qe,Te,W.values[Re],pe),Te==null&&et!=null&&(W.keys[Re]=Te=et,I.outbound||N(W.values[Re],I.keyPath,Te))):(et=M(tt,W.values[Re]),(it=H.fire.call(qe,et,Te,tt,pe))&&(Ze=W.values[Re],Object.keys(it).forEach(function(ct){d(Ze,ct)?Ze[ct]=it[ct]:N(Ze,ct,it[ct])}))),qe});return T.mutate(W).then(function(Te){for(var Re=Te.failures,et=Te.results,it=Te.numFailures,Te=Te.lastResult,Ze=0;Ze<ce.length;++Ze){var tt=(et||ce)[Ze],qe=xe[Ze];tt==null?qe.onerror&&qe.onerror(Re[Ze]):qe.onsuccess&&qe.onsuccess(W.type==="put"&&we[Ze]?W.values[Ze]:tt)}return{failures:Re,results:et,numFailures:it,lastResult:Te}}).catch(function(Te){return xe.forEach(function(Re){return Re.onerror&&Re.onerror(Te)}),Promise.reject(Te)})})}}})}})}};function Ae(g,b,T){try{if(!b||b.keys.length<g.length)return null;for(var I=[],B=0,z=0;B<b.keys.length&&z<g.length;++B)cn(b.keys[B],g[z])===0&&(I.push(T?D(b.values[B]):b.values[B]),++z);return I.length===g.length?I:null}catch{return null}}var st={stack:"dbcore",level:-1,create:function(g){return{table:function(b){var T=g.table(b);return r(r({},T),{getMany:function(I){if(!I.cache)return T.getMany(I);var B=Ae(I.keys,I.trans._cache,I.cache==="clone");return B?Oe.resolve(B):T.getMany(I).then(function(z){return I.trans._cache={keys:I.keys,values:I.cache==="clone"?D(z):z},z})},mutate:function(I){return I.type!=="add"&&(I.trans._cache=null),T.mutate(I)}})}}}};function Dn(g,b){return g.trans.mode==="readonly"&&!!g.subscr&&!g.trans.explicit&&g.trans.db._options.cache!=="disabled"&&!b.schema.primaryKey.outbound}function Rr(g,b){switch(g){case"query":return b.values&&!b.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var vn={stack:"dbcore",level:0,name:"Observability",create:function(g){var b=g.schema.name,T=new zr(g.MIN_KEY,g.MAX_KEY);return r(r({},g),{transaction:function(I,B,z){if(je.subscr&&B!=="readonly")throw new me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(je.querier));return g.transaction(I,B,z)},table:function(I){var B=g.table(I),z=B.schema,J=z.primaryKey,W=z.indexes,ie=J.extractKey,fe=J.outbound,H=J.autoIncrement&&W.filter(function(te){return te.compound&&te.keyPath.includes(J.keyPath)}),Y=r(r({},B),{mutate:function(te){function ue(ct){return ct="idb://".concat(b,"/").concat(I,"/").concat(ct),Te[ct]||(Te[ct]=new zr)}var pe,ce,we,xe=te.trans,Te=te.mutatedParts||(te.mutatedParts={}),Re=ue(""),et=ue(":dels"),it=te.type,qe=te.type==="deleteRange"?[te.range]:te.type==="delete"?[te.keys]:te.values.length<50?[G(J,te).filter(function(ct){return ct}),te.values]:[],Ze=qe[0],tt=qe[1],qe=te.trans._cache;return a(Ze)?(Re.addKeys(Ze),(qe=it==="delete"||Ze.length===tt.length?Ae(Ze,qe):null)||et.addKeys(Ze),(qe||tt)&&(pe=ue,ce=qe,we=tt,z.indexes.forEach(function(ct){var _t=pe(ct.name||"");function Yt(dn){return dn!=null?ct.extractKey(dn):null}function fn(dn){return ct.multiEntry&&a(dn)?dn.forEach(function(Es){return _t.addKey(Es)}):_t.addKey(dn)}(ce||we).forEach(function(dn,ur){var jt=ce&&Yt(ce[ur]),ur=we&&Yt(we[ur]);cn(jt,ur)!==0&&(jt!=null&&fn(jt),ur!=null&&fn(ur))})}))):Ze?(tt={from:(tt=Ze.lower)!==null&&tt!==void 0?tt:g.MIN_KEY,to:(tt=Ze.upper)!==null&&tt!==void 0?tt:g.MAX_KEY},et.add(tt),Re.add(tt)):(Re.add(T),et.add(T),z.indexes.forEach(function(ct){return ue(ct.name).add(T)})),B.mutate(te).then(function(ct){return!Ze||te.type!=="add"&&te.type!=="put"||(Re.addKeys(ct.results),H&&H.forEach(function(_t){for(var Yt=te.values.map(function(jt){return _t.extractKey(jt)}),fn=_t.keyPath.findIndex(function(jt){return jt===J.keyPath}),dn=0,Es=ct.results.length;dn<Es;++dn)Yt[dn][fn]=ct.results[dn];ue(_t.name).addKeys(Yt)})),xe.mutatedParts=Gi(xe.mutatedParts||{},Te),ct})}}),W=function(ue){var pe=ue.query,ue=pe.index,pe=pe.range;return[ue,new zr((ue=pe.lower)!==null&&ue!==void 0?ue:g.MIN_KEY,(pe=pe.upper)!==null&&pe!==void 0?pe:g.MAX_KEY)]},se={get:function(te){return[J,new zr(te.key)]},getMany:function(te){return[J,new zr().addKeys(te.keys)]},count:W,query:W,openCursor:W};return o(se).forEach(function(te){Y[te]=function(ue){var pe=je.subscr,ce=!!pe,we=Dn(je,B)&&Rr(te,ue)?ue.obsSet={}:pe;if(ce){var xe=function(tt){return tt="idb://".concat(b,"/").concat(I,"/").concat(tt),we[tt]||(we[tt]=new zr)},Te=xe(""),Re=xe(":dels"),pe=se[te](ue),ce=pe[0],pe=pe[1];if((te==="query"&&ce.isPrimaryKey&&!ue.values?Re:xe(ce.name||"")).add(pe),!ce.isPrimaryKey){if(te!=="count"){var et=te==="query"&&fe&&ue.values&&B.query(r(r({},ue),{values:!1}));return B[te].apply(this,arguments).then(function(tt){if(te==="query"){if(fe&&ue.values)return et.then(function(Yt){return Yt=Yt.result,Te.addKeys(Yt),tt});var qe=ue.values?tt.result.map(ie):tt.result;(ue.values?Te:Re).addKeys(qe)}else if(te==="openCursor"){var ct=tt,_t=ue.values;return ct&&Object.create(ct,{key:{get:function(){return Re.addKey(ct.primaryKey),ct.key}},primaryKey:{get:function(){var Yt=ct.primaryKey;return Re.addKey(Yt),Yt}},value:{get:function(){return _t&&Te.addKey(ct.primaryKey),ct.value}}})}return tt})}Re.add(T)}}return B[te].apply(this,arguments)}}),Y}})}};function Vn(g,b,T){if(T.numFailures===0)return b;if(b.type==="deleteRange")return null;var I=b.keys?b.keys.length:"values"in b&&b.values?b.values.length:1;return T.numFailures===I?null:(b=r({},b),a(b.keys)&&(b.keys=b.keys.filter(function(B,z){return!(z in T.failures)})),"values"in b&&a(b.values)&&(b.values=b.values.filter(function(B,z){return!(z in T.failures)})),b)}function br(g,b){return T=g,((I=b).lower===void 0||(I.lowerOpen?0<cn(T,I.lower):0<=cn(T,I.lower)))&&(g=g,(b=b).upper===void 0||(b.upperOpen?cn(g,b.upper)<0:cn(g,b.upper)<=0));var T,I}function Ss(g,b,se,I,B,z){if(!se||se.length===0)return g;var J=b.query.index,ie=J.multiEntry,fe=b.query.range,H=I.schema.primaryKey.extractKey,Y=J.extractKey,W=(J.lowLevelIndex||J).extractKey,se=se.reduce(function(te,ue){var pe=te,ce=[];if(ue.type==="add"||ue.type==="put")for(var we=new zr,xe=ue.values.length-1;0<=xe;--xe){var Te,Re=ue.values[xe],et=H(Re);we.hasKey(et)||(Te=Y(Re),(ie&&a(Te)?Te.some(function(ct){return br(ct,fe)}):br(Te,fe))&&(we.addKey(et),ce.push(Re)))}switch(ue.type){case"add":var it=new zr().addKeys(b.values?te.map(function(_t){return H(_t)}):te),pe=te.concat(b.values?ce.filter(function(_t){return _t=H(_t),!it.hasKey(_t)&&(it.addKey(_t),!0)}):ce.map(function(_t){return H(_t)}).filter(function(_t){return!it.hasKey(_t)&&(it.addKey(_t),!0)}));break;case"put":var Ze=new zr().addKeys(ue.values.map(function(_t){return H(_t)}));pe=te.filter(function(_t){return!Ze.hasKey(b.values?H(_t):_t)}).concat(b.values?ce:ce.map(function(_t){return H(_t)}));break;case"delete":var tt=new zr().addKeys(ue.keys);pe=te.filter(function(_t){return!tt.hasKey(b.values?H(_t):_t)});break;case"deleteRange":var qe=ue.range;pe=te.filter(function(_t){return!br(H(_t),qe)})}return pe},g);return se===g?g:(se.sort(function(te,ue){return cn(W(te),W(ue))||cn(H(te),H(ue))}),b.limit&&b.limit<1/0&&(se.length>b.limit?se.length=b.limit:g.length===b.limit&&se.length<b.limit&&(B.dirty=!0)),z?Object.freeze(se):se)}function Pi(g,b){return cn(g.lower,b.lower)===0&&cn(g.upper,b.upper)===0&&!!g.lowerOpen==!!b.lowerOpen&&!!g.upperOpen==!!b.upperOpen}function oc(g,b){return function(T,I,B,z){if(T===void 0)return I!==void 0?-1:0;if(I===void 0)return 1;if((I=cn(T,I))===0){if(B&&z)return 0;if(B)return 1;if(z)return-1}return I}(g.lower,b.lower,g.lowerOpen,b.lowerOpen)<=0&&0<=function(T,I,B,z){if(T===void 0)return I!==void 0?1:0;if(I===void 0)return-1;if((I=cn(T,I))===0){if(B&&z)return 0;if(B)return-1;if(z)return 1}return I}(g.upper,b.upper,g.upperOpen,b.upperOpen)}function Wh(g,b,T,I){g.subscribers.add(T),I.addEventListener("abort",function(){var B,z;g.subscribers.delete(T),g.subscribers.size===0&&(B=g,z=b,setTimeout(function(){B.subscribers.size===0&&ae(z,B)},3e3))})}var TE={stack:"dbcore",level:0,name:"Cache",create:function(g){var b=g.schema.name;return r(r({},g),{transaction:function(T,I,B){var z,J,ie=g.transaction(T,I,B);return I==="readwrite"&&(J=(z=new AbortController).signal,B=function(fe){return function(){if(z.abort(),I==="readwrite"){for(var H=new Set,Y=0,W=T;Y<W.length;Y++){var se=W[Y],te=Gs["idb://".concat(b,"/").concat(se)];if(te){var ue=g.table(se),pe=te.optimisticOps.filter(function(_t){return _t.trans===ie});if(ie._explicit&&fe&&ie.mutatedParts)for(var ce=0,we=Object.values(te.queries.query);ce<we.length;ce++)for(var xe=0,Te=(it=we[ce]).slice();xe<Te.length;xe++)hu((Ze=Te[xe]).obsSet,ie.mutatedParts)&&(ae(it,Ze),Ze.subscribers.forEach(function(_t){return H.add(_t)}));else if(0<pe.length){te.optimisticOps=te.optimisticOps.filter(function(_t){return _t.trans!==ie});for(var Re=0,et=Object.values(te.queries.query);Re<et.length;Re++)for(var it,Ze,tt,qe=0,ct=(it=et[Re]).slice();qe<ct.length;qe++)(Ze=ct[qe]).res!=null&&ie.mutatedParts&&(fe&&!Ze.dirty?(tt=Object.isFrozen(Ze.res),tt=Ss(Ze.res,Ze.req,pe,ue,Ze,tt),Ze.dirty?(ae(it,Ze),Ze.subscribers.forEach(function(_t){return H.add(_t)})):tt!==Ze.res&&(Ze.res=tt,Ze.promise=Oe.resolve({result:tt}))):(Ze.dirty&&ae(it,Ze),Ze.subscribers.forEach(function(_t){return H.add(_t)})))}}}H.forEach(function(_t){return _t()})}}},ie.addEventListener("abort",B(!1),{signal:J}),ie.addEventListener("error",B(!1),{signal:J}),ie.addEventListener("complete",B(!0),{signal:J})),ie},table:function(T){var I=g.table(T),B=I.schema.primaryKey;return r(r({},I),{mutate:function(z){var J=je.trans;if(B.outbound||J.db._options.cache==="disabled"||J.explicit||J.idbtrans.mode!=="readwrite")return I.mutate(z);var ie=Gs["idb://".concat(b,"/").concat(T)];return ie?(J=I.mutate(z),z.type!=="add"&&z.type!=="put"||!(50<=z.values.length||G(B,z).some(function(fe){return fe==null}))?(ie.optimisticOps.push(z),z.mutatedParts&&Da(z.mutatedParts),J.then(function(fe){0<fe.numFailures&&(ae(ie.optimisticOps,z),(fe=Vn(0,z,fe))&&ie.optimisticOps.push(fe),z.mutatedParts&&Da(z.mutatedParts))}),J.catch(function(){ae(ie.optimisticOps,z),z.mutatedParts&&Da(z.mutatedParts)})):J.then(function(fe){var H=Vn(0,r(r({},z),{values:z.values.map(function(Y,W){var se;return fe.failures[W]?Y:(Y=(se=B.keyPath)!==null&&se!==void 0&&se.includes(".")?D(Y):r({},Y),N(Y,B.keyPath,fe.results[W]),Y)})}),fe);ie.optimisticOps.push(H),queueMicrotask(function(){return z.mutatedParts&&Da(z.mutatedParts)})}),J):I.mutate(z)},query:function(z){if(!Dn(je,I)||!Rr("query",z))return I.query(z);var J=((H=je.trans)===null||H===void 0?void 0:H.db._options.cache)==="immutable",W=je,ie=W.requery,fe=W.signal,H=function(ue,pe,ce,we){var xe=Gs["idb://".concat(ue,"/").concat(pe)];if(!xe)return[];if(!(pe=xe.queries[ce]))return[null,!1,xe,null];var Te=pe[(we.query?we.query.index.name:null)||""];if(!Te)return[null,!1,xe,null];switch(ce){case"query":var Re=Te.find(function(et){return et.req.limit===we.limit&&et.req.values===we.values&&Pi(et.req.query.range,we.query.range)});return Re?[Re,!0,xe,Te]:[Te.find(function(et){return("limit"in et.req?et.req.limit:1/0)>=we.limit&&(!we.values||et.req.values)&&oc(et.req.query.range,we.query.range)}),!1,xe,Te];case"count":return Re=Te.find(function(et){return Pi(et.req.query.range,we.query.range)}),[Re,!!Re,xe,Te]}}(b,T,"query",z),Y=H[0],W=H[1],se=H[2],te=H[3];return Y&&W?Y.obsSet=z.obsSet:(W=I.query(z).then(function(ue){var pe=ue.result;if(Y&&(Y.res=pe),J){for(var ce=0,we=pe.length;ce<we;++ce)Object.freeze(pe[ce]);Object.freeze(pe)}else ue.result=D(pe);return ue}).catch(function(ue){return te&&Y&&ae(te,Y),Promise.reject(ue)}),Y={obsSet:z.obsSet,promise:W,subscribers:new Set,type:"query",req:z,dirty:!1},te?te.push(Y):(te=[Y],(se=se||(Gs["idb://".concat(b,"/").concat(T)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[z.query.index.name||""]=te)),Wh(Y,te,ie,fe),Y.promise.then(function(ue){return{result:Ss(ue.result,z,se==null?void 0:se.optimisticOps,I,Y,J)}})}})}})}};function ad(g,b){return new Proxy(g,{get:function(T,I,B){return I==="db"?b:Reflect.get(T,I,B)}})}var Na=(Ar.prototype.version=function(g){if(isNaN(g)||g<.1)throw new me.Type("Given version is not a positive number");if(g=Math.round(10*g)/10,this.idbdb||this._state.isBeingOpened)throw new me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,g);var b=this._versions,T=b.filter(function(I){return I._cfg.version===g})[0];return T||(T=new this.Version(g),b.push(T),b.sort(od),T.stores({}),this._state.autoSchema=!1,T)},Ar.prototype._whenReady=function(g){var b=this;return this.idbdb&&(this._state.openComplete||je.letThrough||this._vip)?g():new Oe(function(T,I){if(b._state.openComplete)return I(new me.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen)return void I(new me.DatabaseClosed);b.open().catch(Ye)}b._state.dbReadyPromise.then(T,I)}).then(g)},Ar.prototype.use=function(g){var b=g.stack,T=g.create,I=g.level,B=g.name;return B&&this.unuse({stack:b,name:B}),g=this._middlewares[b]||(this._middlewares[b]=[]),g.push({stack:b,create:T,level:I??10,name:B}),g.sort(function(z,J){return z.level-J.level}),this},Ar.prototype.unuse=function(g){var b=g.stack,T=g.name,I=g.create;return b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(B){return I?B.create!==I:!!T&&B.name!==T})),this},Ar.prototype.open=function(){var g=this;return wo(Rt,function(){return Ma(g)})},Ar.prototype._close=function(){var g=this._state,b=Wo.indexOf(this);if(0<=b&&Wo.splice(b,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}g.isBeingOpened||(g.dbReadyPromise=new Oe(function(T){g.dbReadyResolve=T}),g.openCanceller=new Oe(function(T,I){g.cancelOpen=I}))},Ar.prototype.close=function(T){var b=(T===void 0?{disableAutoOpen:!0}:T).disableAutoOpen,T=this._state;b?(T.isBeingOpened&&T.cancelOpen(new me.DatabaseClosed),this._close(),T.autoOpen=!1,T.dbOpenError=new me.DatabaseClosed):(this._close(),T.autoOpen=this._options.autoOpen||T.isBeingOpened,T.openComplete=!1,T.dbOpenError=null)},Ar.prototype.delete=function(g){var b=this;g===void 0&&(g={disableAutoOpen:!0});var T=0<arguments.length&&typeof arguments[0]!="object",I=this._state;return new Oe(function(B,z){function J(){b.close(g);var ie=b._deps.indexedDB.deleteDatabase(b.name);ie.onsuccess=Hn(function(){var fe,H,Y;fe=b._deps,H=b.name,Y=fe.indexedDB,fe=fe.IDBKeyRange,Qr(Y)||H===zo||uu(Y,fe).delete(H).catch(Ye),B()}),ie.onerror=Ki(z),ie.onblocked=b._fireOnBlocked}if(T)throw new me.InvalidArgument("Invalid closeOptions argument to db.delete()");I.isBeingOpened?I.dbReadyPromise.then(J):J()})},Ar.prototype.backendDB=function(){return this.idbdb},Ar.prototype.isOpen=function(){return this.idbdb!==null},Ar.prototype.hasBeenClosed=function(){var g=this._state.dbOpenError;return g&&g.name==="DatabaseClosed"},Ar.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ar.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ar.prototype,"tables",{get:function(){var g=this;return o(this._allTables).map(function(b){return g._allTables[b]})},enumerable:!1,configurable:!0}),Ar.prototype.transaction=function(){var g=(function(b,T,I){var B=arguments.length;if(B<2)throw new me.InvalidArgument("Too few arguments");for(var z=new Array(B-1);--B;)z[B-1]=arguments[B];return I=z.pop(),[b,R(z),I]}).apply(this,arguments);return this._transaction.apply(this,g)},Ar.prototype._transaction=function(g,b,T){var I=this,B=je.trans;B&&B.db===this&&g.indexOf("!")===-1||(B=null);var z,J,ie=g.indexOf("?")!==-1;g=g.replace("!","").replace("?","");try{if(J=b.map(function(H){if(H=H instanceof I.Table?H.name:H,typeof H!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return H}),g=="r"||g===$s)z=$s;else{if(g!="rw"&&g!=ul)throw new me.InvalidArgument("Invalid transaction mode: "+g);z=ul}if(B){if(B.mode===$s&&z===ul){if(!ie)throw new me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");B=null}B&&J.forEach(function(H){if(B&&B.storeNames.indexOf(H)===-1){if(!ie)throw new me.SubTransaction("Table "+H+" not included in parent transaction.");B=null}}),ie&&B&&!B.active&&(B=null)}}catch(H){return B?B._promise(null,function(Y,W){W(H)}):Qn(H)}var fe=(function H(Y,W,se,te,ue){return Oe.resolve().then(function(){var pe=je.transless||je,ce=Y._createTransaction(W,se,Y._dbSchema,te);if(ce.explicit=!0,pe={trans:ce,transless:pe},te)ce.idbtrans=te.idbtrans;else try{ce.create(),ce.idbtrans._explicit=!0,Y._state.PR1398_maxLoop=3}catch(Te){return Te.name===oe.InvalidState&&Y.isOpen()&&0<--Y._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Y.close({disableAutoOpen:!1}),Y.open().then(function(){return H(Y,W,se,null,ue)})):Qn(Te)}var we,xe=Ge(ue);return xe&&_a(),pe=Oe.follow(function(){var Te;(we=ue.call(ce,ce))&&(xe?(Te=Us.bind(null,null),we.then(Te,Te)):typeof we.next=="function"&&typeof we.throw=="function"&&(we=Yo(we)))},pe),(we&&typeof we.then=="function"?Oe.resolve(we).then(function(Te){return ce.active?Te:Qn(new me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):pe.then(function(){return we})).then(function(Te){return te&&ce._resolve(),ce._completion.then(function(){return Te})}).catch(function(Te){return ce._reject(Te),Qn(Te)})})}).bind(null,this,z,J,B,T);return B?B._promise(z,fe,"lock"):je.trans?wo(je.transless,function(){return I._whenReady(fe)}):this._whenReady(fe)},Ar.prototype.table=function(g){if(!d(this._allTables,g))throw new me.InvalidTable("Table ".concat(g," does not exist"));return this._allTables[g]},Ar);function Ar(g,b){var T=this;this._middlewares={},this.verno=0;var I=Ar.dependencies;this._options=b=r({addons:Ar.addons,autoOpen:!0,indexedDB:I.indexedDB,IDBKeyRange:I.IDBKeyRange,cache:"cloned"},b),this._deps={indexedDB:b.indexedDB,IDBKeyRange:b.IDBKeyRange},I=b.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var B,z,J,ie,fe,H={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ye,dbReadyPromise:null,cancelOpen:Ye,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:b.autoOpen};H.dbReadyPromise=new Oe(function(W){H.dbReadyResolve=W}),H.openCanceller=new Oe(function(W,se){H.cancelOpen=se}),this._state=H,this.name=g,this.on=Zl(this,"populate","blocked","versionchange","close",{ready:[Xe,Ye]}),this.on.ready.subscribe=P(this.on.ready.subscribe,function(W){return function(se,te){Ar.vip(function(){var ue,pe=T._state;pe.openComplete?(pe.dbOpenError||Oe.resolve().then(se),te&&W(se)):pe.onReadyBeingFired?(pe.onReadyBeingFired.push(se),te&&W(se)):(W(se),ue=T,te||W(function ce(){ue.on.ready.unsubscribe(se),ue.on.ready.unsubscribe(ce)}))})}}),this.Collection=(B=this,Aa(Ca.prototype,function(we,ce){this.db=B;var te=Nh,ue=null;if(ce)try{te=ce()}catch(xe){ue=xe}var pe=we._ctx,ce=pe.table,we=ce.hook.reading.fire;this._ctx={table:ce,index:pe.index,isPrimKey:!pe.index||ce.schema.primKey.keyPath&&pe.index===ce.schema.primKey.name,range:te,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ue,or:pe.or,valueMapper:we!==X?we:null}})),this.Table=(z=this,Aa(iu.prototype,function(W,se,te){this.db=z,this._tx=te,this.name=W,this.schema=se,this.hook=z._allTables[W]?z._allTables[W].hook:Zl(null,{creating:[Ue,Ye],reading:[ee,X],updating:[Ke,Ye],deleting:[ke,Ye]})})),this.Transaction=(J=this,Aa(zs.prototype,function(W,se,te,ue,pe){var ce=this;this.db=J,this.mode=W,this.storeNames=se,this.schema=te,this.chromeTransactionDurability=ue,this.idbtrans=null,this.on=Zl(this,"complete","error","abort"),this.parent=pe||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Oe(function(we,xe){ce._resolve=we,ce._reject=xe}),this._completion.then(function(){ce.active=!1,ce.on.complete.fire()},function(we){var xe=ce.active;return ce.active=!1,ce.on.error.fire(we),ce.parent?ce.parent._reject(we):xe&&ce.idbtrans&&ce.idbtrans.abort(),Qn(we)})})),this.Version=(ie=this,Aa(Hh.prototype,function(W){this.db=ie,this._cfg={version:W,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(fe=this,Aa(Bh.prototype,function(W,se,te){if(this.db=fe,this._ctx={table:W,index:se===":id"?null:se,or:te},this._cmp=this._ascending=cn,this._descending=function(ue,pe){return cn(pe,ue)},this._max=function(ue,pe){return 0<cn(ue,pe)?ue:pe},this._min=function(ue,pe){return cn(ue,pe)<0?ue:pe},this._IDBKeyRange=fe._deps.IDBKeyRange,!this._IDBKeyRange)throw new me.MissingAPI})),this.on("versionchange",function(W){0<W.newVersion?console.warn("Another connection wants to upgrade database '".concat(T.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(T.name,"'. Closing db now to resume the delete request.")),T.close({disableAutoOpen:!1})}),this.on("blocked",function(W){!W.newVersion||W.newVersion<W.oldVersion?console.warn("Dexie.delete('".concat(T.name,"') was blocked")):console.warn("Upgrade '".concat(T.name,"' blocked by other connection holding version ").concat(W.oldVersion/10))}),this._maxKey=dl(b.IDBKeyRange),this._createTransaction=function(W,se,te,ue){return new T.Transaction(W,se,te,T._options.chromeTransactionDurability,ue)},this._fireOnBlocked=function(W){T.on("blocked").fire(W),Wo.filter(function(se){return se.name===T.name&&se!==T&&!se._state.vcFired}).map(function(se){return se.on("versionchange").fire(W)})},this.use(st),this.use(TE),this.use(vn),this.use(_),this.use(ve);var Y=new Proxy(this,{get:function(W,se,te){if(se==="_vip")return!0;if(se==="table")return function(pe){return ad(T.table(pe),Y)};var ue=Reflect.get(W,se,te);return ue instanceof iu?ad(ue,Y):se==="tables"?ue.map(function(pe){return ad(pe,Y)}):se==="_createTransaction"?function(){return ad(ue.apply(this,arguments),Y)}:ue}});this.vip=Y,I.forEach(function(W){return W(T)})}var La,qs=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",_E=(zh.prototype.subscribe=function(g,b,T){return this._subscribe(g&&typeof g!="function"?g:{next:g,error:b,complete:T})},zh.prototype[qs]=function(){return this},zh);function zh(g){this._subscribe=g}try{La={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{La={indexedDB:null,IDBKeyRange:null}}function sm(g){var b,T=!1,I=new _E(function(B){var z=Ge(g),J,ie=!1,fe={},H={},Y={get closed(){return ie},unsubscribe:function(){ie||(ie=!0,J&&J.abort(),W&&Ko.storagemutated.unsubscribe(te))}};B.start&&B.start(Y);var W=!1,se=function(){return nu(ue)},te=function(pe){Gi(fe,pe),hu(H,fe)&&se()},ue=function(){var pe,ce,we;!ie&&La.indexedDB&&(fe={},pe={},J&&J.abort(),J=new AbortController,we=function(xe){var Te=Bs();try{z&&_a();var Re=ws(g,xe);return Re=z?Re.finally(Us):Re}finally{Te&&Ea()}}(ce={subscr:pe,signal:J.signal,requery:se,querier:g,trans:null}),Promise.resolve(we).then(function(xe){T=!0,b=xe,ie||ce.signal.aborted||(fe={},function(Te){for(var Re in Te)if(d(Te,Re))return;return 1}(H=pe)||W||(Ko(tc,te),W=!0),nu(function(){return!ie&&B.next&&B.next(xe)}))},function(xe){T=!1,["DatabaseClosedError","AbortError"].includes(xe==null?void 0:xe.name)||ie||nu(function(){ie||B.error&&B.error(xe)})}))};return setTimeout(se,0),Y});return I.hasValue=function(){return T},I.getValue=function(){return b},I}var qi=Na;function pu(g){var b=vl;try{vl=!0,Ko.storagemutated.fire(g),Zr(g,!0)}finally{vl=b}}p(qi,r(r({},Me),{delete:function(g){return new qi(g,{addons:[]}).delete()},exists:function(g){return new qi(g,{addons:[]}).open().then(function(b){return b.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(g){try{return b=qi.dependencies,T=b.indexedDB,b=b.IDBKeyRange,(Qr(T)?Promise.resolve(T.databases()).then(function(I){return I.map(function(B){return B.name}).filter(function(B){return B!==zo})}):uu(T,b).toCollection().primaryKeys()).then(g)}catch{return Qn(new me.MissingAPI)}var b,T},defineClass:function(){return function(g){l(this,g)}},ignoreTransaction:function(g){return je.trans?wo(je.transless,g):g()},vip:Pa,async:function(g){return function(){try{var b=Yo(g.apply(this,arguments));return b&&typeof b.then=="function"?b:Oe.resolve(b)}catch(T){return Qn(T)}}},spawn:function(g,b,T){try{var I=Yo(g.apply(T,b||[]));return I&&typeof I.then=="function"?I:Oe.resolve(I)}catch(B){return Qn(B)}},currentTransaction:{get:function(){return je.trans||null}},waitFor:function(g,b){return b=Oe.resolve(typeof g=="function"?qi.ignoreTransaction(g):g).timeout(b||6e4),je.trans?je.trans.waitFor(b):b},Promise:Oe,debug:{get:function(){return Le},set:function(g){ze(g)}},derive:S,extend:l,props:p,override:P,Events:Zl,on:Ko,liveQuery:sm,extendObservabilitySet:Gi,getByKeyPath:j,setByKeyPath:N,delByKeyPath:function(g,b){typeof b=="string"?N(g,b,void 0):"length"in b&&[].map.call(b,function(T){N(g,T,void 0)})},shallowClone:O,deepClone:D,getObjectDiff:M,cmp:cn,asap:U,minKey:-1/0,addons:[],connections:Wo,errnames:oe,dependencies:La,cache:Gs,semVer:"4.0.11",version:"4.0.11".split(".").map(function(g){return parseInt(g)}).reduce(function(g,b,T){return g+b/Math.pow(10,2*T)})})),qi.maxKey=dl(qi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ko(tc,function(g){vl||(g=new CustomEvent(Uh,{detail:g}),vl=!0,dispatchEvent(g),vl=!1)}),addEventListener(Uh,function(g){g=g.detail,vl||pu(g)}));var mu,vl=!1,Qy=function(){};return typeof BroadcastChannel<"u"&&((Qy=function(){(mu=new BroadcastChannel(Uh)).onmessage=function(g){return g.data&&pu(g.data)}})(),typeof mu.unref=="function"&&mu.unref(),Ko(tc,function(g){vl||mu.postMessage(g)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(g){if(!Na.disableBfCache&&g.persisted){Le&&console.debug("Dexie: handling persisted pagehide"),mu!=null&&mu.close();for(var b=0,T=Wo;b<T.length;b++)T[b].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(g){!Na.disableBfCache&&g.persisted&&(Le&&console.debug("Dexie: handling persisted pageshow"),Qy(),pu({all:new zr(-1/0,[[]])}))})),Oe.rejectionMapper=function(g,b){return!g||g instanceof ut||g instanceof TypeError||g instanceof SyntaxError||!g.name||!Ie[g.name]?g:(b=new Ie[g.name](b||g.message,g),"stack"in g&&w(b,"stack",{get:function(){return this.inner.stack}}),b)},ze(Le),r(Na,Object.freeze({__proto__:null,Dexie:Na,liveQuery:sm,Entity:Lh,cmp:cn,PropModification:Pn,replacePrefix:function(g,b){return new Pn({replacePrefix:[g,b]})},add:function(g){return new Pn({add:g})},remove:function(g){return new Pn({remove:g})},default:Na,RangeSet:zr,mergeRanges:_i,rangesOverlap:gl}),{default:Na}),Na})}(L0)),L0.exports}var ZY=QY();const v_=Lp(ZY),GR=Symbol.for("Dexie"),Fb=globalThis[GR]||(globalThis[GR]=v_);if(v_.semVer!==Fb.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${v_.semVer} and ${Fb.semVer}`);const{liveQuery:P0e,mergeRanges:D0e,rangesOverlap:M0e,RangeSet:N0e,cmp:L0e,Entity:V0e,PropModification:F0e,replacePrefix:B0e,add:U0e,remove:$0e}=Fb;class eX extends Fb{constructor(){super("NotesDatabase"),this.version(1).stores({pages:"++id, name, order, createdAt, lastModified, lastSynced, isArchived, archivedAt, content, isEncrypted, pendingSync, syncStatus",metadata:"&key, value"})}}const Li=new eX,Bn={metadata:Li.metadata,async getItem(n){var e;return((e=await Li.metadata.get(n))==null?void 0:e.value)||null},async setItem(n,e){await Li.metadata.put({key:n,value:e})},async removeItem(n){try{await Li.metadata.delete(n)}catch(e){console.error("Error removing pinned result:",e)}},async getDeletedPageIds(){const n=await this.getItem("deletedPageIds");return new Set(n||[])},async markPageForDeletion(n){const e=await this.getDeletedPageIds();e.add(n),await this.setItem("deletedPageIds",Array.from(e))},async clearDeletedPageId(n){const e=await this.getDeletedPageIds();e.delete(n),await this.setItem("deletedPageIds",Array.from(e))}},mi={pages:Li.pages,async savePage(n,e,t=null){try{return await Li.pages.update(n,{content:e,lastModified:new Date().toISOString(),pendingSync:1}),!0}catch(r){console.error("Error saving page content:",r)}},async getPage(n,e=null){try{const t=await Li.pages.get(n);return(t==null?void 0:t.content)||""}catch(t){return console.error("Error getting page:",t),null}},async updatePage(n,e){try{return await Li.pages.update(n,{...e,pendingSync:1}),!0}catch(t){console.error("Error updating page:",t)}},async createPageFromFirestore(n,e,t,r,i,s,o,a,l,c){try{const h=await Li.pages.get(n),d=new Date().toISOString(),p={name:e,order:t,createdAt:r||d,lastModified:i||d,lastSynced:s||d,content:o,isEncrypted:a,pendingSync:l,syncStatus:c};h?await Li.pages.update(n,p):await Li.pages.add(n,p)}catch(h){throw console.error("Failed to create page:",h),h}},async createPage(n){try{await Li.pages.add(n)}catch(e){throw console.error("Failed to create page:",e),e}},async deletePage(n){try{await Li.pages.delete(n)}catch(e){throw console.error("Failed to delete page:",e),e}},async getRawPages(){try{return await Li.pages}catch(n){throw console.error("Failed to load pages:",n),n}},async getPages(){try{return await Li.pages.orderBy("order").toArray()}catch(n){throw console.error("Failed to load pages:",n),n}},async getPendingSyncPages(){try{return await Li.pages.where("pendingSync").equals(1).toArray()}catch(n){throw console.error("Failed to fetch pending pages:",n),n}},async updatePageOrder(n){try{await Promise.all(n.map(e=>Li.pages.update(e.id,{order:e.order})))}catch(e){throw console.error("Failed to update page order:",e),e}}},$A=UA("calendar",{state:()=>({groupedByMonth:{},eventIds:new Set}),actions:{formatMonthKey(n){return new Date(n).toLocaleString("en-US",{month:"long",year:"numeric"})},addEvent(n){n.id?this.eventIds.has(n.id)&&(n.id=this.generateUniqueEventId(n)):n.id=this.generateUniqueEventId(n),this.eventIds.add(n.id);const e=this.formatMonthKey(n.start);this.groupedByMonth[e]||(this.groupedByMonth[e]=[]),this.groupedByMonth[e].some(r=>r.id===n.id)||this.groupedByMonth[e].push(n)},updateEvent(n,e){if(!(!n||!e)){if(n.id===e.id){const t=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(e));if(JSON.stringify(t)===JSON.stringify(r))return}this.removeEvent(n),this.addEvent(e)}},removeEvent(n){if(!n||!n.start)return;const e=this.formatMonthKey(n.start);this.groupedByMonth[e]&&(this.groupedByMonth[e]=this.groupedByMonth[e].filter(t=>!(t.id&&n.id&&t.id===n.id||t.rawText&&n.rawText&&t.rawText===n.rawText||this.eventsMatch(t,n))),this.groupedByMonth[e].length===0&&delete this.groupedByMonth[e],n.id&&this.eventIds.delete(n.id))},generateEventId(n){const t=[n.title||"",n.start||"",n.rawText||""].join("|");let r=0;for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);r=(r<<5)-r+s,r=r&r}return`event-${Math.abs(r)}`},generateUniqueEventId(n){let e=this.generateEventId(n),t=1;for(;this.eventIds.has(e);)e=`${this.generateEventId(n)}-${t++}`;return e},eventsMatch(n,e){return n.id===e.id}}});var qR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},tX=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},nF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(p=64)),r.push(t[h],t[d],t[p],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(tF(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):tX(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new nX;const p=s<<2|a>>4;if(r.push(p),c!==64){const y=a<<4&240|c>>2;if(r.push(y),d!==64){const w=c<<6&192|d;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class nX extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rX=function(n){const e=tF(n);return nF.encodeByteArray(e,!0)},Bb=function(n){return rX(n).replace(/\./g,"")},rF=function(n){try{return nF.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iX(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sX=()=>iX().__FIREBASE_DEFAULTS__,oX=()=>{if(typeof process>"u"||typeof qR>"u")return;const n=qR.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},aX=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&rF(n[1]);return e&&JSON.parse(e)},gS=()=>{try{return sX()||oX()||aX()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iF=n=>{var e,t;return(t=(e=gS())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},lX=n=>{const e=iF(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},sF=()=>{var n;return(n=gS())===null||n===void 0?void 0:n.config},oF=n=>{var e;return(e=gS())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cX{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uX(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Bb(JSON.stringify(t)),Bb(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hX(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gs())}function fX(){var n;const e=(n=gS())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dX(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aF(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function pX(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mX(){const n=gs();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function gX(){return!fX()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lF(){try{return typeof indexedDB=="object"}catch{return!1}}function cF(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function yX(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vX="FirebaseError";class al extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=vX,Object.setPrototypeOf(this,al.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zf.prototype.create)}}class Zf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?bX(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new al(i,a,r)}}function bX(n,e){return n.replace(wX,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const wX=/\{\$([^}]+)}/g;function SX(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ng(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(YR(s)&&YR(o)){if(!Ng(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function YR(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function EX(n,e){const t=new TX(n,e);return t.subscribe.bind(t)}class TX{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");_X(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=MT),i.error===void 0&&(i.error=MT),i.complete===void 0&&(i.complete=MT);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _X(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function MT(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xX=1e3,AX=2,IX=4*60*60*1e3,CX=.5;function XR(n,e=xX,t=AX){const r=e*Math.pow(t,n),i=Math.round(CX*r*(Math.random()-.5)*2);return Math.min(IX,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(n){return n&&n._delegate?n._delegate:n}class nl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OX{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new cX;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RX(e))try{this.getOrInitializeService({instanceIdentifier:lf})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=lf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lf){return this.instances.has(e)}getOptions(e=lf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kX(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=lf){return this.component?this.component.multipleInstances?e:lf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kX(n){return n===lf?void 0:n}function RX(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PX{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new OX(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(xn||(xn={}));const DX={debug:xn.DEBUG,verbose:xn.VERBOSE,info:xn.INFO,warn:xn.WARN,error:xn.ERROR,silent:xn.SILENT},MX=xn.INFO,NX={[xn.DEBUG]:"log",[xn.VERBOSE]:"log",[xn.INFO]:"info",[xn.WARN]:"warn",[xn.ERROR]:"error"},LX=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=NX[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yS{constructor(e){this.name=e,this._logLevel=MX,this._logHandler=LX,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DX[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xn.DEBUG,...e),this._logHandler(this,xn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xn.VERBOSE,...e),this._logHandler(this,xn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xn.INFO,...e),this._logHandler(this,xn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xn.WARN,...e),this._logHandler(this,xn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xn.ERROR,...e),this._logHandler(this,xn.ERROR,...e)}}const VX=(n,e)=>e.some(t=>n instanceof t);let JR,QR;function FX(){return JR||(JR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BX(){return QR||(QR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uF=new WeakMap,b_=new WeakMap,hF=new WeakMap,NT=new WeakMap,HA=new WeakMap;function UX(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Qu(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&uF.set(t,n)}).catch(()=>{}),HA.set(e,n),e}function $X(n){if(b_.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});b_.set(n,e)}let w_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return b_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||hF.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qu(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function HX(n){w_=n(w_)}function WX(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(LT(this),e,...t);return hF.set(r,e.sort?e.sort():[e]),Qu(r)}:BX().includes(n)?function(...e){return n.apply(LT(this),e),Qu(uF.get(this))}:function(...e){return Qu(n.apply(LT(this),e))}}function zX(n){return typeof n=="function"?WX(n):(n instanceof IDBTransaction&&$X(n),VX(n,FX())?new Proxy(n,w_):n)}function Qu(n){if(n instanceof IDBRequest)return UX(n);if(NT.has(n))return NT.get(n);const e=zX(n);return e!==n&&(NT.set(n,e),HA.set(e,n)),e}const LT=n=>HA.get(n);function fF(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Qu(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Qu(o.result),l.oldVersion,l.newVersion,Qu(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const jX=["get","getKey","getAll","getAllKeys","count"],KX=["put","add","delete","clear"],VT=new Map;function ZR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(VT.get(e))return VT.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=KX.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||jX.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return VT.set(e,s),s}HX(n=>({...n,get:(e,t,r)=>ZR(e,t)||n.get(e,t,r),has:(e,t)=>!!ZR(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GX{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qX(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function qX(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const S_="@firebase/app",eP="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new yS("@firebase/app"),YX="@firebase/app-compat",XX="@firebase/analytics-compat",JX="@firebase/analytics",QX="@firebase/app-check-compat",ZX="@firebase/app-check",eJ="@firebase/auth",tJ="@firebase/auth-compat",nJ="@firebase/database",rJ="@firebase/data-connect",iJ="@firebase/database-compat",sJ="@firebase/functions",oJ="@firebase/functions-compat",aJ="@firebase/installations",lJ="@firebase/installations-compat",cJ="@firebase/messaging",uJ="@firebase/messaging-compat",hJ="@firebase/performance",fJ="@firebase/performance-compat",dJ="@firebase/remote-config",pJ="@firebase/remote-config-compat",mJ="@firebase/storage",gJ="@firebase/storage-compat",yJ="@firebase/firestore",vJ="@firebase/vertexai",bJ="@firebase/firestore-compat",wJ="firebase",SJ="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="[DEFAULT]",EJ={[S_]:"fire-core",[YX]:"fire-core-compat",[JX]:"fire-analytics",[XX]:"fire-analytics-compat",[ZX]:"fire-app-check",[QX]:"fire-app-check-compat",[eJ]:"fire-auth",[tJ]:"fire-auth-compat",[nJ]:"fire-rtdb",[rJ]:"fire-data-connect",[iJ]:"fire-rtdb-compat",[sJ]:"fire-fn",[oJ]:"fire-fn-compat",[aJ]:"fire-iid",[lJ]:"fire-iid-compat",[cJ]:"fire-fcm",[uJ]:"fire-fcm-compat",[hJ]:"fire-perf",[fJ]:"fire-perf-compat",[dJ]:"fire-rc",[pJ]:"fire-rc-compat",[mJ]:"fire-gcs",[gJ]:"fire-gcs-compat",[yJ]:"fire-fst",[bJ]:"fire-fst-compat",[vJ]:"fire-vertex","fire-js":"fire-js",[wJ]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=new Map,TJ=new Map,T_=new Map;function tP(n,e){try{n.container.addComponent(e)}catch(t){Hc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function zl(n){const e=n.name;if(T_.has(e))return Hc.debug(`There were multiple attempts to register component ${e}.`),!1;T_.set(e,n);for(const t of Ub.values())tP(t,n);for(const t of TJ.values())tP(t,n);return!0}function ed(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ga(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _J={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zu=new Zf("app","Firebase",_J);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xJ{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new nl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp=SJ;function dF(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:E_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Zu.create("bad-app-name",{appName:String(i)});if(t||(t=sF()),!t)throw Zu.create("no-options");const s=Ub.get(i);if(s){if(Ng(t,s.options)&&Ng(r,s.config))return s;throw Zu.create("duplicate-app",{appName:i})}const o=new PX(i);for(const l of T_.values())o.addComponent(l);const a=new xJ(t,r,o);return Ub.set(i,a),a}function WA(n=E_){const e=Ub.get(n);if(!e&&n===E_&&sF())return dF();if(!e)throw Zu.create("no-app",{appName:n});return e}function ha(n,e,t){var r;let i=(r=EJ[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hc.warn(a.join(" "));return}zl(new nl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AJ="firebase-heartbeat-database",IJ=1,Lg="firebase-heartbeat-store";let FT=null;function pF(){return FT||(FT=fF(AJ,IJ,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Lg)}catch(t){console.warn(t)}}}}).catch(n=>{throw Zu.create("idb-open",{originalErrorMessage:n.message})})),FT}async function CJ(n){try{const t=(await pF()).transaction(Lg),r=await t.objectStore(Lg).get(mF(n));return await t.done,r}catch(e){if(e instanceof al)Hc.warn(e.message);else{const t=Zu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hc.warn(t.message)}}}async function nP(n,e){try{const r=(await pF()).transaction(Lg,"readwrite");await r.objectStore(Lg).put(e,mF(n)),await r.done}catch(t){if(t instanceof al)Hc.warn(t.message);else{const r=Zu.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Hc.warn(r.message)}}}function mF(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OJ=1024,kJ=30;class RJ{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new DJ(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=rP();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>kJ){const o=MJ(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hc.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=rP(),{heartbeatsToSend:r,unsentEntries:i}=PJ(this._heartbeatsCache.heartbeats),s=Bb(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Hc.warn(t),""}}}function rP(){return new Date().toISOString().substring(0,10)}function PJ(n,e=OJ){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),iP(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),iP(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class DJ{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lF()?cF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await CJ(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return nP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return nP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function iP(n){return Bb(JSON.stringify({version:2,heartbeats:n})).length}function MJ(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NJ(n){zl(new nl("platform-logger",e=>new GX(e),"PRIVATE")),zl(new nl("heartbeat",e=>new RJ(e),"PRIVATE")),ha(S_,eP,n),ha(S_,eP,"esm2017"),ha("fire-js","")}NJ("");var LJ="firebase",VJ="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ha(LJ,VJ,"app");function zA(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function gF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FJ=gF,yF=new Zf("auth","Firebase",gF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=new yS("@firebase/auth");function BJ(n,...e){$b.logLevel<=xn.WARN&&$b.warn(`Auth (${Vp}): ${n}`,...e)}function V0(n,...e){$b.logLevel<=xn.ERROR&&$b.error(`Auth (${Vp}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(n,...e){throw KA(n,...e)}function tl(n,...e){return KA(n,...e)}function jA(n,e,t){const r=Object.assign(Object.assign({},FJ()),{[e]:t});return new Zf("auth","Firebase",r).create(e,{appName:n.name})}function If(n){return jA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function UJ(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&jl(n,"argument-error"),jA(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function KA(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return yF.create(n,...e)}function Jt(n,e,...t){if(!n)throw KA(e,...t)}function Cc(n){const e="INTERNAL ASSERTION FAILED: "+n;throw V0(e),new Error(e)}function Wc(n,e){n||Cc(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function $J(){return sP()==="http:"||sP()==="https:"}function sP(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HJ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($J()||aF()||"connection"in navigator)?navigator.onLine:!0}function WJ(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wc(t>e,"Short delay should be less than long delay!"),this.isMobile=hX()||pX()}get(){return HJ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(n,e){Wc(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zJ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jJ=new Ty(3e4,6e4);function qA(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Fp(n,e,t,r,i={}){return bF(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ey(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return dX()||(c.referrerPolicy="no-referrer"),vF.fetch()(wF(n,n.config.apiHost,t,a),c)})}async function bF(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},zJ),e);try{const i=new GJ(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Uv(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uv(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Uv(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Uv(n,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw jA(n,h,c);jl(n,h)}}catch(i){if(i instanceof al)throw i;jl(n,"network-request-failed",{message:String(i)})}}async function KJ(n,e,t,r,i={}){const s=await Fp(n,e,t,r,i);return"mfaPendingCredential"in s&&jl(n,"multi-factor-auth-required",{_serverResponse:s}),s}function wF(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?GA(n.config,i):`${n.config.apiScheme}://${i}`}class GJ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(tl(this.auth,"network-request-failed")),jJ.get())})}}function Uv(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=tl(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qJ(n,e){return Fp(n,"POST","/v1/accounts:delete",e)}async function SF(n,e){return Fp(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YJ(n,e=!1){const t=li(n),r=await t.getIdToken(e),i=YA(r);Jt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ag(BT(i.auth_time)),issuedAtTime:ag(BT(i.iat)),expirationTime:ag(BT(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function BT(n){return Number(n)*1e3}function YA(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return V0("JWT malformed, contained fewer than 3 sections"),null;try{const i=rF(t);return i?JSON.parse(i):(V0("Failed to decode base64 JWT payload"),null)}catch(i){return V0("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function oP(n){const e=YA(n);return Jt(e,"internal-error"),Jt(typeof e.exp<"u","internal-error"),Jt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vg(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof al&&XJ(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function XJ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JJ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ag(this.lastLoginAt),this.creationTime=ag(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hb(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Vg(n,SF(t,{idToken:r}));Jt(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?EF(s.providerUserInfo):[],a=ZJ(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new x_(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,d)}async function QJ(n){const e=li(n);await Hb(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZJ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function EF(n){return n.map(e=>{var{providerId:t}=e,r=zA(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eQ(n,e){const t=await bF(n,{},async()=>{const r=Ey({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=wF(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",vF.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tQ(n,e){return Fp(n,"POST","/v2/accounts:revokeToken",qA(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Jt(e.idToken,"internal-error"),Jt(typeof e.idToken<"u","internal-error"),Jt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Jt(e.length!==0,"internal-error");const t=oP(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Jt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await eQ(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new qd;return r&&(Jt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Jt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Jt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qd,this.toJSON())}_performRefresh(){return Cc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(n,e){Jt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Oc{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=zA(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JJ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new x_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Vg(this,this.stsTokenManager.getToken(this.auth,e));return Jt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return YJ(this,e)}reload(){return QJ(this)}_assign(e){this!==e&&(Jt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Oc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Jt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Hb(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ga(this.auth.app))return Promise.reject(If(this.auth));const e=await this.getIdToken();return await Vg(this,qJ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,h;const d=(r=t.displayName)!==null&&r!==void 0?r:void 0,p=(i=t.email)!==null&&i!==void 0?i:void 0,y=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=t.photoURL)!==null&&o!==void 0?o:void 0,S=(a=t.tenantId)!==null&&a!==void 0?a:void 0,E=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,C=(c=t.createdAt)!==null&&c!==void 0?c:void 0,L=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:P,emailVerified:F,isAnonymous:U,providerData:j,stsTokenManager:N}=t;Jt(P&&N,e,"internal-error");const O=qd.fromJSON(this.name,N);Jt(typeof P=="string",e,"internal-error"),Eu(d,e.name),Eu(p,e.name),Jt(typeof F=="boolean",e,"internal-error"),Jt(typeof U=="boolean",e,"internal-error"),Eu(y,e.name),Eu(w,e.name),Eu(S,e.name),Eu(E,e.name),Eu(C,e.name),Eu(L,e.name);const A=new Oc({uid:P,auth:e,email:p,emailVerified:F,displayName:d,isAnonymous:U,photoURL:w,phoneNumber:y,tenantId:S,stsTokenManager:O,createdAt:C,lastLoginAt:L});return j&&Array.isArray(j)&&(A.providerData=j.map(R=>Object.assign({},R))),E&&(A._redirectEventId=E),A}static async _fromIdTokenResponse(e,t,r=!1){const i=new qd;i.updateFromServerResponse(t);const s=new Oc({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Hb(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Jt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?EF(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new qd;a.updateFromIdToken(r);const l=new Oc({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new x_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=new Map;function kc(n){Wc(n instanceof Function,"Expected a class definition");let e=aP.get(n);return e?(Wc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,aP.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}TF.type="NONE";const lP=TF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(n,e,t){return`firebase:${n}:${e}:${t}`}class Yd{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=F0(this.userKey,i.apiKey,s),this.fullPersistenceKey=F0("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Oc._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Yd(kc(lP),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||kc(lP);const o=F0(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const h=await c._get(o);if(h){const d=Oc._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Yd(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Yd(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_F(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OF(e))return"Blackberry";if(kF(e))return"Webos";if(xF(e))return"Safari";if((e.includes("chrome/")||AF(e))&&!e.includes("edge/"))return"Chrome";if(CF(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function _F(n=gs()){return/firefox\//i.test(n)}function xF(n=gs()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AF(n=gs()){return/crios\//i.test(n)}function IF(n=gs()){return/iemobile/i.test(n)}function CF(n=gs()){return/android/i.test(n)}function OF(n=gs()){return/blackberry/i.test(n)}function kF(n=gs()){return/webos/i.test(n)}function XA(n=gs()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function nQ(n=gs()){var e;return XA(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rQ(){return mX()&&document.documentMode===10}function RF(n=gs()){return XA(n)||CF(n)||kF(n)||OF(n)||/windows phone/i.test(n)||IF(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(n,e=[]){let t;switch(n){case"Browser":t=cP(gs());break;case"Worker":t=`${cP(gs())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vp}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iQ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sQ(n,e={}){return Fp(n,"GET","/v2/passwordPolicy",qA(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oQ=6;class aQ{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:oQ,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lQ{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uP(this),this.idTokenSubscription=new uP(this),this.beforeStateQueue=new iQ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=kc(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Yd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await SF(this,{idToken:e}),r=await Oc._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ga(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Jt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hb(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WJ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ga(this.app))return Promise.reject(If(this));const t=e?li(e):null;return t&&Jt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Jt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ga(this.app)?Promise.reject(If(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ga(this.app)?Promise.reject(If(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sQ(this),t=new aQ(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await tQ(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&kc(e)||this._popupRedirectResolver;Jt(t,this,"argument-error"),this.redirectPersistenceManager=await Yd.create(this,[kc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Jt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Jt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Ga(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&BJ(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function vS(n){return li(n)}class uP{constructor(e){this.auth=e,this.observer=null,this.addObserver=EX(t=>this.observer=t)}get next(){return Jt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JA={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cQ(n){JA=n}function uQ(n){return JA.loadJS(n)}function hQ(){return JA.gapiScript}function fQ(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dQ(n,e){const t=ed(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Ng(s,e??{}))return i;jl(i,"already-initialized")}return t.initialize({options:e})}function pQ(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(kc);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function mQ(n,e,t){const r=vS(n);Jt(r._canInitEmulator,r,"emulator-config-failed"),Jt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=DF(e),{host:o,port:a}=gQ(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),yQ()}function DF(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function gQ(n){const e=DF(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:hP(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:hP(o)}}}function hP(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function yQ(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Cc("not implemented")}_getIdTokenResponse(e){return Cc("not implemented")}_linkToIdToken(e,t){return Cc("not implemented")}_getReauthenticationResolver(e){return Cc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xd(n,e){return KJ(n,"POST","/v1/accounts:signInWithIdp",qA(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vQ="http://localhost";class Nf extends MF{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Nf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=zA(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Nf(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Xd(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Xd(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xd(e,t)}buildRequest(){const e={requestUri:vQ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ey(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y extends QA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends _y{constructor(){super("facebook.com")}static credential(e){return Nf._fromParams({providerId:Vu.PROVIDER_ID,signInMethod:Vu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vu.credentialFromTaggedObject(e)}static credentialFromError(e){return Vu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vu.credential(e.oauthAccessToken)}catch{return null}}}Vu.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends _y{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Nf._fromParams({providerId:xc.PROVIDER_ID,signInMethod:xc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xc.credentialFromTaggedObject(e)}static credentialFromError(e){return xc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return xc.credential(t,r)}catch{return null}}}xc.GOOGLE_SIGN_IN_METHOD="google.com";xc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends _y{constructor(){super("github.com")}static credential(e){return Nf._fromParams({providerId:Fu.PROVIDER_ID,signInMethod:Fu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fu.credentialFromTaggedObject(e)}static credentialFromError(e){return Fu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fu.credential(e.oauthAccessToken)}catch{return null}}}Fu.GITHUB_SIGN_IN_METHOD="github.com";Fu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends _y{constructor(){super("twitter.com")}static credential(e,t){return Nf._fromParams({providerId:Bu.PROVIDER_ID,signInMethod:Bu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Bu.credentialFromTaggedObject(e)}static credentialFromError(e){return Bu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Bu.credential(t,r)}catch{return null}}}Bu.TWITTER_SIGN_IN_METHOD="twitter.com";Bu.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Oc._fromIdTokenResponse(e,r,i),o=fP(r);return new hp({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=fP(r);return new hp({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function fP(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb extends al{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Wb.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Wb(e,t,r,i)}}function NF(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Wb._fromErrorAndOperation(n,s,e,r):s})}async function bQ(n,e,t=!1){const r=await Vg(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return hp._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wQ(n,e,t=!1){const{auth:r}=n;if(Ga(r.app))return Promise.reject(If(r));const i="reauthenticate";try{const s=await Vg(n,NF(r,i,e,n),t);Jt(s.idToken,r,"internal-error");const o=YA(s.idToken);Jt(o,r,"internal-error");const{sub:a}=o;return Jt(n.uid===a,r,"user-mismatch"),hp._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&jl(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SQ(n,e,t=!1){if(Ga(n.app))return Promise.reject(If(n));const r="signIn",i=await NF(n,r,e),s=await hp._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function EQ(n,e,t,r){return li(n).onIdTokenChanged(e,t,r)}function TQ(n,e,t){return li(n).beforeAuthStateChanged(e,t)}function LF(n,e,t,r){return li(n).onAuthStateChanged(e,t,r)}function _Q(n){return li(n).signOut()}const zb="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zb,"1"),this.storage.removeItem(zb),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xQ=1e3,AQ=10;class FF extends VF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);rQ()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,AQ):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},xQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}FF.type="LOCAL";const IQ=FF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF extends VF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}BF.type="SESSION";const UF=BF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CQ(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new bS(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await CQ(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bS.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=ZA("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(){return window}function kQ(n){Fl().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(){return typeof Fl().WorkerGlobalScope<"u"&&typeof Fl().importScripts=="function"}async function RQ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PQ(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function DQ(){return $F()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF="firebaseLocalStorageDb",MQ=1,jb="firebaseLocalStorage",WF="fbase_key";class xy{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function wS(n,e){return n.transaction([jb],e?"readwrite":"readonly").objectStore(jb)}function NQ(){const n=indexedDB.deleteDatabase(HF);return new xy(n).toPromise()}function A_(){const n=indexedDB.open(HF,MQ);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(jb,{keyPath:WF})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(jb)?e(r):(r.close(),await NQ(),e(await A_()))})})}async function dP(n,e,t){const r=wS(n,!0).put({[WF]:e,value:t});return new xy(r).toPromise()}async function LQ(n,e){const t=wS(n,!1).get(e),r=await new xy(t).toPromise();return r===void 0?null:r.value}function pP(n,e){const t=wS(n,!0).delete(e);return new xy(t).toPromise()}const VQ=800,FQ=3;class zF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await A_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>FQ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $F()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bS._getInstance(DQ()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await RQ(),!this.activeServiceWorker)return;this.sender=new OQ(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PQ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await A_();return await dP(e,zb,"1"),await pP(e,zb),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>dP(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>LQ(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>pP(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=wS(i,!1).getAll();return new xy(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zF.type="LOCAL";const BQ=zF;new Ty(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(n,e){return e?kc(e):(Jt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI extends MF{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function UQ(n){return SQ(n.auth,new eI(n),n.bypassAuthState)}function $Q(n){const{auth:e,user:t}=n;return Jt(t,e,"internal-error"),wQ(t,new eI(n),n.bypassAuthState)}async function HQ(n){const{auth:e,user:t}=n;return Jt(t,e,"internal-error"),bQ(t,new eI(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UQ;case"linkViaPopup":case"linkViaRedirect":return HQ;case"reauthViaPopup":case"reauthViaRedirect":return $Q;default:jl(this.auth,"internal-error")}}resolve(e){Wc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WQ=new Ty(2e3,1e4);async function zQ(n,e,t){if(Ga(n.app))return Promise.reject(tl(n,"operation-not-supported-in-this-environment"));const r=vS(n);UJ(n,e,QA);const i=jF(r,t);return new df(r,"signInViaPopup",e,i).executeNotNull()}class df extends KF{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,df.currentPopupAction&&df.currentPopupAction.cancel(),df.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Jt(e,this.auth,"internal-error"),e}async onExecution(){Wc(this.filter.length===1,"Popup operations only handle one event");const e=ZA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(tl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(tl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,df.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WQ.get())};e()}}df.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jQ="pendingRedirect",B0=new Map;class KQ extends KF{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=B0.get(this.auth._key());if(!e){try{const r=await GQ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}B0.set(this.auth._key(),e)}return this.bypassAuthState||B0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GQ(n,e){const t=XQ(e),r=YQ(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function qQ(n,e){B0.set(n._key(),e)}function YQ(n){return kc(n._redirectPersistence)}function XQ(n){return F0(jQ,n.config.apiKey,n.name)}async function JQ(n,e,t=!1){if(Ga(n.app))return Promise.reject(If(n));const r=vS(n),i=jF(r,e),o=await new KQ(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QQ=10*60*1e3;class ZQ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eZ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!GF(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(tl(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QQ&&this.cachedEventUids.clear(),this.cachedEventUids.has(mP(e))}saveEventToCache(e){this.cachedEventUids.add(mP(e)),this.lastProcessedEventTime=Date.now()}}function mP(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function GF({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eZ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GF(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tZ(n,e={}){return Fp(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nZ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rZ=/^https?/;async function iZ(n){if(n.config.emulator)return;const{authorizedDomains:e}=await tZ(n);for(const t of e)try{if(sZ(t))return}catch{}jl(n,"unauthorized-domain")}function sZ(n){const e=__(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!rZ.test(t))return!1;if(nZ.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oZ=new Ty(3e4,6e4);function gP(){const n=Fl().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function aZ(n){return new Promise((e,t)=>{var r,i,s;function o(){gP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gP(),t(tl(n,"network-request-failed"))},timeout:oZ.get()})}if(!((i=(r=Fl().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Fl().gapi)===null||s===void 0)&&s.load)o();else{const a=fQ("iframefcb");return Fl()[a]=()=>{gapi.load?o():t(tl(n,"network-request-failed"))},uQ(`${hQ()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw U0=null,e})}let U0=null;function lZ(n){return U0=U0||aZ(n),U0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cZ=new Ty(5e3,15e3),uZ="__/auth/iframe",hZ="emulator/auth/iframe",fZ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dZ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pZ(n){const e=n.config;Jt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?GA(e,hZ):`https://${n.config.authDomain}/${uZ}`,r={apiKey:e.apiKey,appName:n.name,v:Vp},i=dZ.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ey(r).slice(1)}`}async function mZ(n){const e=await lZ(n),t=Fl().gapi;return Jt(t,n,"internal-error"),e.open({where:document.body,url:pZ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fZ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=tl(n,"network-request-failed"),a=Fl().setTimeout(()=>{s(o)},cZ.get());function l(){Fl().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gZ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yZ=500,vZ=600,bZ="_blank",wZ="http://localhost";class yP{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SZ(n,e,t,r=yZ,i=vZ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},gZ),{width:r.toString(),height:i.toString(),top:s,left:o}),c=gs().toLowerCase();t&&(a=AF(c)?bZ:t),_F(c)&&(e=e||wZ,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[y,w])=>`${p}${y}=${w},`,"");if(nQ(c)&&a!=="_self")return EZ(e||"",a),new yP(null);const d=window.open(e||"",a,h);Jt(d,n,"popup-blocked");try{d.focus()}catch{}return new yP(d)}function EZ(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TZ="__/auth/handler",_Z="emulator/auth/handler",xZ=encodeURIComponent("fac");async function vP(n,e,t,r,i,s){Jt(n.config.authDomain,n,"auth-domain-config-required"),Jt(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Vp,eventId:i};if(e instanceof QA){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",SX(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof _y){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),c=l?`#${xZ}=${encodeURIComponent(l)}`:"";return`${AZ(n)}?${Ey(a).slice(1)}${c}`}function AZ({config:n}){return n.emulator?GA(n,_Z):`https://${n.authDomain}/${TZ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="webStorageSupport";class IZ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UF,this._completeRedirectFn=JQ,this._overrideRedirectResult=qQ}async _openPopup(e,t,r,i){var s;Wc((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await vP(e,t,r,__(),i);return SZ(e,o,ZA())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await vP(e,t,r,__(),i);return kQ(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Wc(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await mZ(e),r=new ZQ(e);return t.register("authEvent",i=>(Jt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(UT,{type:UT},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[UT];o!==void 0&&t(!!o),jl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iZ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return RF()||xF()||XA()}}const CZ=IZ;var bP="@firebase/auth",wP="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OZ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Jt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kZ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RZ(n){zl(new nl("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Jt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PF(n)},c=new lQ(r,i,s,l);return pQ(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),zl(new nl("auth-internal",e=>{const t=vS(e.getProvider("auth").getImmediate());return(r=>new OZ(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ha(bP,wP,kZ(n)),ha(bP,wP,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PZ=5*60,DZ=oF("authIdTokenMaxAge")||PZ;let SP=null;const MZ=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>DZ)return;const i=t==null?void 0:t.token;SP!==i&&(SP=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function NZ(n=WA()){const e=ed(n,"auth");if(e.isInitialized())return e.getImmediate();const t=dQ(n,{popupRedirectResolver:CZ,persistence:[BQ,IQ,UF]}),r=oF("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=MZ(s.toString());TQ(t,o,()=>o(t.currentUser)),EQ(t,a=>o(a))}}const i=iF("auth");return i&&mQ(t,`http://${i}`),t}function LZ(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}cQ({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=tl("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",LZ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RZ("Browser");const qF="@firebase/installations",tI="0.6.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF=1e4,XF=`w:${tI}`,JF="FIS_v2",VZ="https://firebaseinstallations.googleapis.com/v1",FZ=60*60*1e3,BZ="installations",UZ="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Z={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Lf=new Zf(BZ,UZ,$Z);function QF(n){return n instanceof al&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF({projectId:n}){return`${VZ}/projects/${n}/installations`}function eB(n){return{token:n.token,requestStatus:2,expiresIn:WZ(n.expiresIn),creationTime:Date.now()}}async function tB(n,e){const r=(await e.json()).error;return Lf.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function nB({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function HZ(n,{refreshToken:e}){const t=nB(n);return t.append("Authorization",zZ(e)),t}async function rB(n){const e=await n();return e.status>=500&&e.status<600?n():e}function WZ(n){return Number(n.replace("s","000"))}function zZ(n){return`${JF} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jZ({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=ZF(n),i=nB(n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:t,authVersion:JF,appId:n.appId,sdkVersion:XF},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await rB(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:eB(c.authToken)}}else throw await tB("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KZ(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GZ=/^[cdef][\w-]{21}$/,I_="";function qZ(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=YZ(n);return GZ.test(t)?t:I_}catch{return I_}}function YZ(n){return KZ(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB=new Map;function oB(n,e){const t=SS(n);aB(t,e),XZ(t,e)}function aB(n,e){const t=sB.get(n);if(t)for(const r of t)r(e)}function XZ(n,e){const t=JZ();t&&t.postMessage({key:n,fid:e}),QZ()}let pf=null;function JZ(){return!pf&&"BroadcastChannel"in self&&(pf=new BroadcastChannel("[Firebase] FID Change"),pf.onmessage=n=>{aB(n.data.key,n.data.fid)}),pf}function QZ(){sB.size===0&&pf&&(pf.close(),pf=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZZ="firebase-installations-database",eee=1,Vf="firebase-installations-store";let $T=null;function nI(){return $T||($T=fF(ZZ,eee,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Vf)}}})),$T}async function Kb(n,e){const t=SS(n),i=(await nI()).transaction(Vf,"readwrite"),s=i.objectStore(Vf),o=await s.get(t);return await s.put(e,t),await i.done,(!o||o.fid!==e.fid)&&oB(n,e.fid),e}async function lB(n){const e=SS(n),r=(await nI()).transaction(Vf,"readwrite");await r.objectStore(Vf).delete(e),await r.done}async function ES(n,e){const t=SS(n),i=(await nI()).transaction(Vf,"readwrite"),s=i.objectStore(Vf),o=await s.get(t),a=e(o);return a===void 0?await s.delete(t):await s.put(a,t),await i.done,a&&(!o||o.fid!==a.fid)&&oB(n,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rI(n){let e;const t=await ES(n.appConfig,r=>{const i=tee(r),s=nee(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===I_?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function tee(n){const e=n||{fid:qZ(),registrationStatus:0};return cB(e)}function nee(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Lf.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=ree(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:iee(n)}:{installationEntry:e}}async function ree(n,e){try{const t=await jZ(n,e);return Kb(n.appConfig,t)}catch(t){throw QF(t)&&t.customData.serverCode===409?await lB(n.appConfig):await Kb(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function iee(n){let e=await EP(n.appConfig);for(;e.registrationStatus===1;)await iB(100),e=await EP(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await rI(n);return r||t}return e}function EP(n){return ES(n,e=>{if(!e)throw Lf.create("installation-not-found");return cB(e)})}function cB(n){return see(n)?{fid:n.fid,registrationStatus:0}:n}function see(n){return n.registrationStatus===1&&n.registrationTime+YF<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oee({appConfig:n,heartbeatServiceProvider:e},t){const r=aee(n,t),i=HZ(n,t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:XF,appId:n.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await rB(()=>fetch(r,a));if(l.ok){const c=await l.json();return eB(c)}else throw await tB("Generate Auth Token",l)}function aee(n,{fid:e}){return`${ZF(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iI(n,e=!1){let t;const r=await ES(n.appConfig,s=>{if(!uB(s))throw Lf.create("not-registered");const o=s.authToken;if(!e&&uee(o))return s;if(o.requestStatus===1)return t=lee(n,e),s;{if(!navigator.onLine)throw Lf.create("app-offline");const a=fee(s);return t=cee(n,a),a}});return t?await t:r.authToken}async function lee(n,e){let t=await TP(n.appConfig);for(;t.authToken.requestStatus===1;)await iB(100),t=await TP(n.appConfig);const r=t.authToken;return r.requestStatus===0?iI(n,e):r}function TP(n){return ES(n,e=>{if(!uB(e))throw Lf.create("not-registered");const t=e.authToken;return dee(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function cee(n,e){try{const t=await oee(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Kb(n.appConfig,r),t}catch(t){if(QF(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await lB(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Kb(n.appConfig,r)}throw t}}function uB(n){return n!==void 0&&n.registrationStatus===2}function uee(n){return n.requestStatus===2&&!hee(n)}function hee(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+FZ}function fee(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function dee(n){return n.requestStatus===1&&n.requestTime+YF<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pee(n){const e=n,{installationEntry:t,registrationPromise:r}=await rI(e);return r?r.catch(console.error):iI(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mee(n,e=!1){const t=n;return await gee(t),(await iI(t,e)).token}async function gee(n){const{registrationPromise:e}=await rI(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yee(n){if(!n||!n.options)throw HT("App Configuration");if(!n.name)throw HT("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw HT(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function HT(n){return Lf.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB="installations",vee="installations-internal",bee=n=>{const e=n.getProvider("app").getImmediate(),t=yee(e),r=ed(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},wee=n=>{const e=n.getProvider("app").getImmediate(),t=ed(e,hB).getImmediate();return{getId:()=>pee(t),getToken:i=>mee(t,i)}};function See(){zl(new nl(hB,bee,"PUBLIC")),zl(new nl(vee,wee,"PRIVATE"))}See();ha(qF,tI);ha(qF,tI,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="analytics",Eee="firebase_id",Tee="origin",_ee=60*1e3,xee="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sI="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new yS("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aee={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Fo=new Zf("analytics","Analytics",Aee);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iee(n){if(!n.startsWith(sI)){const e=Fo.create("invalid-gtag-resource",{gtagURL:n});return po.warn(e.message),""}return n}function fB(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Cee(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Oee(n,e){const t=Cee("firebase-js-sdk-policy",{createScriptURL:Iee}),r=document.createElement("script"),i=`${sI}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function kee(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function Ree(n,e,t,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await fB(t)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){po.error(a)}n("config",i,s)}async function Pee(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await fB(t);for(const l of o){const c=a.find(d=>d.measurementId===l),h=c&&e[c.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),n("event",r,i||{})}catch(s){po.error(s)}}function Dee(n,e,t,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await Pee(n,e,t,a,l)}else if(s==="config"){const[a,l]=o;await Ree(n,e,t,r,a,l)}else if(s==="consent"){const[a,l]=o;n("consent",a,l)}else if(s==="get"){const[a,l,c]=o;n("get",a,l,c)}else if(s==="set"){const[a]=o;n("set",a)}else n(s,...o)}catch(a){po.error(a)}}return i}function Mee(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=Dee(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function Nee(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(sI)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lee=30,Vee=1e3;class Fee{constructor(e={},t=Vee){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const dB=new Fee;function Bee(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function Uee(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:Bee(r)},s=xee.replace("{app-id}",t),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Fo.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function $ee(n,e=dB,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw Fo.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Fo.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new zee;return setTimeout(async()=>{a.abort()},_ee),pB({appId:r,apiKey:i,measurementId:s},o,a,e)}async function pB(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=dB){var s;const{appId:o,measurementId:a}=n;try{await Hee(r,e)}catch(l){if(a)return po.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await Uee(n);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!Wee(c)){if(i.deleteThrottleMetadata(o),a)return po.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?XR(t,i.intervalMillis,Lee):XR(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:t+1};return i.setThrottleMetadata(o,d),po.debug(`Calling attemptFetch again in ${h} millis`),pB(n,d,r,i)}}function Hee(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Fo.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Wee(n){if(!(n instanceof al)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class zee{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function jee(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});n("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kee(){if(lF())try{await cF()}catch(n){return po.warn(Fo.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return po.warn(Fo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Gee(n,e,t,r,i,s,o){var a;const l=$ee(n);l.then(y=>{t[y.measurementId]=y.appId,n.options.measurementId&&y.measurementId!==n.options.measurementId&&po.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>po.error(y)),e.push(l);const c=Kee().then(y=>{if(y)return r.getId()}),[h,d]=await Promise.all([l,c]);Nee(s)||Oee(s,h.measurementId),i("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[Tee]="firebase",p.update=!0,d!=null&&(p[Eee]=d),i("config",h.measurementId,p),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qee{constructor(e){this.app=e}_delete(){return delete lg[this.app.options.appId],Promise.resolve()}}let lg={},_P=[];const xP={};let WT="dataLayer",Yee="gtag",AP,mB,IP=!1;function Xee(){const n=[];if(aF()&&n.push("This is a browser extension environment."),yX()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Fo.create("invalid-analytics-context",{errorInfo:e});po.warn(t.message)}}function Jee(n,e,t){Xee();const r=n.options.appId;if(!r)throw Fo.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)po.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Fo.create("no-api-key");if(lg[r]!=null)throw Fo.create("already-exists",{id:r});if(!IP){kee(WT);const{wrappedGtag:s,gtagCore:o}=Mee(lg,_P,xP,WT,Yee);mB=s,AP=o,IP=!0}return lg[r]=Gee(n,_P,xP,e,AP,WT,t),new qee(n)}function Qee(n=WA()){n=li(n);const e=ed(n,Gb);return e.isInitialized()?e.getImmediate():Zee(n)}function Zee(n,e={}){const t=ed(n,Gb);if(t.isInitialized()){const i=t.getImmediate();if(Ng(e,t.getOptions()))return i;throw Fo.create("already-initialized")}return t.initialize({options:e})}function ete(n,e,t,r){n=li(n),jee(mB,lg[n.app.options.appId],e,t,r).catch(i=>po.error(i))}const CP="@firebase/analytics",OP="0.10.11";function tte(){zl(new nl(Gb,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Jee(r,i,t)},"PUBLIC")),zl(new nl("analytics-internal",n,"PRIVATE")),ha(CP,OP),ha(CP,OP,"esm2017");function n(e){try{const t=e.getProvider(Gb).getImmediate();return{logEvent:(r,i,s)=>ete(t,r,i,s)}}catch(t){throw Fo.create("interop-component-reg-failed",{reason:t})}}}tte();var kP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eh,gB;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,O){function A(){}A.prototype=O.prototype,N.D=O.prototype,N.prototype=new A,N.prototype.constructor=N,N.C=function(R,k,V){for(var D=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)D[Z-2]=arguments[Z];return O.prototype[k].apply(R,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,O,A){A||(A=0);var R=Array(16);if(typeof O=="string")for(var k=0;16>k;++k)R[k]=O.charCodeAt(A++)|O.charCodeAt(A++)<<8|O.charCodeAt(A++)<<16|O.charCodeAt(A++)<<24;else for(k=0;16>k;++k)R[k]=O[A++]|O[A++]<<8|O[A++]<<16|O[A++]<<24;O=N.g[0],A=N.g[1],k=N.g[2];var V=N.g[3],D=O+(V^A&(k^V))+R[0]+3614090360&4294967295;O=A+(D<<7&4294967295|D>>>25),D=V+(k^O&(A^k))+R[1]+3905402710&4294967295,V=O+(D<<12&4294967295|D>>>20),D=k+(A^V&(O^A))+R[2]+606105819&4294967295,k=V+(D<<17&4294967295|D>>>15),D=A+(O^k&(V^O))+R[3]+3250441966&4294967295,A=k+(D<<22&4294967295|D>>>10),D=O+(V^A&(k^V))+R[4]+4118548399&4294967295,O=A+(D<<7&4294967295|D>>>25),D=V+(k^O&(A^k))+R[5]+1200080426&4294967295,V=O+(D<<12&4294967295|D>>>20),D=k+(A^V&(O^A))+R[6]+2821735955&4294967295,k=V+(D<<17&4294967295|D>>>15),D=A+(O^k&(V^O))+R[7]+4249261313&4294967295,A=k+(D<<22&4294967295|D>>>10),D=O+(V^A&(k^V))+R[8]+1770035416&4294967295,O=A+(D<<7&4294967295|D>>>25),D=V+(k^O&(A^k))+R[9]+2336552879&4294967295,V=O+(D<<12&4294967295|D>>>20),D=k+(A^V&(O^A))+R[10]+4294925233&4294967295,k=V+(D<<17&4294967295|D>>>15),D=A+(O^k&(V^O))+R[11]+2304563134&4294967295,A=k+(D<<22&4294967295|D>>>10),D=O+(V^A&(k^V))+R[12]+1804603682&4294967295,O=A+(D<<7&4294967295|D>>>25),D=V+(k^O&(A^k))+R[13]+4254626195&4294967295,V=O+(D<<12&4294967295|D>>>20),D=k+(A^V&(O^A))+R[14]+2792965006&4294967295,k=V+(D<<17&4294967295|D>>>15),D=A+(O^k&(V^O))+R[15]+1236535329&4294967295,A=k+(D<<22&4294967295|D>>>10),D=O+(k^V&(A^k))+R[1]+4129170786&4294967295,O=A+(D<<5&4294967295|D>>>27),D=V+(A^k&(O^A))+R[6]+3225465664&4294967295,V=O+(D<<9&4294967295|D>>>23),D=k+(O^A&(V^O))+R[11]+643717713&4294967295,k=V+(D<<14&4294967295|D>>>18),D=A+(V^O&(k^V))+R[0]+3921069994&4294967295,A=k+(D<<20&4294967295|D>>>12),D=O+(k^V&(A^k))+R[5]+3593408605&4294967295,O=A+(D<<5&4294967295|D>>>27),D=V+(A^k&(O^A))+R[10]+38016083&4294967295,V=O+(D<<9&4294967295|D>>>23),D=k+(O^A&(V^O))+R[15]+3634488961&4294967295,k=V+(D<<14&4294967295|D>>>18),D=A+(V^O&(k^V))+R[4]+3889429448&4294967295,A=k+(D<<20&4294967295|D>>>12),D=O+(k^V&(A^k))+R[9]+568446438&4294967295,O=A+(D<<5&4294967295|D>>>27),D=V+(A^k&(O^A))+R[14]+3275163606&4294967295,V=O+(D<<9&4294967295|D>>>23),D=k+(O^A&(V^O))+R[3]+4107603335&4294967295,k=V+(D<<14&4294967295|D>>>18),D=A+(V^O&(k^V))+R[8]+1163531501&4294967295,A=k+(D<<20&4294967295|D>>>12),D=O+(k^V&(A^k))+R[13]+2850285829&4294967295,O=A+(D<<5&4294967295|D>>>27),D=V+(A^k&(O^A))+R[2]+4243563512&4294967295,V=O+(D<<9&4294967295|D>>>23),D=k+(O^A&(V^O))+R[7]+1735328473&4294967295,k=V+(D<<14&4294967295|D>>>18),D=A+(V^O&(k^V))+R[12]+2368359562&4294967295,A=k+(D<<20&4294967295|D>>>12),D=O+(A^k^V)+R[5]+4294588738&4294967295,O=A+(D<<4&4294967295|D>>>28),D=V+(O^A^k)+R[8]+2272392833&4294967295,V=O+(D<<11&4294967295|D>>>21),D=k+(V^O^A)+R[11]+1839030562&4294967295,k=V+(D<<16&4294967295|D>>>16),D=A+(k^V^O)+R[14]+4259657740&4294967295,A=k+(D<<23&4294967295|D>>>9),D=O+(A^k^V)+R[1]+2763975236&4294967295,O=A+(D<<4&4294967295|D>>>28),D=V+(O^A^k)+R[4]+1272893353&4294967295,V=O+(D<<11&4294967295|D>>>21),D=k+(V^O^A)+R[7]+4139469664&4294967295,k=V+(D<<16&4294967295|D>>>16),D=A+(k^V^O)+R[10]+3200236656&4294967295,A=k+(D<<23&4294967295|D>>>9),D=O+(A^k^V)+R[13]+681279174&4294967295,O=A+(D<<4&4294967295|D>>>28),D=V+(O^A^k)+R[0]+3936430074&4294967295,V=O+(D<<11&4294967295|D>>>21),D=k+(V^O^A)+R[3]+3572445317&4294967295,k=V+(D<<16&4294967295|D>>>16),D=A+(k^V^O)+R[6]+76029189&4294967295,A=k+(D<<23&4294967295|D>>>9),D=O+(A^k^V)+R[9]+3654602809&4294967295,O=A+(D<<4&4294967295|D>>>28),D=V+(O^A^k)+R[12]+3873151461&4294967295,V=O+(D<<11&4294967295|D>>>21),D=k+(V^O^A)+R[15]+530742520&4294967295,k=V+(D<<16&4294967295|D>>>16),D=A+(k^V^O)+R[2]+3299628645&4294967295,A=k+(D<<23&4294967295|D>>>9),D=O+(k^(A|~V))+R[0]+4096336452&4294967295,O=A+(D<<6&4294967295|D>>>26),D=V+(A^(O|~k))+R[7]+1126891415&4294967295,V=O+(D<<10&4294967295|D>>>22),D=k+(O^(V|~A))+R[14]+2878612391&4294967295,k=V+(D<<15&4294967295|D>>>17),D=A+(V^(k|~O))+R[5]+4237533241&4294967295,A=k+(D<<21&4294967295|D>>>11),D=O+(k^(A|~V))+R[12]+1700485571&4294967295,O=A+(D<<6&4294967295|D>>>26),D=V+(A^(O|~k))+R[3]+2399980690&4294967295,V=O+(D<<10&4294967295|D>>>22),D=k+(O^(V|~A))+R[10]+4293915773&4294967295,k=V+(D<<15&4294967295|D>>>17),D=A+(V^(k|~O))+R[1]+2240044497&4294967295,A=k+(D<<21&4294967295|D>>>11),D=O+(k^(A|~V))+R[8]+1873313359&4294967295,O=A+(D<<6&4294967295|D>>>26),D=V+(A^(O|~k))+R[15]+4264355552&4294967295,V=O+(D<<10&4294967295|D>>>22),D=k+(O^(V|~A))+R[6]+2734768916&4294967295,k=V+(D<<15&4294967295|D>>>17),D=A+(V^(k|~O))+R[13]+1309151649&4294967295,A=k+(D<<21&4294967295|D>>>11),D=O+(k^(A|~V))+R[4]+4149444226&4294967295,O=A+(D<<6&4294967295|D>>>26),D=V+(A^(O|~k))+R[11]+3174756917&4294967295,V=O+(D<<10&4294967295|D>>>22),D=k+(O^(V|~A))+R[2]+718787259&4294967295,k=V+(D<<15&4294967295|D>>>17),D=A+(V^(k|~O))+R[9]+3951481745&4294967295,N.g[0]=N.g[0]+O&4294967295,N.g[1]=N.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+V&4294967295}r.prototype.u=function(N,O){O===void 0&&(O=N.length);for(var A=O-this.blockSize,R=this.B,k=this.h,V=0;V<O;){if(k==0)for(;V<=A;)i(this,N,V),V+=this.blockSize;if(typeof N=="string"){for(;V<O;)if(R[k++]=N.charCodeAt(V++),k==this.blockSize){i(this,R),k=0;break}}else for(;V<O;)if(R[k++]=N[V++],k==this.blockSize){i(this,R),k=0;break}}this.h=k,this.o+=O},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var O=1;O<N.length-8;++O)N[O]=0;var A=8*this.o;for(O=N.length-8;O<N.length;++O)N[O]=A&255,A/=256;for(this.u(N),N=Array(16),O=A=0;4>O;++O)for(var R=0;32>R;R+=8)N[A++]=this.g[O]>>>R&255;return N};function s(N,O){var A=a;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=O(N)}function o(N,O){this.h=O;for(var A=[],R=!0,k=N.length-1;0<=k;k--){var V=N[k]|0;R&&V==O||(A[k]=V,R=!1)}this.g=A}var a={};function l(N){return-128<=N&&128>N?s(N,function(O){return new o([O|0],0>O?-1:0)}):new o([N|0],0>N?-1:0)}function c(N){if(isNaN(N)||!isFinite(N))return d;if(0>N)return E(c(-N));for(var O=[],A=1,R=0;N>=A;R++)O[R]=N/A|0,A*=4294967296;return new o(O,0)}function h(N,O){if(N.length==0)throw Error("number format error: empty string");if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(N.charAt(0)=="-")return E(h(N.substring(1),O));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(O,8)),R=d,k=0;k<N.length;k+=8){var V=Math.min(8,N.length-k),D=parseInt(N.substring(k,k+V),O);8>V?(V=c(Math.pow(O,V)),R=R.j(V).add(c(D))):(R=R.j(A),R=R.add(c(D)))}return R}var d=l(0),p=l(1),y=l(16777216);n=o.prototype,n.m=function(){if(S(this))return-E(this).m();for(var N=0,O=1,A=0;A<this.g.length;A++){var R=this.i(A);N+=(0<=R?R:4294967296+R)*O,O*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(w(this))return"0";if(S(this))return"-"+E(this).toString(N);for(var O=c(Math.pow(N,6)),A=this,R="";;){var k=F(A,O).g;A=C(A,k.j(O));var V=((0<A.g.length?A.g[0]:A.h)>>>0).toString(N);if(A=k,w(A))return V+R;for(;6>V.length;)V="0"+V;R=V+R}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function w(N){if(N.h!=0)return!1;for(var O=0;O<N.g.length;O++)if(N.g[O]!=0)return!1;return!0}function S(N){return N.h==-1}n.l=function(N){return N=C(this,N),S(N)?-1:w(N)?0:1};function E(N){for(var O=N.g.length,A=[],R=0;R<O;R++)A[R]=~N.g[R];return new o(A,~N.h).add(p)}n.abs=function(){return S(this)?E(this):this},n.add=function(N){for(var O=Math.max(this.g.length,N.g.length),A=[],R=0,k=0;k<=O;k++){var V=R+(this.i(k)&65535)+(N.i(k)&65535),D=(V>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);R=D>>>16,V&=65535,D&=65535,A[k]=D<<16|V}return new o(A,A[A.length-1]&-2147483648?-1:0)};function C(N,O){return N.add(E(O))}n.j=function(N){if(w(this)||w(N))return d;if(S(this))return S(N)?E(this).j(E(N)):E(E(this).j(N));if(S(N))return E(this.j(E(N)));if(0>this.l(y)&&0>N.l(y))return c(this.m()*N.m());for(var O=this.g.length+N.g.length,A=[],R=0;R<2*O;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(var k=0;k<N.g.length;k++){var V=this.i(R)>>>16,D=this.i(R)&65535,Z=N.i(k)>>>16,le=N.i(k)&65535;A[2*R+2*k]+=D*le,L(A,2*R+2*k),A[2*R+2*k+1]+=V*le,L(A,2*R+2*k+1),A[2*R+2*k+1]+=D*Z,L(A,2*R+2*k+1),A[2*R+2*k+2]+=V*Z,L(A,2*R+2*k+2)}for(R=0;R<O;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=O;R<2*O;R++)A[R]=0;return new o(A,0)};function L(N,O){for(;(N[O]&65535)!=N[O];)N[O+1]+=N[O]>>>16,N[O]&=65535,O++}function P(N,O){this.g=N,this.h=O}function F(N,O){if(w(O))throw Error("division by zero");if(w(N))return new P(d,d);if(S(N))return O=F(E(N),O),new P(E(O.g),E(O.h));if(S(O))return O=F(N,E(O)),new P(E(O.g),O.h);if(30<N.g.length){if(S(N)||S(O))throw Error("slowDivide_ only works with positive integers.");for(var A=p,R=O;0>=R.l(N);)A=U(A),R=U(R);var k=j(A,1),V=j(R,1);for(R=j(R,2),A=j(A,2);!w(R);){var D=V.add(R);0>=D.l(N)&&(k=k.add(A),V=D),R=j(R,1),A=j(A,1)}return O=C(N,k.j(O)),new P(k,O)}for(k=d;0<=N.l(O);){for(A=Math.max(1,Math.floor(N.m()/O.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),V=c(A),D=V.j(O);S(D)||0<D.l(N);)A-=R,V=c(A),D=V.j(O);w(V)&&(V=p),k=k.add(V),N=C(N,D)}return new P(k,N)}n.A=function(N){return F(this,N).h},n.and=function(N){for(var O=Math.max(this.g.length,N.g.length),A=[],R=0;R<O;R++)A[R]=this.i(R)&N.i(R);return new o(A,this.h&N.h)},n.or=function(N){for(var O=Math.max(this.g.length,N.g.length),A=[],R=0;R<O;R++)A[R]=this.i(R)|N.i(R);return new o(A,this.h|N.h)},n.xor=function(N){for(var O=Math.max(this.g.length,N.g.length),A=[],R=0;R<O;R++)A[R]=this.i(R)^N.i(R);return new o(A,this.h^N.h)};function U(N){for(var O=N.g.length+1,A=[],R=0;R<O;R++)A[R]=N.i(R)<<1|N.i(R-1)>>>31;return new o(A,N.h)}function j(N,O){var A=O>>5;O%=32;for(var R=N.g.length-A,k=[],V=0;V<R;V++)k[V]=0<O?N.i(V+A)>>>O|N.i(V+A+1)<<32-O:N.i(V+A);return new o(k,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gB=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,eh=o}).apply(typeof kP<"u"?kP:typeof self<"u"?self:typeof window<"u"?window:{});var $v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yB,Vm,vB,$0,C_,bB,wB,SB;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,_,M){return m==Array.prototype||m==Object.prototype||(m[_]=M.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof $v=="object"&&$v];for(var _=0;_<m.length;++_){var M=m[_];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var r=t(this);function i(m,_){if(_)e:{var M=r;m=m.split(".");for(var G=0;G<m.length-1;G++){var ve=m[G];if(!(ve in M))break e;M=M[ve]}m=m[m.length-1],G=M[m],_=_(G),_!=G&&_!=null&&e(M,m,{configurable:!0,writable:!0,value:_})}}function s(m,_){m instanceof String&&(m+="");var M=0,G=!1,ve={next:function(){if(!G&&M<m.length){var Ae=M++;return{value:_(Ae,m[Ae]),done:!1}}return G=!0,{done:!0,value:void 0}}};return ve[Symbol.iterator]=function(){return ve},ve}i("Array.prototype.values",function(m){return m||function(){return s(this,function(_,M){return M})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(m){var _=typeof m;return _=_!="object"?_:m?Array.isArray(m)?"array":_:"null",_=="array"||_=="object"&&typeof m.length=="number"}function c(m){var _=typeof m;return _=="object"&&m!=null||_=="function"}function h(m,_,M){return m.call.apply(m.bind,arguments)}function d(m,_,M){if(!m)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var ve=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ve,G),m.apply(_,ve)}}return function(){return m.apply(_,arguments)}}function p(m,_,M){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function y(m,_){var M=Array.prototype.slice.call(arguments,1);return function(){var G=M.slice();return G.push.apply(G,arguments),m.apply(this,G)}}function w(m,_){function M(){}M.prototype=_.prototype,m.aa=_.prototype,m.prototype=new M,m.prototype.constructor=m,m.Qb=function(G,ve,Ae){for(var st=Array(arguments.length-2),Dn=2;Dn<arguments.length;Dn++)st[Dn-2]=arguments[Dn];return _.prototype[ve].apply(G,st)}}function S(m){const _=m.length;if(0<_){const M=Array(_);for(let G=0;G<_;G++)M[G]=m[G];return M}return[]}function E(m,_){for(let M=1;M<arguments.length;M++){const G=arguments[M];if(l(G)){const ve=m.length||0,Ae=G.length||0;m.length=ve+Ae;for(let st=0;st<Ae;st++)m[ve+st]=G[st]}else m.push(G)}}class C{constructor(_,M){this.i=_,this.j=M,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function L(m){return/^[\s\xa0]*$/.test(m)}function P(){var m=a.navigator;return m&&(m=m.userAgent)?m:""}function F(m){return F[" "](m),m}F[" "]=function(){};var U=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function j(m,_,M){for(const G in m)_.call(M,m[G],G,m)}function N(m,_){for(const M in m)_.call(void 0,m[M],M,m)}function O(m){const _={};for(const M in m)_[M]=m[M];return _}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(m,_){let M,G;for(let ve=1;ve<arguments.length;ve++){G=arguments[ve];for(M in G)m[M]=G[M];for(let Ae=0;Ae<A.length;Ae++)M=A[Ae],Object.prototype.hasOwnProperty.call(G,M)&&(m[M]=G[M])}}function k(m){var _=1;m=m.split(":");const M=[];for(;0<_&&m.length;)M.push(m.shift()),_--;return m.length&&M.push(m.join(":")),M}function V(m){a.setTimeout(()=>{throw m},0)}function D(){var m=Ce;let _=null;return m.g&&(_=m.g,m.g=m.g.next,m.g||(m.h=null),_.next=null),_}class Z{constructor(){this.h=this.g=null}add(_,M){const G=le.get();G.set(_,M),this.h?this.h.next=G:this.g=G,this.h=G}}var le=new C(()=>new Q,m=>m.reset());class Q{constructor(){this.next=this.g=this.h=null}set(_,M){this.h=_,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let re,ae=!1,Ce=new Z,He=()=>{const m=a.Promise.resolve(void 0);re=()=>{m.then(Ge)}};var Ge=()=>{for(var m;m=D();){try{m.h.call(m.g)}catch(M){V(M)}var _=le;_.j(m),100>_.h&&(_.h++,m.next=_.g,_.g=m)}ae=!1};function ot(){this.s=this.s,this.C=this.C}ot.prototype.s=!1,ot.prototype.ma=function(){this.s||(this.s=!0,this.N())},ot.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ut(m,_){this.type=m,this.g=this.target=_,this.defaultPrevented=!1}ut.prototype.h=function(){this.defaultPrevented=!0};var Mt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var m=!1,_=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const M=()=>{};a.addEventListener("test",M,_),a.removeEventListener("test",M,_)}catch{}return m}();function _e(m,_){if(ut.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var M=this.type=m.type,G=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=_,_=m.relatedTarget){if(U){e:{try{F(_.nodeName);var ve=!0;break e}catch{}ve=!1}ve||(_=null)}}else M=="mouseover"?_=m.fromElement:M=="mouseout"&&(_=m.toElement);this.relatedTarget=_,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ne[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&_e.aa.h.call(this)}}w(_e,ut);var Ne={2:"touch",3:"pen",4:"mouse"};_e.prototype.h=function(){_e.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),Ee=0;function me(m,_,M,G,ve){this.listener=m,this.proxy=null,this.src=_,this.type=M,this.capture=!!G,this.ha=ve,this.key=++Ee,this.da=this.fa=!1}function Ie(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Me(m){this.src=m,this.g={},this.h=0}Me.prototype.add=function(m,_,M,G,ve){var Ae=m.toString();m=this.g[Ae],m||(m=this.g[Ae]=[],this.h++);var st=X(m,_,G,ve);return-1<st?(_=m[st],M||(_.fa=!1)):(_=new me(_,this.src,Ae,!!G,ve),_.fa=M,m.push(_)),_};function Ye(m,_){var M=_.type;if(M in m.g){var G=m.g[M],ve=Array.prototype.indexOf.call(G,_,void 0),Ae;(Ae=0<=ve)&&Array.prototype.splice.call(G,ve,1),Ae&&(Ie(_),m.g[M].length==0&&(delete m.g[M],m.h--))}}function X(m,_,M,G){for(var ve=0;ve<m.length;++ve){var Ae=m[ve];if(!Ae.da&&Ae.listener==_&&Ae.capture==!!M&&Ae.ha==G)return ve}return-1}var ee="closure_lm_"+(1e6*Math.random()|0),be={};function Ue(m,_,M,G,ve){if(Array.isArray(_)){for(var Ae=0;Ae<_.length;Ae++)Ue(m,_[Ae],M,G,ve);return null}return M=mt(M),m&&m[oe]?m.K(_,M,c(G)?!!G.capture:!1,ve):ke(m,_,M,!1,G,ve)}function ke(m,_,M,G,ve,Ae){if(!_)throw Error("Invalid event type");var st=c(ve)?!!ve.capture:!!ve,Dn=Et(m);if(Dn||(m[ee]=Dn=new Me(m)),M=Dn.add(_,M,G,st,Ae),M.proxy)return M;if(G=Ke(),M.proxy=G,G.src=m,G.listener=M,m.addEventListener)Mt||(ve=st),ve===void 0&&(ve=!1),m.addEventListener(_.toString(),G,ve);else if(m.attachEvent)m.attachEvent(Le(_.toString()),G);else if(m.addListener&&m.removeListener)m.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return M}function Ke(){function m(M){return _.call(m.src,m.listener,M)}const _=ze;return m}function at(m,_,M,G,ve){if(Array.isArray(_))for(var Ae=0;Ae<_.length;Ae++)at(m,_[Ae],M,G,ve);else G=c(G)?!!G.capture:!!G,M=mt(M),m&&m[oe]?(m=m.i,_=String(_).toString(),_ in m.g&&(Ae=m.g[_],M=X(Ae,M,G,ve),-1<M&&(Ie(Ae[M]),Array.prototype.splice.call(Ae,M,1),Ae.length==0&&(delete m.g[_],m.h--)))):m&&(m=Et(m))&&(_=m.g[_.toString()],m=-1,_&&(m=X(_,M,G,ve)),(M=-1<m?_[m]:null)&&Xe(M))}function Xe(m){if(typeof m!="number"&&m&&!m.da){var _=m.src;if(_&&_[oe])Ye(_.i,m);else{var M=m.type,G=m.proxy;_.removeEventListener?_.removeEventListener(M,G,m.capture):_.detachEvent?_.detachEvent(Le(M),G):_.addListener&&_.removeListener&&_.removeListener(G),(M=Et(_))?(Ye(M,m),M.h==0&&(M.src=null,_[ee]=null)):Ie(m)}}}function Le(m){return m in be?be[m]:be[m]="on"+m}function ze(m,_){if(m.da)m=!0;else{_=new _e(_,this);var M=m.listener,G=m.ha||m.src;m.fa&&Xe(m),m=M.call(G,_)}return m}function Et(m){return m=m[ee],m instanceof Me?m:null}var lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function mt(m){return typeof m=="function"?m:(m[lt]||(m[lt]=function(_){return m.handleEvent(_)}),m[lt])}function ft(){ot.call(this),this.i=new Me(this),this.M=this,this.F=null}w(ft,ot),ft.prototype[oe]=!0,ft.prototype.removeEventListener=function(m,_,M,G){at(this,m,_,M,G)};function Tt(m,_){var M,G=m.F;if(G)for(M=[];G;G=G.F)M.push(G);if(m=m.M,G=_.type||_,typeof _=="string")_=new ut(_,m);else if(_ instanceof ut)_.target=_.target||m;else{var ve=_;_=new ut(G,m),R(_,ve)}if(ve=!0,M)for(var Ae=M.length-1;0<=Ae;Ae--){var st=_.g=M[Ae];ve=Wt(st,G,!0,_)&&ve}if(st=_.g=m,ve=Wt(st,G,!0,_)&&ve,ve=Wt(st,G,!1,_)&&ve,M)for(Ae=0;Ae<M.length;Ae++)st=_.g=M[Ae],ve=Wt(st,G,!1,_)&&ve}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var m=this.i,_;for(_ in m.g){for(var M=m.g[_],G=0;G<M.length;G++)Ie(M[G]);delete m.g[_],m.h--}}this.F=null},ft.prototype.K=function(m,_,M,G){return this.i.add(String(m),_,!1,M,G)},ft.prototype.L=function(m,_,M,G){return this.i.add(String(m),_,!0,M,G)};function Wt(m,_,M,G){if(_=m.i.g[String(_)],!_)return!0;_=_.concat();for(var ve=!0,Ae=0;Ae<_.length;++Ae){var st=_[Ae];if(st&&!st.da&&st.capture==M){var Dn=st.listener,Rr=st.ha||st.src;st.fa&&Ye(m.i,st),ve=Dn.call(Rr,G)!==!1&&ve}}return ve&&!G.defaultPrevented}function de(m,_,M){if(typeof m=="function")M&&(m=p(m,M));else if(m&&typeof m.handleEvent=="function")m=p(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(m,_||0)}function ge(m){m.g=de(()=>{m.g=null,m.i&&(m.i=!1,ge(m))},m.l);const _=m.h;m.h=null,m.m.apply(null,_)}class Se extends ot{constructor(_,M){super(),this.m=_,this.l=M,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pe(m){ot.call(this),this.h=m,this.g={}}w(Pe,ot);var rt=[];function Ot(m){j(m.g,function(_,M){this.g.hasOwnProperty(M)&&Xe(_)},m),m.g={}}Pe.prototype.N=function(){Pe.aa.N.call(this),Ot(this)},Pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rt=a.JSON.stringify,je=a.JSON.parse,tn=class{stringify(m){return a.JSON.stringify(m,void 0)}parse(m){return a.JSON.parse(m,void 0)}};function kt(){}kt.prototype.h=null;function At(m){return m.h||(m.h=m.i())}function Oe(){}var zt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function on(){ut.call(this,"d")}w(on,ut);function yr(){ut.call(this,"c")}w(yr,ut);var ji={},cl=null;function yo(){return cl=cl||new ft}ji.La="serverreachability";function Ph(m){ut.call(this,ji.La,m)}w(Ph,ut);function Bs(m){const _=yo();Tt(_,new Ph(_))}ji.STAT_EVENT="statevent";function Ea(m,_){ut.call(this,ji.STAT_EVENT,m),this.stat=_}w(Ea,ut);function Hr(m){const _=yo();Tt(_,new Ea(_,m))}ji.Ma="timingevent";function Ta(m,_){ut.call(this,ji.Ma,m),this.size=_}w(Ta,ut);function Hn(m,_){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){m()},_)}function Zn(){this.g=!0}Zn.prototype.xa=function(){this.g=!1};function tm(m,_,M,G,ve,Ae){m.info(function(){if(m.g)if(Ae)for(var st="",Dn=Ae.split("&"),Rr=0;Rr<Dn.length;Rr++){var vn=Dn[Rr].split("=");if(1<vn.length){var Vn=vn[0];vn=vn[1];var br=Vn.split("_");st=2<=br.length&&br[1]=="type"?st+(Vn+"="+vn+"&"):st+(Vn+"=redacted&")}}else st=null;else st=Ae;return"XMLHTTP REQ ("+G+") [attempt "+ve+"]: "+_+`
`+M+`
`+st})}function Zc(m,_,M,G,ve,Ae,st){m.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+ve+"]: "+_+`
`+M+`
`+Ae+" "+st})}function vo(m,_,M,G){m.info(function(){return"XMLHTTP TEXT ("+_+"): "+nm(m,M)+(G?" "+G:"")})}function eu(m,_){m.info(function(){return"TIMEOUT: "+_})}Zn.prototype.info=function(){};function nm(m,_){if(!m.g)return _;if(!_)return null;try{var M=JSON.parse(_);if(M){for(m=0;m<M.length;m++)if(Array.isArray(M[m])){var G=M[m];if(!(2>G.length)){var ve=G[1];if(Array.isArray(ve)&&!(1>ve.length)){var Ae=ve[0];if(Ae!="noop"&&Ae!="stop"&&Ae!="close")for(var st=1;st<ve.length;st++)ve[st]=""}}}}return Rt(M)}catch{return _}}var ws={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_a={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Us;function $o(){}w($o,kt),$o.prototype.g=function(){return new XMLHttpRequest},$o.prototype.i=function(){return{}},Us=new $o;function Ho(m,_,M,G){this.j=m,this.i=_,this.l=M,this.R=G||1,this.U=new Pe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bo}function bo(){this.i=null,this.g="",this.h=!1}var Dh={},wo={};function tu(m,_,M){m.L=1,m.v=Ia(ki(_)),m.m=M,m.P=!0,nu(m,null)}function nu(m,_){m.F=Date.now(),ci(m),m.A=ki(m.v);var M=m.A,G=m.R;Array.isArray(G)||(G=[String(G)]),Ki(M.i,"t",G),m.C=0,M=m.j.J,m.h=new bo,m.g=fu(m.j,M?_:null,!m.m),0<m.O&&(m.M=new Se(p(m.Y,m,m.g),m.O)),_=m.U,M=m.g,G=m.ca;var ve="readystatechange";Array.isArray(ve)||(ve&&(rt[0]=ve.toString()),ve=rt);for(var Ae=0;Ae<ve.length;Ae++){var st=Ue(M,ve[Ae],G||_.handleEvent,!1,_.h||_);if(!st)break;_.g[st.key]=st}_=m.H?O(m.H):{},m.m?(m.u||(m.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,_)):(m.u="GET",m.g.ea(m.A,m.u,null,_)),Bs(),tm(m.i,m.u,m.A,m.l,m.R,m.m)}Ho.prototype.ca=function(m){m=m.target;const _=this.M;_&&Wr(m)==3?_.j():this.Y(m)},Ho.prototype.Y=function(m){try{if(m==this.g)e:{const br=Wr(this.g);var _=this.g.Ba();const Ss=this.g.Z();if(!(3>br)&&(br!=3||this.g&&(this.h.h||this.g.oa()||sc(this.g)))){this.J||br!=4||_==7||(_==8||0>=Ss?Bs(3):Bs(2)),Wo(this);var M=this.g.Z();this.X=M;t:if(Qn(this)){var G=sc(this.g);m="";var ve=G.length,Ae=Wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$s(this),zo(this);var st="";break t}this.h.i=new a.TextDecoder}for(_=0;_<ve;_++)this.h.h=!0,m+=this.h.i.decode(G[_],{stream:!(Ae&&_==ve-1)});G.length=0,this.h.g+=m,this.C=0,st=this.h.g}else st=this.g.oa();if(this.o=M==200,Zc(this.i,this.u,this.A,this.l,this.R,br,M),this.o){if(this.T&&!this.K){t:{if(this.g){var Dn,Rr=this.g;if((Dn=Rr.g?Rr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Dn)){var vn=Dn;break t}}vn=null}if(M=vn)vo(this.i,this.l,M,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ul(this,M);else{this.o=!1,this.s=3,Hr(12),$s(this),zo(this);break e}}if(this.P){M=!0;let Pi;for(;!this.J&&this.C<st.length;)if(Pi=xa(this,st),Pi==wo){br==4&&(this.s=4,Hr(14),M=!1),vo(this.i,this.l,null,"[Incomplete Response]");break}else if(Pi==Dh){this.s=4,Hr(15),vo(this.i,this.l,st,"[Invalid Chunk]"),M=!1;break}else vo(this.i,this.l,Pi,null),ul(this,Pi);if(Qn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),br!=4||st.length!=0||this.h.h||(this.s=1,Hr(16),M=!1),this.o=this.o&&M,!M)vo(this.i,this.l,st,"[Invalid Chunked Response]"),$s(this),zo(this);else if(0<st.length&&!this.W){this.W=!0;var Vn=this.j;Vn.g==this&&Vn.ba&&!Vn.M&&(Vn.j.info("Great, no buffering proxy detected. Bytes received: "+st.length),_i(Vn),Vn.M=!0,Hr(11))}}else vo(this.i,this.l,st,null),ul(this,st);br==4&&$s(this),this.o&&!this.J&&(br==4?qn(this.j,this):(this.o=!1,ci(this)))}else cu(this.g),M==400&&0<st.indexOf("Unknown SID")?(this.s=3,Hr(12)):(this.s=0,Hr(13)),$s(this),zo(this)}}}catch{}finally{}};function Qn(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function xa(m,_){var M=m.C,G=_.indexOf(`
`,M);return G==-1?wo:(M=Number(_.substring(M,G)),isNaN(M)?Dh:(G+=1,G+M>_.length?wo:(_=_.slice(G,G+M),m.C=G+M,_)))}Ho.prototype.cancel=function(){this.J=!0,$s(this)};function ci(m){m.S=Date.now()+m.I,Mh(m,m.I)}function Mh(m,_){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Hn(p(m.ba,m),_)}function Wo(m){m.B&&(a.clearTimeout(m.B),m.B=null)}Ho.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(eu(this.i,this.A),this.L!=2&&(Bs(),Hr(17)),$s(this),this.s=2,zo(this)):Mh(this,this.S-m)};function zo(m){m.j.G==0||m.J||qn(m.j,m)}function $s(m){Wo(m);var _=m.M;_&&typeof _.ma=="function"&&_.ma(),m.M=null,Ot(m.U),m.g&&(_=m.g,m.g=null,_.abort(),_.ma())}function ul(m,_){try{var M=m.j;if(M.G!=0&&(M.g==m||cn(M.h,m))){if(!m.K&&cn(M.h,m)&&M.G==3){try{var G=M.Da.g.parse(_)}catch{G=null}if(Array.isArray(G)&&G.length==3){var ve=G;if(ve[0]==0){e:if(!M.u){if(M.g)if(M.g.F+3e3<m.F)_o(M),ml(M);else break e;qo(M),Hr(18)}}else M.za=ve[1],0<M.za-M.T&&37500>ve[2]&&M.F&&M.v==0&&!M.C&&(M.C=Hn(p(M.Za,M),6e3));if(1>=Lh(M.h)&&M.ca){try{M.ca()}catch{}M.ca=void 0}}else Gi(M,11)}else if((m.K||M.g==m)&&_o(M),!L(_))for(ve=M.Da.g.parse(_),_=0;_<ve.length;_++){let vn=ve[_];if(M.T=vn[0],vn=vn[1],M.G==2)if(vn[0]=="c"){M.K=vn[1],M.ia=vn[2];const Vn=vn[3];Vn!=null&&(M.la=Vn,M.j.info("VER="+M.la));const br=vn[4];br!=null&&(M.Aa=br,M.j.info("SVER="+M.Aa));const Ss=vn[5];Ss!=null&&typeof Ss=="number"&&0<Ss&&(G=1.5*Ss,M.L=G,M.j.info("backChannelRequestTimeoutMs_="+G)),G=M;const Pi=m.g;if(Pi){const oc=Pi.g?Pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oc){var Ae=G.h;Ae.g||oc.indexOf("spdy")==-1&&oc.indexOf("quic")==-1&&oc.indexOf("h2")==-1||(Ae.j=Ae.l,Ae.g=new Set,Ae.h&&(Ql(Ae,Ae.h),Ae.h=null))}if(G.D){const Wh=Pi.g?Pi.g.getResponseHeader("X-HTTP-Session-Id"):null;Wh&&(G.ya=Wh,Pn(G.I,G.D,Wh))}}M.G=3,M.l&&M.l.ua(),M.ba&&(M.R=Date.now()-m.F,M.j.info("Handshake RTT: "+M.R+"ms")),G=M;var st=m;if(G.qa=Gs(G,G.J?G.ia:null,G.W),st.K){ru(G.h,st);var Dn=st,Rr=G.L;Rr&&(Dn.I=Rr),Dn.B&&(Wo(Dn),ci(Dn)),G.g=st}else zr(G);0<M.i.length&&Go(M)}else vn[0]!="stop"&&vn[0]!="close"||Gi(M,7);else M.G==3&&(vn[0]=="stop"||vn[0]=="close"?vn[0]=="stop"?Gi(M,7):Ra(M):vn[0]!="noop"&&M.l&&M.l.ta(vn),M.v=0)}}Bs(4)}catch{}}var jo=class{constructor(m,_){this.g=m,this.map=_}};function Nh(m){this.l=m||10,a.PerformanceNavigationTiming?(m=a.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jl(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Lh(m){return m.h?1:m.g?m.g.size:0}function cn(m,_){return m.h?m.h==_:m.g?m.g.has(_):!1}function Ql(m,_){m.g?m.g.add(_):m.h=_}function ru(m,_){m.h&&m.h==_?m.h=null:m.g&&m.g.has(_)&&m.g.delete(_)}Nh.prototype.cancel=function(){if(this.i=iu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function iu(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let _=m.i;for(const M of m.g.values())_=_.concat(M.D);return _}return S(m.i)}function zn(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(l(m)){for(var _=[],M=m.length,G=0;G<M;G++)_.push(m[G]);return _}_=[],M=0;for(G in m)_[M++]=m[G];return _}function Zl(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(l(m)||typeof m=="string"){var _=[];m=m.length;for(var M=0;M<m;M++)_.push(M);return _}_=[],M=0;for(const G in m)_[M++]=G;return _}}}function Aa(m,_){if(m.forEach&&typeof m.forEach=="function")m.forEach(_,void 0);else if(l(m)||typeof m=="string")Array.prototype.forEach.call(m,_,void 0);else for(var M=Zl(m),G=zn(m),ve=G.length,Ae=0;Ae<ve;Ae++)_.call(void 0,G[Ae],M&&M[Ae],m)}var Hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function su(m,_){if(m){m=m.split("&");for(var M=0;M<m.length;M++){var G=m[M].indexOf("="),ve=null;if(0<=G){var Ae=m[M].substring(0,G);ve=m[M].substring(G+1)}else Ae=m[M];_(Ae,ve?decodeURIComponent(ve.replace(/\+/g," ")):"")}}}function So(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof So){this.h=m.h,hl(this,m.j),this.o=m.o,this.g=m.g,Eo(this,m.s),this.l=m.l;var _=m.i,M=new Ri;M.i=_.i,_.g&&(M.g=new Map(_.g),M.h=_.h),Vh(this,M),this.m=m.m}else m&&(_=String(m).match(Hs))?(this.h=!1,hl(this,_[1]||"",!0),this.o=Ca(_[2]||""),this.g=Ca(_[3]||"",!0),Eo(this,_[4]),this.l=Ca(_[5]||"",!0),Vh(this,_[6]||"",!0),this.m=Ca(_[7]||"")):(this.h=!1,this.i=new Ri(null,this.h))}So.prototype.toString=function(){var m=[],_=this.j;_&&m.push(Qt(_,Fh,!0),":");var M=this.g;return(M||_=="file")&&(m.push("//"),(_=this.o)&&m.push(Qt(_,Fh,!0),"@"),m.push(encodeURIComponent(String(M)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.s,M!=null&&m.push(":",String(M))),(M=this.l)&&(this.g&&M.charAt(0)!="/"&&m.push("/"),m.push(Qt(M,M.charAt(0)=="/"?Ti:rm,!0))),(M=this.i.toString())&&m.push("?",M),(M=this.m)&&m.push("#",Qt(M,ec)),m.join("")};function ki(m){return new So(m)}function hl(m,_,M){m.j=M?Ca(_,!0):_,m.j&&(m.j=m.j.replace(/:$/,""))}function Eo(m,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);m.s=_}else m.s=null}function Vh(m,_,M){_ instanceof Ri?(m.i=_,tc(m.i,m.h)):(M||(_=Qt(_,Oa)),m.i=new Ri(_,m.h))}function Pn(m,_,M){m.i.set(_,M)}function Ia(m){return Pn(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Ca(m,_){return m?_?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Qt(m,_,M){return typeof m=="string"?(m=encodeURI(m).replace(_,ou),M&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function ou(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Fh=/[#\/\?@]/g,rm=/[#\?:]/g,Ti=/[#\?]/g,Oa=/[#\?@]/g,ec=/#/g;function Ri(m,_){this.h=this.g=null,this.i=m||null,this.j=!!_}function To(m){m.g||(m.g=new Map,m.h=0,m.i&&su(m.i,function(_,M){m.add(decodeURIComponent(_.replace(/\+/g," ")),M)}))}n=Ri.prototype,n.add=function(m,_){To(this),this.i=null,m=Ws(this,m);var M=this.g.get(m);return M||this.g.set(m,M=[]),M.push(_),this.h+=1,this};function Bh(m,_){To(m),_=Ws(m,_),m.g.has(_)&&(m.i=null,m.h-=m.g.get(_).length,m.g.delete(_))}function _r(m,_){return To(m),_=Ws(m,_),m.g.has(_)}n.forEach=function(m,_){To(this),this.g.forEach(function(M,G){M.forEach(function(ve){m.call(_,ve,G,this)},this)},this)},n.na=function(){To(this);const m=Array.from(this.g.values()),_=Array.from(this.g.keys()),M=[];for(let G=0;G<_.length;G++){const ve=m[G];for(let Ae=0;Ae<ve.length;Ae++)M.push(_[G])}return M},n.V=function(m){To(this);let _=[];if(typeof m=="string")_r(this,m)&&(_=_.concat(this.g.get(Ws(this,m))));else{m=Array.from(this.g.values());for(let M=0;M<m.length;M++)_=_.concat(m[M])}return _},n.set=function(m,_){return To(this),this.i=null,m=Ws(this,m),_r(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[_]),this.h+=1,this},n.get=function(m,_){return m?(m=this.V(m),0<m.length?String(m[0]):_):_};function Ki(m,_,M){Bh(m,_),0<M.length&&(m.i=null,m.g.set(Ws(m,_),S(M)),m.h+=M.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],_=Array.from(this.g.keys());for(var M=0;M<_.length;M++){var G=_[M];const Ae=encodeURIComponent(String(G)),st=this.V(G);for(G=0;G<st.length;G++){var ve=Ae;st[G]!==""&&(ve+="="+encodeURIComponent(String(st[G]))),m.push(ve)}}return this.i=m.join("&")};function Ws(m,_){return _=String(_),m.j&&(_=_.toLowerCase()),_}function tc(m,_){_&&!m.j&&(To(m),m.i=null,m.g.forEach(function(M,G){var ve=G.toLowerCase();G!=ve&&(Bh(this,G),Ki(this,ve,M))},m)),m.j=_}function Uh(m,_){const M=new Zn;if(a.Image){const G=new Image;G.onload=y(zs,M,"TestLoadImage: loaded",!0,_,G),G.onerror=y(zs,M,"TestLoadImage: error",!1,_,G),G.onabort=y(zs,M,"TestLoadImage: abort",!1,_,G),G.ontimeout=y(zs,M,"TestLoadImage: timeout",!1,_,G),a.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=m}else _(!1)}function Ko(m,_){const M=new Zn,G=new AbortController,ve=setTimeout(()=>{G.abort(),zs(M,"TestPingServer: timeout",!1,_)},1e4);fetch(m,{signal:G.signal}).then(Ae=>{clearTimeout(ve),Ae.ok?zs(M,"TestPingServer: ok",!0,_):zs(M,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(ve),zs(M,"TestPingServer: error",!1,_)})}function zs(m,_,M,G,ve){try{ve&&(ve.onload=null,ve.onerror=null,ve.onabort=null,ve.ontimeout=null),G(M)}catch{}}function js(){this.g=new tn}function $h(m,_,M){const G=M||"";try{Aa(m,function(ve,Ae){let st=ve;c(ve)&&(st=Rt(ve)),_.push(G+Ae+"="+encodeURIComponent(st))})}catch(ve){throw _.push(G+"type="+encodeURIComponent("_badmap")),ve}}function nc(m){this.l=m.Ub||null,this.j=m.eb||!1}w(nc,kt),nc.prototype.g=function(){return new fl(this.l,this.j)},nc.prototype.i=function(m){return function(){return m}}({});function fl(m,_){ft.call(this),this.D=m,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(fl,ft),n=fl.prototype,n.open=function(m,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=_,this.readyState=1,Cn(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(_.body=m),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,In(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Cn(this)),this.g&&(this.readyState=3,Cn(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dl(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function dl(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var _=m.value?m.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!m.done}))&&(this.response=this.responseText+=_)}m.done?In(this):Cn(this),this.readyState==3&&dl(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,In(this))},n.Qa=function(m){this.g&&(this.response=m,In(this))},n.ga=function(){this.g&&In(this)};function In(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Cn(m)}n.setRequestHeader=function(m,_){this.u.append(m,_)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],_=this.h.entries();for(var M=_.next();!M.done;)M=M.value,m.push(M[0]+": "+M[1]),M=_.next();return m.join(`\r
`)};function Cn(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(fl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function sd(m){let _="";return j(m,function(M,G){_+=G,_+=":",_+=M,_+=`\r
`}),_}function ka(m,_,M){e:{for(G in M){var G=!1;break e}G=!0}G||(M=sd(M),typeof m=="string"?M!=null&&encodeURIComponent(String(M)):Pn(m,_,M))}function nr(m){ft.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(nr,ft);var im=/^https?$/i,au=["POST","PUT"];n=nr.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,_,M,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);_=_?_.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Us.g(),this.v=this.o?At(this.o):At(Us),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(_,String(m),!0),this.B=!1}catch(Ae){rc(this,Ae);return}if(m=M||"",M=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var ve in G)M.set(ve,G[ve]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const Ae of G.keys())M.set(Ae,G.get(Ae));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(M.keys()).find(Ae=>Ae.toLowerCase()=="content-type"),ve=a.FormData&&m instanceof a.FormData,!(0<=Array.prototype.indexOf.call(au,_,void 0))||G||ve||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ae,st]of M)this.g.setRequestHeader(Ae,st);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lu(this),this.u=!0,this.g.send(m),this.u=!1}catch(Ae){rc(this,Ae)}};function rc(m,_){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=_,m.m=5,ic(m),vr(m)}function ic(m){m.A||(m.A=!0,Tt(m,"complete"),Tt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Tt(this,"complete"),Tt(this,"abort"),vr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vr(this,!0)),nr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?od(this):this.bb())},n.bb=function(){od(this)};function od(m){if(m.h&&typeof o<"u"&&(!m.v[1]||Wr(m)!=4||m.Z()!=2)){if(m.u&&Wr(m)==4)de(m.Ea,0,m);else if(Tt(m,"readystatechange"),Wr(m)==4){m.h=!1;try{const st=m.Z();e:switch(st){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var M;if(!(M=_)){var G;if(G=st===0){var ve=String(m.D).match(Hs)[1]||null;!ve&&a.self&&a.self.location&&(ve=a.self.location.protocol.slice(0,-1)),G=!im.test(ve?ve.toLowerCase():"")}M=G}if(M)Tt(m,"complete"),Tt(m,"success");else{m.m=6;try{var Ae=2<Wr(m)?m.g.statusText:""}catch{Ae=""}m.l=Ae+" ["+m.Z()+"]",ic(m)}}finally{vr(m)}}}}function vr(m,_){if(m.g){lu(m);const M=m.g,G=m.v[0]?()=>{}:null;m.g=null,m.v=null,_||Tt(m,"ready");try{M.onreadystatechange=G}catch{}}}function lu(m){m.I&&(a.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function Wr(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<Wr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var _=this.g.responseText;return m&&_.indexOf(m)==0&&(_=_.substring(m.length)),je(_)}};function sc(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function cu(m){const _={};m=(m.g&&2<=Wr(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<m.length;G++){if(L(m[G]))continue;var M=k(m[G]);const ve=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const Ae=_[ve]||[];_[ve]=Ae,Ae.push(M)}N(_,function(G){return G.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xr(m,_,M){return M&&M.internalChannelParams&&M.internalChannelParams[m]||_}function pl(m){this.Aa=0,this.i=[],this.j=new Zn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xr("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xr("baseRetryDelayMs",5e3,m),this.cb=xr("retryDelaySeedMs",1e4,m),this.Wa=xr("forwardChannelMaxRetries",2,m),this.wa=xr("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Nh(m&&m.concurrentRequestLimit),this.Da=new js,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=pl.prototype,n.la=8,n.G=1,n.connect=function(m,_,M,G){Hr(0),this.W=m,this.H=_||{},M&&G!==void 0&&(this.H.OSID=M,this.H.OAID=G),this.F=this.X,this.I=Gs(this,null,this.W),Go(this)};function Ra(m){if(Hh(m),m.G==3){var _=m.U++,M=ki(m.I);if(Pn(M,"SID",m.K),Pn(M,"RID",_),Pn(M,"TYPE","terminate"),Pa(m,M),_=new Ho(m,m.j,_),_.L=2,_.v=Ia(ki(M)),M=!1,a.navigator&&a.navigator.sendBeacon)try{M=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!M&&a.Image&&(new Image().src=_.v,M=!0),M||(_.g=fu(_.j,null),_.g.ea(_.v)),_.F=Date.now(),ci(_)}hu(m)}function ml(m){m.g&&(_i(m),m.g.cancel(),m.g=null)}function Hh(m){ml(m),m.u&&(a.clearTimeout(m.u),m.u=null),_o(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&a.clearTimeout(m.s),m.s=null)}function Go(m){if(!Jl(m.h)&&!m.s){m.s=!0;var _=m.Ga;re||He(),ae||(re(),ae=!0),Ce.add(_,m),m.B=0}}function uu(m,_){return Lh(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=_.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Hn(p(m.Ga,m,_),Ks(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ve=new Ho(this,this.j,m);let Ae=this.o;if(this.S&&(Ae?(Ae=O(Ae),R(Ae,this.S)):Ae=this.S),this.m!==null||this.O||(ve.H=Ae,Ae=null),this.P)e:{for(var _=0,M=0;M<this.i.length;M++){t:{var G=this.i[M];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(_+=G,4096<_){_=M;break e}if(_===4096||M===this.i.length-1){_=M+1;break e}}_=1e3}else _=1e3;_=ui(this,ve,_),M=ki(this.I),Pn(M,"RID",m),Pn(M,"CVER",22),this.D&&Pn(M,"X-HTTP-Session-Id",this.D),Pa(this,M),Ae&&(this.O?_="headers="+encodeURIComponent(String(sd(Ae)))+"&"+_:this.m&&ka(M,this.m,Ae)),Ql(this.h,ve),this.Ua&&Pn(M,"TYPE","init"),this.P?(Pn(M,"$req",_),Pn(M,"SID","null"),ve.T=!0,tu(ve,M,null)):tu(ve,M,_),this.G=2}}else this.G==3&&(m?Qr(this,m):this.i.length==0||Jl(this.h)||Qr(this))};function Qr(m,_){var M;_?M=_.l:M=m.U++;const G=ki(m.I);Pn(G,"SID",m.K),Pn(G,"RID",M),Pn(G,"AID",m.T),Pa(m,G),m.m&&m.o&&ka(G,m.m,m.o),M=new Ho(m,m.j,M,m.B+1),m.m===null&&(M.H=m.o),_&&(m.i=_.D.concat(m.i)),_=ui(m,M,1e3),M.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Ql(m.h,M),tu(M,G,_)}function Pa(m,_){m.H&&j(m.H,function(M,G){Pn(_,G,M)}),m.l&&Aa({},function(M,G){Pn(_,G,M)})}function ui(m,_,M){M=Math.min(m.i.length,M);var G=m.l?p(m.l.Na,m.l,m):null;e:{var ve=m.i;let Ae=-1;for(;;){const st=["count="+M];Ae==-1?0<M?(Ae=ve[0].g,st.push("ofs="+Ae)):Ae=0:st.push("ofs="+Ae);let Dn=!0;for(let Rr=0;Rr<M;Rr++){let vn=ve[Rr].g;const Vn=ve[Rr].map;if(vn-=Ae,0>vn)Ae=Math.max(0,ve[Rr].g-100),Dn=!1;else try{$h(Vn,st,"req"+vn+"_")}catch{G&&G(Vn)}}if(Dn){G=st.join("&");break e}}}return m=m.i.splice(0,M),_.D=m,G}function zr(m){if(!m.g&&!m.u){m.Y=1;var _=m.Fa;re||He(),ae||(re(),ae=!0),Ce.add(_,m),m.v=0}}function qo(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Hn(p(m.Fa,m),Ks(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,gl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Hn(p(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Hr(10),ml(this),gl(this))};function _i(m){m.A!=null&&(a.clearTimeout(m.A),m.A=null)}function gl(m){m.g=new Ho(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var _=ki(m.qa);Pn(_,"RID","rpc"),Pn(_,"SID",m.K),Pn(_,"AID",m.T),Pn(_,"CI",m.F?"0":"1"),!m.F&&m.ja&&Pn(_,"TO",m.ja),Pn(_,"TYPE","xmlhttp"),Pa(m,_),m.m&&m.o&&ka(_,m.m,m.o),m.L&&(m.g.I=m.L);var M=m.g;m=m.ia,M.L=1,M.v=Ia(ki(_)),M.m=null,M.P=!0,nu(M,m)}n.Za=function(){this.C!=null&&(this.C=null,ml(this),qo(this),Hr(19))};function _o(m){m.C!=null&&(a.clearTimeout(m.C),m.C=null)}function qn(m,_){var M=null;if(m.g==_){_o(m),_i(m),m.g=null;var G=2}else if(cn(m.h,_))M=_.D,ru(m.h,_),G=1;else return;if(m.G!=0){if(_.o)if(G==1){M=_.m?_.m.length:0,_=Date.now()-_.F;var ve=m.B;G=yo(),Tt(G,new Ta(G,M)),Go(m)}else zr(m);else if(ve=_.s,ve==3||ve==0&&0<_.X||!(G==1&&uu(m,_)||G==2&&qo(m)))switch(M&&0<M.length&&(_=m.h,_.i=_.i.concat(M)),ve){case 1:Gi(m,5);break;case 4:Gi(m,10);break;case 3:Gi(m,6);break;default:Gi(m,2)}}}function Ks(m,_){let M=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(M*=2),M*_}function Gi(m,_){if(m.j.info("Error code "+_),_==2){var M=p(m.fb,m),G=m.Xa;const ve=!G;G=new So(G||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||hl(G,"https"),Ia(G),ve?Uh(G.toString(),M):Ko(G.toString(),M)}else Hr(2);m.G=0,m.l&&m.l.sa(_),hu(m),Hh(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Hr(2)):(this.j.info("Failed to ping google.com"),Hr(1))};function hu(m){if(m.G=0,m.ka=[],m.l){const _=iu(m.h);(_.length!=0||m.i.length!=0)&&(E(m.ka,_),E(m.ka,m.i),m.h.i.length=0,S(m.i),m.i.length=0),m.l.ra()}}function Gs(m,_,M){var G=M instanceof So?ki(M):new So(M);if(G.g!="")_&&(G.g=_+"."+G.g),Eo(G,G.s);else{var ve=a.location;G=ve.protocol,_=_?_+"."+ve.hostname:ve.hostname,ve=+ve.port;var Ae=new So(null);G&&hl(Ae,G),_&&(Ae.g=_),ve&&Eo(Ae,ve),M&&(Ae.l=M),G=Ae}return M=m.D,_=m.ya,M&&_&&Pn(G,M,_),Pn(G,"VER",m.la),Pa(m,G),G}function fu(m,_,M){if(_&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=m.Ca&&!m.pa?new nr(new nc({eb:M})):new nr(m.pa),_.Ha(m.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function du(){}n=du.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Da(){}Da.prototype.g=function(m,_){return new Zr(m,_)};function Zr(m,_){ft.call(this),this.g=new pl(_),this.l=m,this.h=_&&_.messageUrlParams||null,m=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(m?m["X-WebChannel-Content-Type"]=_.messageContentType:m={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(m?m["X-WebChannel-Client-Profile"]=_.va:m={"X-WebChannel-Client-Profile":_.va}),this.g.S=m,(m=_&&_.Sb)&&!L(m)&&(this.g.m=m),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!L(_)&&(this.g.D=_,m=this.h,m!==null&&_ in m&&(m=this.h,_ in m&&delete m[_])),this.j=new Yo(this)}w(Zr,ft),Zr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zr.prototype.close=function(){Ra(this.g)},Zr.prototype.o=function(m){var _=this.g;if(typeof m=="string"){var M={};M.__data__=m,m=M}else this.u&&(M={},M.__data__=Rt(m),m=M);_.i.push(new jo(_.Ya++,m)),_.G==3&&Go(_)},Zr.prototype.N=function(){this.g.l=null,delete this.j,Ra(this.g),delete this.g,Zr.aa.N.call(this)};function yl(m){on.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var _=m.__sm__;if(_){e:{for(const M in _){m=M;break e}m=void 0}(this.i=m)&&(m=this.i,_=_!==null&&m in _?_[m]:void 0),this.data=_}else this.data=m}w(yl,on);function Ma(){yr.call(this),this.status=1}w(Ma,yr);function Yo(m){this.g=m}w(Yo,du),Yo.prototype.ua=function(){Tt(this.g,"a")},Yo.prototype.ta=function(m){Tt(this.g,new yl(m))},Yo.prototype.sa=function(m){Tt(this.g,new Ma)},Yo.prototype.ra=function(){Tt(this.g,"b")},Da.prototype.createWebChannel=Da.prototype.g,Zr.prototype.send=Zr.prototype.o,Zr.prototype.open=Zr.prototype.m,Zr.prototype.close=Zr.prototype.close,SB=function(){return new Da},wB=function(){return yo()},bB=ji,C_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ws.NO_ERROR=0,ws.TIMEOUT=8,ws.HTTP_ERROR=6,$0=ws,_a.COMPLETE="complete",vB=_a,Oe.EventType=zt,zt.OPEN="a",zt.CLOSE="b",zt.ERROR="c",zt.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Vm=Oe,nr.prototype.listenOnce=nr.prototype.L,nr.prototype.getLastError=nr.prototype.Ka,nr.prototype.getLastErrorCode=nr.prototype.Ba,nr.prototype.getStatus=nr.prototype.Z,nr.prototype.getResponseJson=nr.prototype.Oa,nr.prototype.getResponseText=nr.prototype.oa,nr.prototype.send=nr.prototype.ea,nr.prototype.setWithCredentials=nr.prototype.Ha,yB=nr}).apply(typeof $v<"u"?$v:typeof self<"u"?self:typeof window<"u"?window:{});const RP="@firebase/firestore",PP="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ns.UNAUTHENTICATED=new ns(null),ns.GOOGLE_CREDENTIALS=new ns("google-credentials-uid"),ns.FIRST_PARTY=new ns("first-party-uid"),ns.MOCK_USER=new ns("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bp="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff=new yS("@firebase/firestore");function kd(){return Ff.logLevel}function It(n,...e){if(Ff.logLevel<=xn.DEBUG){const t=e.map(oI);Ff.debug(`Firestore (${Bp}): ${n}`,...t)}}function zc(n,...e){if(Ff.logLevel<=xn.ERROR){const t=e.map(oI);Ff.error(`Firestore (${Bp}): ${n}`,...t)}}function fp(n,...e){if(Ff.logLevel<=xn.WARN){const t=e.map(oI);Ff.warn(`Firestore (${Bp}): ${n}`,...t)}}function oI(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(n="Unexpected state"){const e=`FIRESTORE (${Bp}) INTERNAL ASSERTION FAILED: `+n;throw zc(e),new Error(e)}function Jn(n,e){n||Gt()}function sn(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xt extends al{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nte{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ns.UNAUTHENTICATED))}shutdown(){}}class rte{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ite{constructor(e){this.t=e,this.currentUser=ns.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Jn(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new Dc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Dc,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Dc)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Jn(typeof r.accessToken=="string"),new EB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Jn(e===null||typeof e=="string"),new ns(e)}}class ste{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ns.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class ote{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new ste(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ns.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class DP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ate{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Ga(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Jn(this.o===void 0);const r=s=>{s.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,It("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new DP(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Jn(typeof t.token=="string"),this.R=t.token,new DP(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lte(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=lte(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function kn(n,e){return n<e?-1:n>e?1:0}function dp(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=-62135596800,NP=1e6;class $r{static now(){return $r.fromMillis(Date.now())}static fromDate(e){return $r.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*NP);return new $r(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<MP)throw new xt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/NP}_compareTo(e){return this.seconds===e.seconds?kn(this.nanoseconds,e.nanoseconds):kn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-MP;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{static fromTimestamp(e){return new Zt(e)}static min(){return new Zt(new $r(0,0))}static max(){return new Zt(new $r(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP="__name__";class Rl{constructor(e,t,r){t===void 0?t=0:t>e.length&&Gt(),r===void 0?r=e.length-t:r>e.length-t&&Gt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Rl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=Rl.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=Rl.isNumericId(e),i=Rl.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Rl.extractNumericId(e).compare(Rl.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return eh.fromString(e.substring(4,e.length-2))}}class dr extends Rl{construct(e,t,r){return new dr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new dr(t)}static emptyPath(){return new dr([])}}const cte=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hi extends Rl{construct(e,t,r){return new Hi(e,t,r)}static isValidIdentifier(e){return cte.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===LP}static keyField(){return new Hi([LP])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new xt(Be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new xt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new xt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new xt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hi(t)}static emptyPath(){return new Hi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.path=e}static fromPath(e){return new Vt(dr.fromString(e))}static fromName(e){return new Vt(dr.fromString(e).popFirst(5))}static empty(){return new Vt(dr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Vt(new dr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg=-1;function ute(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Zt.fromTimestamp(r===1e9?new $r(t+1,0):new $r(t,r));return new ch(i,Vt.empty(),e)}function hte(n){return new ch(n.readTime,n.key,Fg)}class ch{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ch(Zt.min(),Vt.empty(),Fg)}static max(){return new ch(Zt.max(),Vt.empty(),Fg)}}function fte(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Vt.comparator(n.documentKey,e.documentKey),t!==0?t:kn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dte="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pte{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Up(n){if(n.code!==Be.FAILED_PRECONDITION||n.message!==dte)throw n;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new We((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof We?t:We.resolve(t)}catch(t){return We.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):We.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):We.reject(t)}static resolve(e){return new We((t,r)=>{t(e)})}static reject(e){return new We((t,r)=>{r(e)})}static waitFor(e){return new We((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=We.resolve(!1);for(const r of e)t=t.next(i=>i?We.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new We((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new We((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function mte(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $p(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}TS.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=-1;function _S(n){return n==null}function qb(n){return n===0&&1/n==-1/0}function gte(n){return typeof n=="number"&&Number.isInteger(n)&&!qb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B="";function yte(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=VP(e)),e=vte(n.get(t),e);return VP(e)}function vte(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case _B:t+="";break;default:t+=s}}return t}function VP(n){return n+_B+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ih(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xB(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t){this.comparator=e,this.root=t||Bi.EMPTY}insert(e,t){return new Or(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bi.BLACK,null,null))}remove(e){return new Or(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hv(this.root,e,this.comparator,!0)}}class Hv{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Bi.RED,this.left=i??Bi.EMPTY,this.right=s??Bi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Bi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Bi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Bi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Gt();const e=this.left.check();if(e!==this.right.check())throw Gt();return e+(this.isRed()?0:1)}}Bi.EMPTY=null,Bi.RED=!0,Bi.BLACK=!1;Bi.EMPTY=new class{constructor(){this.size=0}get key(){throw Gt()}get value(){throw Gt()}get color(){throw Gt()}get left(){throw Gt()}get right(){throw Gt()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Bi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.comparator=e,this.data=new Or(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new BP(this.data.getIterator())}getIteratorFrom(e){return new BP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Si)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Si(this.comparator);return t.data=e,t}}class BP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.fields=e,e.sort(Hi.comparator)}static empty(){return new Mo([])}unionWith(e){let t=new Si(Hi.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Mo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new AB("Invalid base64 string: "+s):s}}(e);return new zi(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new zi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zi.EMPTY_BYTE_STRING=new zi("");const bte=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uh(n){if(Jn(!!n),typeof n=="string"){let e=0;const t=bte.exec(n);if(Jn(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xr(n.seconds),nanos:Xr(n.nanos)}}function Xr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function hh(n){return typeof n=="string"?zi.fromBase64String(n):zi.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IB="server_timestamp",CB="__type__",OB="__previous_value__",kB="__local_write_time__";function lI(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[CB])===null||t===void 0?void 0:t.stringValue)===IB}function xS(n){const e=n.mapValue.fields[OB];return lI(e)?xS(e):e}function Bg(n){const e=uh(n.mapValue.fields[kB].timestampValue);return new $r(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wte{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const Yb="(default)";class Ug{constructor(e,t){this.projectId=e,this.database=t||Yb}static empty(){return new Ug("","")}get isDefaultDatabase(){return this.database===Yb}isEqual(e){return e instanceof Ug&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB="__type__",Ste="__max__",Wv={mapValue:{}},PB="__vector__",Xb="value";function fh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lI(n)?4:Tte(n)?9007199254740991:Ete(n)?10:11:Gt()}function Kl(n,e){if(n===e)return!0;const t=fh(n);if(t!==fh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bg(n).isEqual(Bg(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=uh(i.timestampValue),a=uh(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return hh(i.bytesValue).isEqual(hh(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Xr(i.geoPointValue.latitude)===Xr(s.geoPointValue.latitude)&&Xr(i.geoPointValue.longitude)===Xr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Xr(i.integerValue)===Xr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Xr(i.doubleValue),a=Xr(s.doubleValue);return o===a?qb(o)===qb(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return dp(n.arrayValue.values||[],e.arrayValue.values||[],Kl);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(FP(o)!==FP(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Kl(o[l],a[l])))return!1;return!0}(n,e);default:return Gt()}}function $g(n,e){return(n.values||[]).find(t=>Kl(t,e))!==void 0}function pp(n,e){if(n===e)return 0;const t=fh(n),r=fh(e);if(t!==r)return kn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kn(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Xr(s.integerValue||s.doubleValue),l=Xr(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return UP(n.timestampValue,e.timestampValue);case 4:return UP(Bg(n),Bg(e));case 5:return kn(n.stringValue,e.stringValue);case 6:return function(s,o){const a=hh(s),l=hh(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=kn(a[c],l[c]);if(h!==0)return h}return kn(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=kn(Xr(s.latitude),Xr(o.latitude));return a!==0?a:kn(Xr(s.longitude),Xr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return $P(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},p=o.fields||{},y=(a=d[Xb])===null||a===void 0?void 0:a.arrayValue,w=(l=p[Xb])===null||l===void 0?void 0:l.arrayValue,S=kn(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:$P(y,w)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Wv.mapValue&&o===Wv.mapValue)return 0;if(s===Wv.mapValue)return 1;if(o===Wv.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=kn(l[d],h[d]);if(p!==0)return p;const y=pp(a[l[d]],c[h[d]]);if(y!==0)return y}return kn(l.length,h.length)}(n.mapValue,e.mapValue);default:throw Gt()}}function UP(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return kn(n,e);const t=uh(n),r=uh(e),i=kn(t.seconds,r.seconds);return i!==0?i:kn(t.nanos,r.nanos)}function $P(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=pp(t[i],r[i]);if(s)return s}return kn(t.length,r.length)}function mp(n){return O_(n)}function O_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=uh(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return hh(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Vt.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=O_(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${O_(t.fields[o])}`;return i+"}"}(n.mapValue):Gt()}function H0(n){switch(fh(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xS(n);return e?16+H0(e):16;case 5:return 2*n.stringValue.length;case 6:return hh(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+H0(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ih(r.fields,(s,o)=>{i+=s.length+H0(o)}),i}(n.mapValue);default:throw Gt()}}function HP(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function k_(n){return!!n&&"integerValue"in n}function cI(n){return!!n&&"arrayValue"in n}function WP(n){return!!n&&"nullValue"in n}function zP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function W0(n){return!!n&&"mapValue"in n}function Ete(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[RB])===null||t===void 0?void 0:t.stringValue)===PB}function cg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ih(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Tte(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Ste}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.value=e}static empty(){return new co({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!W0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cg(t)}setAll(e){let t=Hi.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=cg(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());W0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Kl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];W0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ih(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new co(cg(this.value))}}function DB(n){const e=[];return Ih(n.fields,(t,r)=>{const i=new Hi([t]);if(W0(r)){const s=DB(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Mo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ls(e,0,Zt.min(),Zt.min(),Zt.min(),co.empty(),0)}static newFoundDocument(e,t,r,i){return new ls(e,1,t,Zt.min(),r,i,0)}static newNoDocument(e,t){return new ls(e,2,t,Zt.min(),Zt.min(),co.empty(),0)}static newUnknownDocument(e,t){return new ls(e,3,t,Zt.min(),Zt.min(),co.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=co.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=co.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ls&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ls(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,t){this.position=e,this.inclusive=t}}function jP(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Vt.comparator(Vt.fromName(o.referenceValue),t.key):r=pp(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function KP(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Kl(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,t="asc"){this.field=e,this.dir=t}}function _te(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{}class ai extends MB{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ate(e,t,r):t==="array-contains"?new Ote(e,r):t==="in"?new kte(e,r):t==="not-in"?new Rte(e,r):t==="array-contains-any"?new Pte(e,r):new ai(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Ite(e,r):new Cte(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(pp(t,this.value)):t!==null&&fh(this.value)===fh(t)&&this.matchesComparison(pp(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rl extends MB{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new rl(e,t)}matches(e){return NB(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function NB(n){return n.op==="and"}function LB(n){return xte(n)&&NB(n)}function xte(n){for(const e of n.filters)if(e instanceof rl)return!1;return!0}function R_(n){if(n instanceof ai)return n.field.canonicalString()+n.op.toString()+mp(n.value);if(LB(n))return n.filters.map(e=>R_(e)).join(",");{const e=n.filters.map(t=>R_(t)).join(",");return`${n.op}(${e})`}}function VB(n,e){return n instanceof ai?function(r,i){return i instanceof ai&&r.op===i.op&&r.field.isEqual(i.field)&&Kl(r.value,i.value)}(n,e):n instanceof rl?function(r,i){return i instanceof rl&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&VB(o,i.filters[a]),!0):!1}(n,e):void Gt()}function FB(n){return n instanceof ai?function(t){return`${t.field.canonicalString()} ${t.op} ${mp(t.value)}`}(n):n instanceof rl?function(t){return t.op.toString()+" {"+t.getFilters().map(FB).join(" ,")+"}"}(n):"Filter"}class Ate extends ai{constructor(e,t,r){super(e,t,r),this.key=Vt.fromName(r.referenceValue)}matches(e){const t=Vt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ite extends ai{constructor(e,t){super(e,"in",t),this.keys=BB("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Cte extends ai{constructor(e,t){super(e,"not-in",t),this.keys=BB("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function BB(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Vt.fromName(r.referenceValue))}class Ote extends ai{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cI(t)&&$g(t.arrayValue,this.value)}}class kte extends ai{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&$g(this.value.arrayValue,t)}}class Rte extends ai{constructor(e,t){super(e,"not-in",t)}matches(e){if($g(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!$g(this.value.arrayValue,t)}}class Pte extends ai{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$g(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dte{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}}function GP(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Dte(n,e,t,r,i,s,o)}function uI(n){const e=sn(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>R_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),_S(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>mp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>mp(r)).join(",")),e.le=t}return e.le}function hI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!_te(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!VB(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!KP(n.startAt,e.startAt)&&KP(n.endAt,e.endAt)}function P_(n){return Vt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Mte(n,e,t,r,i,s,o,a){return new Hp(n,e,t,r,i,s,o,a)}function fI(n){return new Hp(n)}function qP(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function UB(n){return n.collectionGroup!==null}function ug(n){const e=sn(n);if(e.he===null){e.he=[];const t=new Set;for(const s of e.explicitOrderBy)e.he.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Si(Hi.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.he.push(new Hg(s,r))}),t.has(Hi.keyField().canonicalString())||e.he.push(new Hg(Hi.keyField(),r))}return e.he}function Bl(n){const e=sn(n);return e.Pe||(e.Pe=Nte(e,ug(n))),e.Pe}function Nte(n,e){if(n.limitType==="F")return GP(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Hg(i.field,s)});const t=n.endAt?new Jb(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Jb(n.startAt.position,n.startAt.inclusive):null;return GP(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function D_(n,e){const t=n.filters.concat([e]);return new Hp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Qb(n,e,t){return new Hp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function AS(n,e){return hI(Bl(n),Bl(e))&&n.limitType===e.limitType}function $B(n){return`${uI(Bl(n))}|lt:${n.limitType}`}function Rd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>FB(i)).join(", ")}]`),_S(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>mp(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>mp(i)).join(",")),`Target(${r})`}(Bl(n))}; limitType=${n.limitType})`}function IS(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Vt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of ug(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=jP(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ug(r),i)||r.endAt&&!function(o,a,l){const c=jP(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ug(r),i))}(n,e)}function Lte(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function HB(n){return(e,t)=>{let r=!1;for(const i of ug(n)){const s=Vte(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Vte(n,e,t){const r=n.field.isKeyField()?Vt.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?pp(l,c):Gt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Gt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ih(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return xB(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fte=new Or(Vt.comparator);function jc(){return Fte}const WB=new Or(Vt.comparator);function Fm(...n){let e=WB;for(const t of n)e=e.insert(t.key,t);return e}function zB(n){let e=WB;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function mf(){return hg()}function jB(){return hg()}function hg(){return new td(n=>n.toString(),(n,e)=>n.isEqual(e))}const Bte=new Or(Vt.comparator),Ute=new Si(Vt.comparator);function An(...n){let e=Ute;for(const t of n)e=e.add(t);return e}const $te=new Si(kn);function Hte(){return $te}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qb(e)?"-0":e}}function KB(n){return{integerValue:""+n}}function Wte(n,e){return gte(e)?KB(e):dI(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this._=void 0}}function zte(n,e,t){return n instanceof Zb?function(i,s){const o={fields:{[CB]:{stringValue:IB},[kB]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&lI(s)&&(s=xS(s)),s&&(o.fields[OB]=s),{mapValue:o}}(t,e):n instanceof Wg?qB(n,e):n instanceof zg?YB(n,e):function(i,s){const o=GB(i,s),a=YP(o)+YP(i.Ie);return k_(o)&&k_(i.Ie)?KB(a):dI(i.serializer,a)}(n,e)}function jte(n,e,t){return n instanceof Wg?qB(n,e):n instanceof zg?YB(n,e):t}function GB(n,e){return n instanceof ew?function(r){return k_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Zb extends CS{}class Wg extends CS{constructor(e){super(),this.elements=e}}function qB(n,e){const t=XB(e);for(const r of n.elements)t.some(i=>Kl(i,r))||t.push(r);return{arrayValue:{values:t}}}class zg extends CS{constructor(e){super(),this.elements=e}}function YB(n,e){let t=XB(e);for(const r of n.elements)t=t.filter(i=>!Kl(i,r));return{arrayValue:{values:t}}}class ew extends CS{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function YP(n){return Xr(n.integerValue||n.doubleValue)}function XB(n){return cI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Kte(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Wg&&i instanceof Wg||r instanceof zg&&i instanceof zg?dp(r.elements,i.elements,Kl):r instanceof ew&&i instanceof ew?Kl(r.Ie,i.Ie):r instanceof Zb&&i instanceof Zb}(n.transform,e.transform)}class Gte{constructor(e,t){this.version=e,this.transformResults=t}}class fa{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fa}static exists(e){return new fa(void 0,e)}static updateTime(e){return new fa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function z0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class OS{}function JB(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new pI(n.key,fa.none()):new Ay(n.key,n.data,fa.none());{const t=n.data,r=co.empty();let i=new Si(Hi.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ch(n.key,r,new Mo(i.toArray()),fa.none())}}function qte(n,e,t){n instanceof Ay?function(i,s,o){const a=i.value.clone(),l=JP(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ch?function(i,s,o){if(!z0(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=JP(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(QB(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function fg(n,e,t,r){return n instanceof Ay?function(s,o,a,l){if(!z0(s.precondition,o))return a;const c=s.value.clone(),h=QP(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ch?function(s,o,a,l){if(!z0(s.precondition,o))return a;const c=QP(s.fieldTransforms,l,o),h=o.data;return h.setAll(QB(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(s,o,a){return z0(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Yte(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=GB(r.transform,i||null);s!=null&&(t===null&&(t=co.empty()),t.set(r.field,s))}return t||null}function XP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&dp(r,i,(s,o)=>Kte(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ay extends OS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ch extends OS{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function QB(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function JP(n,e,t){const r=new Map;Jn(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,jte(o,a,t[i]))}return r}function QP(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,zte(s,o,e))}return r}class pI extends OS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xte extends OS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jte{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&qte(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=fg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=fg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=jB();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=JB(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Zt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),An())}isEqual(e){return this.batchId===e.batchId&&dp(this.mutations,e.mutations,(t,r)=>XP(t,r))&&dp(this.baseMutations,e.baseMutations,(t,r)=>XP(t,r))}}class mI{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Jn(e.mutations.length===r.length);let i=function(){return Bte}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new mI(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qte{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zte{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ti,Mn;function ene(n){switch(n){case Be.OK:return Gt();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0;default:return Gt()}}function ZB(n){if(n===void 0)return zc("GRPC error has no .code"),Be.UNKNOWN;switch(n){case ti.OK:return Be.OK;case ti.CANCELLED:return Be.CANCELLED;case ti.UNKNOWN:return Be.UNKNOWN;case ti.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case ti.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case ti.INTERNAL:return Be.INTERNAL;case ti.UNAVAILABLE:return Be.UNAVAILABLE;case ti.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case ti.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case ti.NOT_FOUND:return Be.NOT_FOUND;case ti.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case ti.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case ti.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case ti.ABORTED:return Be.ABORTED;case ti.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case ti.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case ti.DATA_LOSS:return Be.DATA_LOSS;default:return Gt()}}(Mn=ti||(ti={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tne(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nne=new eh([4294967295,4294967295],0);function ZP(n){const e=tne().encode(n),t=new gB;return t.update(e),new Uint8Array(t.digest())}function eD(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new eh([t,r],0),new eh([i,s],0)]}class gI{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Bm(`Invalid padding: ${t}`);if(r<0)throw new Bm(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bm(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Bm(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=eh.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(eh.fromNumber(r)));return i.compare(nne)===1&&(i=new eh([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=ZP(e),[r,i]=eD(t);for(let s=0;s<this.hashCount;s++){const o=this.Ae(r,i,s);if(!this.Re(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new gI(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;const t=ZP(e),[r,i]=eD(t);for(let s=0;s<this.hashCount;s++){const o=this.Ae(r,i,s);this.Ve(o)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Bm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Iy.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new kS(Zt.min(),i,new Or(kn),jc(),An())}}class Iy{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Iy(r,t,An(),An(),An())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}}class e4{constructor(e,t){this.targetId=e,this.ge=t}}class t4{constructor(e,t,r=zi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class tD{constructor(){this.pe=0,this.ye=nD(),this.we=zi.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=An(),t=An(),r=An();return this.ye.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Gt()}}),new Iy(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=nD()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Jn(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class rne{constructor(e){this.ke=e,this.qe=new Map,this.Qe=jc(),this.$e=zv(),this.Ke=zv(),this.Ue=new Or(kn)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Gt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){const s=i.target;if(P_(s))if(r===0){const o=new Vt(s.path);this.ze(t,o,ls.newNoDocument(o,Zt.min()))}else Jn(r===1);else{const o=this.et(t);if(o!==r){const a=this.tt(e),l=a?this.nt(a,e,o):1;if(l!==0){this.Ye(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,c)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=hh(r).toUint8Array()}catch(l){if(l instanceof AB)return fp("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new gI(o,i,s)}catch(l){return fp(l instanceof Bm?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,s,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&P_(a.target)){const l=new Vt(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,ls.newNoDocument(l,e))}s.ve&&(t.set(o,s.Fe()),s.Me())}});let r=An();this.Ke.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(e));const i=new kS(e,t,this.Ue,this.Qe,r);return this.Qe=jc(),this.$e=zv(),this.Ke=zv(),this.Ue=new Or(kn),i}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new tD,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Si(kn),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Si(kn),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||It("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new tD),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function zv(){return new Or(Vt.comparator)}function nD(){return new Or(Vt.comparator)}const ine={asc:"ASCENDING",desc:"DESCENDING"},sne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},one={and:"AND",or:"OR"};class ane{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function M_(n,e){return n.useProto3Json||_S(e)?e:{value:e}}function tw(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function n4(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lne(n,e){return tw(n,e.toTimestamp())}function Ul(n){return Jn(!!n),Zt.fromTimestamp(function(t){const r=uh(t);return new $r(r.seconds,r.nanos)}(n))}function yI(n,e){return N_(n,e).canonicalString()}function N_(n,e){const t=function(i){return new dr(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function r4(n){const e=dr.fromString(n);return Jn(l4(e)),e}function L_(n,e){return yI(n.databaseId,e.path)}function zT(n,e){const t=r4(e);if(t.get(1)!==n.databaseId.projectId)throw new xt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Vt(s4(t))}function i4(n,e){return yI(n.databaseId,e)}function cne(n){const e=r4(n);return e.length===4?dr.emptyPath():s4(e)}function V_(n){return new dr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function s4(n){return Jn(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function rD(n,e,t){return{name:L_(n,e),fields:t.value.mapValue.fields}}function une(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Gt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Jn(h===void 0||typeof h=="string"),zi.fromBase64String(h||"")):(Jn(h===void 0||h instanceof Buffer||h instanceof Uint8Array),zi.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?Be.UNKNOWN:ZB(c.code);return new xt(h,c.message||"")}(o);t=new t4(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=zT(n,r.document.name),s=Ul(r.document.updateTime),o=r.document.createTime?Ul(r.document.createTime):Zt.min(),a=new co({mapValue:{fields:r.document.fields}}),l=ls.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];t=new j0(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=zT(n,r.document),s=r.readTime?Ul(r.readTime):Zt.min(),o=ls.newNoDocument(i,s),a=r.removedTargetIds||[];t=new j0([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=zT(n,r.document),s=r.removedTargetIds||[];t=new j0([],s,i,null)}else{if(!("filter"in e))return Gt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Zte(i,s),a=r.targetId;t=new e4(a,o)}}return t}function hne(n,e){let t;if(e instanceof Ay)t={update:rD(n,e.key,e.value)};else if(e instanceof pI)t={delete:L_(n,e.key)};else if(e instanceof Ch)t={update:rD(n,e.key,e.data),updateMask:wne(e.fieldMask)};else{if(!(e instanceof Xte))return Gt();t={verify:L_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Zb)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wg)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zg)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ew)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Gt()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:lne(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Gt()}(n,e.precondition)),t}function fne(n,e){return n&&n.length>0?(Jn(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Ul(i.updateTime):Ul(s);return o.isEqual(Zt.min())&&(o=Ul(s)),new Gte(o,i.transformResults||[])}(t,e))):[]}function dne(n,e){return{documents:[i4(n,e.path)]}}function pne(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=i4(n,i);const s=function(c){if(c.length!==0)return a4(rl.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Pd(p.field),direction:yne(p.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=M_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:t,parent:i}}function mne(n){let e=cne(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Jn(r===1);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(d){const p=o4(d);return p instanceof rl&&LB(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(p=>function(w){return new Hg(Dd(w.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,_S(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(d){const p=!!d.before,y=d.values||[];return new Jb(y,p)}(t.startAt));let c=null;return t.endAt&&(c=function(d){const p=!d.before,y=d.values||[];return new Jb(y,p)}(t.endAt)),Mte(e,i,o,s,a,"F",l,c)}function gne(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Gt()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function o4(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Dd(t.unaryFilter.field);return ai.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Dd(t.unaryFilter.field);return ai.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Dd(t.unaryFilter.field);return ai.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Dd(t.unaryFilter.field);return ai.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Gt()}}(n):n.fieldFilter!==void 0?function(t){return ai.create(Dd(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Gt()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return rl.create(t.compositeFilter.filters.map(r=>o4(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Gt()}}(t.compositeFilter.op))}(n):Gt()}function yne(n){return ine[n]}function vne(n){return sne[n]}function bne(n){return one[n]}function Pd(n){return{fieldPath:n.canonicalString()}}function Dd(n){return Hi.fromServerFormat(n.fieldPath)}function a4(n){return n instanceof ai?function(t){if(t.op==="=="){if(zP(t.value))return{unaryFilter:{field:Pd(t.field),op:"IS_NAN"}};if(WP(t.value))return{unaryFilter:{field:Pd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zP(t.value))return{unaryFilter:{field:Pd(t.field),op:"IS_NOT_NAN"}};if(WP(t.value))return{unaryFilter:{field:Pd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pd(t.field),op:vne(t.op),value:t.value}}}(n):n instanceof rl?function(t){const r=t.getFilters().map(i=>a4(i));return r.length===1?r[0]:{compositeFilter:{op:bne(t.op),filters:r}}}(n):Gt()}function wne(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function l4(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,t,r,i,s=Zt.min(),o=Zt.min(),a=zi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Wu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sne{constructor(e){this.Tt=e}}function Ene(n){const e=mne({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Qb(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tne{constructor(){this.Tn=new _ne}addToCollectionParentIndex(e,t){return this.Tn.add(t),We.resolve()}getCollectionParents(e,t){return We.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return We.resolve()}deleteFieldIndex(e,t){return We.resolve()}deleteAllFieldIndexes(e){return We.resolve()}createTargetIndexes(e,t){return We.resolve()}getDocumentsMatchingTarget(e,t){return We.resolve(null)}getIndexType(e,t){return We.resolve(0)}getFieldIndexes(e,t){return We.resolve([])}getNextCollectionGroupToUpdate(e){return We.resolve(null)}getMinOffset(e,t){return We.resolve(ch.min())}getMinOffsetFromCollectionGroup(e,t){return We.resolve(ch.min())}updateCollectionGroup(e,t,r){return We.resolve()}updateIndexEntries(e,t){return We.resolve()}}class _ne{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Si(dr.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Si(dr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},c4=41943040;class io{static withCacheSize(e){return new io(e,io.DEFAULT_COLLECTION_PERCENTILE,io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */io.DEFAULT_COLLECTION_PERCENTILE=10,io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,io.DEFAULT=new io(c4,io.DEFAULT_COLLECTION_PERCENTILE,io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),io.DISABLED=new io(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new gp(0)}static Un(){return new gp(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="LruGarbageCollector",xne=1048576;function oD([n,e],[t,r]){const i=kn(n,t);return i===0?kn(e,r):i}class Ane{constructor(e){this.Hn=e,this.buffer=new Si(oD),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();oD(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ine{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){It(sD,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$p(t)?It(sD,"Ignoring IndexedDB error during garbage collection: ",t):await Up(t)}await this.er(3e5)})}}class Cne{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return We.resolve(TS.ae);const r=new Ane(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(It("LruGarbageCollector","Garbage collection skipped; disabled"),We.resolve(iD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iD):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(It("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,t))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),kd()<=xn.DEBUG&&It("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),We.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function One(n,e){return new Cne(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kne{constructor(){this.changes=new td(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ls.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?We.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rne{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pne{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&fg(r.mutation,i,Mo.empty(),$r.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,An()).next(()=>r))}getLocalViewOfDocuments(e,t,r=An()){const i=mf();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Fm();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=mf();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,An()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=jc();const o=hg(),a=function(){return hg()}();return t.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Ch)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),fg(h.mutation,c,h.mutation.getFieldMask(),$r.now())):o.set(c.key,Mo.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),t.forEach((c,h)=>{var d;return a.set(c,new Rne(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=hg();let i=new Or((o,a)=>o-a),s=An();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let h=r.get(l)||Mo.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||An()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=jB();h.forEach(p=>{if(!s.has(p)){const y=JB(t.get(p),r.get(p));y!==null&&d.set(p,y),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return We.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Vt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):UB(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):We.resolve(mf());let a=Fg,l=s;return o.next(c=>We.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?We.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,An())).next(h=>({batchId:a,changes:zB(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Vt(t)).next(r=>{let i=Fm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Fm();return this.indexManager.getCollectionParents(e,s).next(a=>We.forEach(a,l=>{const c=function(d,p){return new Hp(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,ls.newInvalidDocument(h)))});let a=Fm();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&fg(h.mutation,c,Mo.empty(),$r.now()),IS(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dne{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return We.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ul(i.createTime)}}(t)),We.resolve()}getNamedQuery(e,t){return We.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:Ene(i.bundledQuery),readTime:Ul(i.readTime)}}(t)),We.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mne{constructor(){this.overlays=new Or(Vt.comparator),this.Rr=new Map}getOverlay(e,t){return We.resolve(this.overlays.get(t))}getOverlays(e,t){const r=mf();return We.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Et(e,t,s)}),We.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(r)),We.resolve()}getOverlaysForCollection(e,t,r){const i=mf(),s=t.length+1,o=new Vt(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return We.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Or((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=mf(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=mf(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return We.resolve(a)}Et(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Qte(t,r));let s=this.Rr.get(t);s===void 0&&(s=An(),this.Rr.set(t,s)),this.Rr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nne{constructor(){this.sessionToken=zi.EMPTY_BYTE_STRING}getSessionToken(e){return We.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,We.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.Vr=new Si(Ai.mr),this.gr=new Si(Ai.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new Ai(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Ai(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new Vt(new dr([])),r=new Ai(t,e),i=new Ai(t,e+1),s=[];return this.gr.forEachInRange([r,i],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Vt(new dr([])),r=new Ai(t,e),i=new Ai(t,e+1);let s=An();return this.gr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Ai(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ai{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Vt.comparator(e.key,t.key)||kn(e.Cr,t.Cr)}static pr(e,t){return kn(e.Cr,t.Cr)||Vt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lne{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Si(Ai.mr)}checkEmpty(e){return We.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Jte(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.Mr=this.Mr.add(new Ai(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return We.resolve(o)}lookupMutationBatch(e,t){return We.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Nr(r),s=i<0?0:i;return We.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return We.resolve(this.mutationQueue.length===0?aI:this.Fr-1)}getAllMutationBatches(e){return We.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ai(t,0),i=new Ai(t,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([r,i],o=>{const a=this.Or(o.Cr);s.push(a)}),We.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Si(kn);return t.forEach(i=>{const s=new Ai(i,0),o=new Ai(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],a=>{r=r.add(a.Cr)})}),We.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Vt.isDocumentKey(s)||(s=s.child(""));const o=new Ai(new Vt(s),0);let a=new Si(kn);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Cr)),!0)},o),We.resolve(this.Br(a))}Br(e){const t=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Jn(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return We.forEach(t.mutations,i=>{const s=new Ai(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new Ai(t,0),i=this.Mr.firstAfterOrEqual(r);return We.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,We.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vne{constructor(e){this.kr=e,this.docs=function(){return new Or(Vt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return We.resolve(r?r.document.mutableCopy():ls.newInvalidDocument(t))}getEntries(e,t){let r=jc();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ls.newInvalidDocument(i))}),We.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=jc();const o=t.path,a=new Vt(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||fte(hte(h),r)<=0||(i.has(h.key)||IS(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return We.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Gt()}qr(e,t){return We.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Fne(this)}getSize(e){return We.resolve(this.size)}}class Fne extends kne{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),We.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bne{constructor(e){this.persistence=e,this.Qr=new td(t=>uI(t),hI),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this.$r=0,this.Kr=new vI,this.targetCount=0,this.Ur=gp.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),We.resolve()}getLastRemoteSnapshotVersion(e){return We.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return We.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),We.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),We.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new gp(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,We.resolve()}updateTargetData(e,t){return this.zn(t),We.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.br(t.targetId),this.targetCount-=1,We.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),We.waitFor(s).next(()=>i)}getTargetCount(e){return We.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return We.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),We.resolve()}removeMatchingKeys(e,t,r){this.Kr.Sr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),We.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Kr.br(t),We.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return We.resolve(r)}containsKey(e,t){return We.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new TS(0),this.zr=!1,this.zr=!0,this.jr=new Nne,this.referenceDelegate=e(this),this.Hr=new Bne(this),this.indexManager=new Tne,this.remoteDocumentCache=function(i){return new Vne(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new Sne(t),this.Yr=new Dne(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Mne,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new Lne(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){It("MemoryPersistence","Starting transaction:",e);const i=new Une(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(s=>this.referenceDelegate.Xr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}ei(e,t){return We.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class Une extends pte{constructor(e){super(),this.currentSequenceNumber=e}}class bI{constructor(e){this.persistence=e,this.ti=new vI,this.ni=null}static ri(e){return new bI(e)}get ii(){if(this.ni)return this.ni;throw Gt()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),We.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),We.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),We.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ii.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return We.forEach(this.ii,r=>{const i=Vt.fromPath(r);return this.si(e,i).next(s=>{s||t.removeEntry(i,Zt.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return We.or([()=>We.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class nw{constructor(e,t){this.persistence=e,this.oi=new td(r=>yte(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=One(this,t)}static ri(e,t){return new nw(e,t)}Zr(){}Xr(e){return We.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return We.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(s=>s?We.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.qr(e,o=>this.ar(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Zt.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),We.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),We.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),We.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),We.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=H0(e.data.value)),t}ar(e,t,r){return We.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return We.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=An(),i=An();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new wI(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ne{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hne{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return gX()?8:mte(gs())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.rs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new $ne;return this._s(e,t,o).next(a=>{if(s.result=a,this.Xi)return this.us(e,t,o,a.size)})}).next(()=>s.result)}us(e,t,r,i){return r.documentReadCount<this.es?(kd()<=xn.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",Rd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),We.resolve()):(kd()<=xn.DEBUG&&It("QueryEngine","Query:",Rd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(kd()<=xn.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",Rd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bl(t))):We.resolve())}rs(e,t){if(qP(t))return We.resolve(null);let r=Bl(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Qb(t,null,"F"),r=Bl(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=An(...s);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.cs(t,a);return this.ls(t,c,o,l.readTime)?this.rs(e,Qb(t,null,"F")):this.hs(e,c,t,l)}))})))}ss(e,t,r,i){return qP(t)||i.isEqual(Zt.min())?We.resolve(null):this.ns.getDocuments(e,r).next(s=>{const o=this.cs(t,s);return this.ls(t,o,r,i)?We.resolve(null):(kd()<=xn.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Rd(t)),this.hs(e,o,t,ute(i,Fg)).next(a=>a))})}cs(e,t){let r=new Si(HB(e));return t.forEach((i,s)=>{IS(e,s)&&(r=r.add(s))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}_s(e,t,r){return kd()<=xn.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",Rd(t)),this.ns.getDocumentsMatchingQuery(e,t,ch.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="LocalStore",Wne=3e8;class zne{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new Or(kn),this.Is=new td(s=>uI(s),hI),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pne(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function jne(n,e,t,r){return new zne(n,e,t,r)}async function h4(n,e){const t=sn(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=An();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Kne(n,e){const t=sn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let y=We.resolve();return p.forEach(w=>{y=y.next(()=>h.getEntry(l,w)).next(S=>{const E=c.docVersions.get(w);Jn(E!==null),S.version.compareTo(E)<0&&(d.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),h.addEntry(S)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=An();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function f4(n){const e=sn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function Gne(n,e){const t=sn(n),r=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(t.Hr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>t.Hr.addMatchingKeys(s,h.addedDocuments,d)));let y=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?y=y.withResumeToken(zi.EMPTY_BYTE_STRING,Zt.min()).withLastLimboFreeSnapshotVersion(Zt.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(d,y),function(S,E,C){return S.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=Wne?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(p,y,h)&&a.push(t.Hr.updateTargetData(s,y))});let l=jc(),c=An();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(qne(s,o,e.documentUpdates).next(h=>{l=h.Vs,c=h.fs})),!r.isEqual(Zt.min())){const h=t.Hr.getLastRemoteSnapshotVersion(s).next(d=>t.Hr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return We.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Ts=i,s))}function qne(n,e,t){let r=An(),i=An();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=jc();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Zt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):It(SI,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:o,fs:i}})}function Yne(n,e){const t=sn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=aI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xne(n,e){const t=sn(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(s=>s?(i=s,We.resolve(i)):t.Hr.allocateTargetId(r).next(o=>(i=new Wu(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function F_(n,e,t){const r=sn(n),i=r.Ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!$p(o))throw o;It(SI,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function aD(n,e,t){const r=sn(n);let i=Zt.min(),s=An();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=sn(l),p=d.Is.get(h);return p!==void 0?We.resolve(d.Ts.get(p)):d.Hr.getTargetData(c,h)}(r,o,Bl(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Ps.getDocumentsMatchingQuery(o,e,t?i:Zt.min(),t?s:An())).next(a=>(Jne(r,Lte(e),a),{documents:a,gs:s})))}function Jne(n,e,t){let r=n.Es.get(e)||Zt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Es.set(e,r)}class lD{constructor(){this.activeTargetIds=Hte()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qne{constructor(){this.ho=new lD,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new lD,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zne{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="ConnectivityMonitor";class uD{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){It(cD,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){It(cD,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jv=null;function B_(){return jv===null?jv=function(){return 268435456+Math.round(2147483648*Math.random())}():jv++,"0x"+jv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="RestConnection",ere={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tre{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===Yb?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,t,r,i,s){const o=B_(),a=this.bo(e,t.toUriEncodedString());It(jT,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,i,s),this.vo(e,a,l,r).then(c=>(It(jT,`Received RPC '${e}' ${o}: `,c),c),c=>{throw fp(jT,`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}Co(e,t,r,i,s,o){return this.So(e,t,r,i,s)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bp}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}bo(e,t){const r=ere[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nre{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="WebChannelConnection";class rre extends tre{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const s=B_();return new Promise((o,a)=>{const l=new yB;l.setWithCredentials(!0),l.listenOnce(vB.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case $0.NO_ERROR:const h=l.getResponseJson();It(Ji,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case $0.TIMEOUT:It(Ji,`RPC '${e}' ${s} timed out`),a(new xt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case $0.HTTP_ERROR:const d=l.getStatus();if(It(Ji,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const w=function(E){const C=E.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(C)>=0?C:Be.UNKNOWN}(y.status);a(new xt(w,y.message))}else a(new xt(Be.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new xt(Be.UNAVAILABLE,"Connection failed."));break;default:Gt()}}finally{It(Ji,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);It(Ji,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Wo(e,t,r){const i=B_(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=SB(),a=wB(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");It(Ji,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,y=!1;const w=new nre({Fo:E=>{y?It(Ji,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(p||(It(Ji,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),It(Ji,`RPC '${e}' stream ${i} sending:`,E),d.send(E))},Mo:()=>d.close()}),S=(E,C,L)=>{E.listen(C,P=>{try{L(P)}catch(F){setTimeout(()=>{throw F},0)}})};return S(d,Vm.EventType.OPEN,()=>{y||(It(Ji,`RPC '${e}' stream ${i} transport opened.`),w.Qo())}),S(d,Vm.EventType.CLOSE,()=>{y||(y=!0,It(Ji,`RPC '${e}' stream ${i} transport closed`),w.Ko())}),S(d,Vm.EventType.ERROR,E=>{y||(y=!0,fp(Ji,`RPC '${e}' stream ${i} transport errored:`,E),w.Ko(new xt(Be.UNAVAILABLE,"The operation could not be completed")))}),S(d,Vm.EventType.MESSAGE,E=>{var C;if(!y){const L=E.data[0];Jn(!!L);const P=L,F=(P==null?void 0:P.error)||((C=P[0])===null||C===void 0?void 0:C.error);if(F){It(Ji,`RPC '${e}' stream ${i} received error:`,F);const U=F.status;let j=function(A){const R=ti[A];if(R!==void 0)return ZB(R)}(U),N=F.message;j===void 0&&(j=Be.INTERNAL,N="Unknown error status: "+U+" with message "+F.message),y=!0,w.Ko(new xt(j,N)),d.close()}else It(Ji,`RPC '${e}' stream ${i} received:`,L),w.Uo(L)}}),S(a,bB.STAT_EVENT,E=>{E.stat===C_.PROXY?It(Ji,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===C_.NOPROXY&&It(Ji,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.$o()},0),w}}function KT(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(n){return new ane(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="PersistentStream";class p4{constructor(e,t,r,i,s,o,a,l){this.Ti=e,this.n_=r,this.r_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new d4(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Be.RESOURCE_EXHAUSTED?(zc(t.toString()),zc("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{const i=new xt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return It(hD,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(It(hD,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ire extends p4{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=une(this.serializer,e),r=function(s){if(!("targetChange"in s))return Zt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Zt.min():o.readTime?Ul(o.readTime):Zt.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=V_(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=P_(l)?{documents:dne(s,l)}:{query:pne(s,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=n4(s,o.resumeToken);const c=M_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Zt.min())>0){a.readTime=tw(s,o.snapshotVersion.toTimestamp());const c=M_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=gne(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=V_(this.serializer),t.removeTarget=e,this.I_(t)}}class sre extends p4{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Jn(!!e.streamToken),this.lastStreamToken=e.streamToken,Jn(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Jn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=fne(e.writeResults,e.commitTime),r=Ul(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=V_(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>hne(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ore{}class are extends ore{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new xt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,N_(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new xt(Be.UNKNOWN,s.toString())})}Co(e,t,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,N_(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xt(Be.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class lre{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(zc(t),this.N_=!1):It("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="RemoteStore";class cre{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{r.enqueueAndForget(async()=>{nd(this)&&(It(Bf,"Restarting streams for network reachability change."),await async function(l){const c=sn(l);c.W_.add(4),await Cy(c),c.j_.set("Unknown"),c.W_.delete(4),await PS(c)}(this))})}),this.j_=new lre(r,i)}}async function PS(n){if(nd(n))for(const e of n.G_)await e(!0)}async function Cy(n){for(const e of n.G_)await e(!1)}function m4(n,e){const t=sn(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),xI(t)?_I(t):Wp(t).c_()&&TI(t,e))}function EI(n,e){const t=sn(n),r=Wp(t);t.U_.delete(e),r.c_()&&g4(t,e),t.U_.size===0&&(r.c_()?r.P_():nd(t)&&t.j_.set("Unknown"))}function TI(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Zt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wp(n).y_(e)}function g4(n,e){n.H_.Ne(e),Wp(n).w_(e)}function _I(n){n.H_=new rne({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Wp(n).start(),n.j_.B_()}function xI(n){return nd(n)&&!Wp(n).u_()&&n.U_.size>0}function nd(n){return sn(n).W_.size===0}function y4(n){n.H_=void 0}async function ure(n){n.j_.set("Online")}async function hre(n){n.U_.forEach((e,t)=>{TI(n,e)})}async function fre(n,e){y4(n),xI(n)?(n.j_.q_(e),_I(n)):n.j_.set("Unknown")}async function dre(n,e,t){if(n.j_.set("Online"),e instanceof t4&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.U_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.U_.delete(a),i.H_.removeTarget(a))}(n,e)}catch(r){It(Bf,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rw(n,r)}else if(e instanceof j0?n.H_.We(e):e instanceof e4?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Zt.min()))try{const r=await f4(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.H_.ot(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.U_.get(c);h&&s.U_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.U_.get(l);if(!h)return;s.U_.set(l,h.withResumeToken(zi.EMPTY_BYTE_STRING,h.snapshotVersion)),g4(s,l);const d=new Wu(h.target,l,c,h.sequenceNumber);TI(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){It(Bf,"Failed to raise snapshot:",r),await rw(n,r)}}async function rw(n,e,t){if(!$p(e))throw e;n.W_.add(1),await Cy(n),n.j_.set("Offline"),t||(t=()=>f4(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{It(Bf,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await PS(n)})}function v4(n,e){return e().catch(t=>rw(n,t,e))}async function DS(n){const e=sn(n),t=dh(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:aI;for(;pre(e);)try{const i=await Yne(e.localStore,r);if(i===null){e.K_.length===0&&t.P_();break}r=i.batchId,mre(e,i)}catch(i){await rw(e,i)}b4(e)&&w4(e)}function pre(n){return nd(n)&&n.K_.length<10}function mre(n,e){n.K_.push(e);const t=dh(n);t.c_()&&t.S_&&t.b_(e.mutations)}function b4(n){return nd(n)&&!dh(n).u_()&&n.K_.length>0}function w4(n){dh(n).start()}async function gre(n){dh(n).C_()}async function yre(n){const e=dh(n);for(const t of n.K_)e.b_(t.mutations)}async function vre(n,e,t){const r=n.K_.shift(),i=mI.from(r,e,t);await v4(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await DS(n)}async function bre(n,e){e&&dh(n).S_&&await async function(r,i){if(function(o){return ene(o)&&o!==Be.ABORTED}(i.code)){const s=r.K_.shift();dh(r).h_(),await v4(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await DS(r)}}(n,e),b4(n)&&w4(n)}async function fD(n,e){const t=sn(n);t.asyncQueue.verifyOperationInProgress(),It(Bf,"RemoteStore received new credentials");const r=nd(t);t.W_.add(3),await Cy(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await PS(t)}async function wre(n,e){const t=sn(n);e?(t.W_.delete(2),await PS(t)):e||(t.W_.add(2),await Cy(t),t.j_.set("Unknown"))}function Wp(n){return n.J_||(n.J_=function(t,r,i){const s=sn(t);return s.M_(),new ire(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:ure.bind(null,n),No:hre.bind(null,n),Lo:fre.bind(null,n),p_:dre.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),xI(n)?_I(n):n.j_.set("Unknown")):(await n.J_.stop(),y4(n))})),n.J_}function dh(n){return n.Y_||(n.Y_=function(t,r,i){const s=sn(t);return s.M_(),new sre(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:gre.bind(null,n),Lo:bre.bind(null,n),D_:yre.bind(null,n),v_:vre.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await DS(n)):(await n.Y_.stop(),n.K_.length>0&&(It(Bf,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Dc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new AI(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xt(Be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function II(n,e){if(zc("AsyncQueue",`${e}: ${n}`),$p(n))return new xt(Be.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{static emptySet(e){return new Jd(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Vt.comparator(t.key,r.key):(t,r)=>Vt.comparator(t.key,r.key),this.keyedMap=Fm(),this.sortedSet=new Or(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Jd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(){this.Z_=new Or(Vt.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Gt():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class yp{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new yp(e,t,Jd.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&AS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sre{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class Ere{constructor(){this.queries=pD(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const i=sn(t),s=i.queries;i.queries=pD(),s.forEach((o,a)=>{for(const l of a.ta)l.onError(r)})})(this,new xt(Be.ABORTED,"Firestore shutting down"))}}function pD(){return new td(n=>$B(n),AS)}async function S4(n,e){const t=sn(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.na()&&e.ra()&&(r=2):(s=new Sre,r=e.ra()?0:1);try{switch(r){case 0:s.ea=await t.onListen(i,!0);break;case 1:s.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=II(o,`Initialization of query '${Rd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.ta.push(e),e.sa(t.onlineState),s.ea&&e.oa(s.ea)&&CI(t)}async function E4(n,e){const t=sn(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.ta.indexOf(e);o>=0&&(s.ta.splice(o,1),s.ta.length===0?i=e.ra()?0:1:!s.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Tre(n,e){const t=sn(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.ta)a.oa(i)&&(r=!0);o.ea=i}}r&&CI(t)}function _re(n,e,t){const r=sn(n),i=r.queries.get(e);if(i)for(const s of i.ta)s.onError(t);r.queries.delete(e)}function CI(n){n.ia.forEach(e=>{e.next()})}var U_,mD;(mD=U_||(U_={}))._a="default",mD.Cache="cache";class T4{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new yp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=yp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==U_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e){this.key=e}}class x4{constructor(e){this.key=e}}class xre{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=An(),this.mutatedKeys=An(),this.ya=HB(e),this.wa=new Jd(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new dD,i=t?t.wa:this.wa;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),y=IS(this.query,d)?d:null,w=!!p&&this.mutatedKeys.has(p.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let E=!1;p&&y?p.data.isEqual(y.data)?w!==S&&(r.track({type:3,doc:y}),E=!0):this.va(p,y)||(r.track({type:2,doc:y}),E=!0,(l&&this.ya(y,l)>0||c&&this.ya(y,c)<0)&&(a=!0)):!p&&y?(r.track({type:0,doc:y}),E=!0):p&&!y&&(r.track({type:1,doc:p}),E=!0,(l||c)&&(a=!0)),E&&(y?(o=o.add(y),s=S?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{wa:o,Da:r,ls:a,mutatedKeys:s}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((h,d)=>function(y,w){const S=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Gt()}};return S(y)-S(w)}(h.type,d.type)||this.ya(h.doc,d.doc)),this.Ca(r),i=i!=null&&i;const a=t&&!i?this.Fa():[],l=this.pa.size===0&&this.current&&!i?1:0,c=l!==this.ga;return this.ga=l,o.length!==0||c?{snapshot:new yp(this.query,e.wa,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new dD,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=An(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new x4(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new _4(r))}),t}Oa(e){this.fa=e.gs,this.pa=An();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return yp.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const OI="SyncEngine";class Are{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Ire{constructor(e){this.key=e,this.Ba=!1}}class Cre{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new td(a=>$B(a),AS),this.qa=new Map,this.Qa=new Set,this.$a=new Or(Vt.comparator),this.Ka=new Map,this.Ua=new vI,this.Wa={},this.Ga=new Map,this.za=gp.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function Ore(n,e,t=!0){const r=R4(n);let i;const s=r.ka.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await A4(r,e,t,!0),i}async function kre(n,e){const t=R4(n);await A4(t,e,!0,!1)}async function A4(n,e,t,r){const i=await Xne(n.localStore,Bl(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await Rre(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&m4(n.remoteStore,i),a}async function Rre(n,e,t,r,i){n.Ha=(d,p,y)=>async function(S,E,C,L){let P=E.view.ba(C);P.ls&&(P=await aD(S.localStore,E.query,!1).then(({documents:N})=>E.view.ba(N,P)));const F=L&&L.targetChanges.get(E.targetId),U=L&&L.targetMismatches.get(E.targetId)!=null,j=E.view.applyChanges(P,S.isPrimaryClient,F,U);return yD(S,E.targetId,j.Ma),j.snapshot}(n,d,p,y);const s=await aD(n.localStore,e,!0),o=new xre(e,s.gs),a=o.ba(s.documents),l=Iy.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);yD(n,t,c.Ma);const h=new Are(e,t,o);return n.ka.set(e,h),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),c.snapshot}async function Pre(n,e,t){const r=sn(n),i=r.ka.get(e),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter(o=>!AS(o,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await F_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&EI(r.remoteStore,i.targetId),$_(r,i.targetId)}).catch(Up)):($_(r,i.targetId),await F_(r.localStore,i.targetId,!0))}async function Dre(n,e){const t=sn(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),EI(t.remoteStore,r.targetId))}async function Mre(n,e,t){const r=$re(n);try{const i=await function(o,a){const l=sn(o),c=$r.now(),h=a.reduce((y,w)=>y.add(w.key),An());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=jc(),S=An();return l.ds.getEntries(y,h).next(E=>{w=E,w.forEach((C,L)=>{L.isValidDocument()||(S=S.add(C))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,w)).next(E=>{d=E;const C=[];for(const L of a){const P=Yte(L,d.get(L.key).overlayedDocument);P!=null&&C.push(new Ch(L.key,P,DB(P.value.mapValue),fa.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,C,a)}).next(E=>{p=E;const C=E.applyToLocalDocumentSet(d,S);return l.documentOverlayCache.saveOverlays(y,E.batchId,C)})}).then(()=>({batchId:p.batchId,changes:zB(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Wa[o.currentUser.toKey()];c||(c=new Or(kn)),c=c.insert(a,l),o.Wa[o.currentUser.toKey()]=c}(r,i.batchId,t),await Oy(r,i.changes),await DS(r.remoteStore)}catch(i){const s=II(i,"Failed to persist write");t.reject(s)}}async function I4(n,e){const t=sn(n);try{const r=await Gne(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Ka.get(s);o&&(Jn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ba=!0:i.modifiedDocuments.size>0?Jn(o.Ba):i.removedDocuments.size>0&&(Jn(o.Ba),o.Ba=!1))}),await Oy(t,r,e)}catch(r){await Up(r)}}function gD(n,e,t){const r=sn(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ka.forEach((s,o)=>{const a=o.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=sn(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.ta)p.sa(a)&&(c=!0)}),c&&CI(l)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Nre(n,e,t){const r=sn(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ka.get(e),s=i&&i.key;if(s){let o=new Or(Vt.comparator);o=o.insert(s,ls.newNoDocument(s,Zt.min()));const a=An().add(s),l=new kS(Zt.min(),new Map,new Or(kn),o,a);await I4(r,l),r.$a=r.$a.remove(s),r.Ka.delete(e),kI(r)}else await F_(r.localStore,e,!1).then(()=>$_(r,e,t)).catch(Up)}async function Lre(n,e){const t=sn(n),r=e.batch.batchId;try{const i=await Kne(t.localStore,e);O4(t,r,null),C4(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Oy(t,i)}catch(i){await Up(i)}}async function Vre(n,e,t){const r=sn(n);try{const i=await function(o,a){const l=sn(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Jn(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);O4(r,e,t),C4(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Oy(r,i)}catch(i){await Up(i)}}function C4(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function O4(n,e,t){const r=sn(n);let i=r.Wa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function $_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.br(e).forEach(r=>{n.Ua.containsKey(r)||k4(n,r)})}function k4(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(EI(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),kI(n))}function yD(n,e,t){for(const r of t)r instanceof _4?(n.Ua.addReference(r.key,e),Fre(n,r)):r instanceof x4?(It(OI,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||k4(n,r.key)):Gt()}function Fre(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(It(OI,"New document in limbo: "+t),n.Qa.add(r),kI(n))}function kI(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Vt(dr.fromString(e)),r=n.za.next();n.Ka.set(r,new Ire(t)),n.$a=n.$a.insert(t,r),m4(n.remoteStore,new Wu(Bl(fI(t.path)),r,"TargetPurposeLimboResolution",TS.ae))}}async function Oy(n,e,t){const r=sn(n),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach((a,l)=>{o.push(r.Ha(l,e,t).then(c=>{var h;if((c||t)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=t==null?void 0:t.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=wI.Yi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.La.p_(i),await async function(l,c){const h=sn(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>We.forEach(c,p=>We.forEach(p.Hi,y=>h.persistence.referenceDelegate.addReference(d,p.targetId,y)).next(()=>We.forEach(p.Ji,y=>h.persistence.referenceDelegate.removeReference(d,p.targetId,y)))))}catch(d){if(!$p(d))throw d;It(SI,"Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const y=h.Ts.get(p),w=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(w);h.Ts=h.Ts.insert(p,S)}}}(r.localStore,s))}async function Bre(n,e){const t=sn(n);if(!t.currentUser.isEqual(e)){It(OI,"User change. New user:",e.toKey());const r=await h4(t.localStore,e);t.currentUser=e,function(s,o){s.Ga.forEach(a=>{a.forEach(l=>{l.reject(new xt(Be.CANCELLED,o))})}),s.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Oy(t,r.Rs)}}function Ure(n,e){const t=sn(n),r=t.Ka.get(e);if(r&&r.Ba)return An().add(r.key);{let i=An();const s=t.qa.get(e);if(!s)return i;for(const o of s){const a=t.ka.get(o);i=i.unionWith(a.view.Sa)}return i}}function R4(n){const e=sn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=I4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ure.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nre.bind(null,e),e.La.p_=Tre.bind(null,e.eventManager),e.La.Ja=_re.bind(null,e.eventManager),e}function $re(n){const e=sn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lre.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vre.bind(null,e),e}class iw{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=RS(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return jne(this.persistence,new Hne,e.initialUser,this.serializer)}Xa(e){return new u4(bI.ri,this.serializer)}Za(e){return new Qne}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}iw.provider={build:()=>new iw};class Hre extends iw{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Jn(this.persistence.referenceDelegate instanceof nw);const r=this.persistence.referenceDelegate.garbageCollector;return new Ine(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?io.withCacheSize(this.cacheSizeBytes):io.DEFAULT;return new u4(r=>nw.ri(r,t),this.serializer)}}class H_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gD(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bre.bind(null,this.syncEngine),await wre(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ere}()}createDatastore(e){const t=RS(e.databaseInfo.databaseId),r=function(s){return new rre(s)}(e.databaseInfo);return function(s,o,a,l){return new are(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new cre(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>gD(this.syncEngine,t,0),function(){return uD.D()?new uD:new Zne}())}createSyncEngine(e,t){return function(i,s,o,a,l,c,h){const d=new Cre(i,s,o,a,l,c);return h&&(d.ja=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=sn(i);It(Bf,"RemoteStore shutting down."),s.W_.add(5),await Cy(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}H_.provider={build:()=>new H_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):zc("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="FirestoreClient";class Wre{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ns.UNAUTHENTICATED,this.clientId=TB.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{It(ph,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(It(ph,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=II(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function GT(n,e){n.asyncQueue.verifyOperationInProgress(),It(ph,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await h4(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function vD(n,e){n.asyncQueue.verifyOperationInProgress();const t=await zre(n);It(ph,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>fD(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>fD(e.remoteStore,i)),n._onlineComponents=e}async function zre(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){It(ph,"Using user provided OfflineComponentProvider");try{await GT(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Be.FAILED_PRECONDITION||i.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;fp("Error using user provided cache. Falling back to memory cache: "+t),await GT(n,new iw)}}else It(ph,"Using default OfflineComponentProvider"),await GT(n,new Hre(void 0));return n._offlineComponents}async function D4(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(It(ph,"Using user provided OnlineComponentProvider"),await vD(n,n._uninitializedComponentsProvider._online)):(It(ph,"Using default OnlineComponentProvider"),await vD(n,new H_))),n._onlineComponents}function jre(n){return D4(n).then(e=>e.syncEngine)}async function M4(n){const e=await D4(n),t=e.eventManager;return t.onListen=Ore.bind(null,e.syncEngine),t.onUnlisten=Pre.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kre.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Dre.bind(null,e.syncEngine),t}function Kre(n,e,t={}){const r=new Dc;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new P4({next:p=>{h.su(),o.enqueueAndForget(()=>E4(s,d));const y=p.docs.has(a);!y&&p.fromCache?c.reject(new xt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&l&&l.source==="server"?c.reject(new xt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new T4(fI(a.path),h,{includeMetadataChanges:!0,Ta:!0});return S4(s,d)}(await M4(n),n.asyncQueue,e,t,r)),r.promise}function Gre(n,e,t={}){const r=new Dc;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new P4({next:p=>{h.su(),o.enqueueAndForget(()=>E4(s,d)),p.fromCache&&l.source==="server"?c.reject(new xt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new T4(a,h,{includeMetadataChanges:!0,Ta:!0});return S4(s,d)}(await M4(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(n,e,t){if(!t)throw new xt(Be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qre(n,e,t,r){if(e===!0&&r===!0)throw new xt(Be.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wD(n){if(!Vt.isDocumentKey(n))throw new xt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function SD(n){if(Vt.isDocumentKey(n))throw new xt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function MS(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Gt()}function mh(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=MS(n);throw new xt(Be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4="firestore.googleapis.com",ED=!0;class TD{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new xt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=V4,this.ssl=ED}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:ED;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=c4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xne)throw new xt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qre("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=N4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new xt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new xt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new xt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class NS{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TD({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TD(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new nte;switch(r.type){case"firstParty":return new ote(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=bD.get(t);r&&(It("ComponentProvider","Removing Datastore"),bD.delete(t),r.terminate())}(this),Promise.resolve()}}function Yre(n,e,t,r={}){var i;const s=(n=mh(n,NS))._getSettings(),o=`${e}:${t}`;if(s.host!==V4&&s.host!==o&&fp("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ns.MOCK_USER;else{a=uX(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new xt(Be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ns(c)}n._authCredentials=new rte(new EB(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oh(this.firestore,e,this._query)}}class mo{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new th(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mo(this.firestore,e,this._key)}}class th extends Oh{constructor(e,t,r){super(e,t,fI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mo(this.firestore,null,new Vt(e))}withConverter(e){return new th(this.firestore,e,this._path)}}function LS(n,e,...t){if(n=li(n),L4("collection","path",e),n instanceof NS){const r=dr.fromString(e,...t);return SD(r),new th(n,null,r)}{if(!(n instanceof mo||n instanceof th))throw new xt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dr.fromString(e,...t));return SD(r),new th(n.firestore,null,r)}}function zp(n,e,...t){if(n=li(n),arguments.length===1&&(e=TB.newId()),L4("doc","path",e),n instanceof NS){const r=dr.fromString(e,...t);return wD(r),new mo(n,null,new Vt(r))}{if(!(n instanceof mo||n instanceof th))throw new xt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dr.fromString(e,...t));return wD(r),new mo(n.firestore,n instanceof th?n.converter:null,new Vt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="AsyncQueue";class xD{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new d4(this,"async_queue_retry"),this.Su=()=>{const r=KT();r&&It(_D,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=KT();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=KT();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Dc;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!$p(e))throw e;It(_D,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw zc("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=AI.createAndSchedule(this,e,t,r,s=>this.Fu(s));return this.fu.push(i),i}Du(){this.gu&&Gt()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class ky extends NS{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new xD,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xD(e),this._firestoreClient=void 0,await e}}}function Xre(n,e){const t=typeof n=="object"?n:WA(),r=typeof n=="string"?n:Yb,i=ed(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=lX("firestore");s&&Yre(i,...s)}return i}function VS(n){if(n._terminated)throw new xt(Be.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Jre(n),n._firestoreClient}function Jre(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,c,h){return new wte(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,N4(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Wre(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vp(zi.fromBase64String(e))}catch(t){throw new xt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vp(zi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kn(this._lat,e._lat)||kn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qre=/^__.*__$/;class Zre{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ch(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ay(e,this.data,t,this.fieldTransforms)}}class F4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ch(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function B4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Gt()}}class MI{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new MI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Ku(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return sw(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(B4(this.Lu)&&Qre.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class eie{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||RS(e)}ju(e,t,r,i=!1){return new MI({Lu:e,methodName:t,zu:r,path:Hi.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function NI(n){const e=n._freezeSettings(),t=RS(n._databaseId);return new eie(n._databaseId,!!e.ignoreUndefinedProperties,t)}function U4(n,e,t,r,i,s={}){const o=n.ju(s.merge||s.mergeFields?2:0,e,t,i);LI("Data must be an object, but it was:",o,r);const a=$4(r,o);let l,c;if(s.merge)l=new Mo(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=W_(e,d,t);if(!o.contains(p))throw new xt(Be.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);W4(h,p)||h.push(p)}l=new Mo(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new Zre(new co(a),l,c)}class BS extends RI{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof BS}}function tie(n,e,t,r){const i=n.ju(1,e,t);LI("Data must be an object, but it was:",i,r);const s=[],o=co.empty();Ih(r,(l,c)=>{const h=VI(e,l,t);c=li(c);const d=i.Ku(h);if(c instanceof BS)s.push(h);else{const p=Ry(c,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new Mo(s);return new F4(o,a,i.fieldTransforms)}function nie(n,e,t,r,i,s){const o=n.ju(1,e,t),a=[W_(e,r,t)],l=[i];if(s.length%2!=0)throw new xt(Be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(W_(e,s[p])),l.push(s[p+1]);const c=[],h=co.empty();for(let p=a.length-1;p>=0;--p)if(!W4(c,a[p])){const y=a[p];let w=l[p];w=li(w);const S=o.Ku(y);if(w instanceof BS)c.push(y);else{const E=Ry(w,S);E!=null&&(c.push(y),h.set(y,E))}}const d=new Mo(c);return new F4(h,d,o.fieldTransforms)}function rie(n,e,t,r=!1){return Ry(t,n.ju(r?4:3,e))}function Ry(n,e){if(H4(n=li(n)))return LI("Unsupported field value:",e,n),$4(n,e);if(n instanceof RI)return function(r,i){if(!B4(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Ry(a,i.Uu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=li(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Wte(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=$r.fromDate(r);return{timestampValue:tw(i.serializer,s)}}if(r instanceof $r){const s=new $r(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tw(i.serializer,s)}}if(r instanceof PI)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vp)return{bytesValue:n4(i.serializer,r._byteString)};if(r instanceof mo){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:yI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof DI)return function(o,a){return{mapValue:{fields:{[RB]:{stringValue:PB},[Xb]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return dI(a.serializer,c)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${MS(r)}`)}(n,e)}function $4(n,e){const t={};return xB(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ih(n,(r,i)=>{const s=Ry(i,e.qu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function H4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $r||n instanceof PI||n instanceof vp||n instanceof mo||n instanceof RI||n instanceof DI)}function LI(n,e,t){if(!H4(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=MS(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function W_(n,e,t){if((e=li(e))instanceof FS)return e._internalPath;if(typeof e=="string")return VI(n,e);throw sw("Field path arguments must be of type string or ",n,!1,void 0,t)}const iie=new RegExp("[~\\*/\\[\\]]");function VI(n,e,t){if(e.search(iie)>=0)throw sw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new FS(...e.split("."))._internalPath}catch{throw sw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sw(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new xt(Be.INVALID_ARGUMENT,a+n+l)}function W4(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(US("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sie extends z4{data(){return super.data()}}function US(n,e){return typeof e=="string"?VI(n,e):e instanceof FS?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oie(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new xt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class FI{}class BI extends FI{}function z_(n,e,...t){let r=[];e instanceof FI&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof UI).length,a=s.filter(l=>l instanceof $S).length;if(o>1||o>0&&a>0)throw new xt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class $S extends BI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new $S(e,t,r)}_apply(e){const t=this._parse(e);return K4(e._query,t),new Oh(e.firestore,e.converter,D_(e._query,t))}_parse(e){const t=NI(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new xt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ID(d,h);const w=[];for(const S of d)w.push(AD(l,s,S));p={arrayValue:{values:w}}}else p=AD(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ID(d,h),p=rie(a,o,d,h==="in"||h==="not-in");return ai.create(c,h,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function j_(n,e,t){const r=e,i=US("where",n);return $S._create(i,r,t)}class UI extends FI{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new UI(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:rl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)K4(o,l),o=D_(o,l)}(e._query,t),new Oh(e.firestore,e.converter,D_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $I extends BI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $I(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new xt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new xt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hg(s,o)}(e._query,this._field,this._direction);return new Oh(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Hp(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function j4(n,e="asc"){const t=e,r=US("orderBy",n);return $I._create(r,t)}class HI extends BI{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new HI(e,t,r)}_apply(e){return new Oh(e.firestore,e.converter,Qb(e._query,this._limit,this._limitType))}}function aie(n){return HI._create("limit",n,"F")}function AD(n,e,t){if(typeof(t=li(t))=="string"){if(t==="")throw new xt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UB(e)&&t.indexOf("/")!==-1)throw new xt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dr.fromString(t));if(!Vt.isDocumentKey(r))throw new xt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return HP(n,new Vt(r))}if(t instanceof mo)return HP(n,t._key);throw new xt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${MS(t)}.`)}function ID(n,e){if(!Array.isArray(n)||n.length===0)throw new xt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function K4(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new xt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class lie{convertValue(e,t="none"){switch(fh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Gt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ih(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Xb].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Xr(o.doubleValue));return new DI(s)}convertGeoPoint(e){return new PI(Xr(e.latitude),Xr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=xS(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bg(e));default:return null}}convertTimestamp(e){const t=uh(e);return new $r(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dr.fromString(e);Jn(l4(r));const i=new Ug(r.get(1),r.get(3)),s=new Vt(r.popFirst(5));return i.isEqual(t)||zc(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class q4 extends z4{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new K0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(US("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class K0 extends q4{data(e={}){return super.data(e)}}class cie{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Um(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new K0(this._firestore,this._userDataWriter,r.key,r,new Um(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new K0(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Um(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new K0(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Um(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:uie(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function uie(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Gt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(n){n=mh(n,mo);const e=mh(n.firestore,ky);return Kre(VS(e),n._key).then(t=>hie(e,n,t))}class X4 extends lie{constructor(e){super(),this.firestore=e}convertBytes(e){return new vp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mo(this.firestore,null,t)}}function J4(n){n=mh(n,Oh);const e=mh(n.firestore,ky),t=VS(e),r=new X4(e);return oie(n._query),Gre(t,n._query).then(i=>new cie(e,r,n,i))}function Q4(n,e,t){n=mh(n,mo);const r=mh(n.firestore,ky),i=G4(n.converter,e,t);return Z4(r,[U4(NI(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,fa.none())])}function Z4(n,e){return function(r,i){const s=new Dc;return r.asyncQueue.enqueueAndForget(async()=>Mre(await jre(r),i,s)),s.promise}(VS(n),e)}function hie(n,e,t){const r=t.docs.get(e._key),i=new X4(n);return new q4(n,i,e._key,r,new Um(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fie{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=NI(e)}set(e,t,r){this._verifyNotCommitted();const i=qT(e,this._firestore),s=G4(i.converter,t,r),o=U4(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,fa.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=qT(e,this._firestore);let o;return o=typeof(t=li(t))=="string"||t instanceof FS?nie(this._dataReader,"WriteBatch.update",s._key,t,r,i):tie(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,fa.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=qT(e,this._firestore);return this._mutations=this._mutations.concat(new pI(t._key,fa.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xt(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qT(n,e){if((n=li(n)).firestore!==e)throw new xt(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(n){return VS(n=mh(n,ky)),new fie(n,e=>Z4(n,e))}(function(e,t=!0){(function(i){Bp=i})(Vp),zl(new nl("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ky(new ite(r.getProvider("auth-internal")),new ate(o,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new xt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ug(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ha(RP,PP,e),ha(RP,PP,"esm2017")})();async function tU(n){const e=new TextEncoder,t=await window.crypto.subtle.importKey("raw",e.encode(n),{name:"PBKDF2"},!1,["deriveKey"]);return await window.crypto.subtle.deriveKey({name:"PBKDF2",salt:e.encode("static-salt"),iterations:1e5,hash:"SHA-256"},t,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}async function nU(n,e){try{const t=new TextEncoder,r=window.crypto.getRandomValues(new Uint8Array(12)),i=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,t.encode(e)),s=new Uint8Array(r.length+i.byteLength);return s.set(r),s.set(new Uint8Array(i),r.length),die(s)}catch(t){return console.error("Encryption failed:",t),null}}function die(n){const e=new Uint8Array(n);let t="";for(let r=0;r<e.byteLength;r++)t+=String.fromCharCode(e[r]);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function rU(n,e){try{const t=pie(e),r=t.slice(0,12),i=t.slice(12),s=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:r},n,i);return new TextDecoder().decode(s)}catch(t){return console.error("Decryption failed:",t),null}}function pie(n){const e=n.replace(/-/g,"+").replace(/_/g,"/"),t=e.length%4,r=t?e+"=".repeat(4-t):e,i=atob(r),s=new Uint8Array(i.length);for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return s}const Mi=[];for(let n=0;n<256;++n)Mi.push((n+256).toString(16).slice(1));function mie(n,e=0){return(Mi[n[e+0]]+Mi[n[e+1]]+Mi[n[e+2]]+Mi[n[e+3]]+"-"+Mi[n[e+4]]+Mi[n[e+5]]+"-"+Mi[n[e+6]]+Mi[n[e+7]]+"-"+Mi[n[e+8]]+Mi[n[e+9]]+"-"+Mi[n[e+10]]+Mi[n[e+11]]+Mi[n[e+12]]+Mi[n[e+13]]+Mi[n[e+14]]+Mi[n[e+15]]).toLowerCase()}let YT;const gie=new Uint8Array(16);function yie(){if(!YT){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");YT=crypto.getRandomValues.bind(crypto)}return YT(gie)}const vie=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),CD={randomUUID:vie};function bie(n,e,t){var i;if(CD.randomUUID&&!n)return CD.randomUUID();n=n||{};const r=n.random??((i=n.rng)==null?void 0:i.call(n))??yie();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,mie(r)}const wie={apiKey:"AIzaSyAqX5v_scNZHMbDL4Aw9cxdhhd9NnF6Hmg",authDomain:"notesum-pro.firebaseapp.com",projectId:"notesum-pro",storageBucket:"notesum-pro.firebasestorage.app",messagingSenderId:"538070049900",appId:"1:538070049900:web:c679cee018e6c006c36449",measurementId:"G-MQT7ZSMW9G"},WI=dF(wie),Mc=NZ(WI);Qee(WI);const kh=Xre(WI);let XT=!1,HS=null,jg=null;const vi={BATCH_SIZE:20,MAX_RETRIES:5,BASE_RETRY_DELAY:200,SYNC_PAGE_LIMIT:50,ERROR_LOG_LIMIT:100,RECOVERY_INTERVAL:60*1e3,PROGRESS_UPDATE_INTERVAL:500},bt={inProgress:!1,currentJobId:null,totalItems:0,processedItems:0,startTime:null,failedItems:[],resumeToken:null,errorLog:new Map,aborted:!1,syncProgress:{phase:null,currentBatch:0,totalBatches:0}};async function iU(n){try{const e=Mc.currentUser;if(!e)throw new Error("User not authenticated");const t=await GI(e.uid);if(!t)return console.warn("No encryption key found for user"),!1;jg=await tU(n);const r=await rU(jg,t);return r?(HS=r,r):!1}catch(e){return console.error("Vault Unlock Error:",e),Uo("vault_unlock",null,e),!1}}function Sie(){HS=null,jg=null}async function Eie(n,e){try{const t=LS(kh,"users",n,"deletedPages"),r=zp(t,e);await Q4(r,{userId:n,pageId:e,deletedAt:$r.now()}),console.log(`Tombstone uploaded for page: ${e}`)}catch(t){console.error("Error uploading tombstone:",t)}}async function Tie(n,e){try{const t=z_(LS(kh,"users",n,"deletedPages"),j_("deletedAt",">",e?$r.fromDate(new Date(e)):$r.fromDate(new Date(0))),j4("deletedAt")),r=await J4(t),i=[];return r.forEach(s=>{i.push({pageId:s.data().pageId,deletedAt:s.data().deletedAt.toDate()})}),i}catch(t){return console.error("Error fetching new tombstones:",t),[]}}async function sU(n){try{const e=await Bn.getItem("lastSyncTime")||"1970-01-01T00:00:00Z",t=await Tie(n,e);if(t&&t.length>0){console.log("Processing new tombstones:",t);for(const r of t)try{await mi.pages.delete(r.pageId),console.log(`Processed tombstone, deleted page locally: ${r.pageId}`)}catch(i){console.error(`Error deleting page ${r.pageId} from tombstone:`,i),Uo("process_tombstone_delete",r.pageId,i)}}else console.log("No new tombstones to process.")}catch(e){console.error("Error processing remote deletions:",e),Uo("fetch_tombstones",null,e)}}const jp=async(n=null,e=null,t=!1)=>{if(bt.inProgress)return console.log("Sync already in progress. Skipping new sync request."),{success:!1,reason:"SYNC_IN_PROGRESS"};const r=Mc.currentUser;if(!r)return XT||(console.warn("User not authenticated, skipping sync."),XT=!0),{success:!1,reason:"NOT_AUTHENTICATED"};XT=!1;const i=r.uid;if(!HS)return console.warn("Vault is locked. Please unlock the vault before syncing."),{success:!1,reason:"VAULT_LOCKED"};Oie(),bt.inProgress=!0,bt.currentJobId=bie(),bt.startTime=Date.now();try{t&&Eie(i,n);const s=await Bn.getItem("pendingSyncJob");return s&&!bt.aborted?await aU(s,i):await oU(i),await Bn.removeItem("pendingSyncJob"),await Bn.setItem("lastSyncTime",new Date().toISOString()),await Bn.setItem("lastSuccessfulSync",{timestamp:new Date().toISOString(),duration:Date.now()-bt.startTime,itemsProcessed:bt.processedItems}),bt.processedItems>0&&console.log(`Sync completed successfully. Processed ${bt.processedItems} items in ${(Date.now()-bt.startTime)/1e3}s`),{success:!0,stats:kie()}}catch(s){return console.error("Sync failed:",s),await zI(),Cie(),{success:!1,reason:"SYNC_ERROR",error:s.message}}finally{bt.inProgress=!1}};async function oU(n){const e=LS(kh,"users",n,"pages"),t=await Bn.getItem("pendingSyncJob");if(t&&!bt.aborted)await aU(t,n);else try{await sU(n),await K_(n,e),await G0(n,e),await lU(n,e)}catch(r){throw Uo("sync_job",null,r),r}}async function aU(n,e){console.log("Resuming interrupted sync job",n.jobId),bt.resumeToken=n.resumeToken,bt.processedItems=n.processedItems||0,bt.totalItems=n.totalItems||0,bt.failedItems=n.failedItems||[];const t=LS(kh,"users",e,"pages");try{switch(n.phase){case"downloading":await sU(e),await K_(e,t),await G0(e,t),await lU(e,t,n.resumeToken);break;case"uploading":await K_(e,t,n.resumeToken),await G0(e,t);break;case"deleting":await G0(e,t,n.resumeToken);break;default:console.warn("Unknown sync phase in checkpoint, starting fresh sync"),await oU(e)}}catch(r){throw Uo("resume_sync",null,r),r}}async function lU(n,e,t=null){nh("downloading",0,0);let r=await Bn.getItem("lastSyncTime")||"1970-01-01T00:00:00Z",i=t,s=!0,o=0;for(;s&&!bt.aborted;){if(await Py())return;try{let a=z_(e,j_("lastModified",">",r),j4("lastModified"),aie(vi.SYNC_PAGE_LIMIT));if(i){const h=zp(e,i);(await Y4(h)).exists()&&(a=z_(a,j_("__id",">",i)))}const l=await uU(()=>J4(a));if(l.empty){s=!1;continue}o++,nh("downloading",o,null);const c=l.docs;bt.totalItems+=c.length;for(let h=0;h<c.length;h+=vi.BATCH_SIZE){const d=c.slice(h,h+vi.BATCH_SIZE);await _ie(d),i=d[d.length-1].id,await jI("downloading",i)}c.length<vi.SYNC_PAGE_LIMIT&&(s=!1)}catch(a){if(Uo("download_batch",i,a),!await hU("downloading",i))throw new Error(`Failed to download data from Firestore: ${a.message}`)}}}async function _ie(n){for(const e of n){if(bt.aborted){console.log("Sync aborted during download batch processing");break}if(await Py())return;try{const t=e.data(),r=e.id;if(bt.failedItems.includes(r))continue;const i=await mi.pages.get(r);let s=t.content||"";if(t.isEncrypted&&t.content)try{s=await rU(jg,t.content)}catch(o){Uo("decrypt_error",r,o),bt.failedItems.push(r);continue}i?Aie(i,t)&&await Iie(i,t,s):await mi.createPageFromFirestore({id:r,name:t.name,order:t.order,createdAt:t.createdAt,lastModified:t.lastModified,lastSynced:t.lastSynced,content:s,isEncrypted:t.isEncrypted||0,pendingSync:t.pendingSync||0,syncStatus:t.syncStatus||"synced"}),bt.processedItems++,KI()}catch(t){Uo("process_download",e.id,t),bt.failedItems.push(e.id)}}}async function K_(n,e,t=null){nh("uploading",0,0);try{let r;if(t?r=await mi.pages.where("id").above(t).and(s=>s.pendingSync===1).toArray():r=await mi.pages.where("pendingSync").equals(1).toArray(),r.length===0){console.log("No pages to upload");return}bt.totalItems+=r.length;const i=Math.ceil(r.length/vi.BATCH_SIZE);nh("uploading",0,i);for(let s=0;s<r.length&&!bt.aborted;s+=vi.BATCH_SIZE){if(await Py())return;const o=r.slice(s,s+vi.BATCH_SIZE),a=await xie(o,e);a&&await jI("uploading",a),nh("uploading",Math.floor(s/vi.BATCH_SIZE)+1,i)}}catch(r){throw Uo("upload_pages",t,r),new Error(`Failed to upload pages to Firestore: ${r.message}`)}}async function xie(n,e){const t=eU(kh),r=[];let i=null;try{for(const s of n){if(await Py())return null;if(bt.failedItems.includes(s.id))continue;const o=zp(e,s.id);try{const a={...s};a.content=await nU(jg,s.content),a.isEncrypted=1,a.lastModified=s.lastModified||new Date().toISOString(),t.set(o,a,{merge:!0}),r.push(s.id),i=s.id}catch(a){Uo("prepare_upload",s.id,a),bt.failedItems.push(s.id)}}return r.length>0&&(await cU(t),await Promise.all(r.map(s=>mi.pages.update(s,{pendingSync:0,syncStatus:"synced",lastSynced:new Date().toISOString()}))),bt.processedItems+=r.length,KI()),i}catch(s){if(bt.failedItems.push(...n.map(a=>a.id)),Uo("upload_batch",null,s),!await hU("uploading",n[0].id))throw s;return null}}async function G0(n,e,t=null){nh("deleting",0,0);try{const r=await Bn.getDeletedPageIds();if(r.size===0){console.log("No pages marked for deletion");return}bt.totalItems+=r.size;const i=Array.from(r),s=Math.ceil(i.length/vi.BATCH_SIZE);nh("deleting",0,s);const o=new Set;for(let a=0;a<i.length&&!bt.aborted;a+=vi.BATCH_SIZE){if(await Py())return;const l=eU(kh),c=i.slice(a,a+vi.BATCH_SIZE);for(const h of c){if(bt.failedItems.includes(h))continue;const d=zp(e,h);l.delete(d),o.add(h)}await cU(l),bt.processedItems+=c.length,KI(),nh("deleting",Math.floor(a/vi.BATCH_SIZE)+1,s)}for(const a of o)await Bn.clearDeletedPageId(a)}catch(r){throw Uo("handle_deletions",t,r),new Error(`Failed to process deletions: ${r.message}`)}}function Aie(n,e){if(n.pendingSync===1)return n.content!==e.content||n.name!==e.name||n.order!==e.order;const t=new Date(n.lastModified),r=new Date(e.lastModified);return Math.abs(t-r)>6e4||n.content!==e.content||n.name!==e.name||n.order!==e.order}async function Iie(n,e,t){try{const r=new Date(n.lastModified),i=new Date(e.lastModified),s={...n};i>r?(n.pendingSync===1?t!==n.content&&(s.content=t.length>n.content.length?t:n.content,s.pendingSync=1):s.content=t,s.name=e.name,s.order=e.order,s.lastModified=e.lastModified):(e.name&&e.name!==n.name&&(s.name=e.name,s.pendingSync=1),e.order&&e.order!==n.order&&(s.order=e.order,s.pendingSync=1)),await mi.savePage(n.id,s.content,{name:s.name,order:s.order,pendingSync:s.pendingSync,lastModified:s.lastModified,syncStatus:"merged"}),console.log(`Merged page ${n.id} with strategy: ${i>r?"remote-priority":"local-priority"}`)}catch(r){throw Uo("merge_operation",n.id,r),bt.failedItems.push(n.id),new Error(`Failed to merge page ${n.id}: ${r.message}`)}}async function cU(n,e=vi.MAX_RETRIES){return uU(()=>n.commit(),e)}async function uU(n,e=vi.MAX_RETRIES){let t=0,r=null;for(;t<e;)try{return await n()}catch(i){if(t++,r=i,console.error(`Operation failed (Attempt ${t}/${e}):`,i),t>=e)throw console.error("Max retries reached. Operation failed."),i;const s=vi.BASE_RETRY_DELAY,o=.3*s,a=Math.floor(Math.random()*o),c=Math.pow(2,t)*s+a;await new Promise(h=>setTimeout(h,c))}throw r||new Error("Operation failed after retries")}async function hU(n,e){return await jI(n,e),!bt.aborted}async function zI(){const n={jobId:bt.currentJobId,phase:bt.syncProgress.phase,resumeToken:bt.resumeToken,processedItems:bt.processedItems,totalItems:bt.totalItems,failedItems:bt.failedItems,timestamp:new Date().toISOString()};return await Bn.setItem("pendingSyncJob",n),n}async function jI(n,e){bt.syncProgress.phase=n,bt.resumeToken=e,Math.random()<.2&&await zI()}function Cie(){bt.aborted||(console.log("Scheduling sync recovery attempt"),setTimeout(()=>{jp().then(n=>{n.success?console.log("Recovery sync completed successfully"):console.warn("Recovery sync failed:",n.reason)})},vi.RECOVERY_INTERVAL))}function Uo(n,e,t){const r=`${n}:${e||"general"}`,i={operation:n,documentId:e,error:t.message,timestamp:new Date().toISOString(),syncJobId:bt.currentJobId};if(bt.errorLog.size>=vi.ERROR_LOG_LIMIT){const s=Array.from(bt.errorLog.keys())[0];bt.errorLog.delete(s)}bt.errorLog.set(r,i),console.error(`Sync Error [${n}]:`,t),Bn.getItem("syncErrorLog").then(s=>{const o=s||[];for(o.push(i);o.length>vi.ERROR_LOG_LIMIT;)o.shift();Bn.setItem("syncErrorLog",o)})}function nh(n,e,t){bt.syncProgress={phase:n,currentBatch:e,totalBatches:t};const r=new CustomEvent("syncProgressUpdate",{detail:{phase:n,current:e,total:t,percent:t?Math.round(e/t*100):0,processedItems:bt.processedItems,totalItems:bt.totalItems}});document.dispatchEvent(r)}let OD=0,Kv=!1;function KI(){const n=Date.now();if(!(Kv||n-OD<vi.PROGRESS_UPDATE_INTERVAL)){Kv=!0,OD=n;try{const e=new CustomEvent("syncItemProgress",{detail:{processed:bt.processedItems,total:bt.totalItems,percent:bt.totalItems?Math.round(bt.processedItems/bt.totalItems*100):0,elapsedTime:(Date.now()-bt.startTime)/1e3}});setTimeout(()=>{document.dispatchEvent(e),Kv=!1},0)}catch(e){console.error("Error updating progress:",e),Kv=!1}}}function Oie(){bt.inProgress=!1,bt.currentJobId=null,bt.totalItems=0,bt.processedItems=0,bt.startTime=null,bt.failedItems=[],bt.resumeToken=null,bt.aborted=!1,bt.syncProgress={phase:null,currentBatch:0,totalBatches:0}}function kie(){return{jobId:bt.currentJobId,totalProcessed:bt.processedItems,failedItems:bt.failedItems.length,duration:(Date.now()-bt.startTime)/1e3,timestamp:new Date().toISOString()}}async function GI(n){try{const e=zp(kh,"users",n,"vault","key"),t=await Y4(e);return t.exists()&&t.data().encryptedKey||null}catch(e){return console.error("Error fetching encrypted key:",e),null}}async function Rie(n,e){try{const t=zp(kh,"users",n);return await Q4(t,{encryptedKey:e},{merge:!0}),!0}catch(t){return console.error("Error storing encrypted key:",t),!1}}async function Pie(n,e){return Rie(n,e)}async function Py(){return HS?!1:(console.warn("Vault locked during sync. Aborting sync."),bt.aborted=!0,await zI(),!0)}var $m={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Die=$m.exports,kD;function Mie(){return kD||(kD=1,function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,h="__lodash_placeholder__",d=1,p=2,y=4,w=1,S=2,E=1,C=2,L=4,P=8,F=16,U=32,j=64,N=128,O=256,A=512,R=30,k="...",V=800,D=16,Z=1,le=2,Q=3,re=1/0,ae=9007199254740991,Ce=17976931348623157e292,He=NaN,Ge=4294967295,ot=Ge-1,ut=Ge>>>1,Mt=[["ary",N],["bind",E],["bindKey",C],["curry",P],["curryRight",F],["flip",A],["partial",U],["partialRight",j],["rearg",O]],_e="[object Arguments]",Ne="[object Array]",oe="[object AsyncFunction]",Ee="[object Boolean]",me="[object Date]",Ie="[object DOMException]",Me="[object Error]",Ye="[object Function]",X="[object GeneratorFunction]",ee="[object Map]",be="[object Number]",Ue="[object Null]",ke="[object Object]",Ke="[object Promise]",at="[object Proxy]",Xe="[object RegExp]",Le="[object Set]",ze="[object String]",Et="[object Symbol]",lt="[object Undefined]",mt="[object WeakMap]",ft="[object WeakSet]",Tt="[object ArrayBuffer]",Wt="[object DataView]",de="[object Float32Array]",ge="[object Float64Array]",Se="[object Int8Array]",Pe="[object Int16Array]",rt="[object Int32Array]",Ot="[object Uint8Array]",Rt="[object Uint8ClampedArray]",je="[object Uint16Array]",tn="[object Uint32Array]",kt=/\b__p \+= '';/g,At=/\b(__p \+=) '' \+/g,Oe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,zt=/&(?:amp|lt|gt|quot|#39);/g,on=/[&<>"']/g,yr=RegExp(zt.source),ji=RegExp(on.source),cl=/<%-([\s\S]+?)%>/g,yo=/<%([\s\S]+?)%>/g,Ph=/<%=([\s\S]+?)%>/g,Bs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ea=/^\w*$/,Hr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ta=/[\\^$.*+?()[\]{}|]/g,Hn=RegExp(Ta.source),Zn=/^\s+/,tm=/\s/,Zc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,vo=/\{\n\/\* \[wrapped with (.+)\] \*/,eu=/,? & /,nm=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ws=/[()=,{}\[\]\/\s]/,_a=/\\(\\)?/g,Us=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$o=/\w*$/,Ho=/^[-+]0x[0-9a-f]+$/i,bo=/^0b[01]+$/i,Dh=/^\[object .+?Constructor\]$/,wo=/^0o[0-7]+$/i,tu=/^(?:0|[1-9]\d*)$/,nu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qn=/($^)/,xa=/['\n\r\u2028\u2029\\]/g,ci="\\ud800-\\udfff",Mh="\\u0300-\\u036f",Wo="\\ufe20-\\ufe2f",zo="\\u20d0-\\u20ff",$s=Mh+Wo+zo,ul="\\u2700-\\u27bf",jo="a-z\\xdf-\\xf6\\xf8-\\xff",Nh="\\xac\\xb1\\xd7\\xf7",Jl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Lh="\\u2000-\\u206f",cn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ql="A-Z\\xc0-\\xd6\\xd8-\\xde",ru="\\ufe0e\\ufe0f",iu=Nh+Jl+Lh+cn,zn="[']",Zl="["+ci+"]",Aa="["+iu+"]",Hs="["+$s+"]",su="\\d+",So="["+ul+"]",ki="["+jo+"]",hl="[^"+ci+iu+su+ul+jo+Ql+"]",Eo="\\ud83c[\\udffb-\\udfff]",Vh="(?:"+Hs+"|"+Eo+")",Pn="[^"+ci+"]",Ia="(?:\\ud83c[\\udde6-\\uddff]){2}",Ca="[\\ud800-\\udbff][\\udc00-\\udfff]",Qt="["+Ql+"]",ou="\\u200d",Fh="(?:"+ki+"|"+hl+")",rm="(?:"+Qt+"|"+hl+")",Ti="(?:"+zn+"(?:d|ll|m|re|s|t|ve))?",Oa="(?:"+zn+"(?:D|LL|M|RE|S|T|VE))?",ec=Vh+"?",Ri="["+ru+"]?",To="(?:"+ou+"(?:"+[Pn,Ia,Ca].join("|")+")"+Ri+ec+")*",Bh="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_r="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ki=Ri+ec+To,Ws="(?:"+[So,Ia,Ca].join("|")+")"+Ki,tc="(?:"+[Pn+Hs+"?",Hs,Ia,Ca,Zl].join("|")+")",Uh=RegExp(zn,"g"),Ko=RegExp(Hs,"g"),zs=RegExp(Eo+"(?="+Eo+")|"+tc+Ki,"g"),js=RegExp([Qt+"?"+ki+"+"+Ti+"(?="+[Aa,Qt,"$"].join("|")+")",rm+"+"+Oa+"(?="+[Aa,Qt+Fh,"$"].join("|")+")",Qt+"?"+Fh+"+"+Ti,Qt+"+"+Oa,_r,Bh,su,Ws].join("|"),"g"),$h=RegExp("["+ou+ci+$s+ru+"]"),nc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],dl=-1,In={};In[de]=In[ge]=In[Se]=In[Pe]=In[rt]=In[Ot]=In[Rt]=In[je]=In[tn]=!0,In[_e]=In[Ne]=In[Tt]=In[Ee]=In[Wt]=In[me]=In[Me]=In[Ye]=In[ee]=In[be]=In[ke]=In[Xe]=In[Le]=In[ze]=In[mt]=!1;var Cn={};Cn[_e]=Cn[Ne]=Cn[Tt]=Cn[Wt]=Cn[Ee]=Cn[me]=Cn[de]=Cn[ge]=Cn[Se]=Cn[Pe]=Cn[rt]=Cn[ee]=Cn[be]=Cn[ke]=Cn[Xe]=Cn[Le]=Cn[ze]=Cn[Et]=Cn[Ot]=Cn[Rt]=Cn[je]=Cn[tn]=!0,Cn[Me]=Cn[Ye]=Cn[mt]=!1;var sd={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ka={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},im={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},au=parseFloat,rc=parseInt,ic=typeof Lm=="object"&&Lm&&Lm.Object===Object&&Lm,od=typeof self=="object"&&self&&self.Object===Object&&self,vr=ic||od||Function("return this")(),lu=e&&!e.nodeType&&e,Wr=lu&&!0&&n&&!n.nodeType&&n,sc=Wr&&Wr.exports===lu,cu=sc&&ic.process,xr=function(){try{var H=Wr&&Wr.require&&Wr.require("util").types;return H||cu&&cu.binding&&cu.binding("util")}catch{}}(),pl=xr&&xr.isArrayBuffer,Ra=xr&&xr.isDate,ml=xr&&xr.isMap,Hh=xr&&xr.isRegExp,Go=xr&&xr.isSet,uu=xr&&xr.isTypedArray;function Qr(H,Y,W){switch(W.length){case 0:return H.call(Y);case 1:return H.call(Y,W[0]);case 2:return H.call(Y,W[0],W[1]);case 3:return H.call(Y,W[0],W[1],W[2])}return H.apply(Y,W)}function Pa(H,Y,W,se){for(var te=-1,ue=H==null?0:H.length;++te<ue;){var pe=H[te];Y(se,pe,W(pe),H)}return se}function ui(H,Y){for(var W=-1,se=H==null?0:H.length;++W<se&&Y(H[W],W,H)!==!1;);return H}function zr(H,Y){for(var W=H==null?0:H.length;W--&&Y(H[W],W,H)!==!1;);return H}function qo(H,Y){for(var W=-1,se=H==null?0:H.length;++W<se;)if(!Y(H[W],W,H))return!1;return!0}function _i(H,Y){for(var W=-1,se=H==null?0:H.length,te=0,ue=[];++W<se;){var pe=H[W];Y(pe,W,H)&&(ue[te++]=pe)}return ue}function gl(H,Y){var W=H==null?0:H.length;return!!W&&Ma(H,Y,0)>-1}function _o(H,Y,W){for(var se=-1,te=H==null?0:H.length;++se<te;)if(W(Y,H[se]))return!0;return!1}function qn(H,Y){for(var W=-1,se=H==null?0:H.length,te=Array(se);++W<se;)te[W]=Y(H[W],W,H);return te}function Ks(H,Y){for(var W=-1,se=Y.length,te=H.length;++W<se;)H[te+W]=Y[W];return H}function Gi(H,Y,W,se){var te=-1,ue=H==null?0:H.length;for(se&&ue&&(W=H[++te]);++te<ue;)W=Y(W,H[te],te,H);return W}function hu(H,Y,W,se){var te=H==null?0:H.length;for(se&&te&&(W=H[--te]);te--;)W=Y(W,H[te],te,H);return W}function Gs(H,Y){for(var W=-1,se=H==null?0:H.length;++W<se;)if(Y(H[W],W,H))return!0;return!1}var fu=M("length");function du(H){return H.split("")}function Da(H){return H.match(nm)||[]}function Zr(H,Y,W){var se;return W(H,function(te,ue,pe){if(Y(te,ue,pe))return se=ue,!1}),se}function yl(H,Y,W,se){for(var te=H.length,ue=W+(se?1:-1);se?ue--:++ue<te;)if(Y(H[ue],ue,H))return ue;return-1}function Ma(H,Y,W){return Y===Y?vl(H,Y,W):yl(H,m,W)}function Yo(H,Y,W,se){for(var te=W-1,ue=H.length;++te<ue;)if(se(H[te],Y))return te;return-1}function m(H){return H!==H}function _(H,Y){var W=H==null?0:H.length;return W?st(H,Y)/W:He}function M(H){return function(Y){return Y==null?t:Y[H]}}function G(H){return function(Y){return H==null?t:H[Y]}}function ve(H,Y,W,se,te){return te(H,function(ue,pe,ce){W=se?(se=!1,ue):Y(W,ue,pe,ce)}),W}function Ae(H,Y){var W=H.length;for(H.sort(Y);W--;)H[W]=H[W].value;return H}function st(H,Y){for(var W,se=-1,te=H.length;++se<te;){var ue=Y(H[se]);ue!==t&&(W=W===t?ue:W+ue)}return W}function Dn(H,Y){for(var W=-1,se=Array(H);++W<H;)se[W]=Y(W);return se}function Rr(H,Y){return qn(Y,function(W){return[W,H[W]]})}function vn(H){return H&&H.slice(0,T(H)+1).replace(Zn,"")}function Vn(H){return function(Y){return H(Y)}}function br(H,Y){return qn(Y,function(W){return H[W]})}function Ss(H,Y){return H.has(Y)}function Pi(H,Y){for(var W=-1,se=H.length;++W<se&&Ma(Y,H[W],0)>-1;);return W}function oc(H,Y){for(var W=H.length;W--&&Ma(Y,H[W],0)>-1;);return W}function Wh(H,Y){for(var W=H.length,se=0;W--;)H[W]===Y&&++se;return se}var TE=G(sd),ad=G(ka);function Na(H){return"\\"+im[H]}function Ar(H,Y){return H==null?t:H[Y]}function La(H){return $h.test(H)}function qs(H){return nc.test(H)}function _E(H){for(var Y,W=[];!(Y=H.next()).done;)W.push(Y.value);return W}function zh(H){var Y=-1,W=Array(H.size);return H.forEach(function(se,te){W[++Y]=[te,se]}),W}function sm(H,Y){return function(W){return H(Y(W))}}function qi(H,Y){for(var W=-1,se=H.length,te=0,ue=[];++W<se;){var pe=H[W];(pe===Y||pe===h)&&(H[W]=h,ue[te++]=W)}return ue}function pu(H){var Y=-1,W=Array(H.size);return H.forEach(function(se){W[++Y]=se}),W}function mu(H){var Y=-1,W=Array(H.size);return H.forEach(function(se){W[++Y]=[se,se]}),W}function vl(H,Y,W){for(var se=W-1,te=H.length;++se<te;)if(H[se]===Y)return se;return-1}function Qy(H,Y,W){for(var se=W+1;se--;)if(H[se]===Y)return se;return se}function g(H){return La(H)?B(H):fu(H)}function b(H){return La(H)?z(H):du(H)}function T(H){for(var Y=H.length;Y--&&tm.test(H.charAt(Y)););return Y}var I=G(nr);function B(H){for(var Y=zs.lastIndex=0;zs.test(H);)++Y;return Y}function z(H){return H.match(zs)||[]}function J(H){return H.match(js)||[]}var ie=function H(Y){Y=Y==null?vr:fe.defaults(vr.Object(),Y,fe.pick(vr,fl));var W=Y.Array,se=Y.Date,te=Y.Error,ue=Y.Function,pe=Y.Math,ce=Y.Object,we=Y.RegExp,xe=Y.String,Te=Y.TypeError,Re=W.prototype,et=ue.prototype,it=ce.prototype,Ze=Y["__core-js_shared__"],tt=et.toString,qe=it.hasOwnProperty,ct=0,_t=function(){var u=/[^.]+$/.exec(Ze&&Ze.keys&&Ze.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),Yt=it.toString,fn=tt.call(ce),dn=vr._,Es=we("^"+tt.call(qe).replace(Ta,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jt=sc?Y.Buffer:t,ur=Y.Symbol,jr=Y.Uint8Array,jh=jt?jt.allocUnsafe:t,ei=sm(ce.getPrototypeOf,ce),bl=ce.create,ld=it.propertyIsEnumerable,Zy=Re.splice,gO=ur?ur.isConcatSpreadable:t,om=ur?ur.iterator:t,Kh=ur?ur.toStringTag:t,ev=function(){try{var u=Jh(ce,"defineProperty");return u({},"",{}),u}catch{}}(),T9=Y.clearTimeout!==vr.clearTimeout&&Y.clearTimeout,_9=se&&se.now!==vr.Date.now&&se.now,x9=Y.setTimeout!==vr.setTimeout&&Y.setTimeout,tv=pe.ceil,nv=pe.floor,xE=ce.getOwnPropertySymbols,A9=jt?jt.isBuffer:t,yO=Y.isFinite,I9=Re.join,C9=sm(ce.keys,ce),hi=pe.max,Yi=pe.min,O9=se.now,k9=Y.parseInt,vO=pe.random,R9=Re.reverse,AE=Jh(Y,"DataView"),am=Jh(Y,"Map"),IE=Jh(Y,"Promise"),cd=Jh(Y,"Set"),lm=Jh(Y,"WeakMap"),cm=Jh(ce,"create"),rv=lm&&new lm,ud={},P9=Qh(AE),D9=Qh(am),M9=Qh(IE),N9=Qh(cd),L9=Qh(lm),iv=ur?ur.prototype:t,um=iv?iv.valueOf:t,bO=iv?iv.toString:t;function K(u){if(Pr(u)&&!an(u)&&!(u instanceof En)){if(u instanceof Xo)return u;if(qe.call(u,"__wrapped__"))return wk(u)}return new Xo(u)}var hd=function(){function u(){}return function(f){if(!Ir(f))return{};if(bl)return bl(f);u.prototype=f;var v=new u;return u.prototype=t,v}}();function sv(){}function Xo(u,f){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=t}K.templateSettings={escape:cl,evaluate:yo,interpolate:Ph,variable:"",imports:{_:K}},K.prototype=sv.prototype,K.prototype.constructor=K,Xo.prototype=hd(sv.prototype),Xo.prototype.constructor=Xo;function En(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ge,this.__views__=[]}function V9(){var u=new En(this.__wrapped__);return u.__actions__=Ys(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Ys(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Ys(this.__views__),u}function F9(){if(this.__filtered__){var u=new En(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function B9(){var u=this.__wrapped__.value(),f=this.__dir__,v=an(u),x=f<0,$=v?u.length:0,q=JH(0,$,this.__views__),ne=q.start,he=q.end,ye=he-ne,Ve=x?he:ne-1,Fe=this.__iteratees__,Je=Fe.length,gt=0,Dt=Yi(ye,this.__takeCount__);if(!v||!x&&$==ye&&Dt==ye)return WO(u,this.__actions__);var Ut=[];e:for(;ye--&&gt<Dt;){Ve+=f;for(var pn=-1,$t=u[Ve];++pn<Je;){var bn=Fe[pn],On=bn.iteratee,Io=bn.type,xs=On($t);if(Io==le)$t=xs;else if(!xs){if(Io==Z)continue e;break e}}Ut[gt++]=$t}return Ut}En.prototype=hd(sv.prototype),En.prototype.constructor=En;function Gh(u){var f=-1,v=u==null?0:u.length;for(this.clear();++f<v;){var x=u[f];this.set(x[0],x[1])}}function U9(){this.__data__=cm?cm(null):{},this.size=0}function $9(u){var f=this.has(u)&&delete this.__data__[u];return this.size-=f?1:0,f}function H9(u){var f=this.__data__;if(cm){var v=f[u];return v===l?t:v}return qe.call(f,u)?f[u]:t}function W9(u){var f=this.__data__;return cm?f[u]!==t:qe.call(f,u)}function z9(u,f){var v=this.__data__;return this.size+=this.has(u)?0:1,v[u]=cm&&f===t?l:f,this}Gh.prototype.clear=U9,Gh.prototype.delete=$9,Gh.prototype.get=H9,Gh.prototype.has=W9,Gh.prototype.set=z9;function ac(u){var f=-1,v=u==null?0:u.length;for(this.clear();++f<v;){var x=u[f];this.set(x[0],x[1])}}function j9(){this.__data__=[],this.size=0}function K9(u){var f=this.__data__,v=ov(f,u);if(v<0)return!1;var x=f.length-1;return v==x?f.pop():Zy.call(f,v,1),--this.size,!0}function G9(u){var f=this.__data__,v=ov(f,u);return v<0?t:f[v][1]}function q9(u){return ov(this.__data__,u)>-1}function Y9(u,f){var v=this.__data__,x=ov(v,u);return x<0?(++this.size,v.push([u,f])):v[x][1]=f,this}ac.prototype.clear=j9,ac.prototype.delete=K9,ac.prototype.get=G9,ac.prototype.has=q9,ac.prototype.set=Y9;function lc(u){var f=-1,v=u==null?0:u.length;for(this.clear();++f<v;){var x=u[f];this.set(x[0],x[1])}}function X9(){this.size=0,this.__data__={hash:new Gh,map:new(am||ac),string:new Gh}}function J9(u){var f=vv(this,u).delete(u);return this.size-=f?1:0,f}function Q9(u){return vv(this,u).get(u)}function Z9(u){return vv(this,u).has(u)}function eH(u,f){var v=vv(this,u),x=v.size;return v.set(u,f),this.size+=v.size==x?0:1,this}lc.prototype.clear=X9,lc.prototype.delete=J9,lc.prototype.get=Q9,lc.prototype.has=Z9,lc.prototype.set=eH;function qh(u){var f=-1,v=u==null?0:u.length;for(this.__data__=new lc;++f<v;)this.add(u[f])}function tH(u){return this.__data__.set(u,l),this}function nH(u){return this.__data__.has(u)}qh.prototype.add=qh.prototype.push=tH,qh.prototype.has=nH;function Va(u){var f=this.__data__=new ac(u);this.size=f.size}function rH(){this.__data__=new ac,this.size=0}function iH(u){var f=this.__data__,v=f.delete(u);return this.size=f.size,v}function sH(u){return this.__data__.get(u)}function oH(u){return this.__data__.has(u)}function aH(u,f){var v=this.__data__;if(v instanceof ac){var x=v.__data__;if(!am||x.length<i-1)return x.push([u,f]),this.size=++v.size,this;v=this.__data__=new lc(x)}return v.set(u,f),this.size=v.size,this}Va.prototype.clear=rH,Va.prototype.delete=iH,Va.prototype.get=sH,Va.prototype.has=oH,Va.prototype.set=aH;function wO(u,f){var v=an(u),x=!v&&Zh(u),$=!v&&!x&&wu(u),q=!v&&!x&&!$&&md(u),ne=v||x||$||q,he=ne?Dn(u.length,xe):[],ye=he.length;for(var Ve in u)(f||qe.call(u,Ve))&&!(ne&&(Ve=="length"||$&&(Ve=="offset"||Ve=="parent")||q&&(Ve=="buffer"||Ve=="byteLength"||Ve=="byteOffset")||fc(Ve,ye)))&&he.push(Ve);return he}function SO(u){var f=u.length;return f?u[FE(0,f-1)]:t}function lH(u,f){return bv(Ys(u),Yh(f,0,u.length))}function cH(u){return bv(Ys(u))}function CE(u,f,v){(v!==t&&!Fa(u[f],v)||v===t&&!(f in u))&&cc(u,f,v)}function hm(u,f,v){var x=u[f];(!(qe.call(u,f)&&Fa(x,v))||v===t&&!(f in u))&&cc(u,f,v)}function ov(u,f){for(var v=u.length;v--;)if(Fa(u[v][0],f))return v;return-1}function uH(u,f,v,x){return gu(u,function($,q,ne){f(x,$,v($),ne)}),x}function EO(u,f){return u&&Sl(f,xi(f),u)}function hH(u,f){return u&&Sl(f,Js(f),u)}function cc(u,f,v){f=="__proto__"&&ev?ev(u,f,{configurable:!0,enumerable:!0,value:v,writable:!0}):u[f]=v}function OE(u,f){for(var v=-1,x=f.length,$=W(x),q=u==null;++v<x;)$[v]=q?t:cT(u,f[v]);return $}function Yh(u,f,v){return u===u&&(v!==t&&(u=u<=v?u:v),f!==t&&(u=u>=f?u:f)),u}function Jo(u,f,v,x,$,q){var ne,he=f&d,ye=f&p,Ve=f&y;if(v&&(ne=$?v(u,x,$,q):v(u)),ne!==t)return ne;if(!Ir(u))return u;var Fe=an(u);if(Fe){if(ne=ZH(u),!he)return Ys(u,ne)}else{var Je=Xi(u),gt=Je==Ye||Je==X;if(wu(u))return KO(u,he);if(Je==ke||Je==_e||gt&&!$){if(ne=ye||gt?{}:hk(u),!he)return ye?HH(u,hH(ne,u)):$H(u,EO(ne,u))}else{if(!Cn[Je])return $?u:{};ne=eW(u,Je,he)}}q||(q=new Va);var Dt=q.get(u);if(Dt)return Dt;q.set(u,ne),Uk(u)?u.forEach(function($t){ne.add(Jo($t,f,v,$t,u,q))}):Fk(u)&&u.forEach(function($t,bn){ne.set(bn,Jo($t,f,v,bn,u,q))});var Ut=Ve?ye?YE:qE:ye?Js:xi,pn=Fe?t:Ut(u);return ui(pn||u,function($t,bn){pn&&(bn=$t,$t=u[bn]),hm(ne,bn,Jo($t,f,v,bn,u,q))}),ne}function fH(u){var f=xi(u);return function(v){return TO(v,u,f)}}function TO(u,f,v){var x=v.length;if(u==null)return!x;for(u=ce(u);x--;){var $=v[x],q=f[$],ne=u[$];if(ne===t&&!($ in u)||!q(ne))return!1}return!0}function _O(u,f,v){if(typeof u!="function")throw new Te(o);return vm(function(){u.apply(t,v)},f)}function fm(u,f,v,x){var $=-1,q=gl,ne=!0,he=u.length,ye=[],Ve=f.length;if(!he)return ye;v&&(f=qn(f,Vn(v))),x?(q=_o,ne=!1):f.length>=i&&(q=Ss,ne=!1,f=new qh(f));e:for(;++$<he;){var Fe=u[$],Je=v==null?Fe:v(Fe);if(Fe=x||Fe!==0?Fe:0,ne&&Je===Je){for(var gt=Ve;gt--;)if(f[gt]===Je)continue e;ye.push(Fe)}else q(f,Je,x)||ye.push(Fe)}return ye}var gu=JO(wl),xO=JO(RE,!0);function dH(u,f){var v=!0;return gu(u,function(x,$,q){return v=!!f(x,$,q),v}),v}function av(u,f,v){for(var x=-1,$=u.length;++x<$;){var q=u[x],ne=f(q);if(ne!=null&&(he===t?ne===ne&&!Ao(ne):v(ne,he)))var he=ne,ye=q}return ye}function pH(u,f,v,x){var $=u.length;for(v=un(v),v<0&&(v=-v>$?0:$+v),x=x===t||x>$?$:un(x),x<0&&(x+=$),x=v>x?0:Hk(x);v<x;)u[v++]=f;return u}function AO(u,f){var v=[];return gu(u,function(x,$,q){f(x,$,q)&&v.push(x)}),v}function Di(u,f,v,x,$){var q=-1,ne=u.length;for(v||(v=nW),$||($=[]);++q<ne;){var he=u[q];f>0&&v(he)?f>1?Di(he,f-1,v,x,$):Ks($,he):x||($[$.length]=he)}return $}var kE=QO(),IO=QO(!0);function wl(u,f){return u&&kE(u,f,xi)}function RE(u,f){return u&&IO(u,f,xi)}function lv(u,f){return _i(f,function(v){return dc(u[v])})}function Xh(u,f){f=vu(f,u);for(var v=0,x=f.length;u!=null&&v<x;)u=u[El(f[v++])];return v&&v==x?u:t}function CO(u,f,v){var x=f(u);return an(u)?x:Ks(x,v(u))}function Ts(u){return u==null?u===t?lt:Ue:Kh&&Kh in ce(u)?XH(u):cW(u)}function PE(u,f){return u>f}function mH(u,f){return u!=null&&qe.call(u,f)}function gH(u,f){return u!=null&&f in ce(u)}function yH(u,f,v){return u>=Yi(f,v)&&u<hi(f,v)}function DE(u,f,v){for(var x=v?_o:gl,$=u[0].length,q=u.length,ne=q,he=W(q),ye=1/0,Ve=[];ne--;){var Fe=u[ne];ne&&f&&(Fe=qn(Fe,Vn(f))),ye=Yi(Fe.length,ye),he[ne]=!v&&(f||$>=120&&Fe.length>=120)?new qh(ne&&Fe):t}Fe=u[0];var Je=-1,gt=he[0];e:for(;++Je<$&&Ve.length<ye;){var Dt=Fe[Je],Ut=f?f(Dt):Dt;if(Dt=v||Dt!==0?Dt:0,!(gt?Ss(gt,Ut):x(Ve,Ut,v))){for(ne=q;--ne;){var pn=he[ne];if(!(pn?Ss(pn,Ut):x(u[ne],Ut,v)))continue e}gt&&gt.push(Ut),Ve.push(Dt)}}return Ve}function vH(u,f,v,x){return wl(u,function($,q,ne){f(x,v($),q,ne)}),x}function dm(u,f,v){f=vu(f,u),u=mk(u,f);var x=u==null?u:u[El(Zo(f))];return x==null?t:Qr(x,u,v)}function OO(u){return Pr(u)&&Ts(u)==_e}function bH(u){return Pr(u)&&Ts(u)==Tt}function wH(u){return Pr(u)&&Ts(u)==me}function pm(u,f,v,x,$){return u===f?!0:u==null||f==null||!Pr(u)&&!Pr(f)?u!==u&&f!==f:SH(u,f,v,x,pm,$)}function SH(u,f,v,x,$,q){var ne=an(u),he=an(f),ye=ne?Ne:Xi(u),Ve=he?Ne:Xi(f);ye=ye==_e?ke:ye,Ve=Ve==_e?ke:Ve;var Fe=ye==ke,Je=Ve==ke,gt=ye==Ve;if(gt&&wu(u)){if(!wu(f))return!1;ne=!0,Fe=!1}if(gt&&!Fe)return q||(q=new Va),ne||md(u)?lk(u,f,v,x,$,q):qH(u,f,ye,v,x,$,q);if(!(v&w)){var Dt=Fe&&qe.call(u,"__wrapped__"),Ut=Je&&qe.call(f,"__wrapped__");if(Dt||Ut){var pn=Dt?u.value():u,$t=Ut?f.value():f;return q||(q=new Va),$(pn,$t,v,x,q)}}return gt?(q||(q=new Va),YH(u,f,v,x,$,q)):!1}function EH(u){return Pr(u)&&Xi(u)==ee}function ME(u,f,v,x){var $=v.length,q=$,ne=!x;if(u==null)return!q;for(u=ce(u);$--;){var he=v[$];if(ne&&he[2]?he[1]!==u[he[0]]:!(he[0]in u))return!1}for(;++$<q;){he=v[$];var ye=he[0],Ve=u[ye],Fe=he[1];if(ne&&he[2]){if(Ve===t&&!(ye in u))return!1}else{var Je=new Va;if(x)var gt=x(Ve,Fe,ye,u,f,Je);if(!(gt===t?pm(Fe,Ve,w|S,x,Je):gt))return!1}}return!0}function kO(u){if(!Ir(u)||iW(u))return!1;var f=dc(u)?Es:Dh;return f.test(Qh(u))}function TH(u){return Pr(u)&&Ts(u)==Xe}function _H(u){return Pr(u)&&Xi(u)==Le}function xH(u){return Pr(u)&&xv(u.length)&&!!In[Ts(u)]}function RO(u){return typeof u=="function"?u:u==null?Qs:typeof u=="object"?an(u)?MO(u[0],u[1]):DO(u):Zk(u)}function NE(u){if(!ym(u))return C9(u);var f=[];for(var v in ce(u))qe.call(u,v)&&v!="constructor"&&f.push(v);return f}function AH(u){if(!Ir(u))return lW(u);var f=ym(u),v=[];for(var x in u)x=="constructor"&&(f||!qe.call(u,x))||v.push(x);return v}function LE(u,f){return u<f}function PO(u,f){var v=-1,x=Xs(u)?W(u.length):[];return gu(u,function($,q,ne){x[++v]=f($,q,ne)}),x}function DO(u){var f=JE(u);return f.length==1&&f[0][2]?dk(f[0][0],f[0][1]):function(v){return v===u||ME(v,u,f)}}function MO(u,f){return ZE(u)&&fk(f)?dk(El(u),f):function(v){var x=cT(v,u);return x===t&&x===f?uT(v,u):pm(f,x,w|S)}}function cv(u,f,v,x,$){u!==f&&kE(f,function(q,ne){if($||($=new Va),Ir(q))IH(u,f,ne,v,cv,x,$);else{var he=x?x(tT(u,ne),q,ne+"",u,f,$):t;he===t&&(he=q),CE(u,ne,he)}},Js)}function IH(u,f,v,x,$,q,ne){var he=tT(u,v),ye=tT(f,v),Ve=ne.get(ye);if(Ve){CE(u,v,Ve);return}var Fe=q?q(he,ye,v+"",u,f,ne):t,Je=Fe===t;if(Je){var gt=an(ye),Dt=!gt&&wu(ye),Ut=!gt&&!Dt&&md(ye);Fe=ye,gt||Dt||Ut?an(he)?Fe=he:Kr(he)?Fe=Ys(he):Dt?(Je=!1,Fe=KO(ye,!0)):Ut?(Je=!1,Fe=GO(ye,!0)):Fe=[]:bm(ye)||Zh(ye)?(Fe=he,Zh(he)?Fe=Wk(he):(!Ir(he)||dc(he))&&(Fe=hk(ye))):Je=!1}Je&&(ne.set(ye,Fe),$(Fe,ye,x,q,ne),ne.delete(ye)),CE(u,v,Fe)}function NO(u,f){var v=u.length;if(v)return f+=f<0?v:0,fc(f,v)?u[f]:t}function LO(u,f,v){f.length?f=qn(f,function(q){return an(q)?function(ne){return Xh(ne,q.length===1?q[0]:q)}:q}):f=[Qs];var x=-1;f=qn(f,Vn(Ft()));var $=PO(u,function(q,ne,he){var ye=qn(f,function(Ve){return Ve(q)});return{criteria:ye,index:++x,value:q}});return Ae($,function(q,ne){return UH(q,ne,v)})}function CH(u,f){return VO(u,f,function(v,x){return uT(u,x)})}function VO(u,f,v){for(var x=-1,$=f.length,q={};++x<$;){var ne=f[x],he=Xh(u,ne);v(he,ne)&&mm(q,vu(ne,u),he)}return q}function OH(u){return function(f){return Xh(f,u)}}function VE(u,f,v,x){var $=x?Yo:Ma,q=-1,ne=f.length,he=u;for(u===f&&(f=Ys(f)),v&&(he=qn(u,Vn(v)));++q<ne;)for(var ye=0,Ve=f[q],Fe=v?v(Ve):Ve;(ye=$(he,Fe,ye,x))>-1;)he!==u&&Zy.call(he,ye,1),Zy.call(u,ye,1);return u}function FO(u,f){for(var v=u?f.length:0,x=v-1;v--;){var $=f[v];if(v==x||$!==q){var q=$;fc($)?Zy.call(u,$,1):$E(u,$)}}return u}function FE(u,f){return u+nv(vO()*(f-u+1))}function kH(u,f,v,x){for(var $=-1,q=hi(tv((f-u)/(v||1)),0),ne=W(q);q--;)ne[x?q:++$]=u,u+=v;return ne}function BE(u,f){var v="";if(!u||f<1||f>ae)return v;do f%2&&(v+=u),f=nv(f/2),f&&(u+=u);while(f);return v}function mn(u,f){return nT(pk(u,f,Qs),u+"")}function RH(u){return SO(gd(u))}function PH(u,f){var v=gd(u);return bv(v,Yh(f,0,v.length))}function mm(u,f,v,x){if(!Ir(u))return u;f=vu(f,u);for(var $=-1,q=f.length,ne=q-1,he=u;he!=null&&++$<q;){var ye=El(f[$]),Ve=v;if(ye==="__proto__"||ye==="constructor"||ye==="prototype")return u;if($!=ne){var Fe=he[ye];Ve=x?x(Fe,ye,he):t,Ve===t&&(Ve=Ir(Fe)?Fe:fc(f[$+1])?[]:{})}hm(he,ye,Ve),he=he[ye]}return u}var BO=rv?function(u,f){return rv.set(u,f),u}:Qs,DH=ev?function(u,f){return ev(u,"toString",{configurable:!0,enumerable:!1,value:fT(f),writable:!0})}:Qs;function MH(u){return bv(gd(u))}function Qo(u,f,v){var x=-1,$=u.length;f<0&&(f=-f>$?0:$+f),v=v>$?$:v,v<0&&(v+=$),$=f>v?0:v-f>>>0,f>>>=0;for(var q=W($);++x<$;)q[x]=u[x+f];return q}function NH(u,f){var v;return gu(u,function(x,$,q){return v=f(x,$,q),!v}),!!v}function uv(u,f,v){var x=0,$=u==null?x:u.length;if(typeof f=="number"&&f===f&&$<=ut){for(;x<$;){var q=x+$>>>1,ne=u[q];ne!==null&&!Ao(ne)&&(v?ne<=f:ne<f)?x=q+1:$=q}return $}return UE(u,f,Qs,v)}function UE(u,f,v,x){var $=0,q=u==null?0:u.length;if(q===0)return 0;f=v(f);for(var ne=f!==f,he=f===null,ye=Ao(f),Ve=f===t;$<q;){var Fe=nv(($+q)/2),Je=v(u[Fe]),gt=Je!==t,Dt=Je===null,Ut=Je===Je,pn=Ao(Je);if(ne)var $t=x||Ut;else Ve?$t=Ut&&(x||gt):he?$t=Ut&&gt&&(x||!Dt):ye?$t=Ut&&gt&&!Dt&&(x||!pn):Dt||pn?$t=!1:$t=x?Je<=f:Je<f;$t?$=Fe+1:q=Fe}return Yi(q,ot)}function UO(u,f){for(var v=-1,x=u.length,$=0,q=[];++v<x;){var ne=u[v],he=f?f(ne):ne;if(!v||!Fa(he,ye)){var ye=he;q[$++]=ne===0?0:ne}}return q}function $O(u){return typeof u=="number"?u:Ao(u)?He:+u}function xo(u){if(typeof u=="string")return u;if(an(u))return qn(u,xo)+"";if(Ao(u))return bO?bO.call(u):"";var f=u+"";return f=="0"&&1/u==-1/0?"-0":f}function yu(u,f,v){var x=-1,$=gl,q=u.length,ne=!0,he=[],ye=he;if(v)ne=!1,$=_o;else if(q>=i){var Ve=f?null:KH(u);if(Ve)return pu(Ve);ne=!1,$=Ss,ye=new qh}else ye=f?[]:he;e:for(;++x<q;){var Fe=u[x],Je=f?f(Fe):Fe;if(Fe=v||Fe!==0?Fe:0,ne&&Je===Je){for(var gt=ye.length;gt--;)if(ye[gt]===Je)continue e;f&&ye.push(Je),he.push(Fe)}else $(ye,Je,v)||(ye!==he&&ye.push(Je),he.push(Fe))}return he}function $E(u,f){return f=vu(f,u),u=mk(u,f),u==null||delete u[El(Zo(f))]}function HO(u,f,v,x){return mm(u,f,v(Xh(u,f)),x)}function hv(u,f,v,x){for(var $=u.length,q=x?$:-1;(x?q--:++q<$)&&f(u[q],q,u););return v?Qo(u,x?0:q,x?q+1:$):Qo(u,x?q+1:0,x?$:q)}function WO(u,f){var v=u;return v instanceof En&&(v=v.value()),Gi(f,function(x,$){return $.func.apply($.thisArg,Ks([x],$.args))},v)}function HE(u,f,v){var x=u.length;if(x<2)return x?yu(u[0]):[];for(var $=-1,q=W(x);++$<x;)for(var ne=u[$],he=-1;++he<x;)he!=$&&(q[$]=fm(q[$]||ne,u[he],f,v));return yu(Di(q,1),f,v)}function zO(u,f,v){for(var x=-1,$=u.length,q=f.length,ne={};++x<$;){var he=x<q?f[x]:t;v(ne,u[x],he)}return ne}function WE(u){return Kr(u)?u:[]}function zE(u){return typeof u=="function"?u:Qs}function vu(u,f){return an(u)?u:ZE(u,f)?[u]:bk(Yn(u))}var LH=mn;function bu(u,f,v){var x=u.length;return v=v===t?x:v,!f&&v>=x?u:Qo(u,f,v)}var jO=T9||function(u){return vr.clearTimeout(u)};function KO(u,f){if(f)return u.slice();var v=u.length,x=jh?jh(v):new u.constructor(v);return u.copy(x),x}function jE(u){var f=new u.constructor(u.byteLength);return new jr(f).set(new jr(u)),f}function VH(u,f){var v=f?jE(u.buffer):u.buffer;return new u.constructor(v,u.byteOffset,u.byteLength)}function FH(u){var f=new u.constructor(u.source,$o.exec(u));return f.lastIndex=u.lastIndex,f}function BH(u){return um?ce(um.call(u)):{}}function GO(u,f){var v=f?jE(u.buffer):u.buffer;return new u.constructor(v,u.byteOffset,u.length)}function qO(u,f){if(u!==f){var v=u!==t,x=u===null,$=u===u,q=Ao(u),ne=f!==t,he=f===null,ye=f===f,Ve=Ao(f);if(!he&&!Ve&&!q&&u>f||q&&ne&&ye&&!he&&!Ve||x&&ne&&ye||!v&&ye||!$)return 1;if(!x&&!q&&!Ve&&u<f||Ve&&v&&$&&!x&&!q||he&&v&&$||!ne&&$||!ye)return-1}return 0}function UH(u,f,v){for(var x=-1,$=u.criteria,q=f.criteria,ne=$.length,he=v.length;++x<ne;){var ye=qO($[x],q[x]);if(ye){if(x>=he)return ye;var Ve=v[x];return ye*(Ve=="desc"?-1:1)}}return u.index-f.index}function YO(u,f,v,x){for(var $=-1,q=u.length,ne=v.length,he=-1,ye=f.length,Ve=hi(q-ne,0),Fe=W(ye+Ve),Je=!x;++he<ye;)Fe[he]=f[he];for(;++$<ne;)(Je||$<q)&&(Fe[v[$]]=u[$]);for(;Ve--;)Fe[he++]=u[$++];return Fe}function XO(u,f,v,x){for(var $=-1,q=u.length,ne=-1,he=v.length,ye=-1,Ve=f.length,Fe=hi(q-he,0),Je=W(Fe+Ve),gt=!x;++$<Fe;)Je[$]=u[$];for(var Dt=$;++ye<Ve;)Je[Dt+ye]=f[ye];for(;++ne<he;)(gt||$<q)&&(Je[Dt+v[ne]]=u[$++]);return Je}function Ys(u,f){var v=-1,x=u.length;for(f||(f=W(x));++v<x;)f[v]=u[v];return f}function Sl(u,f,v,x){var $=!v;v||(v={});for(var q=-1,ne=f.length;++q<ne;){var he=f[q],ye=x?x(v[he],u[he],he,v,u):t;ye===t&&(ye=u[he]),$?cc(v,he,ye):hm(v,he,ye)}return v}function $H(u,f){return Sl(u,QE(u),f)}function HH(u,f){return Sl(u,ck(u),f)}function fv(u,f){return function(v,x){var $=an(v)?Pa:uH,q=f?f():{};return $(v,u,Ft(x,2),q)}}function fd(u){return mn(function(f,v){var x=-1,$=v.length,q=$>1?v[$-1]:t,ne=$>2?v[2]:t;for(q=u.length>3&&typeof q=="function"?($--,q):t,ne&&_s(v[0],v[1],ne)&&(q=$<3?t:q,$=1),f=ce(f);++x<$;){var he=v[x];he&&u(f,he,x,q)}return f})}function JO(u,f){return function(v,x){if(v==null)return v;if(!Xs(v))return u(v,x);for(var $=v.length,q=f?$:-1,ne=ce(v);(f?q--:++q<$)&&x(ne[q],q,ne)!==!1;);return v}}function QO(u){return function(f,v,x){for(var $=-1,q=ce(f),ne=x(f),he=ne.length;he--;){var ye=ne[u?he:++$];if(v(q[ye],ye,q)===!1)break}return f}}function WH(u,f,v){var x=f&E,$=gm(u);function q(){var ne=this&&this!==vr&&this instanceof q?$:u;return ne.apply(x?v:this,arguments)}return q}function ZO(u){return function(f){f=Yn(f);var v=La(f)?b(f):t,x=v?v[0]:f.charAt(0),$=v?bu(v,1).join(""):f.slice(1);return x[u]()+$}}function dd(u){return function(f){return Gi(Jk(Xk(f).replace(Uh,"")),u,"")}}function gm(u){return function(){var f=arguments;switch(f.length){case 0:return new u;case 1:return new u(f[0]);case 2:return new u(f[0],f[1]);case 3:return new u(f[0],f[1],f[2]);case 4:return new u(f[0],f[1],f[2],f[3]);case 5:return new u(f[0],f[1],f[2],f[3],f[4]);case 6:return new u(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new u(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var v=hd(u.prototype),x=u.apply(v,f);return Ir(x)?x:v}}function zH(u,f,v){var x=gm(u);function $(){for(var q=arguments.length,ne=W(q),he=q,ye=pd($);he--;)ne[he]=arguments[he];var Ve=q<3&&ne[0]!==ye&&ne[q-1]!==ye?[]:qi(ne,ye);if(q-=Ve.length,q<v)return ik(u,f,dv,$.placeholder,t,ne,Ve,t,t,v-q);var Fe=this&&this!==vr&&this instanceof $?x:u;return Qr(Fe,this,ne)}return $}function ek(u){return function(f,v,x){var $=ce(f);if(!Xs(f)){var q=Ft(v,3);f=xi(f),v=function(he){return q($[he],he,$)}}var ne=u(f,v,x);return ne>-1?$[q?f[ne]:ne]:t}}function tk(u){return hc(function(f){var v=f.length,x=v,$=Xo.prototype.thru;for(u&&f.reverse();x--;){var q=f[x];if(typeof q!="function")throw new Te(o);if($&&!ne&&yv(q)=="wrapper")var ne=new Xo([],!0)}for(x=ne?x:v;++x<v;){q=f[x];var he=yv(q),ye=he=="wrapper"?XE(q):t;ye&&eT(ye[0])&&ye[1]==(N|P|U|O)&&!ye[4].length&&ye[9]==1?ne=ne[yv(ye[0])].apply(ne,ye[3]):ne=q.length==1&&eT(q)?ne[he]():ne.thru(q)}return function(){var Ve=arguments,Fe=Ve[0];if(ne&&Ve.length==1&&an(Fe))return ne.plant(Fe).value();for(var Je=0,gt=v?f[Je].apply(this,Ve):Fe;++Je<v;)gt=f[Je].call(this,gt);return gt}})}function dv(u,f,v,x,$,q,ne,he,ye,Ve){var Fe=f&N,Je=f&E,gt=f&C,Dt=f&(P|F),Ut=f&A,pn=gt?t:gm(u);function $t(){for(var bn=arguments.length,On=W(bn),Io=bn;Io--;)On[Io]=arguments[Io];if(Dt)var xs=pd($t),Co=Wh(On,xs);if(x&&(On=YO(On,x,$,Dt)),q&&(On=XO(On,q,ne,Dt)),bn-=Co,Dt&&bn<Ve){var Gr=qi(On,xs);return ik(u,f,dv,$t.placeholder,v,On,Gr,he,ye,Ve-bn)}var Ba=Je?v:this,mc=gt?Ba[u]:u;return bn=On.length,he?On=uW(On,he):Ut&&bn>1&&On.reverse(),Fe&&ye<bn&&(On.length=ye),this&&this!==vr&&this instanceof $t&&(mc=pn||gm(mc)),mc.apply(Ba,On)}return $t}function nk(u,f){return function(v,x){return vH(v,u,f(x),{})}}function pv(u,f){return function(v,x){var $;if(v===t&&x===t)return f;if(v!==t&&($=v),x!==t){if($===t)return x;typeof v=="string"||typeof x=="string"?(v=xo(v),x=xo(x)):(v=$O(v),x=$O(x)),$=u(v,x)}return $}}function KE(u){return hc(function(f){return f=qn(f,Vn(Ft())),mn(function(v){var x=this;return u(f,function($){return Qr($,x,v)})})})}function mv(u,f){f=f===t?" ":xo(f);var v=f.length;if(v<2)return v?BE(f,u):f;var x=BE(f,tv(u/g(f)));return La(f)?bu(b(x),0,u).join(""):x.slice(0,u)}function jH(u,f,v,x){var $=f&E,q=gm(u);function ne(){for(var he=-1,ye=arguments.length,Ve=-1,Fe=x.length,Je=W(Fe+ye),gt=this&&this!==vr&&this instanceof ne?q:u;++Ve<Fe;)Je[Ve]=x[Ve];for(;ye--;)Je[Ve++]=arguments[++he];return Qr(gt,$?v:this,Je)}return ne}function rk(u){return function(f,v,x){return x&&typeof x!="number"&&_s(f,v,x)&&(v=x=t),f=pc(f),v===t?(v=f,f=0):v=pc(v),x=x===t?f<v?1:-1:pc(x),kH(f,v,x,u)}}function gv(u){return function(f,v){return typeof f=="string"&&typeof v=="string"||(f=ea(f),v=ea(v)),u(f,v)}}function ik(u,f,v,x,$,q,ne,he,ye,Ve){var Fe=f&P,Je=Fe?ne:t,gt=Fe?t:ne,Dt=Fe?q:t,Ut=Fe?t:q;f|=Fe?U:j,f&=~(Fe?j:U),f&L||(f&=-4);var pn=[u,f,$,Dt,Je,Ut,gt,he,ye,Ve],$t=v.apply(t,pn);return eT(u)&&gk($t,pn),$t.placeholder=x,yk($t,u,f)}function GE(u){var f=pe[u];return function(v,x){if(v=ea(v),x=x==null?0:Yi(un(x),292),x&&yO(v)){var $=(Yn(v)+"e").split("e"),q=f($[0]+"e"+(+$[1]+x));return $=(Yn(q)+"e").split("e"),+($[0]+"e"+(+$[1]-x))}return f(v)}}var KH=cd&&1/pu(new cd([,-0]))[1]==re?function(u){return new cd(u)}:mT;function sk(u){return function(f){var v=Xi(f);return v==ee?zh(f):v==Le?mu(f):Rr(f,u(f))}}function uc(u,f,v,x,$,q,ne,he){var ye=f&C;if(!ye&&typeof u!="function")throw new Te(o);var Ve=x?x.length:0;if(Ve||(f&=-97,x=$=t),ne=ne===t?ne:hi(un(ne),0),he=he===t?he:un(he),Ve-=$?$.length:0,f&j){var Fe=x,Je=$;x=$=t}var gt=ye?t:XE(u),Dt=[u,f,v,x,$,Fe,Je,q,ne,he];if(gt&&aW(Dt,gt),u=Dt[0],f=Dt[1],v=Dt[2],x=Dt[3],$=Dt[4],he=Dt[9]=Dt[9]===t?ye?0:u.length:hi(Dt[9]-Ve,0),!he&&f&(P|F)&&(f&=-25),!f||f==E)var Ut=WH(u,f,v);else f==P||f==F?Ut=zH(u,f,he):(f==U||f==(E|U))&&!$.length?Ut=jH(u,f,v,x):Ut=dv.apply(t,Dt);var pn=gt?BO:gk;return yk(pn(Ut,Dt),u,f)}function ok(u,f,v,x){return u===t||Fa(u,it[v])&&!qe.call(x,v)?f:u}function ak(u,f,v,x,$,q){return Ir(u)&&Ir(f)&&(q.set(f,u),cv(u,f,t,ak,q),q.delete(f)),u}function GH(u){return bm(u)?t:u}function lk(u,f,v,x,$,q){var ne=v&w,he=u.length,ye=f.length;if(he!=ye&&!(ne&&ye>he))return!1;var Ve=q.get(u),Fe=q.get(f);if(Ve&&Fe)return Ve==f&&Fe==u;var Je=-1,gt=!0,Dt=v&S?new qh:t;for(q.set(u,f),q.set(f,u);++Je<he;){var Ut=u[Je],pn=f[Je];if(x)var $t=ne?x(pn,Ut,Je,f,u,q):x(Ut,pn,Je,u,f,q);if($t!==t){if($t)continue;gt=!1;break}if(Dt){if(!Gs(f,function(bn,On){if(!Ss(Dt,On)&&(Ut===bn||$(Ut,bn,v,x,q)))return Dt.push(On)})){gt=!1;break}}else if(!(Ut===pn||$(Ut,pn,v,x,q))){gt=!1;break}}return q.delete(u),q.delete(f),gt}function qH(u,f,v,x,$,q,ne){switch(v){case Wt:if(u.byteLength!=f.byteLength||u.byteOffset!=f.byteOffset)return!1;u=u.buffer,f=f.buffer;case Tt:return!(u.byteLength!=f.byteLength||!q(new jr(u),new jr(f)));case Ee:case me:case be:return Fa(+u,+f);case Me:return u.name==f.name&&u.message==f.message;case Xe:case ze:return u==f+"";case ee:var he=zh;case Le:var ye=x&w;if(he||(he=pu),u.size!=f.size&&!ye)return!1;var Ve=ne.get(u);if(Ve)return Ve==f;x|=S,ne.set(u,f);var Fe=lk(he(u),he(f),x,$,q,ne);return ne.delete(u),Fe;case Et:if(um)return um.call(u)==um.call(f)}return!1}function YH(u,f,v,x,$,q){var ne=v&w,he=qE(u),ye=he.length,Ve=qE(f),Fe=Ve.length;if(ye!=Fe&&!ne)return!1;for(var Je=ye;Je--;){var gt=he[Je];if(!(ne?gt in f:qe.call(f,gt)))return!1}var Dt=q.get(u),Ut=q.get(f);if(Dt&&Ut)return Dt==f&&Ut==u;var pn=!0;q.set(u,f),q.set(f,u);for(var $t=ne;++Je<ye;){gt=he[Je];var bn=u[gt],On=f[gt];if(x)var Io=ne?x(On,bn,gt,f,u,q):x(bn,On,gt,u,f,q);if(!(Io===t?bn===On||$(bn,On,v,x,q):Io)){pn=!1;break}$t||($t=gt=="constructor")}if(pn&&!$t){var xs=u.constructor,Co=f.constructor;xs!=Co&&"constructor"in u&&"constructor"in f&&!(typeof xs=="function"&&xs instanceof xs&&typeof Co=="function"&&Co instanceof Co)&&(pn=!1)}return q.delete(u),q.delete(f),pn}function hc(u){return nT(pk(u,t,Tk),u+"")}function qE(u){return CO(u,xi,QE)}function YE(u){return CO(u,Js,ck)}var XE=rv?function(u){return rv.get(u)}:mT;function yv(u){for(var f=u.name+"",v=ud[f],x=qe.call(ud,f)?v.length:0;x--;){var $=v[x],q=$.func;if(q==null||q==u)return $.name}return f}function pd(u){var f=qe.call(K,"placeholder")?K:u;return f.placeholder}function Ft(){var u=K.iteratee||dT;return u=u===dT?RO:u,arguments.length?u(arguments[0],arguments[1]):u}function vv(u,f){var v=u.__data__;return rW(f)?v[typeof f=="string"?"string":"hash"]:v.map}function JE(u){for(var f=xi(u),v=f.length;v--;){var x=f[v],$=u[x];f[v]=[x,$,fk($)]}return f}function Jh(u,f){var v=Ar(u,f);return kO(v)?v:t}function XH(u){var f=qe.call(u,Kh),v=u[Kh];try{u[Kh]=t;var x=!0}catch{}var $=Yt.call(u);return x&&(f?u[Kh]=v:delete u[Kh]),$}var QE=xE?function(u){return u==null?[]:(u=ce(u),_i(xE(u),function(f){return ld.call(u,f)}))}:gT,ck=xE?function(u){for(var f=[];u;)Ks(f,QE(u)),u=ei(u);return f}:gT,Xi=Ts;(AE&&Xi(new AE(new ArrayBuffer(1)))!=Wt||am&&Xi(new am)!=ee||IE&&Xi(IE.resolve())!=Ke||cd&&Xi(new cd)!=Le||lm&&Xi(new lm)!=mt)&&(Xi=function(u){var f=Ts(u),v=f==ke?u.constructor:t,x=v?Qh(v):"";if(x)switch(x){case P9:return Wt;case D9:return ee;case M9:return Ke;case N9:return Le;case L9:return mt}return f});function JH(u,f,v){for(var x=-1,$=v.length;++x<$;){var q=v[x],ne=q.size;switch(q.type){case"drop":u+=ne;break;case"dropRight":f-=ne;break;case"take":f=Yi(f,u+ne);break;case"takeRight":u=hi(u,f-ne);break}}return{start:u,end:f}}function QH(u){var f=u.match(vo);return f?f[1].split(eu):[]}function uk(u,f,v){f=vu(f,u);for(var x=-1,$=f.length,q=!1;++x<$;){var ne=El(f[x]);if(!(q=u!=null&&v(u,ne)))break;u=u[ne]}return q||++x!=$?q:($=u==null?0:u.length,!!$&&xv($)&&fc(ne,$)&&(an(u)||Zh(u)))}function ZH(u){var f=u.length,v=new u.constructor(f);return f&&typeof u[0]=="string"&&qe.call(u,"index")&&(v.index=u.index,v.input=u.input),v}function hk(u){return typeof u.constructor=="function"&&!ym(u)?hd(ei(u)):{}}function eW(u,f,v){var x=u.constructor;switch(f){case Tt:return jE(u);case Ee:case me:return new x(+u);case Wt:return VH(u,v);case de:case ge:case Se:case Pe:case rt:case Ot:case Rt:case je:case tn:return GO(u,v);case ee:return new x;case be:case ze:return new x(u);case Xe:return FH(u);case Le:return new x;case Et:return BH(u)}}function tW(u,f){var v=f.length;if(!v)return u;var x=v-1;return f[x]=(v>1?"& ":"")+f[x],f=f.join(v>2?", ":" "),u.replace(Zc,`{
/* [wrapped with `+f+`] */
`)}function nW(u){return an(u)||Zh(u)||!!(gO&&u&&u[gO])}function fc(u,f){var v=typeof u;return f=f??ae,!!f&&(v=="number"||v!="symbol"&&tu.test(u))&&u>-1&&u%1==0&&u<f}function _s(u,f,v){if(!Ir(v))return!1;var x=typeof f;return(x=="number"?Xs(v)&&fc(f,v.length):x=="string"&&f in v)?Fa(v[f],u):!1}function ZE(u,f){if(an(u))return!1;var v=typeof u;return v=="number"||v=="symbol"||v=="boolean"||u==null||Ao(u)?!0:Ea.test(u)||!Bs.test(u)||f!=null&&u in ce(f)}function rW(u){var f=typeof u;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?u!=="__proto__":u===null}function eT(u){var f=yv(u),v=K[f];if(typeof v!="function"||!(f in En.prototype))return!1;if(u===v)return!0;var x=XE(v);return!!x&&u===x[0]}function iW(u){return!!_t&&_t in u}var sW=Ze?dc:yT;function ym(u){var f=u&&u.constructor,v=typeof f=="function"&&f.prototype||it;return u===v}function fk(u){return u===u&&!Ir(u)}function dk(u,f){return function(v){return v==null?!1:v[u]===f&&(f!==t||u in ce(v))}}function oW(u){var f=Tv(u,function(x){return v.size===c&&v.clear(),x}),v=f.cache;return f}function aW(u,f){var v=u[1],x=f[1],$=v|x,q=$<(E|C|N),ne=x==N&&v==P||x==N&&v==O&&u[7].length<=f[8]||x==(N|O)&&f[7].length<=f[8]&&v==P;if(!(q||ne))return u;x&E&&(u[2]=f[2],$|=v&E?0:L);var he=f[3];if(he){var ye=u[3];u[3]=ye?YO(ye,he,f[4]):he,u[4]=ye?qi(u[3],h):f[4]}return he=f[5],he&&(ye=u[5],u[5]=ye?XO(ye,he,f[6]):he,u[6]=ye?qi(u[5],h):f[6]),he=f[7],he&&(u[7]=he),x&N&&(u[8]=u[8]==null?f[8]:Yi(u[8],f[8])),u[9]==null&&(u[9]=f[9]),u[0]=f[0],u[1]=$,u}function lW(u){var f=[];if(u!=null)for(var v in ce(u))f.push(v);return f}function cW(u){return Yt.call(u)}function pk(u,f,v){return f=hi(f===t?u.length-1:f,0),function(){for(var x=arguments,$=-1,q=hi(x.length-f,0),ne=W(q);++$<q;)ne[$]=x[f+$];$=-1;for(var he=W(f+1);++$<f;)he[$]=x[$];return he[f]=v(ne),Qr(u,this,he)}}function mk(u,f){return f.length<2?u:Xh(u,Qo(f,0,-1))}function uW(u,f){for(var v=u.length,x=Yi(f.length,v),$=Ys(u);x--;){var q=f[x];u[x]=fc(q,v)?$[q]:t}return u}function tT(u,f){if(!(f==="constructor"&&typeof u[f]=="function")&&f!="__proto__")return u[f]}var gk=vk(BO),vm=x9||function(u,f){return vr.setTimeout(u,f)},nT=vk(DH);function yk(u,f,v){var x=f+"";return nT(u,tW(x,hW(QH(x),v)))}function vk(u){var f=0,v=0;return function(){var x=O9(),$=D-(x-v);if(v=x,$>0){if(++f>=V)return arguments[0]}else f=0;return u.apply(t,arguments)}}function bv(u,f){var v=-1,x=u.length,$=x-1;for(f=f===t?x:f;++v<f;){var q=FE(v,$),ne=u[q];u[q]=u[v],u[v]=ne}return u.length=f,u}var bk=oW(function(u){var f=[];return u.charCodeAt(0)===46&&f.push(""),u.replace(Hr,function(v,x,$,q){f.push($?q.replace(_a,"$1"):x||v)}),f});function El(u){if(typeof u=="string"||Ao(u))return u;var f=u+"";return f=="0"&&1/u==-1/0?"-0":f}function Qh(u){if(u!=null){try{return tt.call(u)}catch{}try{return u+""}catch{}}return""}function hW(u,f){return ui(Mt,function(v){var x="_."+v[0];f&v[1]&&!gl(u,x)&&u.push(x)}),u.sort()}function wk(u){if(u instanceof En)return u.clone();var f=new Xo(u.__wrapped__,u.__chain__);return f.__actions__=Ys(u.__actions__),f.__index__=u.__index__,f.__values__=u.__values__,f}function fW(u,f,v){(v?_s(u,f,v):f===t)?f=1:f=hi(un(f),0);var x=u==null?0:u.length;if(!x||f<1)return[];for(var $=0,q=0,ne=W(tv(x/f));$<x;)ne[q++]=Qo(u,$,$+=f);return ne}function dW(u){for(var f=-1,v=u==null?0:u.length,x=0,$=[];++f<v;){var q=u[f];q&&($[x++]=q)}return $}function pW(){var u=arguments.length;if(!u)return[];for(var f=W(u-1),v=arguments[0],x=u;x--;)f[x-1]=arguments[x];return Ks(an(v)?Ys(v):[v],Di(f,1))}var mW=mn(function(u,f){return Kr(u)?fm(u,Di(f,1,Kr,!0)):[]}),gW=mn(function(u,f){var v=Zo(f);return Kr(v)&&(v=t),Kr(u)?fm(u,Di(f,1,Kr,!0),Ft(v,2)):[]}),yW=mn(function(u,f){var v=Zo(f);return Kr(v)&&(v=t),Kr(u)?fm(u,Di(f,1,Kr,!0),t,v):[]});function vW(u,f,v){var x=u==null?0:u.length;return x?(f=v||f===t?1:un(f),Qo(u,f<0?0:f,x)):[]}function bW(u,f,v){var x=u==null?0:u.length;return x?(f=v||f===t?1:un(f),f=x-f,Qo(u,0,f<0?0:f)):[]}function wW(u,f){return u&&u.length?hv(u,Ft(f,3),!0,!0):[]}function SW(u,f){return u&&u.length?hv(u,Ft(f,3),!0):[]}function EW(u,f,v,x){var $=u==null?0:u.length;return $?(v&&typeof v!="number"&&_s(u,f,v)&&(v=0,x=$),pH(u,f,v,x)):[]}function Sk(u,f,v){var x=u==null?0:u.length;if(!x)return-1;var $=v==null?0:un(v);return $<0&&($=hi(x+$,0)),yl(u,Ft(f,3),$)}function Ek(u,f,v){var x=u==null?0:u.length;if(!x)return-1;var $=x-1;return v!==t&&($=un(v),$=v<0?hi(x+$,0):Yi($,x-1)),yl(u,Ft(f,3),$,!0)}function Tk(u){var f=u==null?0:u.length;return f?Di(u,1):[]}function TW(u){var f=u==null?0:u.length;return f?Di(u,re):[]}function _W(u,f){var v=u==null?0:u.length;return v?(f=f===t?1:un(f),Di(u,f)):[]}function xW(u){for(var f=-1,v=u==null?0:u.length,x={};++f<v;){var $=u[f];x[$[0]]=$[1]}return x}function _k(u){return u&&u.length?u[0]:t}function AW(u,f,v){var x=u==null?0:u.length;if(!x)return-1;var $=v==null?0:un(v);return $<0&&($=hi(x+$,0)),Ma(u,f,$)}function IW(u){var f=u==null?0:u.length;return f?Qo(u,0,-1):[]}var CW=mn(function(u){var f=qn(u,WE);return f.length&&f[0]===u[0]?DE(f):[]}),OW=mn(function(u){var f=Zo(u),v=qn(u,WE);return f===Zo(v)?f=t:v.pop(),v.length&&v[0]===u[0]?DE(v,Ft(f,2)):[]}),kW=mn(function(u){var f=Zo(u),v=qn(u,WE);return f=typeof f=="function"?f:t,f&&v.pop(),v.length&&v[0]===u[0]?DE(v,t,f):[]});function RW(u,f){return u==null?"":I9.call(u,f)}function Zo(u){var f=u==null?0:u.length;return f?u[f-1]:t}function PW(u,f,v){var x=u==null?0:u.length;if(!x)return-1;var $=x;return v!==t&&($=un(v),$=$<0?hi(x+$,0):Yi($,x-1)),f===f?Qy(u,f,$):yl(u,m,$,!0)}function DW(u,f){return u&&u.length?NO(u,un(f)):t}var MW=mn(xk);function xk(u,f){return u&&u.length&&f&&f.length?VE(u,f):u}function NW(u,f,v){return u&&u.length&&f&&f.length?VE(u,f,Ft(v,2)):u}function LW(u,f,v){return u&&u.length&&f&&f.length?VE(u,f,t,v):u}var VW=hc(function(u,f){var v=u==null?0:u.length,x=OE(u,f);return FO(u,qn(f,function($){return fc($,v)?+$:$}).sort(qO)),x});function FW(u,f){var v=[];if(!(u&&u.length))return v;var x=-1,$=[],q=u.length;for(f=Ft(f,3);++x<q;){var ne=u[x];f(ne,x,u)&&(v.push(ne),$.push(x))}return FO(u,$),v}function rT(u){return u==null?u:R9.call(u)}function BW(u,f,v){var x=u==null?0:u.length;return x?(v&&typeof v!="number"&&_s(u,f,v)?(f=0,v=x):(f=f==null?0:un(f),v=v===t?x:un(v)),Qo(u,f,v)):[]}function UW(u,f){return uv(u,f)}function $W(u,f,v){return UE(u,f,Ft(v,2))}function HW(u,f){var v=u==null?0:u.length;if(v){var x=uv(u,f);if(x<v&&Fa(u[x],f))return x}return-1}function WW(u,f){return uv(u,f,!0)}function zW(u,f,v){return UE(u,f,Ft(v,2),!0)}function jW(u,f){var v=u==null?0:u.length;if(v){var x=uv(u,f,!0)-1;if(Fa(u[x],f))return x}return-1}function KW(u){return u&&u.length?UO(u):[]}function GW(u,f){return u&&u.length?UO(u,Ft(f,2)):[]}function qW(u){var f=u==null?0:u.length;return f?Qo(u,1,f):[]}function YW(u,f,v){return u&&u.length?(f=v||f===t?1:un(f),Qo(u,0,f<0?0:f)):[]}function XW(u,f,v){var x=u==null?0:u.length;return x?(f=v||f===t?1:un(f),f=x-f,Qo(u,f<0?0:f,x)):[]}function JW(u,f){return u&&u.length?hv(u,Ft(f,3),!1,!0):[]}function QW(u,f){return u&&u.length?hv(u,Ft(f,3)):[]}var ZW=mn(function(u){return yu(Di(u,1,Kr,!0))}),ez=mn(function(u){var f=Zo(u);return Kr(f)&&(f=t),yu(Di(u,1,Kr,!0),Ft(f,2))}),tz=mn(function(u){var f=Zo(u);return f=typeof f=="function"?f:t,yu(Di(u,1,Kr,!0),t,f)});function nz(u){return u&&u.length?yu(u):[]}function rz(u,f){return u&&u.length?yu(u,Ft(f,2)):[]}function iz(u,f){return f=typeof f=="function"?f:t,u&&u.length?yu(u,t,f):[]}function iT(u){if(!(u&&u.length))return[];var f=0;return u=_i(u,function(v){if(Kr(v))return f=hi(v.length,f),!0}),Dn(f,function(v){return qn(u,M(v))})}function Ak(u,f){if(!(u&&u.length))return[];var v=iT(u);return f==null?v:qn(v,function(x){return Qr(f,t,x)})}var sz=mn(function(u,f){return Kr(u)?fm(u,f):[]}),oz=mn(function(u){return HE(_i(u,Kr))}),az=mn(function(u){var f=Zo(u);return Kr(f)&&(f=t),HE(_i(u,Kr),Ft(f,2))}),lz=mn(function(u){var f=Zo(u);return f=typeof f=="function"?f:t,HE(_i(u,Kr),t,f)}),cz=mn(iT);function uz(u,f){return zO(u||[],f||[],hm)}function hz(u,f){return zO(u||[],f||[],mm)}var fz=mn(function(u){var f=u.length,v=f>1?u[f-1]:t;return v=typeof v=="function"?(u.pop(),v):t,Ak(u,v)});function Ik(u){var f=K(u);return f.__chain__=!0,f}function dz(u,f){return f(u),u}function wv(u,f){return f(u)}var pz=hc(function(u){var f=u.length,v=f?u[0]:0,x=this.__wrapped__,$=function(q){return OE(q,u)};return f>1||this.__actions__.length||!(x instanceof En)||!fc(v)?this.thru($):(x=x.slice(v,+v+(f?1:0)),x.__actions__.push({func:wv,args:[$],thisArg:t}),new Xo(x,this.__chain__).thru(function(q){return f&&!q.length&&q.push(t),q}))});function mz(){return Ik(this)}function gz(){return new Xo(this.value(),this.__chain__)}function yz(){this.__values__===t&&(this.__values__=$k(this.value()));var u=this.__index__>=this.__values__.length,f=u?t:this.__values__[this.__index__++];return{done:u,value:f}}function vz(){return this}function bz(u){for(var f,v=this;v instanceof sv;){var x=wk(v);x.__index__=0,x.__values__=t,f?$.__wrapped__=x:f=x;var $=x;v=v.__wrapped__}return $.__wrapped__=u,f}function wz(){var u=this.__wrapped__;if(u instanceof En){var f=u;return this.__actions__.length&&(f=new En(this)),f=f.reverse(),f.__actions__.push({func:wv,args:[rT],thisArg:t}),new Xo(f,this.__chain__)}return this.thru(rT)}function Sz(){return WO(this.__wrapped__,this.__actions__)}var Ez=fv(function(u,f,v){qe.call(u,v)?++u[v]:cc(u,v,1)});function Tz(u,f,v){var x=an(u)?qo:dH;return v&&_s(u,f,v)&&(f=t),x(u,Ft(f,3))}function _z(u,f){var v=an(u)?_i:AO;return v(u,Ft(f,3))}var xz=ek(Sk),Az=ek(Ek);function Iz(u,f){return Di(Sv(u,f),1)}function Cz(u,f){return Di(Sv(u,f),re)}function Oz(u,f,v){return v=v===t?1:un(v),Di(Sv(u,f),v)}function Ck(u,f){var v=an(u)?ui:gu;return v(u,Ft(f,3))}function Ok(u,f){var v=an(u)?zr:xO;return v(u,Ft(f,3))}var kz=fv(function(u,f,v){qe.call(u,v)?u[v].push(f):cc(u,v,[f])});function Rz(u,f,v,x){u=Xs(u)?u:gd(u),v=v&&!x?un(v):0;var $=u.length;return v<0&&(v=hi($+v,0)),Av(u)?v<=$&&u.indexOf(f,v)>-1:!!$&&Ma(u,f,v)>-1}var Pz=mn(function(u,f,v){var x=-1,$=typeof f=="function",q=Xs(u)?W(u.length):[];return gu(u,function(ne){q[++x]=$?Qr(f,ne,v):dm(ne,f,v)}),q}),Dz=fv(function(u,f,v){cc(u,v,f)});function Sv(u,f){var v=an(u)?qn:PO;return v(u,Ft(f,3))}function Mz(u,f,v,x){return u==null?[]:(an(f)||(f=f==null?[]:[f]),v=x?t:v,an(v)||(v=v==null?[]:[v]),LO(u,f,v))}var Nz=fv(function(u,f,v){u[v?0:1].push(f)},function(){return[[],[]]});function Lz(u,f,v){var x=an(u)?Gi:ve,$=arguments.length<3;return x(u,Ft(f,4),v,$,gu)}function Vz(u,f,v){var x=an(u)?hu:ve,$=arguments.length<3;return x(u,Ft(f,4),v,$,xO)}function Fz(u,f){var v=an(u)?_i:AO;return v(u,_v(Ft(f,3)))}function Bz(u){var f=an(u)?SO:RH;return f(u)}function Uz(u,f,v){(v?_s(u,f,v):f===t)?f=1:f=un(f);var x=an(u)?lH:PH;return x(u,f)}function $z(u){var f=an(u)?cH:MH;return f(u)}function Hz(u){if(u==null)return 0;if(Xs(u))return Av(u)?g(u):u.length;var f=Xi(u);return f==ee||f==Le?u.size:NE(u).length}function Wz(u,f,v){var x=an(u)?Gs:NH;return v&&_s(u,f,v)&&(f=t),x(u,Ft(f,3))}var zz=mn(function(u,f){if(u==null)return[];var v=f.length;return v>1&&_s(u,f[0],f[1])?f=[]:v>2&&_s(f[0],f[1],f[2])&&(f=[f[0]]),LO(u,Di(f,1),[])}),Ev=_9||function(){return vr.Date.now()};function jz(u,f){if(typeof f!="function")throw new Te(o);return u=un(u),function(){if(--u<1)return f.apply(this,arguments)}}function kk(u,f,v){return f=v?t:f,f=u&&f==null?u.length:f,uc(u,N,t,t,t,t,f)}function Rk(u,f){var v;if(typeof f!="function")throw new Te(o);return u=un(u),function(){return--u>0&&(v=f.apply(this,arguments)),u<=1&&(f=t),v}}var sT=mn(function(u,f,v){var x=E;if(v.length){var $=qi(v,pd(sT));x|=U}return uc(u,x,f,v,$)}),Pk=mn(function(u,f,v){var x=E|C;if(v.length){var $=qi(v,pd(Pk));x|=U}return uc(f,x,u,v,$)});function Dk(u,f,v){f=v?t:f;var x=uc(u,P,t,t,t,t,t,f);return x.placeholder=Dk.placeholder,x}function Mk(u,f,v){f=v?t:f;var x=uc(u,F,t,t,t,t,t,f);return x.placeholder=Mk.placeholder,x}function Nk(u,f,v){var x,$,q,ne,he,ye,Ve=0,Fe=!1,Je=!1,gt=!0;if(typeof u!="function")throw new Te(o);f=ea(f)||0,Ir(v)&&(Fe=!!v.leading,Je="maxWait"in v,q=Je?hi(ea(v.maxWait)||0,f):q,gt="trailing"in v?!!v.trailing:gt);function Dt(Gr){var Ba=x,mc=$;return x=$=t,Ve=Gr,ne=u.apply(mc,Ba),ne}function Ut(Gr){return Ve=Gr,he=vm(bn,f),Fe?Dt(Gr):ne}function pn(Gr){var Ba=Gr-ye,mc=Gr-Ve,eR=f-Ba;return Je?Yi(eR,q-mc):eR}function $t(Gr){var Ba=Gr-ye,mc=Gr-Ve;return ye===t||Ba>=f||Ba<0||Je&&mc>=q}function bn(){var Gr=Ev();if($t(Gr))return On(Gr);he=vm(bn,pn(Gr))}function On(Gr){return he=t,gt&&x?Dt(Gr):(x=$=t,ne)}function Io(){he!==t&&jO(he),Ve=0,x=ye=$=he=t}function xs(){return he===t?ne:On(Ev())}function Co(){var Gr=Ev(),Ba=$t(Gr);if(x=arguments,$=this,ye=Gr,Ba){if(he===t)return Ut(ye);if(Je)return jO(he),he=vm(bn,f),Dt(ye)}return he===t&&(he=vm(bn,f)),ne}return Co.cancel=Io,Co.flush=xs,Co}var Kz=mn(function(u,f){return _O(u,1,f)}),Gz=mn(function(u,f,v){return _O(u,ea(f)||0,v)});function qz(u){return uc(u,A)}function Tv(u,f){if(typeof u!="function"||f!=null&&typeof f!="function")throw new Te(o);var v=function(){var x=arguments,$=f?f.apply(this,x):x[0],q=v.cache;if(q.has($))return q.get($);var ne=u.apply(this,x);return v.cache=q.set($,ne)||q,ne};return v.cache=new(Tv.Cache||lc),v}Tv.Cache=lc;function _v(u){if(typeof u!="function")throw new Te(o);return function(){var f=arguments;switch(f.length){case 0:return!u.call(this);case 1:return!u.call(this,f[0]);case 2:return!u.call(this,f[0],f[1]);case 3:return!u.call(this,f[0],f[1],f[2])}return!u.apply(this,f)}}function Yz(u){return Rk(2,u)}var Xz=LH(function(u,f){f=f.length==1&&an(f[0])?qn(f[0],Vn(Ft())):qn(Di(f,1),Vn(Ft()));var v=f.length;return mn(function(x){for(var $=-1,q=Yi(x.length,v);++$<q;)x[$]=f[$].call(this,x[$]);return Qr(u,this,x)})}),oT=mn(function(u,f){var v=qi(f,pd(oT));return uc(u,U,t,f,v)}),Lk=mn(function(u,f){var v=qi(f,pd(Lk));return uc(u,j,t,f,v)}),Jz=hc(function(u,f){return uc(u,O,t,t,t,f)});function Qz(u,f){if(typeof u!="function")throw new Te(o);return f=f===t?f:un(f),mn(u,f)}function Zz(u,f){if(typeof u!="function")throw new Te(o);return f=f==null?0:hi(un(f),0),mn(function(v){var x=v[f],$=bu(v,0,f);return x&&Ks($,x),Qr(u,this,$)})}function ej(u,f,v){var x=!0,$=!0;if(typeof u!="function")throw new Te(o);return Ir(v)&&(x="leading"in v?!!v.leading:x,$="trailing"in v?!!v.trailing:$),Nk(u,f,{leading:x,maxWait:f,trailing:$})}function tj(u){return kk(u,1)}function nj(u,f){return oT(zE(f),u)}function rj(){if(!arguments.length)return[];var u=arguments[0];return an(u)?u:[u]}function ij(u){return Jo(u,y)}function sj(u,f){return f=typeof f=="function"?f:t,Jo(u,y,f)}function oj(u){return Jo(u,d|y)}function aj(u,f){return f=typeof f=="function"?f:t,Jo(u,d|y,f)}function lj(u,f){return f==null||TO(u,f,xi(f))}function Fa(u,f){return u===f||u!==u&&f!==f}var cj=gv(PE),uj=gv(function(u,f){return u>=f}),Zh=OO(function(){return arguments}())?OO:function(u){return Pr(u)&&qe.call(u,"callee")&&!ld.call(u,"callee")},an=W.isArray,hj=pl?Vn(pl):bH;function Xs(u){return u!=null&&xv(u.length)&&!dc(u)}function Kr(u){return Pr(u)&&Xs(u)}function fj(u){return u===!0||u===!1||Pr(u)&&Ts(u)==Ee}var wu=A9||yT,dj=Ra?Vn(Ra):wH;function pj(u){return Pr(u)&&u.nodeType===1&&!bm(u)}function mj(u){if(u==null)return!0;if(Xs(u)&&(an(u)||typeof u=="string"||typeof u.splice=="function"||wu(u)||md(u)||Zh(u)))return!u.length;var f=Xi(u);if(f==ee||f==Le)return!u.size;if(ym(u))return!NE(u).length;for(var v in u)if(qe.call(u,v))return!1;return!0}function gj(u,f){return pm(u,f)}function yj(u,f,v){v=typeof v=="function"?v:t;var x=v?v(u,f):t;return x===t?pm(u,f,t,v):!!x}function aT(u){if(!Pr(u))return!1;var f=Ts(u);return f==Me||f==Ie||typeof u.message=="string"&&typeof u.name=="string"&&!bm(u)}function vj(u){return typeof u=="number"&&yO(u)}function dc(u){if(!Ir(u))return!1;var f=Ts(u);return f==Ye||f==X||f==oe||f==at}function Vk(u){return typeof u=="number"&&u==un(u)}function xv(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=ae}function Ir(u){var f=typeof u;return u!=null&&(f=="object"||f=="function")}function Pr(u){return u!=null&&typeof u=="object"}var Fk=ml?Vn(ml):EH;function bj(u,f){return u===f||ME(u,f,JE(f))}function wj(u,f,v){return v=typeof v=="function"?v:t,ME(u,f,JE(f),v)}function Sj(u){return Bk(u)&&u!=+u}function Ej(u){if(sW(u))throw new te(s);return kO(u)}function Tj(u){return u===null}function _j(u){return u==null}function Bk(u){return typeof u=="number"||Pr(u)&&Ts(u)==be}function bm(u){if(!Pr(u)||Ts(u)!=ke)return!1;var f=ei(u);if(f===null)return!0;var v=qe.call(f,"constructor")&&f.constructor;return typeof v=="function"&&v instanceof v&&tt.call(v)==fn}var lT=Hh?Vn(Hh):TH;function xj(u){return Vk(u)&&u>=-9007199254740991&&u<=ae}var Uk=Go?Vn(Go):_H;function Av(u){return typeof u=="string"||!an(u)&&Pr(u)&&Ts(u)==ze}function Ao(u){return typeof u=="symbol"||Pr(u)&&Ts(u)==Et}var md=uu?Vn(uu):xH;function Aj(u){return u===t}function Ij(u){return Pr(u)&&Xi(u)==mt}function Cj(u){return Pr(u)&&Ts(u)==ft}var Oj=gv(LE),kj=gv(function(u,f){return u<=f});function $k(u){if(!u)return[];if(Xs(u))return Av(u)?b(u):Ys(u);if(om&&u[om])return _E(u[om]());var f=Xi(u),v=f==ee?zh:f==Le?pu:gd;return v(u)}function pc(u){if(!u)return u===0?u:0;if(u=ea(u),u===re||u===-1/0){var f=u<0?-1:1;return f*Ce}return u===u?u:0}function un(u){var f=pc(u),v=f%1;return f===f?v?f-v:f:0}function Hk(u){return u?Yh(un(u),0,Ge):0}function ea(u){if(typeof u=="number")return u;if(Ao(u))return He;if(Ir(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=Ir(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=vn(u);var v=bo.test(u);return v||wo.test(u)?rc(u.slice(2),v?2:8):Ho.test(u)?He:+u}function Wk(u){return Sl(u,Js(u))}function Rj(u){return u?Yh(un(u),-9007199254740991,ae):u===0?u:0}function Yn(u){return u==null?"":xo(u)}var Pj=fd(function(u,f){if(ym(f)||Xs(f)){Sl(f,xi(f),u);return}for(var v in f)qe.call(f,v)&&hm(u,v,f[v])}),zk=fd(function(u,f){Sl(f,Js(f),u)}),Iv=fd(function(u,f,v,x){Sl(f,Js(f),u,x)}),Dj=fd(function(u,f,v,x){Sl(f,xi(f),u,x)}),Mj=hc(OE);function Nj(u,f){var v=hd(u);return f==null?v:EO(v,f)}var Lj=mn(function(u,f){u=ce(u);var v=-1,x=f.length,$=x>2?f[2]:t;for($&&_s(f[0],f[1],$)&&(x=1);++v<x;)for(var q=f[v],ne=Js(q),he=-1,ye=ne.length;++he<ye;){var Ve=ne[he],Fe=u[Ve];(Fe===t||Fa(Fe,it[Ve])&&!qe.call(u,Ve))&&(u[Ve]=q[Ve])}return u}),Vj=mn(function(u){return u.push(t,ak),Qr(jk,t,u)});function Fj(u,f){return Zr(u,Ft(f,3),wl)}function Bj(u,f){return Zr(u,Ft(f,3),RE)}function Uj(u,f){return u==null?u:kE(u,Ft(f,3),Js)}function $j(u,f){return u==null?u:IO(u,Ft(f,3),Js)}function Hj(u,f){return u&&wl(u,Ft(f,3))}function Wj(u,f){return u&&RE(u,Ft(f,3))}function zj(u){return u==null?[]:lv(u,xi(u))}function jj(u){return u==null?[]:lv(u,Js(u))}function cT(u,f,v){var x=u==null?t:Xh(u,f);return x===t?v:x}function Kj(u,f){return u!=null&&uk(u,f,mH)}function uT(u,f){return u!=null&&uk(u,f,gH)}var Gj=nk(function(u,f,v){f!=null&&typeof f.toString!="function"&&(f=Yt.call(f)),u[f]=v},fT(Qs)),qj=nk(function(u,f,v){f!=null&&typeof f.toString!="function"&&(f=Yt.call(f)),qe.call(u,f)?u[f].push(v):u[f]=[v]},Ft),Yj=mn(dm);function xi(u){return Xs(u)?wO(u):NE(u)}function Js(u){return Xs(u)?wO(u,!0):AH(u)}function Xj(u,f){var v={};return f=Ft(f,3),wl(u,function(x,$,q){cc(v,f(x,$,q),x)}),v}function Jj(u,f){var v={};return f=Ft(f,3),wl(u,function(x,$,q){cc(v,$,f(x,$,q))}),v}var Qj=fd(function(u,f,v){cv(u,f,v)}),jk=fd(function(u,f,v,x){cv(u,f,v,x)}),Zj=hc(function(u,f){var v={};if(u==null)return v;var x=!1;f=qn(f,function(q){return q=vu(q,u),x||(x=q.length>1),q}),Sl(u,YE(u),v),x&&(v=Jo(v,d|p|y,GH));for(var $=f.length;$--;)$E(v,f[$]);return v});function e8(u,f){return Kk(u,_v(Ft(f)))}var t8=hc(function(u,f){return u==null?{}:CH(u,f)});function Kk(u,f){if(u==null)return{};var v=qn(YE(u),function(x){return[x]});return f=Ft(f),VO(u,v,function(x,$){return f(x,$[0])})}function n8(u,f,v){f=vu(f,u);var x=-1,$=f.length;for($||($=1,u=t);++x<$;){var q=u==null?t:u[El(f[x])];q===t&&(x=$,q=v),u=dc(q)?q.call(u):q}return u}function r8(u,f,v){return u==null?u:mm(u,f,v)}function i8(u,f,v,x){return x=typeof x=="function"?x:t,u==null?u:mm(u,f,v,x)}var Gk=sk(xi),qk=sk(Js);function s8(u,f,v){var x=an(u),$=x||wu(u)||md(u);if(f=Ft(f,4),v==null){var q=u&&u.constructor;$?v=x?new q:[]:Ir(u)?v=dc(q)?hd(ei(u)):{}:v={}}return($?ui:wl)(u,function(ne,he,ye){return f(v,ne,he,ye)}),v}function o8(u,f){return u==null?!0:$E(u,f)}function a8(u,f,v){return u==null?u:HO(u,f,zE(v))}function l8(u,f,v,x){return x=typeof x=="function"?x:t,u==null?u:HO(u,f,zE(v),x)}function gd(u){return u==null?[]:br(u,xi(u))}function c8(u){return u==null?[]:br(u,Js(u))}function u8(u,f,v){return v===t&&(v=f,f=t),v!==t&&(v=ea(v),v=v===v?v:0),f!==t&&(f=ea(f),f=f===f?f:0),Yh(ea(u),f,v)}function h8(u,f,v){return f=pc(f),v===t?(v=f,f=0):v=pc(v),u=ea(u),yH(u,f,v)}function f8(u,f,v){if(v&&typeof v!="boolean"&&_s(u,f,v)&&(f=v=t),v===t&&(typeof f=="boolean"?(v=f,f=t):typeof u=="boolean"&&(v=u,u=t)),u===t&&f===t?(u=0,f=1):(u=pc(u),f===t?(f=u,u=0):f=pc(f)),u>f){var x=u;u=f,f=x}if(v||u%1||f%1){var $=vO();return Yi(u+$*(f-u+au("1e-"+(($+"").length-1))),f)}return FE(u,f)}var d8=dd(function(u,f,v){return f=f.toLowerCase(),u+(v?Yk(f):f)});function Yk(u){return hT(Yn(u).toLowerCase())}function Xk(u){return u=Yn(u),u&&u.replace(nu,TE).replace(Ko,"")}function p8(u,f,v){u=Yn(u),f=xo(f);var x=u.length;v=v===t?x:Yh(un(v),0,x);var $=v;return v-=f.length,v>=0&&u.slice(v,$)==f}function m8(u){return u=Yn(u),u&&ji.test(u)?u.replace(on,ad):u}function g8(u){return u=Yn(u),u&&Hn.test(u)?u.replace(Ta,"\\$&"):u}var y8=dd(function(u,f,v){return u+(v?"-":"")+f.toLowerCase()}),v8=dd(function(u,f,v){return u+(v?" ":"")+f.toLowerCase()}),b8=ZO("toLowerCase");function w8(u,f,v){u=Yn(u),f=un(f);var x=f?g(u):0;if(!f||x>=f)return u;var $=(f-x)/2;return mv(nv($),v)+u+mv(tv($),v)}function S8(u,f,v){u=Yn(u),f=un(f);var x=f?g(u):0;return f&&x<f?u+mv(f-x,v):u}function E8(u,f,v){u=Yn(u),f=un(f);var x=f?g(u):0;return f&&x<f?mv(f-x,v)+u:u}function T8(u,f,v){return v||f==null?f=0:f&&(f=+f),k9(Yn(u).replace(Zn,""),f||0)}function _8(u,f,v){return(v?_s(u,f,v):f===t)?f=1:f=un(f),BE(Yn(u),f)}function x8(){var u=arguments,f=Yn(u[0]);return u.length<3?f:f.replace(u[1],u[2])}var A8=dd(function(u,f,v){return u+(v?"_":"")+f.toLowerCase()});function I8(u,f,v){return v&&typeof v!="number"&&_s(u,f,v)&&(f=v=t),v=v===t?Ge:v>>>0,v?(u=Yn(u),u&&(typeof f=="string"||f!=null&&!lT(f))&&(f=xo(f),!f&&La(u))?bu(b(u),0,v):u.split(f,v)):[]}var C8=dd(function(u,f,v){return u+(v?" ":"")+hT(f)});function O8(u,f,v){return u=Yn(u),v=v==null?0:Yh(un(v),0,u.length),f=xo(f),u.slice(v,v+f.length)==f}function k8(u,f,v){var x=K.templateSettings;v&&_s(u,f,v)&&(f=t),u=Yn(u),f=Iv({},f,x,ok);var $=Iv({},f.imports,x.imports,ok),q=xi($),ne=br($,q),he,ye,Ve=0,Fe=f.interpolate||Qn,Je="__p += '",gt=we((f.escape||Qn).source+"|"+Fe.source+"|"+(Fe===Ph?Us:Qn).source+"|"+(f.evaluate||Qn).source+"|$","g"),Dt="//# sourceURL="+(qe.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++dl+"]")+`
`;u.replace(gt,function($t,bn,On,Io,xs,Co){return On||(On=Io),Je+=u.slice(Ve,Co).replace(xa,Na),bn&&(he=!0,Je+=`' +
__e(`+bn+`) +
'`),xs&&(ye=!0,Je+=`';
`+xs+`;
__p += '`),On&&(Je+=`' +
((__t = (`+On+`)) == null ? '' : __t) +
'`),Ve=Co+$t.length,$t}),Je+=`';
`;var Ut=qe.call(f,"variable")&&f.variable;if(!Ut)Je=`with (obj) {
`+Je+`
}
`;else if(ws.test(Ut))throw new te(a);Je=(ye?Je.replace(kt,""):Je).replace(At,"$1").replace(Oe,"$1;"),Je="function("+(Ut||"obj")+`) {
`+(Ut?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(he?", __e = _.escape":"")+(ye?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Je+`return __p
}`;var pn=Qk(function(){return ue(q,Dt+"return "+Je).apply(t,ne)});if(pn.source=Je,aT(pn))throw pn;return pn}function R8(u){return Yn(u).toLowerCase()}function P8(u){return Yn(u).toUpperCase()}function D8(u,f,v){if(u=Yn(u),u&&(v||f===t))return vn(u);if(!u||!(f=xo(f)))return u;var x=b(u),$=b(f),q=Pi(x,$),ne=oc(x,$)+1;return bu(x,q,ne).join("")}function M8(u,f,v){if(u=Yn(u),u&&(v||f===t))return u.slice(0,T(u)+1);if(!u||!(f=xo(f)))return u;var x=b(u),$=oc(x,b(f))+1;return bu(x,0,$).join("")}function N8(u,f,v){if(u=Yn(u),u&&(v||f===t))return u.replace(Zn,"");if(!u||!(f=xo(f)))return u;var x=b(u),$=Pi(x,b(f));return bu(x,$).join("")}function L8(u,f){var v=R,x=k;if(Ir(f)){var $="separator"in f?f.separator:$;v="length"in f?un(f.length):v,x="omission"in f?xo(f.omission):x}u=Yn(u);var q=u.length;if(La(u)){var ne=b(u);q=ne.length}if(v>=q)return u;var he=v-g(x);if(he<1)return x;var ye=ne?bu(ne,0,he).join(""):u.slice(0,he);if($===t)return ye+x;if(ne&&(he+=ye.length-he),lT($)){if(u.slice(he).search($)){var Ve,Fe=ye;for($.global||($=we($.source,Yn($o.exec($))+"g")),$.lastIndex=0;Ve=$.exec(Fe);)var Je=Ve.index;ye=ye.slice(0,Je===t?he:Je)}}else if(u.indexOf(xo($),he)!=he){var gt=ye.lastIndexOf($);gt>-1&&(ye=ye.slice(0,gt))}return ye+x}function V8(u){return u=Yn(u),u&&yr.test(u)?u.replace(zt,I):u}var F8=dd(function(u,f,v){return u+(v?" ":"")+f.toUpperCase()}),hT=ZO("toUpperCase");function Jk(u,f,v){return u=Yn(u),f=v?t:f,f===t?qs(u)?J(u):Da(u):u.match(f)||[]}var Qk=mn(function(u,f){try{return Qr(u,t,f)}catch(v){return aT(v)?v:new te(v)}}),B8=hc(function(u,f){return ui(f,function(v){v=El(v),cc(u,v,sT(u[v],u))}),u});function U8(u){var f=u==null?0:u.length,v=Ft();return u=f?qn(u,function(x){if(typeof x[1]!="function")throw new Te(o);return[v(x[0]),x[1]]}):[],mn(function(x){for(var $=-1;++$<f;){var q=u[$];if(Qr(q[0],this,x))return Qr(q[1],this,x)}})}function $8(u){return fH(Jo(u,d))}function fT(u){return function(){return u}}function H8(u,f){return u==null||u!==u?f:u}var W8=tk(),z8=tk(!0);function Qs(u){return u}function dT(u){return RO(typeof u=="function"?u:Jo(u,d))}function j8(u){return DO(Jo(u,d))}function K8(u,f){return MO(u,Jo(f,d))}var G8=mn(function(u,f){return function(v){return dm(v,u,f)}}),q8=mn(function(u,f){return function(v){return dm(u,v,f)}});function pT(u,f,v){var x=xi(f),$=lv(f,x);v==null&&!(Ir(f)&&($.length||!x.length))&&(v=f,f=u,u=this,$=lv(f,xi(f)));var q=!(Ir(v)&&"chain"in v)||!!v.chain,ne=dc(u);return ui($,function(he){var ye=f[he];u[he]=ye,ne&&(u.prototype[he]=function(){var Ve=this.__chain__;if(q||Ve){var Fe=u(this.__wrapped__),Je=Fe.__actions__=Ys(this.__actions__);return Je.push({func:ye,args:arguments,thisArg:u}),Fe.__chain__=Ve,Fe}return ye.apply(u,Ks([this.value()],arguments))})}),u}function Y8(){return vr._===this&&(vr._=dn),this}function mT(){}function X8(u){return u=un(u),mn(function(f){return NO(f,u)})}var J8=KE(qn),Q8=KE(qo),Z8=KE(Gs);function Zk(u){return ZE(u)?M(El(u)):OH(u)}function eK(u){return function(f){return u==null?t:Xh(u,f)}}var tK=rk(),nK=rk(!0);function gT(){return[]}function yT(){return!1}function rK(){return{}}function iK(){return""}function sK(){return!0}function oK(u,f){if(u=un(u),u<1||u>ae)return[];var v=Ge,x=Yi(u,Ge);f=Ft(f),u-=Ge;for(var $=Dn(x,f);++v<u;)f(v);return $}function aK(u){return an(u)?qn(u,El):Ao(u)?[u]:Ys(bk(Yn(u)))}function lK(u){var f=++ct;return Yn(u)+f}var cK=pv(function(u,f){return u+f},0),uK=GE("ceil"),hK=pv(function(u,f){return u/f},1),fK=GE("floor");function dK(u){return u&&u.length?av(u,Qs,PE):t}function pK(u,f){return u&&u.length?av(u,Ft(f,2),PE):t}function mK(u){return _(u,Qs)}function gK(u,f){return _(u,Ft(f,2))}function yK(u){return u&&u.length?av(u,Qs,LE):t}function vK(u,f){return u&&u.length?av(u,Ft(f,2),LE):t}var bK=pv(function(u,f){return u*f},1),wK=GE("round"),SK=pv(function(u,f){return u-f},0);function EK(u){return u&&u.length?st(u,Qs):0}function TK(u,f){return u&&u.length?st(u,Ft(f,2)):0}return K.after=jz,K.ary=kk,K.assign=Pj,K.assignIn=zk,K.assignInWith=Iv,K.assignWith=Dj,K.at=Mj,K.before=Rk,K.bind=sT,K.bindAll=B8,K.bindKey=Pk,K.castArray=rj,K.chain=Ik,K.chunk=fW,K.compact=dW,K.concat=pW,K.cond=U8,K.conforms=$8,K.constant=fT,K.countBy=Ez,K.create=Nj,K.curry=Dk,K.curryRight=Mk,K.debounce=Nk,K.defaults=Lj,K.defaultsDeep=Vj,K.defer=Kz,K.delay=Gz,K.difference=mW,K.differenceBy=gW,K.differenceWith=yW,K.drop=vW,K.dropRight=bW,K.dropRightWhile=wW,K.dropWhile=SW,K.fill=EW,K.filter=_z,K.flatMap=Iz,K.flatMapDeep=Cz,K.flatMapDepth=Oz,K.flatten=Tk,K.flattenDeep=TW,K.flattenDepth=_W,K.flip=qz,K.flow=W8,K.flowRight=z8,K.fromPairs=xW,K.functions=zj,K.functionsIn=jj,K.groupBy=kz,K.initial=IW,K.intersection=CW,K.intersectionBy=OW,K.intersectionWith=kW,K.invert=Gj,K.invertBy=qj,K.invokeMap=Pz,K.iteratee=dT,K.keyBy=Dz,K.keys=xi,K.keysIn=Js,K.map=Sv,K.mapKeys=Xj,K.mapValues=Jj,K.matches=j8,K.matchesProperty=K8,K.memoize=Tv,K.merge=Qj,K.mergeWith=jk,K.method=G8,K.methodOf=q8,K.mixin=pT,K.negate=_v,K.nthArg=X8,K.omit=Zj,K.omitBy=e8,K.once=Yz,K.orderBy=Mz,K.over=J8,K.overArgs=Xz,K.overEvery=Q8,K.overSome=Z8,K.partial=oT,K.partialRight=Lk,K.partition=Nz,K.pick=t8,K.pickBy=Kk,K.property=Zk,K.propertyOf=eK,K.pull=MW,K.pullAll=xk,K.pullAllBy=NW,K.pullAllWith=LW,K.pullAt=VW,K.range=tK,K.rangeRight=nK,K.rearg=Jz,K.reject=Fz,K.remove=FW,K.rest=Qz,K.reverse=rT,K.sampleSize=Uz,K.set=r8,K.setWith=i8,K.shuffle=$z,K.slice=BW,K.sortBy=zz,K.sortedUniq=KW,K.sortedUniqBy=GW,K.split=I8,K.spread=Zz,K.tail=qW,K.take=YW,K.takeRight=XW,K.takeRightWhile=JW,K.takeWhile=QW,K.tap=dz,K.throttle=ej,K.thru=wv,K.toArray=$k,K.toPairs=Gk,K.toPairsIn=qk,K.toPath=aK,K.toPlainObject=Wk,K.transform=s8,K.unary=tj,K.union=ZW,K.unionBy=ez,K.unionWith=tz,K.uniq=nz,K.uniqBy=rz,K.uniqWith=iz,K.unset=o8,K.unzip=iT,K.unzipWith=Ak,K.update=a8,K.updateWith=l8,K.values=gd,K.valuesIn=c8,K.without=sz,K.words=Jk,K.wrap=nj,K.xor=oz,K.xorBy=az,K.xorWith=lz,K.zip=cz,K.zipObject=uz,K.zipObjectDeep=hz,K.zipWith=fz,K.entries=Gk,K.entriesIn=qk,K.extend=zk,K.extendWith=Iv,pT(K,K),K.add=cK,K.attempt=Qk,K.camelCase=d8,K.capitalize=Yk,K.ceil=uK,K.clamp=u8,K.clone=ij,K.cloneDeep=oj,K.cloneDeepWith=aj,K.cloneWith=sj,K.conformsTo=lj,K.deburr=Xk,K.defaultTo=H8,K.divide=hK,K.endsWith=p8,K.eq=Fa,K.escape=m8,K.escapeRegExp=g8,K.every=Tz,K.find=xz,K.findIndex=Sk,K.findKey=Fj,K.findLast=Az,K.findLastIndex=Ek,K.findLastKey=Bj,K.floor=fK,K.forEach=Ck,K.forEachRight=Ok,K.forIn=Uj,K.forInRight=$j,K.forOwn=Hj,K.forOwnRight=Wj,K.get=cT,K.gt=cj,K.gte=uj,K.has=Kj,K.hasIn=uT,K.head=_k,K.identity=Qs,K.includes=Rz,K.indexOf=AW,K.inRange=h8,K.invoke=Yj,K.isArguments=Zh,K.isArray=an,K.isArrayBuffer=hj,K.isArrayLike=Xs,K.isArrayLikeObject=Kr,K.isBoolean=fj,K.isBuffer=wu,K.isDate=dj,K.isElement=pj,K.isEmpty=mj,K.isEqual=gj,K.isEqualWith=yj,K.isError=aT,K.isFinite=vj,K.isFunction=dc,K.isInteger=Vk,K.isLength=xv,K.isMap=Fk,K.isMatch=bj,K.isMatchWith=wj,K.isNaN=Sj,K.isNative=Ej,K.isNil=_j,K.isNull=Tj,K.isNumber=Bk,K.isObject=Ir,K.isObjectLike=Pr,K.isPlainObject=bm,K.isRegExp=lT,K.isSafeInteger=xj,K.isSet=Uk,K.isString=Av,K.isSymbol=Ao,K.isTypedArray=md,K.isUndefined=Aj,K.isWeakMap=Ij,K.isWeakSet=Cj,K.join=RW,K.kebabCase=y8,K.last=Zo,K.lastIndexOf=PW,K.lowerCase=v8,K.lowerFirst=b8,K.lt=Oj,K.lte=kj,K.max=dK,K.maxBy=pK,K.mean=mK,K.meanBy=gK,K.min=yK,K.minBy=vK,K.stubArray=gT,K.stubFalse=yT,K.stubObject=rK,K.stubString=iK,K.stubTrue=sK,K.multiply=bK,K.nth=DW,K.noConflict=Y8,K.noop=mT,K.now=Ev,K.pad=w8,K.padEnd=S8,K.padStart=E8,K.parseInt=T8,K.random=f8,K.reduce=Lz,K.reduceRight=Vz,K.repeat=_8,K.replace=x8,K.result=n8,K.round=wK,K.runInContext=H,K.sample=Bz,K.size=Hz,K.snakeCase=A8,K.some=Wz,K.sortedIndex=UW,K.sortedIndexBy=$W,K.sortedIndexOf=HW,K.sortedLastIndex=WW,K.sortedLastIndexBy=zW,K.sortedLastIndexOf=jW,K.startCase=C8,K.startsWith=O8,K.subtract=SK,K.sum=EK,K.sumBy=TK,K.template=k8,K.times=oK,K.toFinite=pc,K.toInteger=un,K.toLength=Hk,K.toLower=R8,K.toNumber=ea,K.toSafeInteger=Rj,K.toString=Yn,K.toUpper=P8,K.trim=D8,K.trimEnd=M8,K.trimStart=N8,K.truncate=L8,K.unescape=V8,K.uniqueId=lK,K.upperCase=F8,K.upperFirst=hT,K.each=Ck,K.eachRight=Ok,K.first=_k,pT(K,function(){var u={};return wl(K,function(f,v){qe.call(K.prototype,v)||(u[v]=f)}),u}(),{chain:!1}),K.VERSION=r,ui(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){K[u].placeholder=K}),ui(["drop","take"],function(u,f){En.prototype[u]=function(v){v=v===t?1:hi(un(v),0);var x=this.__filtered__&&!f?new En(this):this.clone();return x.__filtered__?x.__takeCount__=Yi(v,x.__takeCount__):x.__views__.push({size:Yi(v,Ge),type:u+(x.__dir__<0?"Right":"")}),x},En.prototype[u+"Right"]=function(v){return this.reverse()[u](v).reverse()}}),ui(["filter","map","takeWhile"],function(u,f){var v=f+1,x=v==Z||v==Q;En.prototype[u]=function($){var q=this.clone();return q.__iteratees__.push({iteratee:Ft($,3),type:v}),q.__filtered__=q.__filtered__||x,q}}),ui(["head","last"],function(u,f){var v="take"+(f?"Right":"");En.prototype[u]=function(){return this[v](1).value()[0]}}),ui(["initial","tail"],function(u,f){var v="drop"+(f?"":"Right");En.prototype[u]=function(){return this.__filtered__?new En(this):this[v](1)}}),En.prototype.compact=function(){return this.filter(Qs)},En.prototype.find=function(u){return this.filter(u).head()},En.prototype.findLast=function(u){return this.reverse().find(u)},En.prototype.invokeMap=mn(function(u,f){return typeof u=="function"?new En(this):this.map(function(v){return dm(v,u,f)})}),En.prototype.reject=function(u){return this.filter(_v(Ft(u)))},En.prototype.slice=function(u,f){u=un(u);var v=this;return v.__filtered__&&(u>0||f<0)?new En(v):(u<0?v=v.takeRight(-u):u&&(v=v.drop(u)),f!==t&&(f=un(f),v=f<0?v.dropRight(-f):v.take(f-u)),v)},En.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},En.prototype.toArray=function(){return this.take(Ge)},wl(En.prototype,function(u,f){var v=/^(?:filter|find|map|reject)|While$/.test(f),x=/^(?:head|last)$/.test(f),$=K[x?"take"+(f=="last"?"Right":""):f],q=x||/^find/.test(f);$&&(K.prototype[f]=function(){var ne=this.__wrapped__,he=x?[1]:arguments,ye=ne instanceof En,Ve=he[0],Fe=ye||an(ne),Je=function(bn){var On=$.apply(K,Ks([bn],he));return x&&gt?On[0]:On};Fe&&v&&typeof Ve=="function"&&Ve.length!=1&&(ye=Fe=!1);var gt=this.__chain__,Dt=!!this.__actions__.length,Ut=q&&!gt,pn=ye&&!Dt;if(!q&&Fe){ne=pn?ne:new En(this);var $t=u.apply(ne,he);return $t.__actions__.push({func:wv,args:[Je],thisArg:t}),new Xo($t,gt)}return Ut&&pn?u.apply(this,he):($t=this.thru(Je),Ut?x?$t.value()[0]:$t.value():$t)})}),ui(["pop","push","shift","sort","splice","unshift"],function(u){var f=Re[u],v=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",x=/^(?:pop|shift)$/.test(u);K.prototype[u]=function(){var $=arguments;if(x&&!this.__chain__){var q=this.value();return f.apply(an(q)?q:[],$)}return this[v](function(ne){return f.apply(an(ne)?ne:[],$)})}}),wl(En.prototype,function(u,f){var v=K[f];if(v){var x=v.name+"";qe.call(ud,x)||(ud[x]=[]),ud[x].push({name:f,func:v})}}),ud[dv(t,C).name]=[{name:"wrapper",func:t}],En.prototype.clone=V9,En.prototype.reverse=F9,En.prototype.value=B9,K.prototype.at=pz,K.prototype.chain=mz,K.prototype.commit=gz,K.prototype.next=yz,K.prototype.plant=bz,K.prototype.reverse=wz,K.prototype.toJSON=K.prototype.valueOf=K.prototype.value=Sz,K.prototype.first=K.prototype.head,om&&(K.prototype[om]=vz),K},fe=ie();Wr?((Wr.exports=fe)._=fe,lu._=fe):vr._=fe}).call(Die)}($m,$m.exports)),$m.exports}var Tm=Mie(),q0={exports:{}},Nie=q0.exports,RD;function Lie(){return RD||(RD=1,function(n,e){(function(t,r){n.exports=r()})(Nie,function(){var t=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",h="week",d="month",p="quarter",y="year",w="date",S="Invalid Date",E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,L={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Z){var le=["th","st","nd","rd"],Q=Z%100;return"["+Z+(le[(Q-20)%10]||le[Q]||le[0])+"]"}},P=function(Z,le,Q){var re=String(Z);return!re||re.length>=le?Z:""+Array(le+1-re.length).join(Q)+Z},F={s:P,z:function(Z){var le=-Z.utcOffset(),Q=Math.abs(le),re=Math.floor(Q/60),ae=Q%60;return(le<=0?"+":"-")+P(re,2,"0")+":"+P(ae,2,"0")},m:function Z(le,Q){if(le.date()<Q.date())return-Z(Q,le);var re=12*(Q.year()-le.year())+(Q.month()-le.month()),ae=le.clone().add(re,d),Ce=Q-ae<0,He=le.clone().add(re+(Ce?-1:1),d);return+(-(re+(Q-ae)/(Ce?ae-He:He-ae))||0)},a:function(Z){return Z<0?Math.ceil(Z)||0:Math.floor(Z)},p:function(Z){return{M:d,y,w:h,d:c,D:w,h:l,m:a,s:o,ms:s,Q:p}[Z]||String(Z||"").toLowerCase().replace(/s$/,"")},u:function(Z){return Z===void 0}},U="en",j={};j[U]=L;var N="$isDayjsObject",O=function(Z){return Z instanceof V||!(!Z||!Z[N])},A=function Z(le,Q,re){var ae;if(!le)return U;if(typeof le=="string"){var Ce=le.toLowerCase();j[Ce]&&(ae=Ce),Q&&(j[Ce]=Q,ae=Ce);var He=le.split("-");if(!ae&&He.length>1)return Z(He[0])}else{var Ge=le.name;j[Ge]=le,ae=Ge}return!re&&ae&&(U=ae),ae||!re&&U},R=function(Z,le){if(O(Z))return Z.clone();var Q=typeof le=="object"?le:{};return Q.date=Z,Q.args=arguments,new V(Q)},k=F;k.l=A,k.i=O,k.w=function(Z,le){return R(Z,{locale:le.$L,utc:le.$u,x:le.$x,$offset:le.$offset})};var V=function(){function Z(Q){this.$L=A(Q.locale,null,!0),this.parse(Q),this.$x=this.$x||Q.x||{},this[N]=!0}var le=Z.prototype;return le.parse=function(Q){this.$d=function(re){var ae=re.date,Ce=re.utc;if(ae===null)return new Date(NaN);if(k.u(ae))return new Date;if(ae instanceof Date)return new Date(ae);if(typeof ae=="string"&&!/Z$/i.test(ae)){var He=ae.match(E);if(He){var Ge=He[2]-1||0,ot=(He[7]||"0").substring(0,3);return Ce?new Date(Date.UTC(He[1],Ge,He[3]||1,He[4]||0,He[5]||0,He[6]||0,ot)):new Date(He[1],Ge,He[3]||1,He[4]||0,He[5]||0,He[6]||0,ot)}}return new Date(ae)}(Q),this.init()},le.init=function(){var Q=this.$d;this.$y=Q.getFullYear(),this.$M=Q.getMonth(),this.$D=Q.getDate(),this.$W=Q.getDay(),this.$H=Q.getHours(),this.$m=Q.getMinutes(),this.$s=Q.getSeconds(),this.$ms=Q.getMilliseconds()},le.$utils=function(){return k},le.isValid=function(){return this.$d.toString()!==S},le.isSame=function(Q,re){var ae=R(Q);return this.startOf(re)<=ae&&ae<=this.endOf(re)},le.isAfter=function(Q,re){return R(Q)<this.startOf(re)},le.isBefore=function(Q,re){return this.endOf(re)<R(Q)},le.$g=function(Q,re,ae){return k.u(Q)?this[re]:this.set(ae,Q)},le.unix=function(){return Math.floor(this.valueOf()/1e3)},le.valueOf=function(){return this.$d.getTime()},le.startOf=function(Q,re){var ae=this,Ce=!!k.u(re)||re,He=k.p(Q),Ge=function(me,Ie){var Me=k.w(ae.$u?Date.UTC(ae.$y,Ie,me):new Date(ae.$y,Ie,me),ae);return Ce?Me:Me.endOf(c)},ot=function(me,Ie){return k.w(ae.toDate()[me].apply(ae.toDate("s"),(Ce?[0,0,0,0]:[23,59,59,999]).slice(Ie)),ae)},ut=this.$W,Mt=this.$M,_e=this.$D,Ne="set"+(this.$u?"UTC":"");switch(He){case y:return Ce?Ge(1,0):Ge(31,11);case d:return Ce?Ge(1,Mt):Ge(0,Mt+1);case h:var oe=this.$locale().weekStart||0,Ee=(ut<oe?ut+7:ut)-oe;return Ge(Ce?_e-Ee:_e+(6-Ee),Mt);case c:case w:return ot(Ne+"Hours",0);case l:return ot(Ne+"Minutes",1);case a:return ot(Ne+"Seconds",2);case o:return ot(Ne+"Milliseconds",3);default:return this.clone()}},le.endOf=function(Q){return this.startOf(Q,!1)},le.$set=function(Q,re){var ae,Ce=k.p(Q),He="set"+(this.$u?"UTC":""),Ge=(ae={},ae[c]=He+"Date",ae[w]=He+"Date",ae[d]=He+"Month",ae[y]=He+"FullYear",ae[l]=He+"Hours",ae[a]=He+"Minutes",ae[o]=He+"Seconds",ae[s]=He+"Milliseconds",ae)[Ce],ot=Ce===c?this.$D+(re-this.$W):re;if(Ce===d||Ce===y){var ut=this.clone().set(w,1);ut.$d[Ge](ot),ut.init(),this.$d=ut.set(w,Math.min(this.$D,ut.daysInMonth())).$d}else Ge&&this.$d[Ge](ot);return this.init(),this},le.set=function(Q,re){return this.clone().$set(Q,re)},le.get=function(Q){return this[k.p(Q)]()},le.add=function(Q,re){var ae,Ce=this;Q=Number(Q);var He=k.p(re),Ge=function(Mt){var _e=R(Ce);return k.w(_e.date(_e.date()+Math.round(Mt*Q)),Ce)};if(He===d)return this.set(d,this.$M+Q);if(He===y)return this.set(y,this.$y+Q);if(He===c)return Ge(1);if(He===h)return Ge(7);var ot=(ae={},ae[a]=r,ae[l]=i,ae[o]=t,ae)[He]||1,ut=this.$d.getTime()+Q*ot;return k.w(ut,this)},le.subtract=function(Q,re){return this.add(-1*Q,re)},le.format=function(Q){var re=this,ae=this.$locale();if(!this.isValid())return ae.invalidDate||S;var Ce=Q||"YYYY-MM-DDTHH:mm:ssZ",He=k.z(this),Ge=this.$H,ot=this.$m,ut=this.$M,Mt=ae.weekdays,_e=ae.months,Ne=ae.meridiem,oe=function(Ie,Me,Ye,X){return Ie&&(Ie[Me]||Ie(re,Ce))||Ye[Me].slice(0,X)},Ee=function(Ie){return k.s(Ge%12||12,Ie,"0")},me=Ne||function(Ie,Me,Ye){var X=Ie<12?"AM":"PM";return Ye?X.toLowerCase():X};return Ce.replace(C,function(Ie,Me){return Me||function(Ye){switch(Ye){case"YY":return String(re.$y).slice(-2);case"YYYY":return k.s(re.$y,4,"0");case"M":return ut+1;case"MM":return k.s(ut+1,2,"0");case"MMM":return oe(ae.monthsShort,ut,_e,3);case"MMMM":return oe(_e,ut);case"D":return re.$D;case"DD":return k.s(re.$D,2,"0");case"d":return String(re.$W);case"dd":return oe(ae.weekdaysMin,re.$W,Mt,2);case"ddd":return oe(ae.weekdaysShort,re.$W,Mt,3);case"dddd":return Mt[re.$W];case"H":return String(Ge);case"HH":return k.s(Ge,2,"0");case"h":return Ee(1);case"hh":return Ee(2);case"a":return me(Ge,ot,!0);case"A":return me(Ge,ot,!1);case"m":return String(ot);case"mm":return k.s(ot,2,"0");case"s":return String(re.$s);case"ss":return k.s(re.$s,2,"0");case"SSS":return k.s(re.$ms,3,"0");case"Z":return He}return null}(Ie)||He.replace(":","")})},le.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},le.diff=function(Q,re,ae){var Ce,He=this,Ge=k.p(re),ot=R(Q),ut=(ot.utcOffset()-this.utcOffset())*r,Mt=this-ot,_e=function(){return k.m(He,ot)};switch(Ge){case y:Ce=_e()/12;break;case d:Ce=_e();break;case p:Ce=_e()/3;break;case h:Ce=(Mt-ut)/6048e5;break;case c:Ce=(Mt-ut)/864e5;break;case l:Ce=Mt/i;break;case a:Ce=Mt/r;break;case o:Ce=Mt/t;break;default:Ce=Mt}return ae?Ce:k.a(Ce)},le.daysInMonth=function(){return this.endOf(d).$D},le.$locale=function(){return j[this.$L]},le.locale=function(Q,re){if(!Q)return this.$L;var ae=this.clone(),Ce=A(Q,re,!0);return Ce&&(ae.$L=Ce),ae},le.clone=function(){return k.w(this.$d,this)},le.toDate=function(){return new Date(this.valueOf())},le.toJSON=function(){return this.isValid()?this.toISOString():null},le.toISOString=function(){return this.$d.toISOString()},le.toString=function(){return this.$d.toUTCString()},Z}(),D=V.prototype;return R.prototype=D,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",d],["$y",y],["$D",w]].forEach(function(Z){D[Z[1]]=function(le){return this.$g(le,Z[0],Z[1])}}),R.extend=function(Z,le){return Z.$i||(Z(le,V,R),Z.$i=!0),R},R.locale=A,R.isDayjs=O,R.unix=function(Z){return R(1e3*Z)},R.en=j[U],R.Ls=j,R.p={},R})}(q0)),q0.exports}var Vie=Lie();const ar=Lp(Vie);var Gv={exports:{}},PD;function Fie(){if(PD)return Gv.exports;PD=1;function n(){}return n.prototype={on:function(e,t,r){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:r}),this},once:function(e,t,r){var i=this;function s(){i.off(e,s),t.apply(r,arguments)}return s._=t,this.on(e,s,r)},emit:function(e){var t=[].slice.call(arguments,1),r=((this.e||(this.e={}))[e]||[]).slice(),i=0,s=r.length;for(i;i<s;i++)r[i].fn.apply(r[i].ctx,t);return this},off:function(e,t){var r=this.e||(this.e={}),i=r[e],s=[];if(i&&t)for(var o=0,a=i.length;o<a;o++)i[o].fn!==t&&i[o].fn._!==t&&s.push(i[o]);return s.length?r[e]=s:delete r[e],this}},Gv.exports=n,Gv.exports.TinyEmitter=n,Gv.exports}var Bie=Fie();const Uie=Lp(Bie);class $ie{constructor(e={}){this.config={localSaveDelay:e.localSaveDelay||5e3,cloudSyncDelay:e.cloudSyncDelay||3e4,maxSyncDelay:e.maxSyncDelay||3e5,minChangeThreshold:e.minChangeThreshold||10,significantChangeThreshold:e.significantChangeThreshold||100,adaptiveTiming:e.adaptiveTiming!==!1,collectMetrics:e.collectMetrics!==!1,onLocalSave:e.onLocalSave||(async()=>{}),onCloudSync:e.onCloudSync||(async()=>{}),onError:e.onError||console.error,getTimezone:e.getTimezone||(()=>ar.tz.guess())},this.state={lastContent:null,lastLocalSave:null,lastCloudSync:null,pendingChanges:!1,syncScheduled:!1,forceSyncScheduled:!1,consecutiveChanges:0,changeHistory:[],editorActiveTime:0,editorInactiveTime:0,userPatterns:{avgEditSessionLength:0,avgTimeBetweenEdits:0,typicalChangeSize:0,sessionCount:0}},this.debouncedLocalSave=Tm.debounce(this._performLocalSave.bind(this),this.config.localSaveDelay),this.debouncedCloudSync=Tm.debounce(this._performCloudSync.bind(this),this.config.cloudSyncDelay),this.forceSyncTimer=null,this.lastActivityTime=Date.now(),this.activityInterval=setInterval(()=>this._trackActivity(),5e3),this.serverDocumentTimestamps={}}async handleContentChange(e,t){this.lastActivityTime=Date.now();const r=this._calculateChangeMetrics(t);this.state.pendingChanges=!0,this.state.consecutiveChanges++,console.log(r),r.hasChanged&&(this.debouncedLocalSave(e,t),this.config.collectMetrics&&(this.state.changeHistory.push({timestamp:Date.now(),changeSize:r.changeSize,timeSinceLastChange:this.state.lastLocalSave?Date.now()-this.state.lastLocalSave:0}),this.state.changeHistory.length>100&&this.state.changeHistory.shift()));const i=this._shouldTriggerCloudSync(r);return i&&(this.debouncedCloudSync.cancel(),this.state.syncScheduled||(this.state.syncScheduled=!0,this.debouncedCloudSync(e,t))),this._ensureMaxSyncDelay(e,t),{savedLocally:r.hasChanged,scheduledForSync:i}}async forceSync(e,t){return this.debouncedLocalSave.cancel(),this.debouncedCloudSync.cancel(),await this._performLocalSave(e,t),this._performCloudSync(e,t)}async syncAll(e={}){const{forceAll:t=!1,localOnly:r=!1,initialSync:i=!1}=e;try{this.debouncedLocalSave.cancel(),this.debouncedCloudSync.cancel(),i&&!r&&await jp.download;let s=[];t?s=await this._getAllPages():s=await this._getPagesWithPendingChanges();const o={total:s.length,succeeded:0,failed:0,skipped:0,details:{}};for(const a of s)try{const{pageId:l,content:c}=a;if(!c&&!t){o.skipped++,o.details[l]={status:"skipped",reason:"no content"};continue}if(await this._performLocalSave(l,c),r)o.succeeded++,o.details[l]={status:"local-only-success"};else{const h=await this._performCloudSync(l,c);h.success?(o.succeeded++,o.details[l]={status:"success"}):(o.failed++,o.details[l]={status:"failed",error:h.error})}}catch(l){o.failed++,o.details[a.pageId]={status:"failed",error:l.message}}return this.state.lastGlobalSync=Date.now(),{success:o.failed===0,results:o}}catch(s){return this.config.onError("Error during global sync",s),{success:!1,error:s,results:{total:0,succeeded:0,failed:1,skipped:0,details:{}}}}}async _getAllPages(){try{return await mi.getPages()}catch(e){return this.config.onError("Error getting all pages",e),[]}}async _syncFromCloud(){const e=await appMetadataStorage.getItem("lastSyncTime"),t=e?new Date(e.value):new Date(0),r=await this._getCloudChangesSince(t);for(const i of r){const s=await this.db.pages.get(i.id);s?new Date(i.lastModified)>new Date(s.lastModified)&&await this.db.pages.update(i.id,{content:i.content,name:i.name,order:i.order,lastModified:i.lastModified,lastSynced:new Date().toISOString(),pendingSync:0,syncStatus:"synced"}):await this.db.pages.add({id:i.id,content:i.content,name:i.name,order:i.order,lastModified:i.lastModified,lastSynced:new Date().toISOString(),pendingSync:0,syncStatus:"synced",createdAt:i.createdAt})}await this.db.appMetadata.put({key:"lastSyncTime",value:new Date().toISOString()})}async _getCloudChangesSince(e){const t=this.config.getCurrentUserId();return(await this.firestore.collection("pages").where("userId","==",t).where("lastModified",">",e).get()).docs.map(s=>s.data())}async _getPagesWithPendingChanges(){try{return await mi.getPendingSyncPages()}catch(e){return this.config.onError("Error getting pages with pending changes",e),[]}}async prepareClose(e,t){return this.debouncedLocalSave.cancel(),this.debouncedCloudSync.cancel(),this.state.pendingChanges&&(await this._performLocalSave(e,t),await this._performCloudSync(e,t)),this.forceSyncTimer&&clearTimeout(this.forceSyncTimer),this.activityInterval&&clearInterval(this.activityInterval),!0}async handlePageDeletion(e){try{this.serverDocumentTimestamps||(this.serverDocumentTimestamps={}),this.state.currentPage===e&&(this.state.pendingChanges=!1,this.state.syncScheduled=!1,this._syncTimeout&&(clearTimeout(this._syncTimeout),this._syncTimeout=null)),await this.config.onLocalSave(e,null),console.log("SYNC MANAGER HANDLE PAGE DELECTION BEFORE CLOUD");const t=await this.config.onCloudSync(e,{pageId:e,metadata:{operation:"delete",timestamp:Date.now()},content:null,isDeleteOperation:!0},!0);return this.serverDocumentTimestamps[e]&&delete this.serverDocumentTimestamps[e],{success:t&&t.success,error:t==null?void 0:t.error}}catch(t){return this.config.onError("Error during page deletion",t),{success:!1,error:t}}}async _performLocalSave(e,t){try{console.log("performing local save");const r=Date.now();await this.config.onLocalSave(e,t),this.state.lastContent=t,this.state.lastLocalSave=Date.now();const i=Date.now()-r,s=await this.config.getTimezone(),o=ar().tz(s).format("HH:mm:ss");return{success:!0,duration:i,timestamp:o}}catch(r){return this.config.onError("Error during local save",r),{success:!1,error:r}}}async _performCloudSync(e,t){try{this.serverDocumentTimestamps||(this.serverDocumentTimestamps={});const r=this._prepareTimestampBasedSync(e,t),i=await this.config.onCloudSync(e,r);return i&&i.success?(this.state.lastCloudSync=Date.now(),this.state.pendingChanges=!1,this.state.syncScheduled=!1,this.serverDocumentTimestamps[e]=i.serverTimestamp,i.serverContent&&(this.state.lastContent=i.serverContent,this.config.onContentUpdate&&this.config.onContentUpdate(i.serverContent)),this.config.adaptiveTiming&&this._updateAdaptiveTiming(),{success:!0}):{success:!1,error:(i==null?void 0:i.error)||"Unknown server error"}}catch(r){return this.config.onError("Error during cloud sync",r),{success:!1,error:r}}}_calculateChangeMetrics(e){const t=this.state.lastContent;if(!t)return{hasChanged:!0,changeSize:e.length,isSignificant:!0};const r=!Tm.isEqual(t,e),i=Math.abs(e.length-t.length),s=i>=this.config.significantChangeThreshold;return{hasChanged:r,changeSize:i,isSignificant:s}}_shouldTriggerCloudSync(e){return e.isSignificant?!0:e.changeSize<this.config.minChangeThreshold?!1:!!((this.state.lastCloudSync?Date.now()-this.state.lastCloudSync:1/0)>this.config.cloudSyncDelay*2||this.state.consecutiveChanges>10||this.config.adaptiveTiming&&this.state.userPatterns.sessionCount>5&&this.state.consecutiveChanges>this.state.userPatterns.avgEditSessionLength*.8)}_ensureMaxSyncDelay(e,t){if(this.state.forceSyncScheduled)return;const r=this.state.lastCloudSync?Date.now()-this.state.lastCloudSync:1/0,i=Math.max(0,this.config.maxSyncDelay-r);this.state.pendingChanges&&(this.state.forceSyncScheduled=!0,this.forceSyncTimer=setTimeout(()=>{this.state.pendingChanges&&this._performCloudSync(e,t),this.state.forceSyncScheduled=!1},i))}_prepareDifferentialSync(e){if(!this.state.lastContent)return{fullSync:!0,data:e};const t={oldLength:this.state.lastContent.length,newLength:e.length};return{fullSync:!1,basedOn:this.state.lastCloudSync,diff:t}}_prepareTimestampBasedSync(e,t){const r=this.serverDocumentTimestamps[e]||0,i=this.state.lastCloudSync||0,s=!this.serverDocumentTimestamps.hasOwnProperty(e),o={localTimestamp:i,contentHash:this._calculateContentHash(t),contentLength:t.length,isFirstSync:s};return{pageId:e,metadata:o,content:t,requireFullSync:s||r>i}}_calculateContentHash(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t.toString(16)}_trackActivity(){Date.now()-this.lastActivityTime<6e4?this.state.editorActiveTime+=5:(this.state.editorInactiveTime+=5,this.state.editorActiveTime>0&&this.state.pendingChanges&&this.debouncedCloudSync.flush())}_updateAdaptiveTiming(){if(this.state.changeHistory.length<5)return;let e=0,t=0,r=0,i=0,s=[],o=[];this.state.changeHistory.forEach((a,l)=>{if(l===0)s=[a];else{const c=this.state.changeHistory[l-1];a.timestamp-c.timestamp<3e5?s.push(a):(s.length>0&&o.push(s),s=[a])}t+=a.changeSize}),s.length>0&&o.push(s),i=o.length,o.forEach(a=>{if(e+=a.length,a.length>1)for(let l=1;l<a.length;l++)r+=a[l].timestamp-a[l-1].timestamp}),i>0&&(this.state.userPatterns={avgEditSessionLength:e/i,avgTimeBetweenEdits:r/(e-i),typicalChangeSize:t/e,sessionCount:i},this._adjustTimings())}_adjustTimings(){const e=this.state.userPatterns;e.sessionCount<3||(e.avgTimeBetweenEdits<1e3?this.config.localSaveDelay=Math.min(2e3,e.avgTimeBetweenEdits*2):e.avgTimeBetweenEdits>5e3&&(this.config.localSaveDelay=Math.max(500,e.avgTimeBetweenEdits/5)),e.avgEditSessionLength<10?this.config.cloudSyncDelay=Math.max(1e4,e.avgEditSessionLength*1e3):e.avgEditSessionLength>50&&(this.config.cloudSyncDelay=Math.min(6e4,e.avgEditSessionLength*500)),this.debouncedLocalSave=Tm.debounce(this._performLocalSave.bind(this),this.config.localSaveDelay),this.debouncedCloudSync=Tm.debounce(this._performCloudSync.bind(this),this.config.cloudSyncDelay))}getMetrics(){return{lastLocalSave:this.state.lastLocalSave,lastCloudSync:this.state.lastCloudSync,pendingChanges:this.state.pendingChanges,consecutiveChanges:this.state.consecutiveChanges,userPatterns:this.state.userPatterns,timing:{localSaveDelay:this.config.localSaveDelay,cloudSyncDelay:this.config.cloudSyncDelay,maxSyncDelay:this.config.maxSyncDelay}}}}const Hie=(n,e,t={})=>{const r=new Uie,i=new $ie({onLocalSave:async(s,o)=>{const a=Wie(s);if(!(!a||!o))return await n.savePage(a,o,(t==null?void 0:t.vaultKey)||null),r.emit("localSaveComplete"),!0},onCloudSync:async(s,o,a=!1)=>{const l=t.onCloudSync||jp;try{console.log("SYNC MANAGER HANDLE PAGE DELECTION SYNC CLOUD: ",a);const c=await l(s,o,a);return{success:c==null?void 0:c.success,error:c==null?void 0:c.error}}catch(c){return console.error("Cloud sync error:",c),{success:!1,error:c}}},getTimezone:async()=>await e.getItem("selectedTimezone")||ar.tz.guess(),localSaveDelay:5e3,cloudSyncDelay:3e4,maxSyncDelay:3e5,minChangeThreshold:10,significantChangeThreshold:100,adaptiveTiming:!0,collectMetrics:!0});return{handleContentChange:(s,o)=>i.handleContentChange(s,o),forceSync:(s,o)=>i.forceSync(s,o),prepareClose:(s,o)=>i.prepareClose(s,o),handlePageDeletion:s=>i.handlePageDeletion(s),getMetrics:()=>i.getMetrics(),syncAll:s=>i.syncAll(s),on:(s,o)=>r.on(s,o),off:(s,o)=>r.off(s,o)}},Wie=n=>n?String(n).trim():null;function zie(n,e){return Hie(n,e)}const jie={__name:"splitpanes",props:{horizontal:{type:Boolean,default:!1},pushOtherPanes:{type:Boolean,default:!0},maximizePanes:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean,default:!1}},emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click","splitter-dblclick"],setup(n,{emit:e}){const t=e,r=n,i=VL(),s=Nt([]),o=gn(()=>s.value.reduce((oe,Ee)=>(oe[~~Ee.id]=Ee)&&oe,{})),a=gn(()=>s.value.length),l=Nt(null),c=Nt(!1),h=Nt({mouseDown:!1,dragging:!1,activeSplitter:null,cursorOffset:0}),d=Nt({splitter:null,timeoutId:null}),p=gn(()=>({[`splitpanes splitpanes--${r.horizontal?"horizontal":"vertical"}`]:!0,"splitpanes--dragging":h.value.dragging})),y=()=>{document.addEventListener("mousemove",E,{passive:!1}),document.addEventListener("mouseup",C),"ontouchstart"in window&&(document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("touchend",C))},w=()=>{document.removeEventListener("mousemove",E,{passive:!1}),document.removeEventListener("mouseup",C),"ontouchstart"in window&&(document.removeEventListener("touchmove",E,{passive:!1}),document.removeEventListener("touchend",C))},S=(oe,Ee)=>{const me=oe.target.closest(".splitpanes__splitter");if(me){const{left:Ie,top:Me}=me.getBoundingClientRect(),{clientX:Ye,clientY:X}="ontouchstart"in window&&oe.touches?oe.touches[0]:oe;h.value.cursorOffset=r.horizontal?X-Me:Ye-Ie}y(),h.value.mouseDown=!0,h.value.activeSplitter=Ee},E=oe=>{h.value.mouseDown&&(oe.preventDefault(),h.value.dragging=!0,requestAnimationFrame(()=>{N(U(oe)),_e("resize",{event:oe},!0)}))},C=oe=>{h.value.dragging&&_e("resized",{event:oe},!0),h.value.mouseDown=!1,h.value.activeSplitter=null,setTimeout(()=>{h.value.dragging=!1,w()},100)},L=(oe,Ee)=>{"ontouchstart"in window&&(oe.preventDefault(),d.value.splitter===Ee?(clearTimeout(d.value.timeoutId),d.value.timeoutId=null,P(oe,Ee),d.value.splitter=null):(d.value.splitter=Ee,d.value.timeoutId=setTimeout(()=>d.value.splitter=null,500))),h.value.dragging||_e("splitter-click",{event:oe,index:Ee},!0)},P=(oe,Ee)=>{if(_e("splitter-dblclick",{event:oe,index:Ee},!0),r.maximizePanes){let me=0;s.value=s.value.map((Ie,Me)=>(Ie.size=Me===Ee?Ie.max:Ie.min,Me!==Ee&&(me+=Ie.min),Ie)),s.value[Ee].size-=me,_e("pane-maximize",{event:oe,index:Ee,pane:s.value[Ee]}),_e("resized",{event:oe,index:Ee},!0)}},F=(oe,Ee)=>{_e("pane-click",{event:oe,index:o.value[Ee].index,pane:o.value[Ee]})},U=oe=>{const Ee=l.value.getBoundingClientRect(),{clientX:me,clientY:Ie}="ontouchstart"in window&&oe.touches?oe.touches[0]:oe;return{x:me-(r.horizontal?0:h.value.cursorOffset)-Ee.left,y:Ie-(r.horizontal?h.value.cursorOffset:0)-Ee.top}},j=oe=>{oe=oe[r.horizontal?"y":"x"];const Ee=l.value[r.horizontal?"clientHeight":"clientWidth"];return r.rtl&&!r.horizontal&&(oe=Ee-oe),oe*100/Ee},N=oe=>{const Ee=h.value.activeSplitter;let me={prevPanesSize:A(Ee),nextPanesSize:R(Ee),prevReachedMinPanes:0,nextReachedMinPanes:0};const Ie=0+(r.pushOtherPanes?0:me.prevPanesSize),Me=100-(r.pushOtherPanes?0:me.nextPanesSize),Ye=Math.max(Math.min(j(oe),Me),Ie);let X=[Ee,Ee+1],ee=s.value[X[0]]||null,be=s.value[X[1]]||null;const Ue=ee.max<100&&Ye>=ee.max+me.prevPanesSize,ke=be.max<100&&Ye<=100-(be.max+R(Ee+1));if(Ue||ke){Ue?(ee.size=ee.max,be.size=Math.max(100-ee.max-me.prevPanesSize-me.nextPanesSize,0)):(ee.size=Math.max(100-be.max-me.prevPanesSize-R(Ee+1),0),be.size=be.max);return}if(r.pushOtherPanes){const Ke=O(me,Ye);if(!Ke)return;({sums:me,panesToResize:X}=Ke),ee=s.value[X[0]]||null,be=s.value[X[1]]||null}ee!==null&&(ee.size=Math.min(Math.max(Ye-me.prevPanesSize-me.prevReachedMinPanes,ee.min),ee.max)),be!==null&&(be.size=Math.min(Math.max(100-Ye-me.nextPanesSize-me.nextReachedMinPanes,be.min),be.max))},O=(oe,Ee)=>{const me=h.value.activeSplitter,Ie=[me,me+1];return Ee<oe.prevPanesSize+s.value[Ie[0]].min&&(Ie[0]=k(me).index,oe.prevReachedMinPanes=0,Ie[0]<me&&s.value.forEach((Me,Ye)=>{Ye>Ie[0]&&Ye<=me&&(Me.size=Me.min,oe.prevReachedMinPanes+=Me.min)}),oe.prevPanesSize=A(Ie[0]),Ie[0]===void 0)?(oe.prevReachedMinPanes=0,s.value[0].size=s.value[0].min,s.value.forEach((Me,Ye)=>{Ye>0&&Ye<=me&&(Me.size=Me.min,oe.prevReachedMinPanes+=Me.min)}),s.value[Ie[1]].size=100-oe.prevReachedMinPanes-s.value[0].min-oe.prevPanesSize-oe.nextPanesSize,null):Ee>100-oe.nextPanesSize-s.value[Ie[1]].min&&(Ie[1]=V(me).index,oe.nextReachedMinPanes=0,Ie[1]>me+1&&s.value.forEach((Me,Ye)=>{Ye>me&&Ye<Ie[1]&&(Me.size=Me.min,oe.nextReachedMinPanes+=Me.min)}),oe.nextPanesSize=R(Ie[1]-1),Ie[1]===void 0)?(oe.nextReachedMinPanes=0,s.value.forEach((Me,Ye)=>{Ye<a.value-1&&Ye>=me+1&&(Me.size=Me.min,oe.nextReachedMinPanes+=Me.min)}),s.value[Ie[0]].size=100-oe.prevPanesSize-R(Ie[0]-1),null):{sums:oe,panesToResize:Ie}},A=oe=>s.value.reduce((Ee,me,Ie)=>Ee+(Ie<oe?me.size:0),0),R=oe=>s.value.reduce((Ee,me,Ie)=>Ee+(Ie>oe+1?me.size:0),0),k=oe=>[...s.value].reverse().find(Ee=>Ee.index<oe&&Ee.size>Ee.min)||{},V=oe=>s.value.find(Ee=>Ee.index>oe+1&&Ee.size>Ee.min)||{},D=()=>{var oe;const Ee=Array.from(((oe=l.value)==null?void 0:oe.children)||[]);for(const me of Ee){const Ie=me.classList.contains("splitpanes__pane"),Me=me.classList.contains("splitpanes__splitter");!Ie&&!Me&&(me.remove(),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))}},Z=(oe,Ee,me=!1)=>{const Ie=oe-1,Me=document.createElement("div");Me.classList.add("splitpanes__splitter"),me||(Me.onmousedown=Ye=>S(Ye,Ie),typeof window<"u"&&"ontouchstart"in window&&(Me.ontouchstart=Ye=>S(Ye,Ie)),Me.onclick=Ye=>L(Ye,Ie+1)),Me.ondblclick=Ye=>P(Ye,Ie+1),Ee.parentNode.insertBefore(Me,Ee)},le=oe=>{oe.onmousedown=void 0,oe.onclick=void 0,oe.ondblclick=void 0,oe.remove()},Q=()=>{var oe;const Ee=Array.from(((oe=l.value)==null?void 0:oe.children)||[]);for(const Ie of Ee)Ie.className.includes("splitpanes__splitter")&&le(Ie);let me=0;for(const Ie of Ee)Ie.className.includes("splitpanes__pane")&&(!me&&r.firstSplitter?Z(me,Ie,!0):me&&Z(me,Ie),me++)},re=({uid:oe,...Ee})=>{const me=o.value[oe];for(const[Ie,Me]of Object.entries(Ee))me[Ie]=Me},ae=oe=>{var Ee;let me=-1;Array.from(((Ee=l.value)==null?void 0:Ee.children)||[]).some(Ie=>(Ie.className.includes("splitpanes__pane")&&me++,Ie.isSameNode(oe.el))),s.value.splice(me,0,{...oe,index:me}),s.value.forEach((Ie,Me)=>Ie.index=Me),c.value&&Qa(()=>{Q(),He({addedPane:s.value[me]}),_e("pane-add",{pane:s.value[me]})})},Ce=oe=>{const Ee=s.value.findIndex(Ie=>Ie.id===oe);s.value[Ee].el=null;const me=s.value.splice(Ee,1)[0];s.value.forEach((Ie,Me)=>Ie.index=Me),Qa(()=>{Q(),_e("pane-remove",{pane:me}),He({removedPane:{...me}})})},He=(oe={})=>{!oe.addedPane&&!oe.removedPane?ot():s.value.some(Ee=>Ee.givenSize!==null||Ee.min||Ee.max<100)?ut(oe):Ge(),c.value&&_e("resized")},Ge=()=>{const oe=100/a.value;let Ee=0;const me=[],Ie=[];for(const Me of s.value)Me.size=Math.max(Math.min(oe,Me.max),Me.min),Ee-=Me.size,Me.size>=Me.max&&me.push(Me.id),Me.size<=Me.min&&Ie.push(Me.id);Ee>.1&&Mt(Ee,me,Ie)},ot=()=>{let oe=100;const Ee=[],me=[];let Ie=0;for(const Ye of s.value)oe-=Ye.size,Ye.givenSize!==null&&Ie++,Ye.size>=Ye.max&&Ee.push(Ye.id),Ye.size<=Ye.min&&me.push(Ye.id);let Me=100;if(oe>.1){for(const Ye of s.value)Ye.givenSize===null&&(Ye.size=Math.max(Math.min(oe/(a.value-Ie),Ye.max),Ye.min)),Me-=Ye.size;Me>.1&&Mt(Me,Ee,me)}},ut=({addedPane:oe,removedPane:Ee}={})=>{let me=100/a.value,Ie=0;const Me=[],Ye=[];((oe==null?void 0:oe.givenSize)??null)!==null&&(me=(100-oe.givenSize)/(a.value-1));for(const X of s.value)Ie-=X.size,X.size>=X.max&&Me.push(X.id),X.size<=X.min&&Ye.push(X.id);if(!(Math.abs(Ie)<.1)){for(const X of s.value)(oe==null?void 0:oe.givenSize)!==null&&(oe==null?void 0:oe.id)===X.id||(X.size=Math.max(Math.min(me,X.max),X.min)),Ie-=X.size,X.size>=X.max&&Me.push(X.id),X.size<=X.min&&Ye.push(X.id);Ie>.1&&Mt(Ie,Me,Ye)}},Mt=(oe,Ee,me)=>{let Ie;oe>0?Ie=oe/(a.value-Ee.length):Ie=oe/(a.value-me.length),s.value.forEach((Me,Ye)=>{if(oe>0&&!Ee.includes(Me.id)){const X=Math.max(Math.min(Me.size+Ie,Me.max),Me.min),ee=X-Me.size;oe-=ee,Me.size=X}else if(!me.includes(Me.id)){const X=Math.max(Math.min(Me.size+Ie,Me.max),Me.min),ee=X-Me.size;oe-=ee,Me.size=X}}),Math.abs(oe)>.1&&Qa(()=>{c.value&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})},_e=(oe,Ee=void 0,me=!1)=>{const Ie=(Ee==null?void 0:Ee.index)??h.value.activeSplitter??null;t(oe,{...Ee,...Ie!==null&&{index:Ie},...me&&Ie!==null&&{prevPane:s.value[Ie-(r.firstSplitter?1:0)],nextPane:s.value[Ie+(r.firstSplitter?0:1)]},panes:s.value.map(Me=>({min:Me.min,max:Me.max,size:Me.size}))})};wi(()=>r.firstSplitter,()=>Q()),Fs(()=>{D(),Q(),He(),_e("ready"),c.value=!0}),Qf(()=>c.value=!1);const Ne=()=>{var oe;return LA("div",{ref:l,class:p.value},(oe=i.default)==null?void 0:oe.call(i))};return kl("panes",s),kl("indexedPanes",o),kl("horizontal",gn(()=>r.horizontal)),kl("requestUpdate",re),kl("onPaneAdd",ae),kl("onPaneRemove",Ce),kl("onPaneClick",F),(oe,Ee)=>(nt(),Za(NL(Ne)))}},Kie={__name:"pane",props:{size:{type:[Number,String]},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},setup(n){var e;const t=n,r=ks("requestUpdate"),i=ks("onPaneAdd"),s=ks("horizontal"),o=ks("onPaneRemove"),a=ks("onPaneClick"),l=(e=vs())==null?void 0:e.uid,c=ks("indexedPanes"),h=gn(()=>c.value[l]),d=Nt(null),p=gn(()=>{const E=isNaN(t.size)||t.size===void 0?0:parseFloat(t.size);return Math.max(Math.min(E,w.value),y.value)}),y=gn(()=>{const E=parseFloat(t.minSize);return isNaN(E)?0:E}),w=gn(()=>{const E=parseFloat(t.maxSize);return isNaN(E)?100:E}),S=gn(()=>{var E;return`${s.value?"height":"width"}: ${(E=h.value)==null?void 0:E.size}%`});return wi(()=>p.value,E=>r({uid:l,size:E})),wi(()=>y.value,E=>r({uid:l,min:E})),wi(()=>w.value,E=>r({uid:l,max:E})),Fs(()=>{i({id:l,el:d.value,min:y.value,max:w.value,givenSize:t.size===void 0?null:p.value,size:p.value})}),Qf(()=>o(l)),(E,C)=>(nt(),pt("div",{ref_key:"paneEl",ref:d,class:"splitpanes__pane",onClick:C[0]||(C[0]=L=>sa(a)(L,E._.uid)),style:Xf(S.value)},[LL(E.$slots,"default")],4))}},go=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},Gie={name:"SideToggleButton",props:{isSidebarOpen:{type:Boolean,required:!0}},emits:["toggleSidebar"],setup(){return{}}};function qie(n,e,t,r,i,s){return nt(),pt("button",{onClick:e[0]||(e[0]=o=>n.$emit("toggleSidebar")),selected:"false",class:"tsb p-1 w-8 h-8 text-zinc-500 dark:text-zinc-400 border-transparent focus:border-transparent focus:ring-0 rounded z-30 transition-colors hover:bg-zinc-200 dark:hover:bg-zinc-700 hover:text-zinc-700 dark:hover:text-zinc-300"},e[1]||(e[1]=[DA('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="-1 -1 26 26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg>',1)]))}const Yie=go(Gie,[["render",qie]]),Xie={name:"EventToggleButton",props:{isEventbarOpen:{type:Boolean,required:!0}},emits:["toggleEventbar"],setup(){return{}}};function Jie(n,e,t,r,i,s){return nt(),pt("button",{onClick:e[0]||(e[0]=o=>n.$emit("toggleEventbar")),selected:"false",class:"tsb p-1 w-8 h-8 text-zinc-500 dark:text-zinc-400 border-transparent focus:border-transparent focus:ring-0 rounded z-30 transition-colors hover:bg-zinc-200 dark:hover:bg-zinc-700 hover:text-zinc-700 dark:hover:text-zinc-300"},e[1]||(e[1]=[Qe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-5 w-5"},[Qe("path",{d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]))}const Qie=go(Xie,[["render",Jie]]),Zie={name:"DarkToggleButton",props:{isDark:{type:Boolean,required:!0},toggleDark:{type:Function,required:!0}},setup(n){return{}}},ese={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},tse={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"};function nse(n,e,t,r,i,s){return nt(),pt("button",{role:"button",title:"Toggle dark mode",class:"rounded relative tsb p-1 w-8 h-8 text-zinc-500 dark:text-zinc-400 border-transparent focus:border-transparent focus:ring-0 rounded z-30 transition-colors hover:bg-zinc-200 dark:hover:bg-zinc-700 hover:text-zinc-700 dark:hover:text-zinc-300",onClick:e[0]||(e[0]=o=>t.toggleDark())},[t.isDark?Br("",!0):(nt(),pt("svg",ese,e[1]||(e[1]=[Qe("path",{"fill-rule":"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z","clip-rule":"evenodd"},null,-1)]))),t.isDark?(nt(),pt("svg",tse,e[2]||(e[2]=[Qe("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"},null,-1)]))):Br("",!0)])}const rse=go(Zie,[["render",nse]]),ise={name:"GoogleAuthButton",setup(){const n=Nt(null),e=Nt(!1),t=async()=>{if(!e.value){e.value=!0;try{const s=new xc,o=await zQ(Mc,s);n.value=o.user}catch(s){s.code==="auth/cancelled-popup-request"?console.warn("Popup request was canceled."):s.code==="auth/popup-closed-by-user"?console.warn("Popup closed by user."):console.error("Error signing in:",s)}finally{e.value=!1}}},r=async()=>{try{await _Q(Mc),Sie(),n.value=null}catch(s){console.error("Error signing out:",s)}},i=()=>{LF(Mc,s=>{n.value=s})};return Fs(()=>{i()}),{user:n,loginWithGoogle:t,logout:r}}},sse=["src"];function ose(n,e,t,r,i,s){return r.user?(nt(),pt(lr,{key:1},[Qe("img",{src:r.user.photoURL,alt:"User Avatar",class:"tsb p-1 w-8 h-8 w-5 h-5 rounded-full"},null,8,sse),Qe("button",{onClick:e[1]||(e[1]=(...o)=>r.logout&&r.logout(...o)),class:"tsb p-1 w-8 h-8 text-zinc-500 dark:text-zinc-400 border-transparent focus:border-transparent focus:ring-0 rounded z-30 transition-colors hover:bg-zinc-200 dark:hover:bg-zinc-700 hover:text-zinc-700 dark:hover:text-zinc-300 text-sm"},e[3]||(e[3]=[Qe("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Qe("path",{d:"M9 15l-5-5 5-5"}),Qe("path",{d:"M4 10h12"}),Qe("path",{d:"M17 3h3v18h-3"})],-1)]))],64)):(nt(),pt("button",{key:0,onClick:e[0]||(e[0]=(...o)=>r.loginWithGoogle&&r.loginWithGoogle(...o)),class:"tsb p-1 w-8 h-8 text-zinc-500 dark:text-zinc-400 border-transparent focus:border-transparent focus:ring-0 rounded z-30 transition-colors hover:bg-zinc-200 dark:hover:bg-zinc-700 hover:text-zinc-700 dark:hover:text-zinc-300"},e[2]||(e[2]=[Qe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"h-5 w-5","stroke-linecap":"round","stroke-linejoin":"round"},[Qe("circle",{cx:"12",cy:"8",r:"4"}),Qe("path",{d:"M4 20v-2a4 4 0 0 1 4-4h4"}),Qe("path",{d:"M16 16l4-4-4-4"})],-1)])))}const ase=go(ise,[["render",ose],["__scopeId","data-v-f9e9bd69"]]);class rd extends Error{}class lse extends rd{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class cse extends rd{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class use extends rd{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class $d extends rd{}class fU extends rd{constructor(e){super(`Invalid unit ${e}`)}}class rs extends rd{}class Tu extends rd{constructor(){super("Zone is an abstract class")}}const yt="numeric",il="short",Bo="long",ow={year:yt,month:yt,day:yt},dU={year:yt,month:il,day:yt},hse={year:yt,month:il,day:yt,weekday:il},pU={year:yt,month:Bo,day:yt},mU={year:yt,month:Bo,day:yt,weekday:Bo},gU={hour:yt,minute:yt},yU={hour:yt,minute:yt,second:yt},vU={hour:yt,minute:yt,second:yt,timeZoneName:il},bU={hour:yt,minute:yt,second:yt,timeZoneName:Bo},wU={hour:yt,minute:yt,hourCycle:"h23"},SU={hour:yt,minute:yt,second:yt,hourCycle:"h23"},EU={hour:yt,minute:yt,second:yt,hourCycle:"h23",timeZoneName:il},TU={hour:yt,minute:yt,second:yt,hourCycle:"h23",timeZoneName:Bo},_U={year:yt,month:yt,day:yt,hour:yt,minute:yt},xU={year:yt,month:yt,day:yt,hour:yt,minute:yt,second:yt},AU={year:yt,month:il,day:yt,hour:yt,minute:yt},IU={year:yt,month:il,day:yt,hour:yt,minute:yt,second:yt},fse={year:yt,month:il,day:yt,weekday:il,hour:yt,minute:yt},CU={year:yt,month:Bo,day:yt,hour:yt,minute:yt,timeZoneName:il},OU={year:yt,month:Bo,day:yt,hour:yt,minute:yt,second:yt,timeZoneName:il},kU={year:yt,month:Bo,day:yt,weekday:Bo,hour:yt,minute:yt,timeZoneName:Bo},RU={year:yt,month:Bo,day:yt,weekday:Bo,hour:yt,minute:yt,second:yt,timeZoneName:Bo};class Dy{get type(){throw new Tu}get name(){throw new Tu}get ianaName(){return this.name}get isUniversal(){throw new Tu}offsetName(e,t){throw new Tu}formatOffset(e,t){throw new Tu}offset(e){throw new Tu}equals(e){throw new Tu}get isValid(){throw new Tu}}let JT=null;class WS extends Dy{static get instance(){return JT===null&&(JT=new WS),JT}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return UU(e,t,r)}formatOffset(e,t){return dg(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let Y0={};function dse(n){return Y0[n]||(Y0[n]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Y0[n]}const pse={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function mse(n,e){const t=n.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,i,s,o,a,l,c,h]=r;return[o,i,s,a,l,c,h]}function gse(n,e){const t=n.formatToParts(e),r=[];for(let i=0;i<t.length;i++){const{type:s,value:o}=t[i],a=pse[s];s==="era"?r[a]=o:Xt(a)||(r[a]=parseInt(o,10))}return r}let qv={};class Kc extends Dy{static create(e){return qv[e]||(qv[e]=new Kc(e)),qv[e]}static resetCache(){qv={},Y0={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Kc.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return UU(e,t,r,this.name)}formatOffset(e,t){return dg(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const r=dse(this.name);let[i,s,o,a,l,c,h]=r.formatToParts?gse(r,t):mse(r,t);a==="BC"&&(i=-Math.abs(i)+1);const p=jS({year:i,month:s,day:o,hour:l===24?0:l,minute:c,second:h,millisecond:0});let y=+t;const w=y%1e3;return y-=w>=0?w:1e3+w,(p-y)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let DD={};function yse(n,e={}){const t=JSON.stringify([n,e]);let r=DD[t];return r||(r=new Intl.ListFormat(n,e),DD[t]=r),r}let G_={};function q_(n,e={}){const t=JSON.stringify([n,e]);let r=G_[t];return r||(r=new Intl.DateTimeFormat(n,e),G_[t]=r),r}let Y_={};function vse(n,e={}){const t=JSON.stringify([n,e]);let r=Y_[t];return r||(r=new Intl.NumberFormat(n,e),Y_[t]=r),r}let X_={};function bse(n,e={}){const{base:t,...r}=e,i=JSON.stringify([n,r]);let s=X_[i];return s||(s=new Intl.RelativeTimeFormat(n,e),X_[i]=s),s}let Hm=null;function wse(){return Hm||(Hm=new Intl.DateTimeFormat().resolvedOptions().locale,Hm)}let MD={};function Sse(n){let e=MD[n];if(!e){const t=new Intl.Locale(n);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,MD[n]=e}return e}function Ese(n){const e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));const t=n.indexOf("-u-");if(t===-1)return[n];{let r,i;try{r=q_(n).resolvedOptions(),i=n}catch{const l=n.substring(0,t);r=q_(l).resolvedOptions(),i=l}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function Tse(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+=`-ca-${t}`),e&&(n+=`-nu-${e}`)),n}function _se(n){const e=[];for(let t=1;t<=12;t++){const r=Kt.utc(2009,t,1);e.push(n(r))}return e}function xse(n){const e=[];for(let t=1;t<=7;t++){const r=Kt.utc(2016,11,13+t);e.push(n(r))}return e}function Yv(n,e,t,r){const i=n.listingMode();return i==="error"?null:i==="en"?t(e):r(e)}function Ase(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||new Intl.DateTimeFormat(n.intl).resolvedOptions().numberingSystem==="latn"}class Ise{constructor(e,t,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!t||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=vse(e,a)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):QI(e,3);return ii(t,this.padTo)}}}class Cse{constructor(e,t,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Kc.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=q_(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:r}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Ose{constructor(e,t,r){this.opts={style:"long",...r},!t&&FU()&&(this.rtf=bse(e,r))}format(e,t){return this.rtf?this.rtf.format(e,t):Qse(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const kse={firstDay:1,minimalDays:4,weekend:[6,7]};class Xn{static fromOpts(e){return Xn.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,r,i,s=!1){const o=e||Lr.defaultLocale,a=o||(s?"en-US":wse()),l=t||Lr.defaultNumberingSystem,c=r||Lr.defaultOutputCalendar,h=J_(i)||Lr.defaultWeekSettings;return new Xn(a,l,c,h,o)}static resetCache(){Hm=null,G_={},Y_={},X_={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:r,weekSettings:i}={}){return Xn.create(e,t,r,i)}constructor(e,t,r,i,s){const[o,a,l]=Ese(e);this.locale=o,this.numberingSystem=t||a||null,this.outputCalendar=r||l||null,this.weekSettings=i,this.intl=Tse(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Ase(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Xn.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,J_(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Yv(this,e,WU,()=>{const r=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=_se(s=>this.extract(s,r,"month"))),this.monthsCache[i][e]})}weekdays(e,t=!1){return Yv(this,e,KU,()=>{const r=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=xse(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return Yv(this,void 0,()=>GU,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Kt.utc(2016,11,13,9),Kt.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Yv(this,e,qU,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[Kt.utc(-40,1,1),Kt.utc(2017,1,1)].map(r=>this.extract(r,t,"era"))),this.eraCache[e]})}extract(e,t,r){const i=this.dtFormatter(e,t),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new Ise(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new Cse(e,this.intl,t)}relFormatter(e={}){return new Ose(this.intl,this.isEnglish(),e)}listFormatter(e={}){return yse(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:BU()?Sse(this.locale):kse}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let QT=null;class Ds extends Dy{static get utcInstance(){return QT===null&&(QT=new Ds(0)),QT}static instance(e){return e===0?Ds.utcInstance:new Ds(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new Ds(KS(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${dg(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${dg(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return dg(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class Rse extends Dy{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Uu(n,e){if(Xt(n)||n===null)return e;if(n instanceof Dy)return n;if(Vse(n)){const t=n.toLowerCase();return t==="default"?e:t==="local"||t==="system"?WS.instance:t==="utc"||t==="gmt"?Ds.utcInstance:Ds.parseSpecifier(t)||Kc.create(n)}else return rh(n)?Ds.instance(n):typeof n=="object"&&"offset"in n&&typeof n.offset=="function"?n:new Rse(n)}const qI={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},ND={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Pse=qI.hanidec.replace(/[\[|\]]/g,"").split("");function Dse(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);if(n[t].search(qI.hanidec)!==-1)e+=Pse.indexOf(n[t]);else for(const i in ND){const[s,o]=ND[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}let Md={};function Mse(){Md={}}function Ua({numberingSystem:n},e=""){const t=n||"latn";return Md[t]||(Md[t]={}),Md[t][e]||(Md[t][e]=new RegExp(`${qI[t]}${e}`)),Md[t][e]}let LD=()=>Date.now(),VD="system",FD=null,BD=null,UD=null,$D=60,HD,WD=null;class Lr{static get now(){return LD}static set now(e){LD=e}static set defaultZone(e){VD=e}static get defaultZone(){return Uu(VD,WS.instance)}static get defaultLocale(){return FD}static set defaultLocale(e){FD=e}static get defaultNumberingSystem(){return BD}static set defaultNumberingSystem(e){BD=e}static get defaultOutputCalendar(){return UD}static set defaultOutputCalendar(e){UD=e}static get defaultWeekSettings(){return WD}static set defaultWeekSettings(e){WD=J_(e)}static get twoDigitCutoffYear(){return $D}static set twoDigitCutoffYear(e){$D=e%100}static get throwOnInvalid(){return HD}static set throwOnInvalid(e){HD=e}static resetCaches(){Xn.resetCache(),Kc.resetCache(),Kt.resetCache(),Mse()}}class qa{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const PU=[0,31,59,90,120,151,181,212,243,273,304,334],DU=[0,31,60,91,121,152,182,213,244,274,305,335];function oa(n,e){return new qa("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${n}, which is invalid`)}function YI(n,e,t){const r=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function MU(n,e,t){return t+(My(n)?DU:PU)[e-1]}function NU(n,e){const t=My(n)?DU:PU,r=t.findIndex(s=>s<e),i=e-t[r];return{month:r+1,day:i}}function XI(n,e){return(n-e+7)%7+1}function aw(n,e=4,t=1){const{year:r,month:i,day:s}=n,o=MU(r,i,s),a=XI(YI(r,i,s),t);let l=Math.floor((o-a+14-e)/7),c;return l<1?(c=r-1,l=Kg(c,e,t)):l>Kg(r,e,t)?(c=r+1,l=1):c=r,{weekYear:c,weekNumber:l,weekday:a,...GS(n)}}function zD(n,e=4,t=1){const{weekYear:r,weekNumber:i,weekday:s}=n,o=XI(YI(r,1,e),t),a=Qd(r);let l=i*7+s-o-7+e,c;l<1?(c=r-1,l+=Qd(c)):l>a?(c=r+1,l-=Qd(r)):c=r;const{month:h,day:d}=NU(c,l);return{year:c,month:h,day:d,...GS(n)}}function ZT(n){const{year:e,month:t,day:r}=n,i=MU(e,t,r);return{year:e,ordinal:i,...GS(n)}}function jD(n){const{year:e,ordinal:t}=n,{month:r,day:i}=NU(e,t);return{year:e,month:r,day:i,...GS(n)}}function KD(n,e){if(!Xt(n.localWeekday)||!Xt(n.localWeekNumber)||!Xt(n.localWeekYear)){if(!Xt(n.weekday)||!Xt(n.weekNumber)||!Xt(n.weekYear))throw new $d("Cannot mix locale-based week fields with ISO-based week fields");return Xt(n.localWeekday)||(n.weekday=n.localWeekday),Xt(n.localWeekNumber)||(n.weekNumber=n.localWeekNumber),Xt(n.localWeekYear)||(n.weekYear=n.localWeekYear),delete n.localWeekday,delete n.localWeekNumber,delete n.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Nse(n,e=4,t=1){const r=zS(n.weekYear),i=aa(n.weekNumber,1,Kg(n.weekYear,e,t)),s=aa(n.weekday,1,7);return r?i?s?!1:oa("weekday",n.weekday):oa("week",n.weekNumber):oa("weekYear",n.weekYear)}function Lse(n){const e=zS(n.year),t=aa(n.ordinal,1,Qd(n.year));return e?t?!1:oa("ordinal",n.ordinal):oa("year",n.year)}function LU(n){const e=zS(n.year),t=aa(n.month,1,12),r=aa(n.day,1,lw(n.year,n.month));return e?t?r?!1:oa("day",n.day):oa("month",n.month):oa("year",n.year)}function VU(n){const{hour:e,minute:t,second:r,millisecond:i}=n,s=aa(e,0,23)||e===24&&t===0&&r===0&&i===0,o=aa(t,0,59),a=aa(r,0,59),l=aa(i,0,999);return s?o?a?l?!1:oa("millisecond",i):oa("second",r):oa("minute",t):oa("hour",e)}function Xt(n){return typeof n>"u"}function rh(n){return typeof n=="number"}function zS(n){return typeof n=="number"&&n%1===0}function Vse(n){return typeof n=="string"}function Fse(n){return Object.prototype.toString.call(n)==="[object Date]"}function FU(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function BU(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Bse(n){return Array.isArray(n)?n:[n]}function GD(n,e,t){if(n.length!==0)return n.reduce((r,i)=>{const s=[e(i),i];return r&&t(r[0],s[0])===r[0]?r:s},null)[1]}function Use(n,e){return e.reduce((t,r)=>(t[r]=n[r],t),{})}function bp(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function J_(n){if(n==null)return null;if(typeof n!="object")throw new rs("Week settings must be an object");if(!aa(n.firstDay,1,7)||!aa(n.minimalDays,1,7)||!Array.isArray(n.weekend)||n.weekend.some(e=>!aa(e,1,7)))throw new rs("Invalid week settings");return{firstDay:n.firstDay,minimalDays:n.minimalDays,weekend:Array.from(n.weekend)}}function aa(n,e,t){return zS(n)&&n>=e&&n<=t}function $se(n,e){return n-e*Math.floor(n/e)}function ii(n,e=2){const t=n<0;let r;return t?r="-"+(""+-n).padStart(e,"0"):r=(""+n).padStart(e,"0"),r}function Pu(n){if(!(Xt(n)||n===null||n===""))return parseInt(n,10)}function nf(n){if(!(Xt(n)||n===null||n===""))return parseFloat(n)}function JI(n){if(!(Xt(n)||n===null||n==="")){const e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function QI(n,e,t=!1){const r=10**e;return(t?Math.trunc:Math.round)(n*r)/r}function My(n){return n%4===0&&(n%100!==0||n%400===0)}function Qd(n){return My(n)?366:365}function lw(n,e){const t=$se(e-1,12)+1,r=n+(e-t)/12;return t===2?My(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function jS(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(n.year,n.month-1,n.day)),+e}function qD(n,e,t){return-XI(YI(n,1,e),t)+e-1}function Kg(n,e=4,t=1){const r=qD(n,e,t),i=qD(n+1,e,t);return(Qd(n)-r+i)/7}function Q_(n){return n>99?n:n>Lr.twoDigitCutoffYear?1900+n:2e3+n}function UU(n,e,t,r=null){const i=new Date(n),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(t,o).formatToParts(i).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function KS(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);const r=parseInt(e,10)||0,i=t<0||Object.is(t,-0)?-r:r;return t*60+i}function $U(n){const e=Number(n);if(typeof n=="boolean"||n===""||Number.isNaN(e))throw new rs(`Invalid unit value ${n}`);return e}function cw(n,e){const t={};for(const r in n)if(bp(n,r)){const i=n[r];if(i==null)continue;t[e(r)]=$U(i)}return t}function dg(n,e){const t=Math.trunc(Math.abs(n/60)),r=Math.trunc(Math.abs(n%60)),i=n>=0?"+":"-";switch(e){case"short":return`${i}${ii(t,2)}:${ii(r,2)}`;case"narrow":return`${i}${t}${r>0?`:${r}`:""}`;case"techie":return`${i}${ii(t,2)}${ii(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function GS(n){return Use(n,["hour","minute","second","millisecond"])}const Hse=["January","February","March","April","May","June","July","August","September","October","November","December"],HU=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Wse=["J","F","M","A","M","J","J","A","S","O","N","D"];function WU(n){switch(n){case"narrow":return[...Wse];case"short":return[...HU];case"long":return[...Hse];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const zU=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],jU=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],zse=["M","T","W","T","F","S","S"];function KU(n){switch(n){case"narrow":return[...zse];case"short":return[...jU];case"long":return[...zU];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const GU=["AM","PM"],jse=["Before Christ","Anno Domini"],Kse=["BC","AD"],Gse=["B","A"];function qU(n){switch(n){case"narrow":return[...Gse];case"short":return[...Kse];case"long":return[...jse];default:return null}}function qse(n){return GU[n.hour<12?0:1]}function Yse(n,e){return KU(e)[n.weekday-1]}function Xse(n,e){return WU(e)[n.month-1]}function Jse(n,e){return qU(e)[n.year<0?0:1]}function Qse(n,e,t="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&s){const d=n==="days";switch(e){case 1:return d?"tomorrow":`next ${i[n][0]}`;case-1:return d?"yesterday":`last ${i[n][0]}`;case 0:return d?"today":`this ${i[n][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=i[n],h=r?l?c[1]:c[2]||c[1]:l?i[n][0]:n;return o?`${a} ${h} ago`:`in ${a} ${h}`}function YD(n,e){let t="";for(const r of n)r.literal?t+=r.val:t+=e(r.val);return t}const Zse={D:ow,DD:dU,DDD:pU,DDDD:mU,t:gU,tt:yU,ttt:vU,tttt:bU,T:wU,TT:SU,TTT:EU,TTTT:TU,f:_U,ff:AU,fff:CU,ffff:kU,F:xU,FF:IU,FFF:OU,FFFF:RU};class us{static create(e,t={}){return new us(e,t)}static parseFormat(e){let t=null,r="",i=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),t=null,r="",i=!i):i||a===t?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,t=a)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return Zse[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return ii(e,t);const r={...this.opts};return t>0&&(r.padTo=t),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,t){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(y,w)=>this.loc.extract(e,y,w),o=y=>e.isOffsetFixed&&e.offset===0&&y.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,y.format):"",a=()=>r?qse(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(y,w)=>r?Xse(e,y):s(w?{month:y}:{month:y,day:"numeric"},"month"),c=(y,w)=>r?Yse(e,y):s(w?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),h=y=>{const w=us.macroTokenToFormatOpts(y);return w?this.formatWithSystemDefault(e,w):y},d=y=>r?Jse(e,y):s({era:y},"era"),p=y=>{switch(y){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return h(y)}};return YD(us.parseFormat(t),p)}formatDurationFromString(e,t){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=l=>c=>{const h=r(c);return h?this.num(l.get(h),c.length):c},s=us.parseFormat(t),o=s.reduce((l,{literal:c,val:h})=>c?l:l.concat(h),[]),a=e.shiftTo(...o.map(r).filter(l=>l));return YD(s,i(a))}}const YU=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Kp(...n){const e=n.reduce((t,r)=>t+r.source,"");return RegExp(`^${e}$`)}function Gp(...n){return e=>n.reduce(([t,r,i],s)=>{const[o,a,l]=s(e,i);return[{...t,...o},a||r,l]},[{},null,1]).slice(0,2)}function qp(n,...e){if(n==null)return[null,null];for(const[t,r]of e){const i=t.exec(n);if(i)return r(i)}return[null,null]}function XU(...n){return(e,t)=>{const r={};let i;for(i=0;i<n.length;i++)r[n[i]]=Pu(e[t+i]);return[r,null,t+i]}}const JU=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,eoe=`(?:${JU.source}?(?:\\[(${YU.source})\\])?)?`,ZI=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,QU=RegExp(`${ZI.source}${eoe}`),eC=RegExp(`(?:T${QU.source})?`),toe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,noe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,roe=/(\d{4})-?(\d{3})/,ioe=XU("weekYear","weekNumber","weekDay"),soe=XU("year","ordinal"),ooe=/(\d{4})-(\d\d)-(\d\d)/,ZU=RegExp(`${ZI.source} ?(?:${JU.source}|(${YU.source}))?`),aoe=RegExp(`(?: ${ZU.source})?`);function Zd(n,e,t){const r=n[e];return Xt(r)?t:Pu(r)}function loe(n,e){return[{year:Zd(n,e),month:Zd(n,e+1,1),day:Zd(n,e+2,1)},null,e+3]}function Yp(n,e){return[{hours:Zd(n,e,0),minutes:Zd(n,e+1,0),seconds:Zd(n,e+2,0),milliseconds:JI(n[e+3])},null,e+4]}function Ny(n,e){const t=!n[e]&&!n[e+1],r=KS(n[e+1],n[e+2]),i=t?null:Ds.instance(r);return[{},i,e+3]}function Ly(n,e){const t=n[e]?Kc.create(n[e]):null;return[{},t,e+1]}const coe=RegExp(`^T?${ZI.source}$`),uoe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function hoe(n){const[e,t,r,i,s,o,a,l,c]=n,h=e[0]==="-",d=l&&l[0]==="-",p=(y,w=!1)=>y!==void 0&&(w||y&&h)?-y:y;return[{years:p(nf(t)),months:p(nf(r)),weeks:p(nf(i)),days:p(nf(s)),hours:p(nf(o)),minutes:p(nf(a)),seconds:p(nf(l),l==="-0"),milliseconds:p(JI(c),d)}]}const foe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function tC(n,e,t,r,i,s,o){const a={year:e.length===2?Q_(Pu(e)):Pu(e),month:HU.indexOf(t)+1,day:Pu(r),hour:Pu(i),minute:Pu(s)};return o&&(a.second=Pu(o)),n&&(a.weekday=n.length>3?zU.indexOf(n)+1:jU.indexOf(n)+1),a}const doe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function poe(n){const[,e,t,r,i,s,o,a,l,c,h,d]=n,p=tC(e,i,r,t,s,o,a);let y;return l?y=foe[l]:c?y=0:y=KS(h,d),[p,new Ds(y)]}function moe(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const goe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,yoe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,voe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function XD(n){const[,e,t,r,i,s,o,a]=n;return[tC(e,i,r,t,s,o,a),Ds.utcInstance]}function boe(n){const[,e,t,r,i,s,o,a]=n;return[tC(e,a,t,r,i,s,o),Ds.utcInstance]}const woe=Kp(toe,eC),Soe=Kp(noe,eC),Eoe=Kp(roe,eC),Toe=Kp(QU),e3=Gp(loe,Yp,Ny,Ly),_oe=Gp(ioe,Yp,Ny,Ly),xoe=Gp(soe,Yp,Ny,Ly),Aoe=Gp(Yp,Ny,Ly);function Ioe(n){return qp(n,[woe,e3],[Soe,_oe],[Eoe,xoe],[Toe,Aoe])}function Coe(n){return qp(moe(n),[doe,poe])}function Ooe(n){return qp(n,[goe,XD],[yoe,XD],[voe,boe])}function koe(n){return qp(n,[uoe,hoe])}const Roe=Gp(Yp);function Poe(n){return qp(n,[coe,Roe])}const Doe=Kp(ooe,aoe),Moe=Kp(ZU),Noe=Gp(Yp,Ny,Ly);function Loe(n){return qp(n,[Doe,e3],[Moe,Noe])}const JD="Invalid Duration",t3={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Voe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...t3},na=146097/400,wd=146097/4800,Foe={years:{quarters:4,months:12,weeks:na/7,days:na,hours:na*24,minutes:na*24*60,seconds:na*24*60*60,milliseconds:na*24*60*60*1e3},quarters:{months:3,weeks:na/28,days:na/4,hours:na*24/4,minutes:na*24*60/4,seconds:na*24*60*60/4,milliseconds:na*24*60*60*1e3/4},months:{weeks:wd/7,days:wd,hours:wd*24,minutes:wd*24*60,seconds:wd*24*60*60,milliseconds:wd*24*60*60*1e3},...t3},gf=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Boe=gf.slice(0).reverse();function _u(n,e,t=!1){const r={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new Fn(r)}function n3(n,e){let t=e.milliseconds??0;for(const r of Boe.slice(1))e[r]&&(t+=e[r]*n[r].milliseconds);return t}function QD(n,e){const t=n3(n,e)<0?-1:1;gf.reduceRight((r,i)=>{if(Xt(e[i]))return r;if(r){const s=e[r]*t,o=n[i][r],a=Math.floor(s/o);e[i]+=a*t,e[r]-=a*o*t}return i},null),gf.reduce((r,i)=>{if(Xt(e[i]))return r;if(r){const s=e[r]%1;e[r]-=s,e[i]+=s*n[r][i]}return i},null)}function Uoe(n){const e={};for(const[t,r]of Object.entries(n))r!==0&&(e[t]=r);return e}class Fn{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let r=t?Foe:Voe;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Xn.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,t){return Fn.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new rs(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Fn({values:cw(e,Fn.normalizeUnit),loc:Xn.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(rh(e))return Fn.fromMillis(e);if(Fn.isDuration(e))return e;if(typeof e=="object")return Fn.fromObject(e);throw new rs(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[r]=koe(e);return r?Fn.fromObject(r,t):Fn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[r]=Poe(e);return r?Fn.fromObject(r,t):Fn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new rs("need to specify a reason the Duration is invalid");const r=e instanceof qa?e:new qa(e,t);if(Lr.throwOnInvalid)throw new use(r);return new Fn({invalid:r})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new fU(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const r={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?us.create(this.loc,r).formatDurationFromString(this,e):JD}toHuman(e={}){if(!this.isValid)return JD;const t=gf.map(r=>{const i=this.values[r];return Xt(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=QI(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Kt.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?n3(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=Fn.fromDurationLike(e),r={};for(const i of gf)(bp(t.values,i)||bp(this.values,i))&&(r[i]=t.get(i)+this.get(i));return _u(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const t=Fn.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=$U(e(this.values[r],r));return _u(this,{values:t},!0)}get(e){return this[Fn.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...cw(e,Fn.normalizeUnit)};return _u(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:i,conversionAccuracy:r};return _u(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return QD(this.matrix,e),_u(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=Uoe(this.normalize().shiftToAll().toObject());return _u(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Fn.normalizeUnit(o));const t={},r={},i=this.toObject();let s;for(const o of gf)if(e.indexOf(o)>=0){s=o;let a=0;for(const c in r)a+=this.matrix[c][o]*r[c],r[c]=0;rh(i[o])&&(a+=i[o]);const l=Math.trunc(a);t[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else rh(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(t[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return QD(this.matrix,t),_u(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return _u(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of gf)if(!t(this.values[r],e.values[r]))return!1;return!0}}const Sd="Invalid Interval";function $oe(n,e){return!n||!n.isValid?Nr.invalid("missing or invalid start"):!e||!e.isValid?Nr.invalid("missing or invalid end"):e<n?Nr.invalid("end before start",`The end of an interval must be after its start, but you had start=${n.toISO()} and end=${e.toISO()}`):null}class Nr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new rs("need to specify a reason the Interval is invalid");const r=e instanceof qa?e:new qa(e,t);if(Lr.throwOnInvalid)throw new cse(r);return new Nr({invalid:r})}static fromDateTimes(e,t){const r=_m(e),i=_m(t),s=$oe(r,i);return s??new Nr({start:r,end:i})}static after(e,t){const r=Fn.fromDurationLike(t),i=_m(e);return Nr.fromDateTimes(i,i.plus(r))}static before(e,t){const r=Fn.fromDurationLike(t),i=_m(e);return Nr.fromDateTimes(i.minus(r),i)}static fromISO(e,t){const[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=Kt.fromISO(r,t),o=s.isValid}catch{o=!1}let a,l;try{a=Kt.fromISO(i,t),l=a.isValid}catch{l=!1}if(o&&l)return Nr.fromDateTimes(s,a);if(o){const c=Fn.fromISO(i,t);if(c.isValid)return Nr.after(s,c)}else if(l){const c=Fn.fromISO(r,t);if(c.isValid)return Nr.before(a,c)}}return Nr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const r=this.start.startOf(e,t);let i;return t!=null&&t.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,t),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?Nr.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(_m).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=t[s]||this.e,a=+o>+this.e?this.e:o;r.push(Nr.fromDateTimes(i,a)),i=a,s+=1}return r}splitBy(e){const t=Fn.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(t.mapUnits(l=>l*i));s=+a>+this.e?this.e:a,o.push(Nr.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return t>=r?null:Nr.fromDateTimes(t,r)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Nr.fromDateTimes(t,r)}static merge(e){const[t,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&t.push(r),t}static xor(e){let t=null,r=0;const i=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?t=l.time:(t&&+t!=+l.time&&i.push(Nr.fromDateTimes(t,l.time)),t=null);return Nr.merge(i)}difference(...e){return Nr.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Sd}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=ow,t={}){return this.isValid?us.create(this.s.loc.clone(t),e).formatInterval(this):Sd}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Sd}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Sd}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Sd}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:Sd}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):Fn.invalid(this.invalidReason)}mapEndpoints(e){return Nr.fromDateTimes(e(this.s),e(this.e))}}class Xv{static hasDST(e=Lr.defaultZone){const t=Kt.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Kc.isValidZone(e)}static normalizeZone(e){return Uu(e,Lr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||Xn.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||Xn.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||Xn.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Xn.create(t,r,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Xn.create(t,r,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Xn.create(t,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Xn.create(t,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Xn.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Xn.create(t,null,"gregory").eras(e)}static features(){return{relative:FU(),localeWeek:BU()}}}function ZD(n,e){const t=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=t(e)-t(n);return Math.floor(Fn.fromMillis(r).as("days"))}function Hoe(n,e,t){const r=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const h=ZD(l,c);return(h-h%7)/7}],["days",ZD]],i={},s=n;let o,a;for(const[l,c]of r)t.indexOf(l)>=0&&(o=l,i[l]=c(n,e),a=s.plus(i),a>e?(i[l]--,n=s.plus(i),n>e&&(a=n,i[l]--,n=s.plus(i))):n=a);return[n,i,a,o]}function Woe(n,e,t,r){let[i,s,o,a]=Hoe(n,e,t);const l=e-i,c=t.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);c.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+l/(o-i)));const h=Fn.fromObject(s,r);return c.length>0?Fn.fromMillis(l,r).shiftTo(...c).plus(h):h}const zoe="missing Intl.DateTimeFormat.formatToParts support";function jn(n,e=t=>t){return{regex:n,deser:([t])=>e(Dse(t))}}const joe="",r3=`[ ${joe}]`,i3=new RegExp(r3,"g");function Koe(n){return n.replace(/\./g,"\\.?").replace(i3,r3)}function eM(n){return n.replace(/\./g,"").replace(i3," ").toLowerCase()}function $a(n,e){return n===null?null:{regex:RegExp(n.map(Koe).join("|")),deser:([t])=>n.findIndex(r=>eM(t)===eM(r))+e}}function tM(n,e){return{regex:n,deser:([,t,r])=>KS(t,r),groups:e}}function Jv(n){return{regex:n,deser:([e])=>e}}function Goe(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function qoe(n,e){const t=Ua(e),r=Ua(e,"{2}"),i=Ua(e,"{3}"),s=Ua(e,"{4}"),o=Ua(e,"{6}"),a=Ua(e,"{1,2}"),l=Ua(e,"{1,3}"),c=Ua(e,"{1,6}"),h=Ua(e,"{1,9}"),d=Ua(e,"{2,4}"),p=Ua(e,"{4,6}"),y=E=>({regex:RegExp(Goe(E.val)),deser:([C])=>C,literal:!0}),S=(E=>{if(n.literal)return y(E);switch(E.val){case"G":return $a(e.eras("short"),0);case"GG":return $a(e.eras("long"),0);case"y":return jn(c);case"yy":return jn(d,Q_);case"yyyy":return jn(s);case"yyyyy":return jn(p);case"yyyyyy":return jn(o);case"M":return jn(a);case"MM":return jn(r);case"MMM":return $a(e.months("short",!0),1);case"MMMM":return $a(e.months("long",!0),1);case"L":return jn(a);case"LL":return jn(r);case"LLL":return $a(e.months("short",!1),1);case"LLLL":return $a(e.months("long",!1),1);case"d":return jn(a);case"dd":return jn(r);case"o":return jn(l);case"ooo":return jn(i);case"HH":return jn(r);case"H":return jn(a);case"hh":return jn(r);case"h":return jn(a);case"mm":return jn(r);case"m":return jn(a);case"q":return jn(a);case"qq":return jn(r);case"s":return jn(a);case"ss":return jn(r);case"S":return jn(l);case"SSS":return jn(i);case"u":return Jv(h);case"uu":return Jv(a);case"uuu":return jn(t);case"a":return $a(e.meridiems(),0);case"kkkk":return jn(s);case"kk":return jn(d,Q_);case"W":return jn(a);case"WW":return jn(r);case"E":case"c":return jn(t);case"EEE":return $a(e.weekdays("short",!1),1);case"EEEE":return $a(e.weekdays("long",!1),1);case"ccc":return $a(e.weekdays("short",!0),1);case"cccc":return $a(e.weekdays("long",!0),1);case"Z":case"ZZ":return tM(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return tM(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return Jv(/[a-z_+-/]{1,256}?/i);case" ":return Jv(/[^\S\n\r]/);default:return y(E)}})(n)||{invalidReason:zoe};return S.token=n,S}const Yoe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Xoe(n,e,t){const{type:r,value:i}=n;if(r==="literal"){const l=/^\s+$/.test(i);return{literal:!l,val:l?" ":i}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=t.hour12?"hour12":"hour24");let a=Yoe[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function Joe(n){return[`^${n.map(t=>t.regex).reduce((t,r)=>`${t}(${r.source})`,"")}$`,n]}function Qoe(n,e,t){const r=n.match(e);if(r){const i={};let s=1;for(const o in t)if(bp(t,o)){const a=t[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,i]}else return[r,{}]}function Zoe(n){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,r;return Xt(n.z)||(t=Kc.create(n.z)),Xt(n.Z)||(t||(t=new Ds(n.Z)),r=n.Z),Xt(n.q)||(n.M=(n.q-1)*3+1),Xt(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),Xt(n.u)||(n.S=JI(n.u)),[Object.keys(n).reduce((s,o)=>{const a=e(o);return a&&(s[a]=n[o]),s},{}),t,r]}let e1=null;function eae(){return e1||(e1=Kt.fromMillis(1555555555555)),e1}function tae(n,e){if(n.literal)return n;const t=us.macroTokenToFormatOpts(n.val),r=l3(t,e);return r==null||r.includes(void 0)?n:r}function s3(n,e){return Array.prototype.concat(...n.map(t=>tae(t,e)))}class o3{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=s3(us.parseFormat(t),e),this.units=this.tokens.map(r=>qoe(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=Joe(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[t,r]=Qoe(e,this.regex,this.handlers),[i,s,o]=r?Zoe(r):[null,null,void 0];if(bp(r,"a")&&bp(r,"H"))throw new $d("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function a3(n,e,t){return new o3(n,t).explainFromTokens(e)}function nae(n,e,t){const{result:r,zone:i,specificOffset:s,invalidReason:o}=a3(n,e,t);return[r,i,s,o]}function l3(n,e){if(!n)return null;const r=us.create(e,n).dtFormatter(eae()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>Xoe(o,n,s))}const t1="Invalid DateTime",rae=864e13;function Wm(n){return new qa("unsupported zone",`the zone "${n.name}" is not supported`)}function n1(n){return n.weekData===null&&(n.weekData=aw(n.c)),n.weekData}function r1(n){return n.localWeekData===null&&(n.localWeekData=aw(n.c,n.loc.getMinDaysInFirstWeek(),n.loc.getStartOfWeek())),n.localWeekData}function rf(n,e){const t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new Kt({...t,...e,old:t})}function c3(n,e,t){let r=n-e*60*1e3;const i=t.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const s=t.offset(r);return i===s?[r,i]:[n-Math.min(i,s)*60*1e3,Math.max(i,s)]}function Qv(n,e){n+=e*60*1e3;const t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function X0(n,e,t){return c3(jS(n),e,t)}function nM(n,e){const t=n.o,r=n.c.year+Math.trunc(e.years),i=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...n.c,year:r,month:i,day:Math.min(n.c.day,lw(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Fn.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=jS(s);let[l,c]=c3(a,t,n.zone);return o!==0&&(l+=o,c=n.zone.offset(l)),{ts:l,o:c}}function Ed(n,e,t,r,i,s){const{setZone:o,zone:a}=t;if(n&&Object.keys(n).length!==0||e){const l=e||a,c=Kt.fromObject(n,{...t,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return Kt.invalid(new qa("unparsable",`the input "${i}" can't be parsed as ${r}`))}function Zv(n,e,t=!0){return n.isValid?us.create(Xn.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function i1(n,e){const t=n.c.year>9999||n.c.year<0;let r="";return t&&n.c.year>=0&&(r+="+"),r+=ii(n.c.year,t?6:4),e?(r+="-",r+=ii(n.c.month),r+="-",r+=ii(n.c.day)):(r+=ii(n.c.month),r+=ii(n.c.day)),r}function rM(n,e,t,r,i,s){let o=ii(n.c.hour);return e?(o+=":",o+=ii(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(o+=":")):o+=ii(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(o+=ii(n.c.second),(n.c.millisecond!==0||!r)&&(o+=".",o+=ii(n.c.millisecond,3))),i&&(n.isOffsetFixed&&n.offset===0&&!s?o+="Z":n.o<0?(o+="-",o+=ii(Math.trunc(-n.o/60)),o+=":",o+=ii(Math.trunc(-n.o%60))):(o+="+",o+=ii(Math.trunc(n.o/60)),o+=":",o+=ii(Math.trunc(n.o%60)))),s&&(o+="["+n.zone.ianaName+"]"),o}const u3={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},iae={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},sae={ordinal:1,hour:0,minute:0,second:0,millisecond:0},h3=["year","month","day","hour","minute","second","millisecond"],oae=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],aae=["year","ordinal","hour","minute","second","millisecond"];function lae(n){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new fU(n);return e}function iM(n){switch(n.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return lae(n)}}function cae(n){return Q0[n]||(J0===void 0&&(J0=Lr.now()),Q0[n]=n.offset(J0)),Q0[n]}function sM(n,e){const t=Uu(e.zone,Lr.defaultZone);if(!t.isValid)return Kt.invalid(Wm(t));const r=Xn.fromObject(e);let i,s;if(Xt(n.year))i=Lr.now();else{for(const l of h3)Xt(n[l])&&(n[l]=u3[l]);const o=LU(n)||VU(n);if(o)return Kt.invalid(o);const a=cae(t);[i,s]=X0(n,a,t)}return new Kt({ts:i,zone:t,loc:r,o:s})}function oM(n,e,t){const r=Xt(t.round)?!0:t.round,i=(o,a)=>(o=QI(o,r||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(o,a)),s=o=>t.calendary?e.hasSame(n,o)?0:e.startOf(o).diff(n.startOf(o),o).get(o):e.diff(n,o).get(o);if(t.unit)return i(s(t.unit),t.unit);for(const o of t.units){const a=s(o);if(Math.abs(a)>=1)return i(a,o)}return i(n>e?-0:0,t.units[t.units.length-1])}function aM(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}let J0,Q0={};class Kt{constructor(e){const t=e.zone||Lr.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new qa("invalid input"):null)||(t.isValid?null:Wm(t));this.ts=Xt(e.ts)?Lr.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[i,s]=[e.old.c,e.old.o];else{const a=rh(e.o)&&!e.old?e.o:t.offset(this.ts);i=Qv(this.ts,a),r=Number.isNaN(i.year)?new qa("invalid input"):null,i=r?null:i,s=r?null:a}this._zone=t,this.loc=e.loc||Xn.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new Kt({})}static local(){const[e,t]=aM(arguments),[r,i,s,o,a,l,c]=t;return sM({year:r,month:i,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,t]=aM(arguments),[r,i,s,o,a,l,c]=t;return e.zone=Ds.utcInstance,sM({year:r,month:i,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,t={}){const r=Fse(e)?e.valueOf():NaN;if(Number.isNaN(r))return Kt.invalid("invalid input");const i=Uu(t.zone,Lr.defaultZone);return i.isValid?new Kt({ts:r,zone:i,loc:Xn.fromObject(t)}):Kt.invalid(Wm(i))}static fromMillis(e,t={}){if(rh(e))return e<-864e13||e>rae?Kt.invalid("Timestamp out of range"):new Kt({ts:e,zone:Uu(t.zone,Lr.defaultZone),loc:Xn.fromObject(t)});throw new rs(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(rh(e))return new Kt({ts:e*1e3,zone:Uu(t.zone,Lr.defaultZone),loc:Xn.fromObject(t)});throw new rs("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const r=Uu(t.zone,Lr.defaultZone);if(!r.isValid)return Kt.invalid(Wm(r));const i=Xn.fromObject(t),s=cw(e,iM),{minDaysInFirstWeek:o,startOfWeek:a}=KD(s,i),l=Lr.now(),c=Xt(t.specificOffset)?r.offset(l):t.specificOffset,h=!Xt(s.ordinal),d=!Xt(s.year),p=!Xt(s.month)||!Xt(s.day),y=d||p,w=s.weekYear||s.weekNumber;if((y||h)&&w)throw new $d("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&h)throw new $d("Can't mix ordinal dates with month/day");const S=w||s.weekday&&!y;let E,C,L=Qv(l,c);S?(E=oae,C=iae,L=aw(L,o,a)):h?(E=aae,C=sae,L=ZT(L)):(E=h3,C=u3);let P=!1;for(const R of E){const k=s[R];Xt(k)?P?s[R]=C[R]:s[R]=L[R]:P=!0}const F=S?Nse(s,o,a):h?Lse(s):LU(s),U=F||VU(s);if(U)return Kt.invalid(U);const j=S?zD(s,o,a):h?jD(s):s,[N,O]=X0(j,c,r),A=new Kt({ts:N,zone:r,o:O,loc:i});return s.weekday&&y&&e.weekday!==A.weekday?Kt.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${A.toISO()}`):A.isValid?A:Kt.invalid(A.invalid)}static fromISO(e,t={}){const[r,i]=Ioe(e);return Ed(r,i,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[r,i]=Coe(e);return Ed(r,i,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[r,i]=Ooe(e);return Ed(r,i,t,"HTTP",t)}static fromFormat(e,t,r={}){if(Xt(e)||Xt(t))throw new rs("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=Xn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,l,c,h]=nae(o,e,t);return h?Kt.invalid(h):Ed(a,l,r,`format ${t}`,e,c)}static fromString(e,t,r={}){return Kt.fromFormat(e,t,r)}static fromSQL(e,t={}){const[r,i]=Loe(e);return Ed(r,i,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new rs("need to specify a reason the DateTime is invalid");const r=e instanceof qa?e:new qa(e,t);if(Lr.throwOnInvalid)throw new lse(r);return new Kt({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const r=l3(e,Xn.fromObject(t));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,t={}){return s3(us.parseFormat(e),Xn.fromObject(t)).map(i=>i.val).join("")}static resetCache(){J0=void 0,Q0={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?n1(this).weekYear:NaN}get weekNumber(){return this.isValid?n1(this).weekNumber:NaN}get weekday(){return this.isValid?n1(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?r1(this).weekday:NaN}get localWeekNumber(){return this.isValid?r1(this).weekNumber:NaN}get localWeekYear(){return this.isValid?r1(this).weekYear:NaN}get ordinal(){return this.isValid?ZT(this.c).ordinal:NaN}get monthShort(){return this.isValid?Xv.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Xv.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Xv.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Xv.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,r=jS(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*t),a=this.zone.offset(r-s*t);if(o===a)return[this];const l=r-o*t,c=r-a*t,h=Qv(l,o),d=Qv(c,a);return h.hour===d.hour&&h.minute===d.minute&&h.second===d.second&&h.millisecond===d.millisecond?[rf(this,{ts:l}),rf(this,{ts:c})]:[this]}get isInLeapYear(){return My(this.year)}get daysInMonth(){return lw(this.year,this.month)}get daysInYear(){return this.isValid?Qd(this.year):NaN}get weeksInWeekYear(){return this.isValid?Kg(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Kg(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:r,calendar:i}=us.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:r,outputCalendar:i}}toUTC(e=0,t={}){return this.setZone(Ds.instance(e),t)}toLocal(){return this.setZone(Lr.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:r=!1}={}){if(e=Uu(e,Lr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(t||r){const s=e.offset(this.ts),o=this.toObject();[i]=X0(o,s,e)}return rf(this,{ts:i,zone:e})}else return Kt.invalid(Wm(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:r});return rf(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=cw(e,iM),{minDaysInFirstWeek:r,startOfWeek:i}=KD(t,this.loc),s=!Xt(t.weekYear)||!Xt(t.weekNumber)||!Xt(t.weekday),o=!Xt(t.ordinal),a=!Xt(t.year),l=!Xt(t.month)||!Xt(t.day),c=a||l,h=t.weekYear||t.weekNumber;if((c||o)&&h)throw new $d("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new $d("Can't mix ordinal dates with month/day");let d;s?d=zD({...aw(this.c,r,i),...t},r,i):Xt(t.ordinal)?(d={...this.toObject(),...t},Xt(t.day)&&(d.day=Math.min(lw(d.year,d.month),d.day))):d=jD({...ZT(this.c),...t});const[p,y]=X0(d,this.o,this.zone);return rf(this,{ts:p,o:y})}plus(e){if(!this.isValid)return this;const t=Fn.fromDurationLike(e);return rf(this,nM(this,t))}minus(e){if(!this.isValid)return this;const t=Fn.fromDurationLike(e).negate();return rf(this,nM(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const r={},i=Fn.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(t){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?us.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):t1}toLocaleString(e=ow,t={}){return this.isValid?us.create(this.loc.clone(t),e).formatDateTime(this):t1}toLocaleParts(e={}){return this.isValid?us.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=i1(this,o);return a+="T",a+=rM(this,o,t,r,i,s),a}toISODate({format:e="extended"}={}){return this.isValid?i1(this,e==="extended"):null}toISOWeekDate(){return Zv(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+rM(this,o==="extended",t,e,r,s):null}toRFC2822(){return Zv(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Zv(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?i1(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(t||e)&&(r&&(i+=" "),t?i+="z":e&&(i+="ZZ")),Zv(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():t1}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",r={}){if(!this.isValid||!e.isValid)return Fn.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=Bse(t).map(Fn.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=Woe(a,l,s,i);return o?c.negate():c}diffNow(e="milliseconds",t={}){return this.diff(Kt.now(),e,t)}until(e){return this.isValid?Nr.fromDateTimes(this,e):this}hasSame(e,t,r){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,r)<=i&&i<=s.endOf(t,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||Kt.fromObject({},{zone:this.zone}),r=e.padding?this<t?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),oM(t,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?oM(e.base||Kt.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Kt.isDateTime))throw new rs("min requires all arguments be DateTimes");return GD(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(Kt.isDateTime))throw new rs("max requires all arguments be DateTimes");return GD(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Xn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return a3(o,e,t)}static fromStringExplain(e,t,r={}){return Kt.fromFormatExplain(e,t,r)}static buildFormatParser(e,t={}){const{locale:r=null,numberingSystem:i=null}=t,s=Xn.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new o3(s,e)}static fromFormatParser(e,t,r={}){if(Xt(e)||Xt(t))throw new rs("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=Xn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(t.locale))throw new rs(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${t.locale}`);const{result:a,zone:l,specificOffset:c,invalidReason:h}=t.explainFromTokens(e);return h?Kt.invalid(h):Ed(a,l,r,`format ${t.format}`,e,c)}static get DATE_SHORT(){return ow}static get DATE_MED(){return dU}static get DATE_MED_WITH_WEEKDAY(){return hse}static get DATE_FULL(){return pU}static get DATE_HUGE(){return mU}static get TIME_SIMPLE(){return gU}static get TIME_WITH_SECONDS(){return yU}static get TIME_WITH_SHORT_OFFSET(){return vU}static get TIME_WITH_LONG_OFFSET(){return bU}static get TIME_24_SIMPLE(){return wU}static get TIME_24_WITH_SECONDS(){return SU}static get TIME_24_WITH_SHORT_OFFSET(){return EU}static get TIME_24_WITH_LONG_OFFSET(){return TU}static get DATETIME_SHORT(){return _U}static get DATETIME_SHORT_WITH_SECONDS(){return xU}static get DATETIME_MED(){return AU}static get DATETIME_MED_WITH_SECONDS(){return IU}static get DATETIME_MED_WITH_WEEKDAY(){return fse}static get DATETIME_FULL(){return CU}static get DATETIME_FULL_WITH_SECONDS(){return OU}static get DATETIME_HUGE(){return kU}static get DATETIME_HUGE_WITH_SECONDS(){return RU}}function _m(n){if(Kt.isDateTime(n))return n;if(n&&n.valueOf&&rh(n.valueOf()))return Kt.fromJSDate(n);if(n&&typeof n=="object")return Kt.fromObject(n);throw new rs(`Unknown datetime argument: ${n}, of type ${typeof n}`)}const f3=UA("settings",{state:()=>({timezone:"UTC",worker:null}),actions:{setTimezone(n){this.timezone=n,Bn.setItem("selectedTimezone",n)},async initializeTimezone(){try{const n=await Bn.getItem("selectedTimezone");n&&(this.timezone=n)}catch(n){console.error("Failed to get timezone:",n)}}},getters:{currentTimezone:n=>n.timezone}}),uae={setup(){const n=f3(),e=Kt.local().zoneName,t=Nt(n.currentTimezone),r=gn(()=>[{value:e,label:`Local (${e})`},{value:"UTC",label:"UTC"},{value:"Europe/London",label:"Western European Time (WET/GMT)"},{value:"Europe/Paris",label:"Central European Time (CET)"},{value:"Europe/Athens",label:"Eastern European Time (EET)"},{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"Asia/Dubai",label:"Gulf Standard Time (GST)"},{value:"Asia/Kolkata",label:"India Standard Time (IST)"},{value:"Asia/Singapore",label:"Singapore Standard Time (SGT)"},{value:"Asia/Tokyo",label:"Japan Standard Time (JST)"},{value:"Australia/Sydney",label:"Australian Eastern Time (AET)"},{value:"Pacific/Auckland",label:"New Zealand Standard Time (NZST)"}]),i=gn(()=>Kt.now().setZone(t.value).toLocaleString(Kt.DATETIME_MED)),s=async()=>{n.setTimezone(t.value)};return Fs(async()=>{await n.initializeTimezone(),t.value=n.currentTimezone}),{selectedTimezone:t,formattedDate:i,simplifiedTimezones:r,updateTimezone:s}}},hae={class:"flex items-center gap-x-2 text-xs text-gray-600 dark:text-zinc-400 flex-shrink-0"},fae={class:"whitespace-nowrap"},dae=["value"];function pae(n,e,t,r,i,s){return nt(),pt("div",hae,[Qe("p",fae,or(r.formattedDate),1),Pc(Qe("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.selectedTimezone=o),onChange:e[1]||(e[1]=(...o)=>r.updateTimezone&&r.updateTimezone(...o)),id:"timezone",class:"bg-white dark:bg-custom-dark dark:border-zinc-600 rounded p-1 text-gray-600 dark:text-zinc-400 w-32"},[(nt(!0),pt(lr,null,Pf(r.simplifiedTimezones,o=>(nt(),pt("option",{key:o.value,value:o.value},or(o.label),9,dae))),128))],544),[[BA,r.selectedTimezone]])])}const mae=go(uae,[["render",pae]]),gae={name:"VaultStatus",props:{isUnlocked:{type:Boolean,default:!1}}},yae={selected:"false",disabled:"true",class:"tsb p-1 w-8 h-8 text-zinc-500 dark:text-zinc-400 border-transparent focus:border-transparent focus:ring-0 rounded z-30 transition-colors"},vae={key:0,"fill-rule":"evenodd",d:"M10 2a5 5 0 00-5 5v2a2 2 0 00-2 2v5a2 2 0 002 2h10a2 2 0 002-2v-5a2 2 0 00-2-2H7V7a3 3 0 015.905-.75 1 1 0 001.937-.5A5.002 5.002 0 0010 2zM8 10a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1h-2a1 1 0 01-1-1v-2z","clip-rule":"evenodd"},bae={key:1,"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"};function wae(n,e,t,r,i,s){return nt(),pt("button",yae,[(nt(),pt("svg",{xmlns:"http://www.w3.org/2000/svg",class:pi(["h-5 w-5 mx-auto rounded",t.isUnlocked?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100"]),viewBox:"0 0 20 20",fill:"currentColor"},[t.isUnlocked?(nt(),pt("path",vae)):(nt(),pt("path",bae))],2))])}const Sae=go(gae,[["render",wae]]),Eae={name:"TopBar",components:{SideToggleButton:Yie,EventToggleButton:Qie,DarkToggleButton:rse,TimezoneDropdown:mae,GoogleLoginButton:ase,VaultStatus:Sae},props:{isSidebarOpen:{type:Boolean,required:!0},isEventbarOpen:{type:Boolean,required:!0},isDark:{type:Boolean,required:!0},toggleDark:{type:Function,required:!0},isVaultUnlocked:{type:Boolean,default:!1},componentToShow:{type:String,required:!1}},emits:["toggleSidebar","toggleEventbar","toggleDark"],setup(n){return{}}},Tae={class:"flex flex-row w-full bg-white text-gray-900 dark:bg-custom-dark dark:text-white"};function _ae(n,e,t,r,i,s){const o=es("SideToggleButton"),a=es("EventToggleButton"),l=es("DarkToggleButton"),c=es("VaultStatus"),h=es("GoogleLoginButton"),d=es("TimezoneDropdown");return nt(),pt("div",Tae,[hn(o,{isSidebarOpen:t.isSidebarOpen,onToggleSidebar:e[0]||(e[0]=p=>n.$emit("toggleSidebar"))},null,8,["isSidebarOpen"]),hn(a,{isEventbarOpen:t.isEventbarOpen,onToggleEventbar:e[1]||(e[1]=p=>n.$emit("toggleEventbar"))},null,8,["isEventbarOpen"]),hn(l,{isDark:t.isDark,toggleDark:t.toggleDark},null,8,["isDark","toggleDark"]),hn(c,{isUnlocked:t.isVaultUnlocked},null,8,["isUnlocked"]),hn(h),hn(d)])}const xae=go(Eae,[["render",_ae],["__scopeId","data-v-6a11d4be"]]);var Z0={exports:{}},s1={exports:{}},o1={};/**
* @vue/compiler-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const wp=Symbol(""),ep=Symbol(""),qS=Symbol(""),Gg=Symbol(""),nC=Symbol(""),gh=Symbol(""),rC=Symbol(""),iC=Symbol(""),YS=Symbol(""),XS=Symbol(""),Xp=Symbol(""),JS=Symbol(""),sC=Symbol(""),QS=Symbol(""),ZS=Symbol(""),eE=Symbol(""),tE=Symbol(""),nE=Symbol(""),rE=Symbol(""),oC=Symbol(""),aC=Symbol(""),Vy=Symbol(""),qg=Symbol(""),iE=Symbol(""),sE=Symbol(""),Sp=Symbol(""),Jp=Symbol(""),oE=Symbol(""),uw=Symbol(""),d3=Symbol(""),hw=Symbol(""),Yg=Symbol(""),p3=Symbol(""),m3=Symbol(""),aE=Symbol(""),g3=Symbol(""),y3=Symbol(""),lE=Symbol(""),lC=Symbol(""),Uf={[wp]:"Fragment",[ep]:"Teleport",[qS]:"Suspense",[Gg]:"KeepAlive",[nC]:"BaseTransition",[gh]:"openBlock",[rC]:"createBlock",[iC]:"createElementBlock",[YS]:"createVNode",[XS]:"createElementVNode",[Xp]:"createCommentVNode",[JS]:"createTextVNode",[sC]:"createStaticVNode",[QS]:"resolveComponent",[ZS]:"resolveDynamicComponent",[eE]:"resolveDirective",[tE]:"resolveFilter",[nE]:"withDirectives",[rE]:"renderList",[oC]:"renderSlot",[aC]:"createSlots",[Vy]:"toDisplayString",[qg]:"mergeProps",[iE]:"normalizeClass",[sE]:"normalizeStyle",[Sp]:"normalizeProps",[Jp]:"guardReactiveProps",[oE]:"toHandlers",[uw]:"camelize",[d3]:"capitalize",[hw]:"toHandlerKey",[Yg]:"setBlockTracking",[p3]:"pushScopeId",[m3]:"popScopeId",[aE]:"withCtx",[g3]:"unref",[y3]:"isRef",[lE]:"withMemo",[lC]:"isMemoSame"};function v3(n){Object.getOwnPropertySymbols(n).forEach(e=>{Uf[e]=n[e]})}const Aae={HTML:0,0:"HTML",SVG:1,1:"SVG",MATH_ML:2,2:"MATH_ML"},Iae={ROOT:0,0:"ROOT",ELEMENT:1,1:"ELEMENT",TEXT:2,2:"TEXT",COMMENT:3,3:"COMMENT",SIMPLE_EXPRESSION:4,4:"SIMPLE_EXPRESSION",INTERPOLATION:5,5:"INTERPOLATION",ATTRIBUTE:6,6:"ATTRIBUTE",DIRECTIVE:7,7:"DIRECTIVE",COMPOUND_EXPRESSION:8,8:"COMPOUND_EXPRESSION",IF:9,9:"IF",IF_BRANCH:10,10:"IF_BRANCH",FOR:11,11:"FOR",TEXT_CALL:12,12:"TEXT_CALL",VNODE_CALL:13,13:"VNODE_CALL",JS_CALL_EXPRESSION:14,14:"JS_CALL_EXPRESSION",JS_OBJECT_EXPRESSION:15,15:"JS_OBJECT_EXPRESSION",JS_PROPERTY:16,16:"JS_PROPERTY",JS_ARRAY_EXPRESSION:17,17:"JS_ARRAY_EXPRESSION",JS_FUNCTION_EXPRESSION:18,18:"JS_FUNCTION_EXPRESSION",JS_CONDITIONAL_EXPRESSION:19,19:"JS_CONDITIONAL_EXPRESSION",JS_CACHE_EXPRESSION:20,20:"JS_CACHE_EXPRESSION",JS_BLOCK_STATEMENT:21,21:"JS_BLOCK_STATEMENT",JS_TEMPLATE_LITERAL:22,22:"JS_TEMPLATE_LITERAL",JS_IF_STATEMENT:23,23:"JS_IF_STATEMENT",JS_ASSIGNMENT_EXPRESSION:24,24:"JS_ASSIGNMENT_EXPRESSION",JS_SEQUENCE_EXPRESSION:25,25:"JS_SEQUENCE_EXPRESSION",JS_RETURN_STATEMENT:26,26:"JS_RETURN_STATEMENT"},Cae={ELEMENT:0,0:"ELEMENT",COMPONENT:1,1:"COMPONENT",SLOT:2,2:"SLOT",TEMPLATE:3,3:"TEMPLATE"},Oae={NOT_CONSTANT:0,0:"NOT_CONSTANT",CAN_SKIP_PATCH:1,1:"CAN_SKIP_PATCH",CAN_CACHE:2,2:"CAN_CACHE",CAN_STRINGIFY:3,3:"CAN_STRINGIFY"},Ei={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0},source:""};function b3(n,e=""){return{type:0,source:e,children:n,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:[],temps:0,codegenNode:void 0,loc:Ei}}function Ep(n,e,t,r,i,s,o,a=!1,l=!1,c=!1,h=Ei){return n&&(a?(n.helper(gh),n.helper(Wf(n.inSSR,c))):n.helper(Hf(n.inSSR,c)),o&&n.helper(nE)),{type:13,tag:e,props:t,children:r,patchFlag:i,dynamicProps:s,directives:o,isBlock:a,disableTracking:l,isComponent:c,loc:h}}function ih(n,e=Ei){return{type:17,loc:e,elements:n}}function No(n,e=Ei){return{type:15,loc:e,properties:n}}function Ur(n,e){return{type:16,loc:Ei,key:qt(n)?rn(n,!0):n,value:e}}function rn(n,e=!1,t=Ei,r=0){return{type:4,loc:t,content:n,isStatic:e,constType:e?3:r}}function kae(n,e){return{type:5,loc:e,content:qt(n)?rn(n,!1,e):n}}function da(n,e=Ei){return{type:8,loc:e,children:n}}function si(n,e=[],t=Ei){return{type:14,loc:t,callee:n,arguments:e}}function $f(n,e=void 0,t=!1,r=!1,i=Ei){return{type:18,params:n,returns:e,newline:t,isSlot:r,loc:i}}function fw(n,e,t,r=!0){return{type:19,test:n,consequent:e,alternate:t,newline:r,loc:Ei}}function w3(n,e,t=!1,r=!1){return{type:20,index:n,value:e,needPauseTracking:t,inVOnce:r,needArraySpread:!1,loc:Ei}}function S3(n){return{type:21,body:n,loc:Ei}}function Rae(n){return{type:22,elements:n,loc:Ei}}function Pae(n,e,t){return{type:23,test:n,consequent:e,alternate:t,loc:Ei}}function Dae(n,e){return{type:24,left:n,right:e,loc:Ei}}function Mae(n){return{type:25,expressions:n,loc:Ei}}function Nae(n){return{type:26,returns:n,loc:Ei}}function Hf(n,e){return n||e?YS:XS}function Wf(n,e){return n||e?rC:iC}function cE(n,{helper:e,removeHelper:t,inSSR:r}){n.isBlock||(n.isBlock=!0,t(Hf(r,n.isComponent)),e(gh),e(Wf(r,n.isComponent)))}const lM=new Uint8Array([123,123]),cM=new Uint8Array([125,125]);function uM(n){return n>=97&&n<=122||n>=65&&n<=90}function Po(n){return n===32||n===10||n===9||n===12||n===13}function xu(n){return n===47||n===62||Po(n)}function dw(n){const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}const Qi={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class Lae{constructor(e,t){this.stack=e,this.cbs=t,this.state=1,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=1,this.inRCDATA=!1,this.inXML=!1,this.inVPre=!1,this.newlines=[],this.mode=0,this.delimiterOpen=lM,this.delimiterClose=cM,this.delimiterIndex=-1,this.currentSequence=void 0,this.sequenceIndex=0}get inSFCRoot(){return this.mode===2&&this.stack.length===0}reset(){this.state=1,this.mode=0,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=1,this.inRCDATA=!1,this.currentSequence=void 0,this.newlines.length=0,this.delimiterOpen=lM,this.delimiterClose=cM}getPos(e){let t=1,r=e+1;for(let i=this.newlines.length-1;i>=0;i--){const s=this.newlines[i];if(e>s){t=i+2,r=e-s;break}}return{column:r,line:t,offset:e}}peek(){return this.buffer.charCodeAt(this.index+1)}stateText(e){e===60?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=5,this.sectionStart=this.index):!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e))}stateInterpolationOpen(e){if(e===this.delimiterOpen[this.delimiterIndex])if(this.delimiterIndex===this.delimiterOpen.length-1){const t=this.index+1-this.delimiterOpen.length;t>this.sectionStart&&this.cbs.ontext(this.sectionStart,t),this.state=3,this.sectionStart=t}else this.delimiterIndex++;else this.inRCDATA?(this.state=32,this.stateInRCDATA(e)):(this.state=1,this.stateText(e))}stateInterpolation(e){e===this.delimiterClose[0]&&(this.state=4,this.delimiterIndex=0,this.stateInterpolationClose(e))}stateInterpolationClose(e){e===this.delimiterClose[this.delimiterIndex]?this.delimiterIndex===this.delimiterClose.length-1?(this.cbs.oninterpolation(this.sectionStart,this.index+1),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):this.delimiterIndex++:(this.state=3,this.stateInterpolation(e))}stateSpecialStartSequence(e){const t=this.sequenceIndex===this.currentSequence.length;if(!(t?xu(e):(e|32)===this.currentSequence[this.sequenceIndex]))this.inRCDATA=!1;else if(!t){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=6,this.stateInTagName(e)}stateInRCDATA(e){if(this.sequenceIndex===this.currentSequence.length){if(e===62||Po(e)){const t=this.index-this.currentSequence.length;if(this.sectionStart<t){const r=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=r}this.sectionStart=t+2,this.stateInClosingTagName(e),this.inRCDATA=!1;return}this.sequenceIndex=0}(e|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Qi.TitleEnd||this.currentSequence===Qi.TextareaEnd&&!this.inSFCRoot?!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e)):this.fastForwardTo(60)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===60)}stateCDATASequence(e){e===Qi.Cdata[this.sequenceIndex]?++this.sequenceIndex===Qi.Cdata.length&&(this.state=28,this.currentSequence=Qi.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=23,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length;){const t=this.buffer.charCodeAt(this.index);if(t===10&&this.newlines.push(this.index),t===e)return!0}return this.index=this.buffer.length-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Qi.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index-2):this.cbs.oncomment(this.sectionStart,this.index-2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=1):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}startSpecial(e,t){this.enterRCDATA(e,t),this.state=31}enterRCDATA(e,t){this.inRCDATA=!0,this.currentSequence=e,this.sequenceIndex=t}stateBeforeTagName(e){e===33?(this.state=22,this.sectionStart=this.index+1):e===63?(this.state=24,this.sectionStart=this.index+1):uM(e)?(this.sectionStart=this.index,this.mode===0?this.state=6:this.inSFCRoot?this.state=34:this.inXML?this.state=6:e===116?this.state=30:this.state=e===115?29:6):e===47?this.state=8:(this.state=1,this.stateText(e))}stateInTagName(e){xu(e)&&this.handleTagName(e)}stateInSFCRootTagName(e){if(xu(e)){const t=this.buffer.slice(this.sectionStart,this.index);t!=="template"&&this.enterRCDATA(dw("</"+t),0),this.handleTagName(e)}}handleTagName(e){this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)}stateBeforeClosingTagName(e){Po(e)||(e===62?(this.state=1,this.sectionStart=this.index+1):(this.state=uM(e)?9:27,this.sectionStart=this.index))}stateInClosingTagName(e){(e===62||Po(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=10,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){e===62&&(this.state=1,this.sectionStart=this.index+1)}stateBeforeAttrName(e){e===62?(this.cbs.onopentagend(this.index),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):e===47?this.state=7:e===60&&this.peek()===47?(this.cbs.onopentagend(this.index),this.state=5,this.sectionStart=this.index):Po(e)||this.handleAttrStart(e)}handleAttrStart(e){e===118&&this.peek()===45?(this.state=13,this.sectionStart=this.index):e===46||e===58||e===64||e===35?(this.cbs.ondirname(this.index,this.index+1),this.state=14,this.sectionStart=this.index+1):(this.state=12,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===62?(this.cbs.onselfclosingtag(this.index),this.state=1,this.sectionStart=this.index+1,this.inRCDATA=!1):Po(e)||(this.state=11,this.stateBeforeAttrName(e))}stateInAttrName(e){(e===61||xu(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.handleAttrNameEnd(e))}stateInDirName(e){e===61||xu(e)?(this.cbs.ondirname(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===58?(this.cbs.ondirname(this.sectionStart,this.index),this.state=14,this.sectionStart=this.index+1):e===46&&(this.cbs.ondirname(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDirArg(e){e===61||xu(e)?(this.cbs.ondirarg(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===91?this.state=15:e===46&&(this.cbs.ondirarg(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDynamicDirArg(e){e===93?this.state=14:(e===61||xu(e))&&(this.cbs.ondirarg(this.sectionStart,this.index+1),this.handleAttrNameEnd(e))}stateInDirModifier(e){e===61||xu(e)?(this.cbs.ondirmodifier(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===46&&(this.cbs.ondirmodifier(this.sectionStart,this.index),this.sectionStart=this.index+1)}handleAttrNameEnd(e){this.sectionStart=this.index,this.state=17,this.cbs.onattribnameend(this.index),this.stateAfterAttrName(e)}stateAfterAttrName(e){e===61?this.state=18:e===47||e===62?(this.cbs.onattribend(0,this.sectionStart),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)):Po(e)||(this.cbs.onattribend(0,this.sectionStart),this.handleAttrStart(e))}stateBeforeAttrValue(e){e===34?(this.state=19,this.sectionStart=this.index+1):e===39?(this.state=20,this.sectionStart=this.index+1):Po(e)||(this.sectionStart=this.index,this.state=21,this.stateInAttrValueNoQuotes(e))}handleInAttrValue(e,t){(e===t||this.fastForwardTo(t))&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===34?3:2,this.index+1),this.state=11)}stateInAttrValueDoubleQuotes(e){this.handleInAttrValue(e,34)}stateInAttrValueSingleQuotes(e){this.handleInAttrValue(e,39)}stateInAttrValueNoQuotes(e){Po(e)||e===62?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(1,this.index),this.state=11,this.stateBeforeAttrName(e)):(e===39||e===60||e===61||e===96)&&this.cbs.onerr(18,this.index)}stateBeforeDeclaration(e){e===91?(this.state=26,this.sequenceIndex=0):this.state=e===45?25:23}stateInDeclaration(e){(e===62||this.fastForwardTo(62))&&(this.state=1,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===62||this.fastForwardTo(62))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeComment(e){e===45?(this.state=28,this.currentSequence=Qi.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=23}stateInSpecialComment(e){(e===62||this.fastForwardTo(62))&&(this.cbs.oncomment(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){e===Qi.ScriptEnd[3]?this.startSpecial(Qi.ScriptEnd,4):e===Qi.StyleEnd[3]?this.startSpecial(Qi.StyleEnd,4):(this.state=6,this.stateInTagName(e))}stateBeforeSpecialT(e){e===Qi.TitleEnd[3]?this.startSpecial(Qi.TitleEnd,4):e===Qi.TextareaEnd[3]?this.startSpecial(Qi.TextareaEnd,4):(this.state=6,this.stateInTagName(e))}startEntity(){}stateInEntity(){}parse(e){for(this.buffer=e;this.index<this.buffer.length;){const t=this.buffer.charCodeAt(this.index);switch(t===10&&this.newlines.push(this.index),this.state){case 1:{this.stateText(t);break}case 2:{this.stateInterpolationOpen(t);break}case 3:{this.stateInterpolation(t);break}case 4:{this.stateInterpolationClose(t);break}case 31:{this.stateSpecialStartSequence(t);break}case 32:{this.stateInRCDATA(t);break}case 26:{this.stateCDATASequence(t);break}case 19:{this.stateInAttrValueDoubleQuotes(t);break}case 12:{this.stateInAttrName(t);break}case 13:{this.stateInDirName(t);break}case 14:{this.stateInDirArg(t);break}case 15:{this.stateInDynamicDirArg(t);break}case 16:{this.stateInDirModifier(t);break}case 28:{this.stateInCommentLike(t);break}case 27:{this.stateInSpecialComment(t);break}case 11:{this.stateBeforeAttrName(t);break}case 6:{this.stateInTagName(t);break}case 34:{this.stateInSFCRootTagName(t);break}case 9:{this.stateInClosingTagName(t);break}case 5:{this.stateBeforeTagName(t);break}case 17:{this.stateAfterAttrName(t);break}case 20:{this.stateInAttrValueSingleQuotes(t);break}case 18:{this.stateBeforeAttrValue(t);break}case 8:{this.stateBeforeClosingTagName(t);break}case 10:{this.stateAfterClosingTagName(t);break}case 29:{this.stateBeforeSpecialS(t);break}case 30:{this.stateBeforeSpecialT(t);break}case 21:{this.stateInAttrValueNoQuotes(t);break}case 7:{this.stateInSelfClosingTag(t);break}case 23:{this.stateInDeclaration(t);break}case 22:{this.stateBeforeDeclaration(t);break}case 25:{this.stateBeforeComment(t);break}case 24:{this.stateInProcessingInstruction(t);break}case 33:{this.stateInEntity();break}}this.index++}this.cleanup(),this.finish()}cleanup(){this.sectionStart!==this.index&&(this.state===1||this.state===32&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===19||this.state===20||this.state===21)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}finish(){this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length;this.sectionStart>=e||(this.state===28?this.currentSequence===Qi.CdataEnd?this.cbs.oncdata(this.sectionStart,e):this.cbs.oncomment(this.sectionStart,e):this.state===6||this.state===11||this.state===18||this.state===17||this.state===12||this.state===13||this.state===14||this.state===15||this.state===16||this.state===20||this.state===19||this.state===21||this.state===9||this.cbs.ontext(this.sectionStart,e))}emitCodePoint(e,t){}}const Vae={COMPILER_IS_ON_ELEMENT:"COMPILER_IS_ON_ELEMENT",COMPILER_V_BIND_SYNC:"COMPILER_V_BIND_SYNC",COMPILER_V_BIND_OBJECT_ORDER:"COMPILER_V_BIND_OBJECT_ORDER",COMPILER_V_ON_NATIVE:"COMPILER_V_ON_NATIVE",COMPILER_V_IF_V_FOR_PRECEDENCE:"COMPILER_V_IF_V_FOR_PRECEDENCE",COMPILER_NATIVE_TEMPLATE:"COMPILER_NATIVE_TEMPLATE",COMPILER_INLINE_TEMPLATE:"COMPILER_INLINE_TEMPLATE",COMPILER_FILTERS:"COMPILER_FILTERS"},Fae={COMPILER_IS_ON_ELEMENT:{message:'Platform-native elements with "is" prop will no longer be treated as components in Vue 3 unless the "is" value is explicitly prefixed with "vue:".',link:"https://v3-migration.vuejs.org/breaking-changes/custom-elements-interop.html"},COMPILER_V_BIND_SYNC:{message:n=>`.sync modifier for v-bind has been removed. Use v-model with argument instead. \`v-bind:${n}.sync\` should be changed to \`v-model:${n}\`.`,link:"https://v3-migration.vuejs.org/breaking-changes/v-model.html"},COMPILER_V_BIND_OBJECT_ORDER:{message:'v-bind="obj" usage is now order sensitive and behaves like JavaScript object spread: it will now overwrite an existing non-mergeable attribute that appears before v-bind in the case of conflict. To retain 2.x behavior, move v-bind to make it the first attribute. You can also suppress this warning if the usage is intended.',link:"https://v3-migration.vuejs.org/breaking-changes/v-bind.html"},COMPILER_V_ON_NATIVE:{message:".native modifier for v-on has been removed as is no longer necessary.",link:"https://v3-migration.vuejs.org/breaking-changes/v-on-native-modifier-removed.html"},COMPILER_V_IF_V_FOR_PRECEDENCE:{message:"v-if / v-for precedence when used on the same element has changed in Vue 3: v-if now takes higher precedence and will no longer have access to v-for scope variables. It is best to avoid the ambiguity with <template> tags or use a computed property that filters v-for data source.",link:"https://v3-migration.vuejs.org/breaking-changes/v-if-v-for.html"},COMPILER_NATIVE_TEMPLATE:{message:"<template> with no special directives will render as a native template element instead of its inner content in Vue 3."},COMPILER_INLINE_TEMPLATE:{message:'"inline-template" has been removed in Vue 3.',link:"https://v3-migration.vuejs.org/breaking-changes/inline-template-attribute.html"},COMPILER_FILTERS:{message:'filters have been removed in Vue 3. The "|" symbol will be treated as native JavaScript bitwise OR operator. Use method calls or computed properties instead.',link:"https://v3-migration.vuejs.org/breaking-changes/filters.html"}};function Z_(n,{compatConfig:e}){const t=e&&e[n];return n==="MODE"?t||3:t}function Cf(n,e){const t=Z_("MODE",e),r=Z_(n,e);return t===3?r===!0:r!==!1}function Tp(n,e,t,...r){return Cf(n,e)}function Bae(n,e,t,...r){if(Z_(n,e)==="suppress-warning")return;const{message:s,link:o}=Fae[n],a=`(deprecation ${n}) ${typeof s=="function"?s(...r):s}${o?`
  Details: ${o}`:""}`,l=new SyntaxError(a);l.code=n,t&&(l.loc=t),e.onWarn(l)}function cC(n){throw n}function E3(n){}function pr(n,e,t,r){const i=`https://vuejs.org/error-reference/#compiler-${n}`,s=new SyntaxError(String(i));return s.code=n,s.loc=e,s}const Uae={ABRUPT_CLOSING_OF_EMPTY_COMMENT:0,0:"ABRUPT_CLOSING_OF_EMPTY_COMMENT",CDATA_IN_HTML_CONTENT:1,1:"CDATA_IN_HTML_CONTENT",DUPLICATE_ATTRIBUTE:2,2:"DUPLICATE_ATTRIBUTE",END_TAG_WITH_ATTRIBUTES:3,3:"END_TAG_WITH_ATTRIBUTES",END_TAG_WITH_TRAILING_SOLIDUS:4,4:"END_TAG_WITH_TRAILING_SOLIDUS",EOF_BEFORE_TAG_NAME:5,5:"EOF_BEFORE_TAG_NAME",EOF_IN_CDATA:6,6:"EOF_IN_CDATA",EOF_IN_COMMENT:7,7:"EOF_IN_COMMENT",EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT:8,8:"EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT",EOF_IN_TAG:9,9:"EOF_IN_TAG",INCORRECTLY_CLOSED_COMMENT:10,10:"INCORRECTLY_CLOSED_COMMENT",INCORRECTLY_OPENED_COMMENT:11,11:"INCORRECTLY_OPENED_COMMENT",INVALID_FIRST_CHARACTER_OF_TAG_NAME:12,12:"INVALID_FIRST_CHARACTER_OF_TAG_NAME",MISSING_ATTRIBUTE_VALUE:13,13:"MISSING_ATTRIBUTE_VALUE",MISSING_END_TAG_NAME:14,14:"MISSING_END_TAG_NAME",MISSING_WHITESPACE_BETWEEN_ATTRIBUTES:15,15:"MISSING_WHITESPACE_BETWEEN_ATTRIBUTES",NESTED_COMMENT:16,16:"NESTED_COMMENT",UNEXPECTED_CHARACTER_IN_ATTRIBUTE_NAME:17,17:"UNEXPECTED_CHARACTER_IN_ATTRIBUTE_NAME",UNEXPECTED_CHARACTER_IN_UNQUOTED_ATTRIBUTE_VALUE:18,18:"UNEXPECTED_CHARACTER_IN_UNQUOTED_ATTRIBUTE_VALUE",UNEXPECTED_EQUALS_SIGN_BEFORE_ATTRIBUTE_NAME:19,19:"UNEXPECTED_EQUALS_SIGN_BEFORE_ATTRIBUTE_NAME",UNEXPECTED_NULL_CHARACTER:20,20:"UNEXPECTED_NULL_CHARACTER",UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME:21,21:"UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME",UNEXPECTED_SOLIDUS_IN_TAG:22,22:"UNEXPECTED_SOLIDUS_IN_TAG",X_INVALID_END_TAG:23,23:"X_INVALID_END_TAG",X_MISSING_END_TAG:24,24:"X_MISSING_END_TAG",X_MISSING_INTERPOLATION_END:25,25:"X_MISSING_INTERPOLATION_END",X_MISSING_DIRECTIVE_NAME:26,26:"X_MISSING_DIRECTIVE_NAME",X_MISSING_DYNAMIC_DIRECTIVE_ARGUMENT_END:27,27:"X_MISSING_DYNAMIC_DIRECTIVE_ARGUMENT_END",X_V_IF_NO_EXPRESSION:28,28:"X_V_IF_NO_EXPRESSION",X_V_IF_SAME_KEY:29,29:"X_V_IF_SAME_KEY",X_V_ELSE_NO_ADJACENT_IF:30,30:"X_V_ELSE_NO_ADJACENT_IF",X_V_FOR_NO_EXPRESSION:31,31:"X_V_FOR_NO_EXPRESSION",X_V_FOR_MALFORMED_EXPRESSION:32,32:"X_V_FOR_MALFORMED_EXPRESSION",X_V_FOR_TEMPLATE_KEY_PLACEMENT:33,33:"X_V_FOR_TEMPLATE_KEY_PLACEMENT",X_V_BIND_NO_EXPRESSION:34,34:"X_V_BIND_NO_EXPRESSION",X_V_ON_NO_EXPRESSION:35,35:"X_V_ON_NO_EXPRESSION",X_V_SLOT_UNEXPECTED_DIRECTIVE_ON_SLOT_OUTLET:36,36:"X_V_SLOT_UNEXPECTED_DIRECTIVE_ON_SLOT_OUTLET",X_V_SLOT_MIXED_SLOT_USAGE:37,37:"X_V_SLOT_MIXED_SLOT_USAGE",X_V_SLOT_DUPLICATE_SLOT_NAMES:38,38:"X_V_SLOT_DUPLICATE_SLOT_NAMES",X_V_SLOT_EXTRANEOUS_DEFAULT_SLOT_CHILDREN:39,39:"X_V_SLOT_EXTRANEOUS_DEFAULT_SLOT_CHILDREN",X_V_SLOT_MISPLACED:40,40:"X_V_SLOT_MISPLACED",X_V_MODEL_NO_EXPRESSION:41,41:"X_V_MODEL_NO_EXPRESSION",X_V_MODEL_MALFORMED_EXPRESSION:42,42:"X_V_MODEL_MALFORMED_EXPRESSION",X_V_MODEL_ON_SCOPE_VARIABLE:43,43:"X_V_MODEL_ON_SCOPE_VARIABLE",X_V_MODEL_ON_PROPS:44,44:"X_V_MODEL_ON_PROPS",X_INVALID_EXPRESSION:45,45:"X_INVALID_EXPRESSION",X_KEEP_ALIVE_INVALID_CHILDREN:46,46:"X_KEEP_ALIVE_INVALID_CHILDREN",X_PREFIX_ID_NOT_SUPPORTED:47,47:"X_PREFIX_ID_NOT_SUPPORTED",X_MODULE_MODE_NOT_SUPPORTED:48,48:"X_MODULE_MODE_NOT_SUPPORTED",X_CACHE_HANDLER_NOT_SUPPORTED:49,49:"X_CACHE_HANDLER_NOT_SUPPORTED",X_SCOPE_ID_NOT_SUPPORTED:50,50:"X_SCOPE_ID_NOT_SUPPORTED",X_VNODE_HOOKS:51,51:"X_VNODE_HOOKS",X_V_BIND_INVALID_SAME_NAME_ARGUMENT:52,52:"X_V_BIND_INVALID_SAME_NAME_ARGUMENT",__EXTEND_POINT__:53,53:"__EXTEND_POINT__"},$ae={0:"Illegal comment.",1:"CDATA section is allowed only in XML context.",2:"Duplicate attribute.",3:"End tag cannot have attributes.",4:"Illegal '/' in tags.",5:"Unexpected EOF in tag.",6:"Unexpected EOF in CDATA section.",7:"Unexpected EOF in comment.",8:"Unexpected EOF in script.",9:"Unexpected EOF in tag.",10:"Incorrectly closed comment.",11:"Incorrectly opened comment.",12:"Illegal tag name. Use '&lt;' to print '<'.",13:"Attribute value was expected.",14:"End tag name was expected.",15:"Whitespace was expected.",16:"Unexpected '<!--' in comment.",17:`Attribute name cannot contain U+0022 ("), U+0027 ('), and U+003C (<).`,18:"Unquoted attribute value cannot contain U+0022 (\"), U+0027 ('), U+003C (<), U+003D (=), and U+0060 (`).",19:"Attribute name cannot start with '='.",21:"'<?' is allowed only in XML context.",20:"Unexpected null character.",22:"Illegal '/' in tags.",23:"Invalid end tag.",24:"Element is missing end tag.",25:"Interpolation end sign was not found.",27:"End bracket for dynamic directive argument was not found. Note that dynamic directive argument cannot contain spaces.",26:"Legal directive name was expected.",28:"v-if/v-else-if is missing expression.",29:"v-if/else branches must use unique keys.",30:"v-else/v-else-if has no adjacent v-if or v-else-if.",31:"v-for is missing expression.",32:"v-for has invalid expression.",33:"<template v-for> key should be placed on the <template> tag.",34:"v-bind is missing expression.",52:"v-bind with same-name shorthand only allows static argument.",35:"v-on is missing expression.",36:"Unexpected custom directive on <slot> outlet.",37:"Mixed v-slot usage on both the component and nested <template>. When there are multiple named slots, all slots should use <template> syntax to avoid scope ambiguity.",38:"Duplicate slot names found. ",39:"Extraneous children found when component already has explicitly named default slot. These children will be ignored.",40:"v-slot can only be used on components or <template> tags.",41:"v-model is missing expression.",42:"v-model value must be a valid JavaScript member expression.",43:"v-model cannot be used on v-for or v-slot scope variables because they are not writable.",44:`v-model cannot be used on a prop, because local prop bindings are not writable.
Use a v-bind binding combined with a v-on listener that emits update:x event instead.`,45:"Error parsing JavaScript expression: ",46:"<KeepAlive> expects exactly one child component.",51:"@vnode-* hooks in templates are no longer supported. Use the vue: prefix instead. For example, @vnode-mounted should be changed to @vue:mounted. @vnode-* hooks support has been removed in 3.4.",47:'"prefixIdentifiers" option is not supported in this build of compiler.',48:"ES module mode is not supported in this build of compiler.",49:'"cacheHandlers" option is only supported when the "prefixIdentifiers" option is enabled.',50:'"scopeId" option is only supported in module mode.',53:""};function Hae(n,e,t=!1,r=[],i=Object.create(null)){}function Wae(n,e,t){return!1}function zae(n,e){if(n&&(n.type==="ObjectProperty"||n.type==="ArrayPattern")){let t=e.length;for(;t--;){const r=e[t];if(r.type==="AssignmentExpression")return!0;if(r.type!=="ObjectProperty"&&!r.type.endsWith("Pattern"))break}}return!1}function jae(n){let e=n.length;for(;e--;){const t=n[e];if(t.type==="NewExpression")return!0;if(t.type!=="MemberExpression")break}return!1}function Kae(n,e){for(const t of n.params)for(const r of Ac(t))e(r)}function Gae(n,e){for(const t of n.body)if(t.type==="VariableDeclaration"){if(t.declare)continue;for(const r of t.declarations)for(const i of Ac(r.id))e(i)}else if(t.type==="FunctionDeclaration"||t.type==="ClassDeclaration"){if(t.declare||!t.id)continue;e(t.id)}else qae(t)&&Yae(t,!0,e)}function qae(n){return n.type==="ForOfStatement"||n.type==="ForInStatement"||n.type==="ForStatement"}function Yae(n,e,t){const r=n.type==="ForStatement"?n.init:n.left;if(r&&r.type==="VariableDeclaration"&&(r.kind==="var"&&e))for(const i of r.declarations)for(const s of Ac(i.id))t(s)}function Ac(n,e=[]){switch(n.type){case"Identifier":e.push(n);break;case"MemberExpression":let t=n;for(;t.type==="MemberExpression";)t=t.object;e.push(t);break;case"ObjectPattern":for(const r of n.properties)r.type==="RestElement"?Ac(r.argument,e):Ac(r.value,e);break;case"ArrayPattern":n.elements.forEach(r=>{r&&Ac(r,e)});break;case"RestElement":Ac(n.argument,e);break;case"AssignmentPattern":Ac(n.left,e);break}return e}const Xae=n=>/Function(?:Expression|Declaration)$|Method$/.test(n.type),T3=n=>n&&(n.type==="ObjectProperty"||n.type==="ObjectMethod")&&!n.computed,Jae=(n,e)=>T3(e)&&e.key===n,_3=["TSAsExpression","TSTypeAssertion","TSNonNullExpression","TSInstantiationExpression","TSSatisfiesExpression"];function x3(n){return _3.includes(n.type)?x3(n.expression):n}const Ms=n=>n.type===4&&n.isStatic;function uC(n){switch(n){case"Teleport":case"teleport":return ep;case"Suspense":case"suspense":return qS;case"KeepAlive":case"keep-alive":return Gg;case"BaseTransition":case"base-transition":return nC}}const Qae=/^\d|[^\$\w\xA0-\uFFFF]/,Fy=n=>!Qae.test(n),Zae=/[A-Za-z_$\xA0-\uFFFF]/,ele=/[\.\?\w$\xA0-\uFFFF]/,tle=/\s+[.[]\s*|\s*[.[]\s+/g,A3=n=>n.type===4?n.content:n.loc.source,I3=n=>{const e=A3(n).trim().replace(tle,a=>a.trim());let t=0,r=[],i=0,s=0,o=null;for(let a=0;a<e.length;a++){const l=e.charAt(a);switch(t){case 0:if(l==="[")r.push(t),t=1,i++;else if(l==="(")r.push(t),t=2,s++;else if(!(a===0?Zae:ele).test(l))return!1;break;case 1:l==="'"||l==='"'||l==="`"?(r.push(t),t=3,o=l):l==="["?i++:l==="]"&&(--i||(t=r.pop()));break;case 2:if(l==="'"||l==='"'||l==="`")r.push(t),t=3,o=l;else if(l==="(")s++;else if(l===")"){if(a===e.length-1)return!1;--s||(t=r.pop())}break;case 3:l===o&&(t=r.pop(),o=null);break}}return!i&&!s},nle=Ci,hC=I3,rle=/^\s*(async\s*)?(\([^)]*?\)|[\w$_]+)\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,C3=n=>rle.test(A3(n)),ile=Ci,O3=C3;function sle(n,e,t=e.length){return k3({offset:n.offset,line:n.line,column:n.column},e,t)}function k3(n,e,t=e.length){let r=0,i=-1;for(let s=0;s<t;s++)e.charCodeAt(s)===10&&(r++,i=s);return n.offset+=t,n.line+=r,n.column=i===-1?n.column+t:t-i,n}function ole(n,e){if(!n)throw new Error(e||"unexpected compiler condition")}function Rs(n,e,t=!1){for(let r=0;r<n.props.length;r++){const i=n.props[r];if(i.type===7&&(t||i.exp)&&(qt(e)?i.name===e:e.test(i.name)))return i}}function By(n,e,t=!1,r=!1){for(let i=0;i<n.props.length;i++){const s=n.props[i];if(s.type===6){if(t)continue;if(s.name===e&&(s.value||r))return s}else if(s.name==="bind"&&(s.exp||r)&&zu(s.arg,e))return s}}function zu(n,e){return!!(n&&Ms(n)&&n.content===e)}function R3(n){return n.props.some(e=>e.type===7&&e.name==="bind"&&(!e.arg||e.arg.type!==4||!e.arg.isStatic))}function eb(n){return n.type===5||n.type===2}function fC(n){return n.type===7&&n.name==="slot"}function _p(n){return n.type===1&&n.tagType===3}function Xg(n){return n.type===1&&n.tagType===2}const ale=new Set([Sp,Jp]);function P3(n,e=[]){if(n&&!qt(n)&&n.type===14){const t=n.callee;if(!qt(t)&&ale.has(t))return P3(n.arguments[0],e.concat(n))}return[n,e]}function Jg(n,e,t){let r,i=n.type===13?n.props:n.arguments[2],s=[],o;if(i&&!qt(i)&&i.type===14){const a=P3(i);i=a[0],s=a[1],o=s[s.length-1]}if(i==null||qt(i))r=No([e]);else if(i.type===14){const a=i.arguments[0];!qt(a)&&a.type===15?hM(e,a)||a.properties.unshift(e):i.callee===oE?r=si(t.helper(qg),[No([e]),i]):i.arguments.unshift(No([e])),!r&&(r=i)}else i.type===15?(hM(e,i)||i.properties.unshift(e),r=i):(r=si(t.helper(qg),[No([e]),i]),o&&o.callee===Jp&&(o=s[s.length-2]));n.type===13?o?o.arguments[0]=r:n.props=r:o?o.arguments[0]=r:n.arguments[2]=r}function hM(n,e){let t=!1;if(n.key.type===4){const r=n.key.content;t=e.properties.some(i=>i.key.type===4&&i.key.content===r)}return t}function xp(n,e){return`_${e}_${n.replace(/[^\w]/g,(t,r)=>t==="-"?"_":n.charCodeAt(r).toString())}`}function za(n,e){if(!n||Object.keys(e).length===0)return!1;switch(n.type){case 1:for(let t=0;t<n.props.length;t++){const r=n.props[t];if(r.type===7&&(za(r.arg,e)||za(r.exp,e)))return!0}return n.children.some(t=>za(t,e));case 11:return za(n.source,e)?!0:n.children.some(t=>za(t,e));case 9:return n.branches.some(t=>za(t,e));case 10:return za(n.condition,e)?!0:n.children.some(t=>za(t,e));case 4:return!n.isStatic&&Fy(n.content)&&!!e[n.content];case 8:return n.children.some(t=>Gn(t)&&za(t,e));case 5:case 12:return za(n.content,e);case 2:case 3:case 20:return!1;default:return!1}}function D3(n){return n.type===14&&n.callee===lE?n.arguments[1].returns:n}const M3=/([\s\S]*?)\s+(?:in|of)\s+(\S[\s\S]*)/,N3={parseMode:"base",ns:0,delimiters:["{{","}}"],getNamespace:()=>0,isVoidTag:Fd,isPreTag:Fd,isIgnoreNewlineTag:Fd,isCustomElement:Fd,onError:cC,onWarn:E3,comments:!1,prefixIdentifiers:!1};let Kn=N3,Qg=null,Nc="",ts=null,Nn=null,to="",bc=-1,cf=-1,dC=0,Du=!1,ex=null;const Sr=[],Fr=new Lae(Sr,{onerr:yc,ontext(n,e){e0(Vi(n,e),n,e)},ontextentity(n,e,t){e0(n,e,t)},oninterpolation(n,e){if(Du)return e0(Vi(n,e),n,e);let t=n+Fr.delimiterOpen.length,r=e-Fr.delimiterClose.length;for(;Po(Nc.charCodeAt(t));)t++;for(;Po(Nc.charCodeAt(r-1));)r--;let i=Vi(t,r);i.includes("&")&&(i=Kn.decodeEntities(i,!1)),tx({type:5,content:nb(i,!1,qr(t,r)),loc:qr(n,e)})},onopentagname(n,e){const t=Vi(n,e);ts={type:1,tag:t,ns:Kn.getNamespace(t,Sr[0],Kn.ns),tagType:0,props:[],children:[],loc:qr(n-1,e),codegenNode:void 0}},onopentagend(n){dM(n)},onclosetag(n,e){const t=Vi(n,e);if(!Kn.isVoidTag(t)){let r=!1;for(let i=0;i<Sr.length;i++)if(Sr[i].tag.toLowerCase()===t.toLowerCase()){r=!0,i>0&&yc(24,Sr[0].loc.start.offset);for(let o=0;o<=i;o++){const a=Sr.shift();tb(a,e,o<i)}break}r||yc(23,L3(n,60))}},onselfclosingtag(n){const e=ts.tag;ts.isSelfClosing=!0,dM(n),Sr[0]&&Sr[0].tag===e&&tb(Sr.shift(),n)},onattribname(n,e){Nn={type:6,name:Vi(n,e),nameLoc:qr(n,e),value:void 0,loc:qr(n)}},ondirname(n,e){const t=Vi(n,e),r=t==="."||t===":"?"bind":t==="@"?"on":t==="#"?"slot":t.slice(2);if(!Du&&r===""&&yc(26,n),Du||r==="")Nn={type:6,name:t,nameLoc:qr(n,e),value:void 0,loc:qr(n)};else if(Nn={type:7,name:r,rawName:t,exp:void 0,arg:void 0,modifiers:t==="."?[rn("prop")]:[],loc:qr(n)},r==="pre"){Du=Fr.inVPre=!0,ex=ts;const i=ts.props;for(let s=0;s<i.length;s++)i[s].type===7&&(i[s]=vle(i[s]))}},ondirarg(n,e){if(n===e)return;const t=Vi(n,e);if(Du)Nn.name+=t,yf(Nn.nameLoc,e);else{const r=t[0]!=="[";Nn.arg=nb(r?t:t.slice(1,-1),r,qr(n,e),r?3:0)}},ondirmodifier(n,e){const t=Vi(n,e);if(Du)Nn.name+="."+t,yf(Nn.nameLoc,e);else if(Nn.name==="slot"){const r=Nn.arg;r&&(r.content+="."+t,yf(r.loc,e))}else{const r=rn(t,!0,qr(n,e));Nn.modifiers.push(r)}},onattribdata(n,e){to+=Vi(n,e),bc<0&&(bc=n),cf=e},onattribentity(n,e,t){to+=n,bc<0&&(bc=e),cf=t},onattribnameend(n){const e=Nn.loc.start.offset,t=Vi(e,n);Nn.type===7&&(Nn.rawName=t),ts.props.some(r=>(r.type===7?r.rawName:r.name)===t)&&yc(2,e)},onattribend(n,e){if(ts&&Nn){if(yf(Nn.loc,e),n!==0)if(to.includes("&")&&(to=Kn.decodeEntities(to,!0)),Nn.type===6)Nn.name==="class"&&(to=F3(to).trim()),n===1&&!to&&yc(13,e),Nn.value={type:2,content:to,loc:n===1?qr(bc,cf):qr(bc-1,cf+1)},Fr.inSFCRoot&&ts.tag==="template"&&Nn.name==="lang"&&to&&to!=="html"&&Fr.enterRCDATA(dw("</template"),0);else{let t=0;Nn.exp=nb(to,!1,qr(bc,cf),0,t),Nn.name==="for"&&(Nn.forParseResult=cle(Nn.exp));let r=-1;Nn.name==="bind"&&(r=Nn.modifiers.findIndex(i=>i.content==="sync"))>-1&&Tp("COMPILER_V_BIND_SYNC",Kn,Nn.loc,Nn.rawName)&&(Nn.name="model",Nn.modifiers.splice(r,1))}(Nn.type!==7||Nn.name!=="pre")&&ts.props.push(Nn)}to="",bc=cf=-1},oncomment(n,e){Kn.comments&&tx({type:3,content:Vi(n,e),loc:qr(n-4,e+3)})},onend(){const n=Nc.length;for(let e=0;e<Sr.length;e++)tb(Sr[e],n-1),yc(24,Sr[e].loc.start.offset)},oncdata(n,e){Sr[0].ns!==0?e0(Vi(n,e),n,e):yc(1,n-9)},onprocessinginstruction(n){(Sr[0]?Sr[0].ns:Kn.ns)===0&&yc(21,n-1)}}),fM=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,lle=/^\(|\)$/g;function cle(n){const e=n.loc,t=n.content,r=t.match(M3);if(!r)return;const[,i,s]=r,o=(d,p,y=!1)=>{const w=e.start.offset+p,S=w+d.length;return nb(d,!1,qr(w,S),0,y?1:0)},a={source:o(s.trim(),t.indexOf(s,i.length)),value:void 0,key:void 0,index:void 0,finalized:!1};let l=i.trim().replace(lle,"").trim();const c=i.indexOf(l),h=l.match(fM);if(h){l=l.replace(fM,"").trim();const d=h[1].trim();let p;if(d&&(p=t.indexOf(d,c+l.length),a.key=o(d,p,!0)),h[2]){const y=h[2].trim();y&&(a.index=o(y,t.indexOf(y,a.key?p+d.length:c+l.length),!0))}}return l&&(a.value=o(l,c,!0)),a}function Vi(n,e){return Nc.slice(n,e)}function dM(n){Fr.inSFCRoot&&(ts.innerLoc=qr(n+1,n+1)),tx(ts);const{tag:e,ns:t}=ts;t===0&&Kn.isPreTag(e)&&dC++,Kn.isVoidTag(e)?tb(ts,n):(Sr.unshift(ts),(t===1||t===2)&&(Fr.inXML=!0)),ts=null}function e0(n,e,t){{const s=Sr[0]&&Sr[0].tag;s!=="script"&&s!=="style"&&n.includes("&")&&(n=Kn.decodeEntities(n,!1))}const r=Sr[0]||Qg,i=r.children[r.children.length-1];i&&i.type===2?(i.content+=n,yf(i.loc,t)):r.children.push({type:2,content:n,loc:qr(e,t)})}function tb(n,e,t=!1){t?yf(n.loc,L3(e,60)):yf(n.loc,ule(e,62)+1),Fr.inSFCRoot&&(n.children.length?n.innerLoc.end=Sn({},n.children[n.children.length-1].loc.end):n.innerLoc.end=Sn({},n.innerLoc.start),n.innerLoc.source=Vi(n.innerLoc.start.offset,n.innerLoc.end.offset));const{tag:r,ns:i,children:s}=n;if(Du||(r==="slot"?n.tagType=2:pM(n)?n.tagType=3:fle(n)&&(n.tagType=1)),Fr.inRCDATA||(n.children=V3(s)),i===0&&Kn.isIgnoreNewlineTag(r)){const o=s[0];o&&o.type===2&&(o.content=o.content.replace(/^\r?\n/,""))}i===0&&Kn.isPreTag(r)&&dC--,ex===n&&(Du=Fr.inVPre=!1,ex=null),Fr.inXML&&(Sr[0]?Sr[0].ns:Kn.ns)===0&&(Fr.inXML=!1);{const o=n.props;if(!Fr.inSFCRoot&&Cf("COMPILER_NATIVE_TEMPLATE",Kn)&&n.tag==="template"&&!pM(n)){const l=Sr[0]||Qg,c=l.children.indexOf(n);l.children.splice(c,1,...n.children)}const a=o.find(l=>l.type===6&&l.name==="inline-template");a&&Tp("COMPILER_INLINE_TEMPLATE",Kn,a.loc)&&n.children.length&&(a.value={type:2,content:Vi(n.children[0].loc.start.offset,n.children[n.children.length-1].loc.end.offset),loc:a.loc})}}function ule(n,e){let t=n;for(;Nc.charCodeAt(t)!==e&&t<Nc.length-1;)t++;return t}function L3(n,e){let t=n;for(;Nc.charCodeAt(t)!==e&&t>=0;)t--;return t}const hle=new Set(["if","else","else-if","for","slot"]);function pM({tag:n,props:e}){if(n==="template"){for(let t=0;t<e.length;t++)if(e[t].type===7&&hle.has(e[t].name))return!0}return!1}function fle({tag:n,props:e}){if(Kn.isCustomElement(n))return!1;if(n==="component"||dle(n.charCodeAt(0))||uC(n)||Kn.isBuiltInComponent&&Kn.isBuiltInComponent(n)||Kn.isNativeTag&&!Kn.isNativeTag(n))return!0;for(let t=0;t<e.length;t++){const r=e[t];if(r.type===6){if(r.name==="is"&&r.value){if(r.value.content.startsWith("vue:"))return!0;if(Tp("COMPILER_IS_ON_ELEMENT",Kn,r.loc))return!0}}else if(r.name==="bind"&&zu(r.arg,"is")&&Tp("COMPILER_IS_ON_ELEMENT",Kn,r.loc))return!0}return!1}function dle(n){return n>64&&n<91}const ple=/\r\n/g;function V3(n,e){const t=Kn.whitespace!=="preserve";let r=!1;for(let i=0;i<n.length;i++){const s=n[i];if(s.type===2)if(dC)s.content=s.content.replace(ple,`
`);else if(mle(s.content)){const o=n[i-1]&&n[i-1].type,a=n[i+1]&&n[i+1].type;!o||!a||t&&(o===3&&(a===3||a===1)||o===1&&(a===3||a===1&&gle(s.content)))?(r=!0,n[i]=null):s.content=" "}else t&&(s.content=F3(s.content))}return r?n.filter(Boolean):n}function mle(n){for(let e=0;e<n.length;e++)if(!Po(n.charCodeAt(e)))return!1;return!0}function gle(n){for(let e=0;e<n.length;e++){const t=n.charCodeAt(e);if(t===10||t===13)return!0}return!1}function F3(n){let e="",t=!1;for(let r=0;r<n.length;r++)Po(n.charCodeAt(r))?t||(e+=" ",t=!0):(e+=n[r],t=!1);return e}function tx(n){(Sr[0]||Qg).children.push(n)}function qr(n,e){return{start:Fr.getPos(n),end:e==null?e:Fr.getPos(e),source:e==null?e:Vi(n,e)}}function yle(n){return qr(n.start.offset,n.end.offset)}function yf(n,e){n.end=Fr.getPos(e),n.source=Vi(n.start.offset,e)}function vle(n){const e={type:6,name:n.rawName,nameLoc:qr(n.loc.start.offset,n.loc.start.offset+n.rawName.length),value:void 0,loc:n.loc};if(n.exp){const t=n.exp.loc;t.end.offset<n.loc.end.offset&&(t.start.offset--,t.start.column--,t.end.offset++,t.end.column++),e.value={type:2,content:n.exp.content,loc:t}}return e}function nb(n,e=!1,t,r=0,i=0){return rn(n,e,t,r)}function yc(n,e,t){Kn.onError(pr(n,qr(e,e)))}function ble(){Fr.reset(),ts=null,Nn=null,to="",bc=-1,cf=-1,Sr.length=0}function pC(n,e){if(ble(),Nc=n,Kn=Sn({},N3),e){let i;for(i in e)e[i]!=null&&(Kn[i]=e[i])}Fr.mode=Kn.parseMode==="html"?1:Kn.parseMode==="sfc"?2:0,Fr.inXML=Kn.ns===1||Kn.ns===2;const t=e&&e.delimiters;t&&(Fr.delimiterOpen=dw(t[0]),Fr.delimiterClose=dw(t[1]));const r=Qg=b3([],n);return Fr.parse(Nc),r.loc=qr(0,n.length),r.children=V3(r.children),Qg=null,r}function wle(n,e){rb(n,void 0,e,B3(n,n.children[0]))}function B3(n,e){const{children:t}=n;return t.length===1&&e.type===1&&!Xg(e)}function rb(n,e,t,r=!1,i=!1){const{children:s}=n,o=[];for(let h=0;h<s.length;h++){const d=s[h];if(d.type===1&&d.tagType===0){const p=r?0:uo(d,t);if(p>0){if(p>=2){d.codegenNode.patchFlag=-1,o.push(d);continue}}else{const y=d.codegenNode;if(y.type===13){const w=y.patchFlag;if((w===void 0||w===512||w===1)&&$3(d,t)>=2){const S=H3(d);S&&(y.props=t.hoist(S))}y.dynamicProps&&(y.dynamicProps=t.hoist(y.dynamicProps))}}}else if(d.type===12&&(r?0:uo(d,t))>=2){o.push(d);continue}if(d.type===1){const p=d.tagType===1;p&&t.scopes.vSlot++,rb(d,n,t,!1,i),p&&t.scopes.vSlot--}else if(d.type===11)rb(d,n,t,d.children.length===1,!0);else if(d.type===9)for(let p=0;p<d.branches.length;p++)rb(d.branches[p],n,t,d.branches[p].children.length===1,i)}let a=!1;if(o.length===s.length&&n.type===1){if(n.tagType===0&&n.codegenNode&&n.codegenNode.type===13&&wt(n.codegenNode.children))n.codegenNode.children=l(ih(n.codegenNode.children)),a=!0;else if(n.tagType===1&&n.codegenNode&&n.codegenNode.type===13&&n.codegenNode.children&&!wt(n.codegenNode.children)&&n.codegenNode.children.type===15){const h=c(n.codegenNode,"default");h&&(h.returns=l(ih(h.returns)),a=!0)}else if(n.tagType===3&&e&&e.type===1&&e.tagType===1&&e.codegenNode&&e.codegenNode.type===13&&e.codegenNode.children&&!wt(e.codegenNode.children)&&e.codegenNode.children.type===15){const h=Rs(n,"slot",!0),d=h&&h.arg&&c(e.codegenNode,h.arg);d&&(d.returns=l(ih(d.returns)),a=!0)}}if(!a)for(const h of o)h.codegenNode=t.cache(h.codegenNode);function l(h){const d=t.cache(h);return i&&t.hmr&&(d.needArraySpread=!0),d}function c(h,d){if(h.children&&!wt(h.children)&&h.children.type===15){const p=h.children.properties.find(y=>y.key===d||y.key.content===d);return p&&p.value}}o.length&&t.transformHoist&&t.transformHoist(s,t,n)}function uo(n,e){const{constantCache:t}=e;switch(n.type){case 1:if(n.tagType!==0)return 0;const r=t.get(n);if(r!==void 0)return r;const i=n.codegenNode;if(i.type!==13||i.isBlock&&n.tag!=="svg"&&n.tag!=="foreignObject"&&n.tag!=="math")return 0;if(i.patchFlag===void 0){let o=3;const a=$3(n,e);if(a===0)return t.set(n,0),0;a<o&&(o=a);for(let l=0;l<n.children.length;l++){const c=uo(n.children[l],e);if(c===0)return t.set(n,0),0;c<o&&(o=c)}if(o>1)for(let l=0;l<n.props.length;l++){const c=n.props[l];if(c.type===7&&c.name==="bind"&&c.exp){const h=uo(c.exp,e);if(h===0)return t.set(n,0),0;h<o&&(o=h)}}if(i.isBlock){for(let l=0;l<n.props.length;l++)if(n.props[l].type===7)return t.set(n,0),0;e.removeHelper(gh),e.removeHelper(Wf(e.inSSR,i.isComponent)),i.isBlock=!1,e.helper(Hf(e.inSSR,i.isComponent))}return t.set(n,o),o}else return t.set(n,0),0;case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return uo(n.content,e);case 4:return n.constType;case 8:let s=3;for(let o=0;o<n.children.length;o++){const a=n.children[o];if(qt(a)||Vs(a))continue;const l=uo(a,e);if(l===0)return 0;l<s&&(s=l)}return s;case 20:return 2;default:return 0}}const Sle=new Set([iE,sE,Sp,Jp]);function U3(n,e){if(n.type===14&&!qt(n.callee)&&Sle.has(n.callee)){const t=n.arguments[0];if(t.type===4)return uo(t,e);if(t.type===14)return U3(t,e)}return 0}function $3(n,e){let t=3;const r=H3(n);if(r&&r.type===15){const{properties:i}=r;for(let s=0;s<i.length;s++){const{key:o,value:a}=i[s],l=uo(o,e);if(l===0)return l;l<t&&(t=l);let c;if(a.type===4?c=uo(a,e):a.type===14?c=U3(a,e):c=0,c===0)return c;c<t&&(t=c)}}return t}function H3(n){const e=n.codegenNode;if(e.type===13)return e.props}function W3(n,{filename:e="",prefixIdentifiers:t=!1,hoistStatic:r=!1,hmr:i=!1,cacheHandlers:s=!1,nodeTransforms:o=[],directiveTransforms:a={},transformHoist:l=null,isBuiltInComponent:c=Ci,isCustomElement:h=Ci,expressionPlugins:d=[],scopeId:p=null,slotted:y=!0,ssr:w=!1,inSSR:S=!1,ssrCssVars:E="",bindingMetadata:C=wn,inline:L=!1,isTS:P=!1,onError:F=cC,onWarn:U=E3,compatConfig:j}){const N=e.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),O={filename:e,selfName:N&&_h(cr(N[1])),prefixIdentifiers:t,hoistStatic:r,hmr:i,cacheHandlers:s,nodeTransforms:o,directiveTransforms:a,transformHoist:l,isBuiltInComponent:c,isCustomElement:h,expressionPlugins:d,scopeId:p,slotted:y,ssr:w,inSSR:S,ssrCssVars:E,bindingMetadata:C,inline:L,isTS:P,onError:F,onWarn:U,compatConfig:j,root:n,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],cached:[],constantCache:new WeakMap,temps:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,grandParent:null,currentNode:n,childIndex:0,inVOnce:!1,helper(A){const R=O.helpers.get(A)||0;return O.helpers.set(A,R+1),A},removeHelper(A){const R=O.helpers.get(A);if(R){const k=R-1;k?O.helpers.set(A,k):O.helpers.delete(A)}},helperString(A){return`_${Uf[O.helper(A)]}`},replaceNode(A){O.parent.children[O.childIndex]=O.currentNode=A},removeNode(A){const R=O.parent.children,k=A?R.indexOf(A):O.currentNode?O.childIndex:-1;!A||A===O.currentNode?(O.currentNode=null,O.onNodeRemoved()):O.childIndex>k&&(O.childIndex--,O.onNodeRemoved()),O.parent.children.splice(k,1)},onNodeRemoved:Ci,addIdentifiers(A){},removeIdentifiers(A){},hoist(A){qt(A)&&(A=rn(A)),O.hoists.push(A);const R=rn(`_hoisted_${O.hoists.length}`,!1,A.loc,2);return R.hoisted=A,R},cache(A,R=!1,k=!1){const V=w3(O.cached.length,A,R,k);return O.cached.push(V),V}};return O.filters=new Set,O}function z3(n,e){const t=W3(n,e);Uy(n,t),e.hoistStatic&&wle(n,t),e.ssr||Ele(n,t),n.helpers=new Set([...t.helpers.keys()]),n.components=[...t.components],n.directives=[...t.directives],n.imports=t.imports,n.hoists=t.hoists,n.temps=t.temps,n.cached=t.cached,n.transformed=!0,n.filters=[...t.filters]}function Ele(n,e){const{helper:t}=e,{children:r}=n;if(r.length===1){const i=r[0];if(B3(n,i)&&i.codegenNode){const s=i.codegenNode;s.type===13&&cE(s,e),n.codegenNode=s}else n.codegenNode=i}else if(r.length>1){let i=64;n.codegenNode=Ep(e,t(wp),void 0,n.children,i,void 0,void 0,!0,void 0,!1)}}function Tle(n,e){let t=0;const r=()=>{t--};for(;t<n.children.length;t++){const i=n.children[t];qt(i)||(e.grandParent=e.parent,e.parent=n,e.childIndex=t,e.onNodeRemoved=r,Uy(i,e))}}function Uy(n,e){e.currentNode=n;const{nodeTransforms:t}=e,r=[];for(let s=0;s<t.length;s++){const o=t[s](n,e);if(o&&(wt(o)?r.push(...o):r.push(o)),e.currentNode)n=e.currentNode;else return}switch(n.type){case 3:e.ssr||e.helper(Xp);break;case 5:e.ssr||e.helper(Vy);break;case 9:for(let s=0;s<n.branches.length;s++)Uy(n.branches[s],e);break;case 10:case 11:case 1:case 0:Tle(n,e);break}e.currentNode=n;let i=r.length;for(;i--;)r[i]()}function mC(n,e){const t=qt(n)?r=>r===n:r=>n.test(r);return(r,i)=>{if(r.type===1){const{props:s}=r;if(r.tagType===3&&s.some(fC))return;const o=[];for(let a=0;a<s.length;a++){const l=s[a];if(l.type===7&&t(l.name)){s.splice(a,1),a--;const c=e(r,l,i);c&&o.push(c)}}return o}}}const uE="/*@__PURE__*/",j3=n=>`${Uf[n]}: _${Uf[n]}`;function _le(n,{mode:e="function",prefixIdentifiers:t=e==="module",sourceMap:r=!1,filename:i="template.vue.html",scopeId:s=null,optimizeImports:o=!1,runtimeGlobalName:a="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:c="vue/server-renderer",ssr:h=!1,isTS:d=!1,inSSR:p=!1}){const y={mode:e,prefixIdentifiers:t,sourceMap:r,filename:i,scopeId:s,optimizeImports:o,runtimeGlobalName:a,runtimeModuleName:l,ssrRuntimeModuleName:c,ssr:h,isTS:d,inSSR:p,source:n.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(S){return`_${Uf[S]}`},push(S,E=-2,C){y.code+=S},indent(){w(++y.indentLevel)},deindent(S=!1){S?--y.indentLevel:w(--y.indentLevel)},newline(){w(y.indentLevel)}};function w(S){y.push(`
`+"  ".repeat(S),0)}return y}function K3(n,e={}){const t=_le(n,e);e.onContextCreated&&e.onContextCreated(t);const{mode:r,push:i,prefixIdentifiers:s,indent:o,deindent:a,newline:l,scopeId:c,ssr:h}=t,d=Array.from(n.helpers),p=d.length>0,y=!s&&r!=="module";xle(n,t);const S=h?"ssrRender":"render",C=(h?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(i(`function ${S}(${C}) {`),o(),y&&(i("with (_ctx) {"),o(),p&&(i(`const { ${d.map(j3).join(", ")} } = _Vue
`,-1),l())),n.components.length&&(a1(n.components,"component",t),(n.directives.length||n.temps>0)&&l()),n.directives.length&&(a1(n.directives,"directive",t),n.temps>0&&l()),n.filters&&n.filters.length&&(l(),a1(n.filters,"filter",t),l()),n.temps>0){i("let ");for(let L=0;L<n.temps;L++)i(`${L>0?", ":""}_temp${L}`)}return(n.components.length||n.directives.length||n.temps)&&(i(`
`,0),l()),h||i("return "),n.codegenNode?ms(n.codegenNode,t):i("null"),y&&(a(),i("}")),a(),i("}"),{ast:n,code:t.code,preamble:"",map:t.map?t.map.toJSON():void 0}}function xle(n,e){const{ssr:t,prefixIdentifiers:r,push:i,newline:s,runtimeModuleName:o,runtimeGlobalName:a,ssrRuntimeModuleName:l}=e,c=a,h=Array.from(n.helpers);if(h.length>0&&(i(`const _Vue = ${c}
`,-1),n.hoists.length)){const d=[YS,XS,Xp,JS,sC].filter(p=>h.includes(p)).map(j3).join(", ");i(`const { ${d} } = _Vue
`,-1)}Ale(n.hoists,e),s(),i("return ")}function a1(n,e,{helper:t,push:r,newline:i,isTS:s}){const o=t(e==="filter"?tE:e==="component"?QS:eE);for(let a=0;a<n.length;a++){let l=n[a];const c=l.endsWith("__self");c&&(l=l.slice(0,-6)),r(`const ${xp(l,e)} = ${o}(${JSON.stringify(l)}${c?", true":""})${s?"!":""}`),a<n.length-1&&i()}}function Ale(n,e){if(!n.length)return;e.pure=!0;const{push:t,newline:r}=e;r();for(let i=0;i<n.length;i++){const s=n[i];s&&(t(`const _hoisted_${i+1} = `),ms(s,e),r())}e.pure=!1}function gC(n,e){const t=n.length>3||!1;e.push("["),t&&e.indent(),$y(n,e,t),t&&e.deindent(),e.push("]")}function $y(n,e,t=!1,r=!0){const{push:i,newline:s}=e;for(let o=0;o<n.length;o++){const a=n[o];qt(a)?i(a,-3):wt(a)?gC(a,e):ms(a,e),o<n.length-1&&(t?(r&&i(","),s()):r&&i(", "))}}function ms(n,e){if(qt(n)){e.push(n,-3);return}if(Vs(n)){e.push(e.helper(n));return}switch(n.type){case 1:case 9:case 11:ms(n.codegenNode,e);break;case 2:Ile(n,e);break;case 4:G3(n,e);break;case 5:Cle(n,e);break;case 12:ms(n.codegenNode,e);break;case 8:q3(n,e);break;case 3:kle(n,e);break;case 13:Rle(n,e);break;case 14:Dle(n,e);break;case 15:Mle(n,e);break;case 17:Nle(n,e);break;case 18:Lle(n,e);break;case 19:Vle(n,e);break;case 20:Fle(n,e);break;case 21:$y(n.body,e,!0,!1);break}}function Ile(n,e){e.push(JSON.stringify(n.content),-3,n)}function G3(n,e){const{content:t,isStatic:r}=n;e.push(r?JSON.stringify(t):t,-3,n)}function Cle(n,e){const{push:t,helper:r,pure:i}=e;i&&t(uE),t(`${r(Vy)}(`),ms(n.content,e),t(")")}function q3(n,e){for(let t=0;t<n.children.length;t++){const r=n.children[t];qt(r)?e.push(r,-3):ms(r,e)}}function Ole(n,e){const{push:t}=e;if(n.type===8)t("["),q3(n,e),t("]");else if(n.isStatic){const r=Fy(n.content)?n.content:JSON.stringify(n.content);t(r,-2,n)}else t(`[${n.content}]`,-3,n)}function kle(n,e){const{push:t,helper:r,pure:i}=e;i&&t(uE),t(`${r(Xp)}(${JSON.stringify(n.content)})`,-3,n)}function Rle(n,e){const{push:t,helper:r,pure:i}=e,{tag:s,props:o,children:a,patchFlag:l,dynamicProps:c,directives:h,isBlock:d,disableTracking:p,isComponent:y}=n;let w;l&&(w=String(l)),h&&t(r(nE)+"("),d&&t(`(${r(gh)}(${p?"true":""}), `),i&&t(uE);const S=d?Wf(e.inSSR,y):Hf(e.inSSR,y);t(r(S)+"(",-2,n),$y(Ple([s,o,a,w,c]),e),t(")"),d&&t(")"),h&&(t(", "),ms(h,e),t(")"))}function Ple(n){let e=n.length;for(;e--&&n[e]==null;);return n.slice(0,e+1).map(t=>t||"null")}function Dle(n,e){const{push:t,helper:r,pure:i}=e,s=qt(n.callee)?n.callee:r(n.callee);i&&t(uE),t(s+"(",-2,n),$y(n.arguments,e),t(")")}function Mle(n,e){const{push:t,indent:r,deindent:i,newline:s}=e,{properties:o}=n;if(!o.length){t("{}",-2,n);return}const a=o.length>1||!1;t(a?"{":"{ "),a&&r();for(let l=0;l<o.length;l++){const{key:c,value:h}=o[l];Ole(c,e),t(": "),ms(h,e),l<o.length-1&&(t(","),s())}a&&i(),t(a?"}":" }")}function Nle(n,e){gC(n.elements,e)}function Lle(n,e){const{push:t,indent:r,deindent:i}=e,{params:s,returns:o,body:a,newline:l,isSlot:c}=n;c&&t(`_${Uf[aE]}(`),t("(",-2,n),wt(s)?$y(s,e):s&&ms(s,e),t(") => "),(l||a)&&(t("{"),r()),o?(l&&t("return "),wt(o)?gC(o,e):ms(o,e)):a&&ms(a,e),(l||a)&&(i(),t("}")),c&&(n.isNonScopedSlot&&t(", undefined, true"),t(")"))}function Vle(n,e){const{test:t,consequent:r,alternate:i,newline:s}=n,{push:o,indent:a,deindent:l,newline:c}=e;if(t.type===4){const d=!Fy(t.content);d&&o("("),G3(t,e),d&&o(")")}else o("("),ms(t,e),o(")");s&&a(),e.indentLevel++,s||o(" "),o("? "),ms(r,e),e.indentLevel--,s&&c(),s||o(" "),o(": ");const h=i.type===19;h||e.indentLevel++,ms(i,e),h||e.indentLevel--,s&&l(!0)}function Fle(n,e){const{push:t,helper:r,indent:i,deindent:s,newline:o}=e,{needPauseTracking:a,needArraySpread:l}=n;l&&t("[...("),t(`_cache[${n.index}] || (`),a&&(i(),t(`${r(Yg)}(-1`),n.inVOnce&&t(", true"),t("),"),o(),t("(")),t(`_cache[${n.index}] = `),ms(n.value,e),a&&(t(`).cacheIndex = ${n.index},`),o(),t(`${r(Yg)}(1),`),o(),t(`_cache[${n.index}]`),s()),t(")"),l&&t(")]")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const Ble=(n,e)=>{if(n.type===5)n.content=ib(n.content,e);else if(n.type===1){const t=Rs(n,"memo");for(let r=0;r<n.props.length;r++){const i=n.props[r];if(i.type===7&&i.name!=="for"){const s=i.exp,o=i.arg;s&&s.type===4&&!(i.name==="on"&&o)&&!(t&&o&&o.type===4&&o.content==="key")&&(i.exp=ib(s,e,i.name==="slot")),o&&o.type===4&&!o.isStatic&&(i.arg=ib(o,e))}}}};function ib(n,e,t=!1,r=!1,i=Object.create(e.identifiers)){return n}function Y3(n){return qt(n)?n:n.type===4?n.content:n.children.map(Y3).join("")}const Ule=mC(/^(if|else|else-if)$/,(n,e,t)=>X3(n,e,t,(r,i,s)=>{const o=t.parent.children;let a=o.indexOf(r),l=0;for(;a-->=0;){const c=o[a];c&&c.type===9&&(l+=c.branches.length)}return()=>{if(s)r.codegenNode=gM(i,l,t);else{const c=$le(r.codegenNode);c.alternate=gM(i,l+r.branches.length-1,t)}}}));function X3(n,e,t,r){if(e.name!=="else"&&(!e.exp||!e.exp.content.trim())){const i=e.exp?e.exp.loc:n.loc;t.onError(pr(28,e.loc)),e.exp=rn("true",!1,i)}if(e.name==="if"){const i=mM(n,e),s={type:9,loc:yle(n.loc),branches:[i]};if(t.replaceNode(s),r)return r(s,i,!0)}else{const i=t.parent.children;let s=i.indexOf(n);for(;s-->=-1;){const o=i[s];if(o&&o.type===3){t.removeNode(o);continue}if(o&&o.type===2&&!o.content.trim().length){t.removeNode(o);continue}if(o&&o.type===9){e.name==="else-if"&&o.branches[o.branches.length-1].condition===void 0&&t.onError(pr(30,n.loc)),t.removeNode();const a=mM(n,e);o.branches.push(a);const l=r&&r(o,a,!1);Uy(a,t),l&&l(),t.currentNode=null}else t.onError(pr(30,n.loc));break}}}function mM(n,e){const t=n.tagType===3;return{type:10,loc:n.loc,condition:e.name==="else"?void 0:e.exp,children:t&&!Rs(n,"for")?n.children:[n],userKey:By(n,"key"),isTemplateIf:t}}function gM(n,e,t){return n.condition?fw(n.condition,yM(n,e,t),si(t.helper(Xp),['""',"true"])):yM(n,e,t)}function yM(n,e,t){const{helper:r}=t,i=Ur("key",rn(`${e}`,!1,Ei,2)),{children:s}=n,o=s[0];if(s.length!==1||o.type!==1)if(s.length===1&&o.type===11){const l=o.codegenNode;return Jg(l,i,t),l}else return Ep(t,r(wp),No([i]),s,64,void 0,void 0,!0,!1,!1,n.loc);else{const l=o.codegenNode,c=D3(l);return c.type===13&&cE(c,t),Jg(c,i,t),l}}function $le(n){for(;;)if(n.type===19)if(n.alternate.type===19)n=n.alternate;else return n;else n.type===20&&(n=n.value)}const J3=(n,e,t)=>{const{modifiers:r,loc:i}=n,s=n.arg;let{exp:o}=n;if(o&&o.type===4&&!o.content.trim()&&(o=void 0),!o){if(s.type!==4||!s.isStatic)return t.onError(pr(52,s.loc)),{props:[Ur(s,rn("",!0,i))]};Q3(n),o=n.exp}return s.type!==4?(s.children.unshift("("),s.children.push(') || ""')):s.isStatic||(s.content=`${s.content} || ""`),r.some(a=>a.content==="camel")&&(s.type===4?s.isStatic?s.content=cr(s.content):s.content=`${t.helperString(uw)}(${s.content})`:(s.children.unshift(`${t.helperString(uw)}(`),s.children.push(")"))),t.inSSR||(r.some(a=>a.content==="prop")&&vM(s,"."),r.some(a=>a.content==="attr")&&vM(s,"^")),{props:[Ur(s,o)]}},Q3=(n,e)=>{const t=n.arg,r=cr(t.content);n.exp=rn(r,!1,t.loc)},vM=(n,e)=>{n.type===4?n.isStatic?n.content=e+n.content:n.content=`\`${e}\${${n.content}}\``:(n.children.unshift(`'${e}' + (`),n.children.push(")"))},Hle=mC("for",(n,e,t)=>{const{helper:r,removeHelper:i}=t;return Z3(n,e,t,s=>{const o=si(r(rE),[s.source]),a=_p(n),l=Rs(n,"memo"),c=By(n,"key",!1,!0);c&&c.type===7&&!c.exp&&Q3(c);let d=c&&(c.type===6?c.value?rn(c.value.content,!0):void 0:c.exp);const p=c&&d?Ur("key",d):null,y=s.source.type===4&&s.source.constType>0,w=y?64:c?128:256;return s.codegenNode=Ep(t,r(wp),void 0,o,w,void 0,void 0,!0,!y,!1,n.loc),()=>{let S;const{children:E}=s,C=E.length!==1||E[0].type!==1,L=Xg(n)?n:a&&n.children.length===1&&Xg(n.children[0])?n.children[0]:null;if(L?(S=L.codegenNode,a&&p&&Jg(S,p,t)):C?S=Ep(t,r(wp),p?No([p]):void 0,n.children,64,void 0,void 0,!0,void 0,!1):(S=E[0].codegenNode,a&&p&&Jg(S,p,t),S.isBlock!==!y&&(S.isBlock?(i(gh),i(Wf(t.inSSR,S.isComponent))):i(Hf(t.inSSR,S.isComponent))),S.isBlock=!y,S.isBlock?(r(gh),r(Wf(t.inSSR,S.isComponent))):r(Hf(t.inSSR,S.isComponent))),l){const P=$f(pw(s.parseResult,[rn("_cached")]));P.body=S3([da(["const _memo = (",l.exp,")"]),da(["if (_cached",...d?[" && _cached.key === ",d]:[],` && ${t.helperString(lC)}(_cached, _memo)) return _cached`]),da(["const _item = ",S]),rn("_item.memo = _memo"),rn("return _item")]),o.arguments.push(P,rn("_cache"),rn(String(t.cached.length))),t.cached.push(null)}else o.arguments.push($f(pw(s.parseResult),S,!0))}})});function Z3(n,e,t,r){if(!e.exp){t.onError(pr(31,e.loc));return}const i=e.forParseResult;if(!i){t.onError(pr(32,e.loc));return}yC(i);const{addIdentifiers:s,removeIdentifiers:o,scopes:a}=t,{source:l,value:c,key:h,index:d}=i,p={type:11,loc:e.loc,source:l,valueAlias:c,keyAlias:h,objectIndexAlias:d,parseResult:i,children:_p(n)?n.children:[n]};t.replaceNode(p),a.vFor++;const y=r&&r(p);return()=>{a.vFor--,y&&y()}}function yC(n,e){n.finalized||(n.finalized=!0)}function pw({value:n,key:e,index:t},r=[]){return Wle([n,e,t,...r])}function Wle(n){let e=n.length;for(;e--&&!n[e];);return n.slice(0,e+1).map((t,r)=>t||rn("_".repeat(r+1),!1))}const bM=rn("undefined",!1),e$=(n,e)=>{if(n.type===1&&(n.tagType===1||n.tagType===3)){const t=Rs(n,"slot");if(t)return t.exp,e.scopes.vSlot++,()=>{e.scopes.vSlot--}}},zle=(n,e)=>{let t;if(_p(n)&&n.props.some(fC)&&(t=Rs(n,"for"))){const r=t.forParseResult;if(r){yC(r);const{value:i,key:s,index:o}=r,{addIdentifiers:a,removeIdentifiers:l}=e;return i&&a(i),s&&a(s),o&&a(o),()=>{i&&l(i),s&&l(s),o&&l(o)}}}},jle=(n,e,t,r)=>$f(n,t,!1,!0,t.length?t[0].loc:r);function t$(n,e,t=jle){e.helper(aE);const{children:r,loc:i}=n,s=[],o=[];let a=e.scopes.vSlot>0||e.scopes.vFor>0;const l=Rs(n,"slot",!0);if(l){const{arg:E,exp:C}=l;E&&!Ms(E)&&(a=!0),s.push(Ur(E||rn("default",!0),t(C,void 0,r,i)))}let c=!1,h=!1;const d=[],p=new Set;let y=0;for(let E=0;E<r.length;E++){const C=r[E];let L;if(!_p(C)||!(L=Rs(C,"slot",!0))){C.type!==3&&d.push(C);continue}if(l){e.onError(pr(37,L.loc));break}c=!0;const{children:P,loc:F}=C,{arg:U=rn("default",!0),exp:j,loc:N}=L;let O;Ms(U)?O=U?U.content:"default":a=!0;const A=Rs(C,"for"),R=t(j,A,P,F);let k,V;if(k=Rs(C,"if"))a=!0,o.push(fw(k.exp,t0(U,R,y++),bM));else if(V=Rs(C,/^else(-if)?$/,!0)){let D=E,Z;for(;D--&&(Z=r[D],Z.type===3););if(Z&&_p(Z)&&Rs(Z,/^(else-)?if$/)){let le=o[o.length-1];for(;le.alternate.type===19;)le=le.alternate;le.alternate=V.exp?fw(V.exp,t0(U,R,y++),bM):t0(U,R,y++)}else e.onError(pr(30,V.loc))}else if(A){a=!0;const D=A.forParseResult;D?(yC(D),o.push(si(e.helper(rE),[D.source,$f(pw(D),t0(U,R),!0)]))):e.onError(pr(32,A.loc))}else{if(O){if(p.has(O)){e.onError(pr(38,N));continue}p.add(O),O==="default"&&(h=!0)}s.push(Ur(U,R))}}if(!l){const E=(C,L)=>{const P=t(C,void 0,L,i);return e.compatConfig&&(P.isNonScopedSlot=!0),Ur("default",P)};c?d.length&&d.some(C=>n$(C))&&(h?e.onError(pr(39,d[0].loc)):s.push(E(void 0,d))):s.push(E(void 0,r))}const w=a?2:sb(n.children)?3:1;let S=No(s.concat(Ur("_",rn(w+"",!1))),i);return o.length&&(S=si(e.helper(aC),[S,ih(o)])),{slots:S,hasDynamicSlots:a}}function t0(n,e,t){const r=[Ur("name",n),Ur("fn",e)];return t!=null&&r.push(Ur("key",rn(String(t),!0))),No(r)}function sb(n){for(let e=0;e<n.length;e++){const t=n[e];switch(t.type){case 1:if(t.tagType===2||sb(t.children))return!0;break;case 9:if(sb(t.branches))return!0;break;case 10:case 11:if(sb(t.children))return!0;break}}return!1}function n$(n){return n.type!==2&&n.type!==12?!0:n.type===2?!!n.content.trim():n$(n.content)}const r$=new WeakMap,i$=(n,e)=>function(){if(n=e.currentNode,!(n.type===1&&(n.tagType===0||n.tagType===1)))return;const{tag:r,props:i}=n,s=n.tagType===1;let o=s?s$(n,e):`"${r}"`;const a=Gn(o)&&o.callee===ZS;let l,c,h=0,d,p,y,w=a||o===ep||o===qS||!s&&(r==="svg"||r==="foreignObject"||r==="math");if(i.length>0){const S=vC(n,e,void 0,s,a);l=S.props,h=S.patchFlag,p=S.dynamicPropNames;const E=S.directives;y=E&&E.length?ih(E.map(C=>o$(C,e))):void 0,S.shouldUseBlock&&(w=!0)}if(n.children.length>0)if(o===Gg&&(w=!0,h|=1024),s&&o!==ep&&o!==Gg){const{slots:E,hasDynamicSlots:C}=t$(n,e);c=E,C&&(h|=1024)}else if(n.children.length===1&&o!==ep){const E=n.children[0],C=E.type,L=C===5||C===8;L&&uo(E,e)===0&&(h|=1),L||C===2?c=E:c=n.children}else c=n.children;p&&p.length&&(d=Gle(p)),n.codegenNode=Ep(e,o,l,c,h===0?void 0:h,d,y,!!w,!1,s,n.loc)};function s$(n,e,t=!1){let{tag:r}=n;const i=nx(r),s=By(n,"is",!1,!0);if(s)if(i||Cf("COMPILER_IS_ON_ELEMENT",e)){let a;if(s.type===6?a=s.value&&rn(s.value.content,!0):(a=s.exp,a||(a=rn("is",!1,s.arg.loc))),a)return si(e.helper(ZS),[a])}else s.type===6&&s.value.content.startsWith("vue:")&&(r=s.value.content.slice(4));const o=uC(r)||e.isBuiltInComponent(r);return o?(t||e.helper(o),o):(e.helper(QS),e.components.add(r),xp(r,"component"))}function vC(n,e,t=n.props,r,i,s=!1){const{tag:o,loc:a,children:l}=n;let c=[];const h=[],d=[],p=l.length>0;let y=!1,w=0,S=!1,E=!1,C=!1,L=!1,P=!1,F=!1;const U=[],j=R=>{c.length&&(h.push(No(wM(c),a)),c=[]),R&&h.push(R)},N=()=>{e.scopes.vFor>0&&c.push(Ur(rn("ref_for",!0),rn("true")))},O=({key:R,value:k})=>{if(Ms(R)){const V=R.content,D=Eh(V);if(D&&(!r||i)&&V.toLowerCase()!=="onclick"&&V!=="onUpdate:modelValue"&&!Rc(V)&&(L=!0),D&&Rc(V)&&(F=!0),D&&k.type===14&&(k=k.arguments[0]),k.type===20||(k.type===4||k.type===8)&&uo(k,e)>0)return;V==="ref"?S=!0:V==="class"?E=!0:V==="style"?C=!0:V!=="key"&&!U.includes(V)&&U.push(V),r&&(V==="class"||V==="style")&&!U.includes(V)&&U.push(V)}else P=!0};for(let R=0;R<t.length;R++){const k=t[R];if(k.type===6){const{loc:V,name:D,nameLoc:Z,value:le}=k;let Q=!0;if(D==="ref"&&(S=!0,N()),D==="is"&&(nx(o)||le&&le.content.startsWith("vue:")||Cf("COMPILER_IS_ON_ELEMENT",e)))continue;c.push(Ur(rn(D,!0,Z),rn(le?le.content:"",Q,le?le.loc:V)))}else{const{name:V,arg:D,exp:Z,loc:le,modifiers:Q}=k,re=V==="bind",ae=V==="on";if(V==="slot"){r||e.onError(pr(40,le));continue}if(V==="once"||V==="memo"||V==="is"||re&&zu(D,"is")&&(nx(o)||Cf("COMPILER_IS_ON_ELEMENT",e))||ae&&s)continue;if((re&&zu(D,"key")||ae&&p&&zu(D,"vue:before-update"))&&(y=!0),re&&zu(D,"ref")&&N(),!D&&(re||ae)){if(P=!0,Z)if(re){if(N(),j(),Cf("COMPILER_V_BIND_OBJECT_ORDER",e)){h.unshift(Z);continue}h.push(Z)}else j({type:14,loc:le,callee:e.helper(oE),arguments:r?[Z]:[Z,"true"]});else e.onError(pr(re?34:35,le));continue}re&&Q.some(He=>He.content==="prop")&&(w|=32);const Ce=e.directiveTransforms[V];if(Ce){const{props:He,needRuntime:Ge}=Ce(k,n,e);!s&&He.forEach(O),ae&&D&&!Ms(D)?j(No(He,a)):c.push(...He),Ge&&(d.push(k),Vs(Ge)&&r$.set(k,Ge))}else L2(V)||(d.push(k),p&&(y=!0))}}let A;if(h.length?(j(),h.length>1?A=si(e.helper(qg),h,a):A=h[0]):c.length&&(A=No(wM(c),a)),P?w|=16:(E&&!r&&(w|=2),C&&!r&&(w|=4),U.length&&(w|=8),L&&(w|=32)),!y&&(w===0||w===32)&&(S||F||d.length>0)&&(w|=512),!e.inSSR&&A)switch(A.type){case 15:let R=-1,k=-1,V=!1;for(let le=0;le<A.properties.length;le++){const Q=A.properties[le].key;Ms(Q)?Q.content==="class"?R=le:Q.content==="style"&&(k=le):Q.isHandlerKey||(V=!0)}const D=A.properties[R],Z=A.properties[k];V?A=si(e.helper(Sp),[A]):(D&&!Ms(D.value)&&(D.value=si(e.helper(iE),[D.value])),Z&&(C||Z.value.type===4&&Z.value.content.trim()[0]==="["||Z.value.type===17)&&(Z.value=si(e.helper(sE),[Z.value])));break;case 14:break;default:A=si(e.helper(Sp),[si(e.helper(Jp),[A])]);break}return{props:A,directives:d,patchFlag:w,dynamicPropNames:U,shouldUseBlock:y}}function wM(n){const e=new Map,t=[];for(let r=0;r<n.length;r++){const i=n[r];if(i.key.type===8||!i.key.isStatic){t.push(i);continue}const s=i.key.content,o=e.get(s);o?(s==="style"||s==="class"||Eh(s))&&Kle(o,i):(e.set(s,i),t.push(i))}return t}function Kle(n,e){n.value.type===17?n.value.elements.push(e.value):n.value=ih([n.value,e.value],n.loc)}function o$(n,e){const t=[],r=r$.get(n);r?t.push(e.helperString(r)):(e.helper(eE),e.directives.add(n.name),t.push(xp(n.name,"directive")));const{loc:i}=n;if(n.exp&&t.push(n.exp),n.arg&&(n.exp||t.push("void 0"),t.push(n.arg)),Object.keys(n.modifiers).length){n.arg||(n.exp||t.push("void 0"),t.push("void 0"));const s=rn("true",!1,i);t.push(No(n.modifiers.map(o=>Ur(o,s)),i))}return ih(t,n.loc)}function Gle(n){let e="[";for(let t=0,r=n.length;t<r;t++)e+=JSON.stringify(n[t]),t<r-1&&(e+=", ");return e+"]"}function nx(n){return n==="component"||n==="Component"}const qle=(n,e)=>{if(Xg(n)){const{children:t,loc:r}=n,{slotName:i,slotProps:s}=a$(n,e),o=[e.prefixIdentifiers?"_ctx.$slots":"$slots",i,"{}","undefined","true"];let a=2;s&&(o[2]=s,a=3),t.length&&(o[3]=$f([],t,!1,!1,r),a=4),e.scopeId&&!e.slotted&&(a=5),o.splice(a),n.codegenNode=si(e.helper(oC),o,r)}};function a$(n,e){let t='"default"',r;const i=[];for(let s=0;s<n.props.length;s++){const o=n.props[s];if(o.type===6)o.value&&(o.name==="name"?t=JSON.stringify(o.value.content):(o.name=cr(o.name),i.push(o)));else if(o.name==="bind"&&zu(o.arg,"name")){if(o.exp)t=o.exp;else if(o.arg&&o.arg.type===4){const a=cr(o.arg.content);t=o.exp=rn(a,!1,o.arg.loc)}}else o.name==="bind"&&o.arg&&Ms(o.arg)&&(o.arg.content=cr(o.arg.content)),i.push(o)}if(i.length>0){const{props:s,directives:o}=vC(n,e,i,!1,!1);r=s,o.length&&e.onError(pr(36,o[0].loc))}return{slotName:t,slotProps:r}}const bC=(n,e,t,r)=>{const{loc:i,modifiers:s,arg:o}=n;!n.exp&&!s.length&&t.onError(pr(35,i));let a;if(o.type===4)if(o.isStatic){let d=o.content;d.startsWith("vue:")&&(d=`vnode-${d.slice(4)}`);const p=e.tagType!==0||d.startsWith("vnode")||!/[A-Z]/.test(d)?Ef(cr(d)):`on:${d}`;a=rn(p,!0,o.loc)}else a=da([`${t.helperString(hw)}(`,o,")"]);else a=o,a.children.unshift(`${t.helperString(hw)}(`),a.children.push(")");let l=n.exp;l&&!l.content.trim()&&(l=void 0);let c=t.cacheHandlers&&!l&&!t.inVOnce;if(l){const d=hC(l),p=!(d||O3(l)),y=l.content.includes(";");(p||c&&d)&&(l=da([`${p?"$event":"(...args)"} => ${y?"{":"("}`,l,y?"}":")"]))}let h={props:[Ur(a,l||rn("() => {}",!1,i))]};return r&&(h=r(h)),c&&(h.props[0].value=t.cache(h.props[0].value)),h.props.forEach(d=>d.key.isHandlerKey=!0),h},Yle=(n,e)=>{if(n.type===0||n.type===1||n.type===11||n.type===10)return()=>{const t=n.children;let r,i=!1;for(let s=0;s<t.length;s++){const o=t[s];if(eb(o)){i=!0;for(let a=s+1;a<t.length;a++){const l=t[a];if(eb(l))r||(r=t[s]=da([o],o.loc)),r.children.push(" + ",l),t.splice(a,1),a--;else{r=void 0;break}}}}if(!(!i||t.length===1&&(n.type===0||n.type===1&&n.tagType===0&&!n.props.find(s=>s.type===7&&!e.directiveTransforms[s.name])&&n.tag!=="template")))for(let s=0;s<t.length;s++){const o=t[s];if(eb(o)||o.type===8){const a=[];(o.type!==2||o.content!==" ")&&a.push(o),!e.ssr&&uo(o,e)===0&&a.push("1"),t[s]={type:12,content:o,loc:o.loc,codegenNode:si(e.helper(JS),a)}}}}},SM=new WeakSet,Xle=(n,e)=>{if(n.type===1&&Rs(n,"once",!0))return SM.has(n)||e.inVOnce||e.inSSR?void 0:(SM.add(n),e.inVOnce=!0,e.helper(Yg),()=>{e.inVOnce=!1;const t=e.currentNode;t.codegenNode&&(t.codegenNode=e.cache(t.codegenNode,!0,!0))})},wC=(n,e,t)=>{const{exp:r,arg:i}=n;if(!r)return t.onError(pr(41,n.loc)),n0();const s=r.loc.source.trim(),o=r.type===4?r.content:s,a=t.bindingMetadata[s];if(a==="props"||a==="props-aliased")return t.onError(pr(44,r.loc)),n0();if(!o.trim()||!hC(r))return t.onError(pr(42,r.loc)),n0();const l=i||rn("modelValue",!0),c=i?Ms(i)?`onUpdate:${cr(i.content)}`:da(['"onUpdate:" + ',i]):"onUpdate:modelValue";let h;const d=t.isTS?"($event: any)":"$event";h=da([`${d} => ((`,r,") = $event)"]);const p=[Ur(l,n.exp),Ur(c,h)];if(n.modifiers.length&&e.tagType===1){const y=n.modifiers.map(S=>S.content).map(S=>(Fy(S)?S:JSON.stringify(S))+": true").join(", "),w=i?Ms(i)?`${i.content}Modifiers`:da([i,' + "Modifiers"']):"modelModifiers";p.push(Ur(w,rn(`{ ${y} }`,!1,n.loc,2)))}return n0(p)};function n0(n=[]){return{props:n}}const Jle=/[\w).+\-_$\]]/,Qle=(n,e)=>{Cf("COMPILER_FILTERS",e)&&(n.type===5?mw(n.content,e):n.type===1&&n.props.forEach(t=>{t.type===7&&t.name!=="for"&&t.exp&&mw(t.exp,e)}))};function mw(n,e){if(n.type===4)EM(n,e);else for(let t=0;t<n.children.length;t++){const r=n.children[t];typeof r=="object"&&(r.type===4?EM(r,e):r.type===8?mw(n,e):r.type===5&&mw(r.content,e))}}function EM(n,e){const t=n.content;let r=!1,i=!1,s=!1,o=!1,a=0,l=0,c=0,h=0,d,p,y,w,S=[];for(y=0;y<t.length;y++)if(p=d,d=t.charCodeAt(y),r)d===39&&p!==92&&(r=!1);else if(i)d===34&&p!==92&&(i=!1);else if(s)d===96&&p!==92&&(s=!1);else if(o)d===47&&p!==92&&(o=!1);else if(d===124&&t.charCodeAt(y+1)!==124&&t.charCodeAt(y-1)!==124&&!a&&!l&&!c)w===void 0?(h=y+1,w=t.slice(0,y).trim()):E();else{switch(d){case 34:i=!0;break;case 39:r=!0;break;case 96:s=!0;break;case 40:c++;break;case 41:c--;break;case 91:l++;break;case 93:l--;break;case 123:a++;break;case 125:a--;break}if(d===47){let C=y-1,L;for(;C>=0&&(L=t.charAt(C),L===" ");C--);(!L||!Jle.test(L))&&(o=!0)}}w===void 0?w=t.slice(0,y).trim():h!==0&&E();function E(){S.push(t.slice(h,y).trim()),h=y+1}if(S.length){for(y=0;y<S.length;y++)w=Zle(w,S[y],e);n.content=w,n.ast=void 0}}function Zle(n,e,t){t.helper(tE);const r=e.indexOf("(");if(r<0)return t.filters.add(e),`${xp(e,"filter")}(${n})`;{const i=e.slice(0,r),s=e.slice(r+1);return t.filters.add(i),`${xp(i,"filter")}(${n}${s!==")"?","+s:s}`}}const TM=new WeakSet,ece=(n,e)=>{if(n.type===1){const t=Rs(n,"memo");return!t||TM.has(n)?void 0:(TM.add(n),()=>{const r=n.codegenNode||e.currentNode.codegenNode;r&&r.type===13&&(n.tagType!==1&&cE(r,e),n.codegenNode=si(e.helper(lE),[t.exp,$f(void 0,r),"_cache",String(e.cached.length)]),e.cached.push(null))})}};function l$(n){return[[Xle,Ule,ece,Hle,Qle,qle,i$,e$,Yle],{on:bC,bind:J3,model:wC}]}function c$(n,e={}){const t=e.onError||cC,r=e.mode==="module";e.prefixIdentifiers===!0?t(pr(47)):r&&t(pr(48));const i=!1;e.cacheHandlers&&t(pr(49)),e.scopeId&&!r&&t(pr(50));const s=Sn({},e,{prefixIdentifiers:i}),o=qt(n)?pC(n,s):n,[a,l]=l$();return z3(o,Sn({},s,{nodeTransforms:[...a,...e.nodeTransforms||[]],directiveTransforms:Sn({},l,e.directiveTransforms||{})})),K3(o,s)}const tce={DATA:"data",PROPS:"props",PROPS_ALIASED:"props-aliased",SETUP_LET:"setup-let",SETUP_CONST:"setup-const",SETUP_REACTIVE_CONST:"setup-reactive-const",SETUP_MAYBE_REF:"setup-maybe-ref",SETUP_REF:"setup-ref",OPTIONS:"options",LITERAL_CONST:"literal-const"},u$=()=>({props:[]});/**
* @vue/compiler-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const SC=Symbol(""),EC=Symbol(""),TC=Symbol(""),_C=Symbol(""),gw=Symbol(""),xC=Symbol(""),AC=Symbol(""),IC=Symbol(""),CC=Symbol(""),OC=Symbol("");v3({[SC]:"vModelRadio",[EC]:"vModelCheckbox",[TC]:"vModelText",[_C]:"vModelSelect",[gw]:"vModelDynamic",[xC]:"withModifiers",[AC]:"withKeys",[IC]:"vShow",[CC]:"Transition",[OC]:"TransitionGroup"});let Td;function nce(n,e=!1){return Td||(Td=document.createElement("div")),e?(Td.innerHTML=`<div foo="${n.replace(/"/g,"&quot;")}">`,Td.children[0].getAttribute("foo")):(Td.innerHTML=n,Td.textContent)}const kC={parseMode:"html",isVoidTag:$2,isNativeTag:n=>F2(n)||B2(n)||U2(n),isPreTag:n=>n==="pre",isIgnoreNewlineTag:n=>n==="pre"||n==="textarea",decodeEntities:nce,isBuiltInComponent:n=>{if(n==="Transition"||n==="transition")return CC;if(n==="TransitionGroup"||n==="transition-group")return OC},getNamespace(n,e,t){let r=e?e.ns:t;if(e&&r===2)if(e.tag==="annotation-xml"){if(n==="svg")return 1;e.props.some(i=>i.type===6&&i.name==="encoding"&&i.value!=null&&(i.value.content==="text/html"||i.value.content==="application/xhtml+xml"))&&(r=0)}else/^m(?:[ions]|text)$/.test(e.tag)&&n!=="mglyph"&&n!=="malignmark"&&(r=0);else e&&r===1&&(e.tag==="foreignObject"||e.tag==="desc"||e.tag==="title")&&(r=0);if(r===0){if(n==="svg")return 1;if(n==="math")return 2}return r}},h$=n=>{n.type===1&&n.props.forEach((e,t)=>{e.type===6&&e.name==="style"&&e.value&&(n.props[t]={type:7,name:"bind",arg:rn("style",!0,e.loc),exp:rce(e.value.content,e.loc),modifiers:[],loc:e.loc})})},rce=(n,e)=>{const t=lA(n);return rn(JSON.stringify(t),!1,e,3)};function Lc(n,e){return pr(n,e)}const ice={X_V_HTML_NO_EXPRESSION:53,53:"X_V_HTML_NO_EXPRESSION",X_V_HTML_WITH_CHILDREN:54,54:"X_V_HTML_WITH_CHILDREN",X_V_TEXT_NO_EXPRESSION:55,55:"X_V_TEXT_NO_EXPRESSION",X_V_TEXT_WITH_CHILDREN:56,56:"X_V_TEXT_WITH_CHILDREN",X_V_MODEL_ON_INVALID_ELEMENT:57,57:"X_V_MODEL_ON_INVALID_ELEMENT",X_V_MODEL_ARG_ON_ELEMENT:58,58:"X_V_MODEL_ARG_ON_ELEMENT",X_V_MODEL_ON_FILE_INPUT_ELEMENT:59,59:"X_V_MODEL_ON_FILE_INPUT_ELEMENT",X_V_MODEL_UNNECESSARY_VALUE:60,60:"X_V_MODEL_UNNECESSARY_VALUE",X_V_SHOW_NO_EXPRESSION:61,61:"X_V_SHOW_NO_EXPRESSION",X_TRANSITION_INVALID_CHILDREN:62,62:"X_TRANSITION_INVALID_CHILDREN",X_IGNORED_SIDE_EFFECT_TAG:63,63:"X_IGNORED_SIDE_EFFECT_TAG",__EXTEND_POINT__:64,64:"__EXTEND_POINT__"},sce={53:"v-html is missing expression.",54:"v-html will override element children.",55:"v-text is missing expression.",56:"v-text will override element children.",57:"v-model can only be used on <input>, <textarea> and <select> elements.",58:"v-model argument is not supported on plain elements.",59:"v-model cannot be used on file inputs since they are read-only. Use a v-on:change listener instead.",60:"Unnecessary value binding used alongside v-model. It will interfere with v-model's behavior.",61:"v-show is missing expression.",62:"<Transition> expects exactly one child element or component.",63:"Tags with side effect (<script> and <style>) are ignored in client component templates."},oce=(n,e,t)=>{const{exp:r,loc:i}=n;return r||t.onError(Lc(53,i)),e.children.length&&(t.onError(Lc(54,i)),e.children.length=0),{props:[Ur(rn("innerHTML",!0,i),r||rn("",!0))]}},ace=(n,e,t)=>{const{exp:r,loc:i}=n;return r||t.onError(Lc(55,i)),e.children.length&&(t.onError(Lc(56,i)),e.children.length=0),{props:[Ur(rn("textContent",!0),r?uo(r,t)>0?r:si(t.helperString(Vy),[r],i):rn("",!0))]}},lce=(n,e,t)=>{const r=wC(n,e,t);if(!r.props.length||e.tagType===1)return r;n.arg&&t.onError(Lc(58,n.arg.loc));const{tag:i}=e,s=t.isCustomElement(i);if(i==="input"||i==="textarea"||i==="select"||s){let o=TC,a=!1;if(i==="input"||s){const l=By(e,"type");if(l){if(l.type===7)o=gw;else if(l.value)switch(l.value.content){case"radio":o=SC;break;case"checkbox":o=EC;break;case"file":a=!0,t.onError(Lc(59,n.loc));break}}else R3(e)&&(o=gw)}else i==="select"&&(o=_C);a||(r.needRuntime=t.helper(o))}else t.onError(Lc(57,n.loc));return r.props=r.props.filter(o=>!(o.key.type===4&&o.key.content==="modelValue")),r},cce=Oi("passive,once,capture"),uce=Oi("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),hce=Oi("left,right"),f$=Oi("onkeyup,onkeydown,onkeypress"),fce=(n,e,t,r)=>{const i=[],s=[],o=[];for(let a=0;a<e.length;a++){const l=e[a].content;l==="native"&&Tp("COMPILER_V_ON_NATIVE",t)||cce(l)?o.push(l):hce(l)?Ms(n)?f$(n.content.toLowerCase())?i.push(l):s.push(l):(i.push(l),s.push(l)):uce(l)?s.push(l):i.push(l)}return{keyModifiers:i,nonKeyModifiers:s,eventOptionModifiers:o}},_M=(n,e)=>Ms(n)&&n.content.toLowerCase()==="onclick"?rn(e,!0):n.type!==4?da(["(",n,`) === "onClick" ? "${e}" : (`,n,")"]):n,dce=(n,e,t)=>bC(n,e,t,r=>{const{modifiers:i}=n;if(!i.length)return r;let{key:s,value:o}=r.props[0];const{keyModifiers:a,nonKeyModifiers:l,eventOptionModifiers:c}=fce(s,i,t,n.loc);if(l.includes("right")&&(s=_M(s,"onContextmenu")),l.includes("middle")&&(s=_M(s,"onMouseup")),l.length&&(o=si(t.helper(xC),[o,JSON.stringify(l)])),a.length&&(!Ms(s)||f$(s.content.toLowerCase()))&&(o=si(t.helper(AC),[o,JSON.stringify(a)])),c.length){const h=c.map(_h).join("");s=Ms(s)?rn(`${s.content}${h}`,!0):da(["(",s,`) + "${h}"`])}return{props:[Ur(s,o)]}}),pce=(n,e,t)=>{const{exp:r,loc:i}=n;return r||t.onError(Lc(61,i)),{props:[],needRuntime:t.helper(IC)}},mce=(n,e)=>{n.type===1&&n.tagType===0&&(n.tag==="script"||n.tag==="style")&&e.removeNode()},d$=[h$],p$={cloak:u$,html:oce,text:ace,model:lce,on:dce,show:pce};function gce(n,e={}){return c$(n,Sn({},kC,e,{nodeTransforms:[mce,...d$,...e.nodeTransforms||[]],directiveTransforms:Sn({},p$,e.directiveTransforms||{}),transformHoist:null}))}function yce(n,e={}){return pC(n,Sn({},kC,e))}const vce=Object.freeze(Object.defineProperty({__proto__:null,BASE_TRANSITION:nC,BindingTypes:tce,CAMELIZE:uw,CAPITALIZE:d3,CREATE_BLOCK:rC,CREATE_COMMENT:Xp,CREATE_ELEMENT_BLOCK:iC,CREATE_ELEMENT_VNODE:XS,CREATE_SLOTS:aC,CREATE_STATIC:sC,CREATE_TEXT:JS,CREATE_VNODE:YS,CompilerDeprecationTypes:Vae,ConstantTypes:Oae,DOMDirectiveTransforms:p$,DOMErrorCodes:ice,DOMErrorMessages:sce,DOMNodeTransforms:d$,ElementTypes:Cae,ErrorCodes:Uae,FRAGMENT:wp,GUARD_REACTIVE_PROPS:Jp,IS_MEMO_SAME:lC,IS_REF:y3,KEEP_ALIVE:Gg,MERGE_PROPS:qg,NORMALIZE_CLASS:iE,NORMALIZE_PROPS:Sp,NORMALIZE_STYLE:sE,Namespaces:Aae,NodeTypes:Iae,OPEN_BLOCK:gh,POP_SCOPE_ID:m3,PUSH_SCOPE_ID:p3,RENDER_LIST:rE,RENDER_SLOT:oC,RESOLVE_COMPONENT:QS,RESOLVE_DIRECTIVE:eE,RESOLVE_DYNAMIC_COMPONENT:ZS,RESOLVE_FILTER:tE,SET_BLOCK_TRACKING:Yg,SUSPENSE:qS,TELEPORT:ep,TO_DISPLAY_STRING:Vy,TO_HANDLERS:oE,TO_HANDLER_KEY:hw,TRANSITION:CC,TRANSITION_GROUP:OC,TS_NODE_TYPES:_3,UNREF:g3,V_MODEL_CHECKBOX:EC,V_MODEL_DYNAMIC:gw,V_MODEL_RADIO:SC,V_MODEL_SELECT:_C,V_MODEL_TEXT:TC,V_ON_WITH_KEYS:AC,V_ON_WITH_MODIFIERS:xC,V_SHOW:IC,WITH_CTX:aE,WITH_DIRECTIVES:nE,WITH_MEMO:lE,advancePositionWithClone:sle,advancePositionWithMutation:k3,assert:ole,baseCompile:c$,baseParse:pC,buildDirectiveArgs:o$,buildProps:vC,buildSlots:t$,checkCompatEnabled:Tp,compile:gce,convertToBlock:cE,createArrayExpression:ih,createAssignmentExpression:Dae,createBlockStatement:S3,createCacheExpression:w3,createCallExpression:si,createCompilerError:pr,createCompoundExpression:da,createConditionalExpression:fw,createDOMCompilerError:Lc,createForLoopParams:pw,createFunctionExpression:$f,createIfStatement:Pae,createInterpolation:kae,createObjectExpression:No,createObjectProperty:Ur,createReturnStatement:Nae,createRoot:b3,createSequenceExpression:Mae,createSimpleExpression:rn,createStructuralDirectiveTransform:mC,createTemplateLiteral:Rae,createTransformContext:W3,createVNodeCall:Ep,errorMessages:$ae,extractIdentifiers:Ac,findDir:Rs,findProp:By,forAliasRE:M3,generate:K3,generateCodeFrame:V2,getBaseTransformPreset:l$,getConstantType:uo,getMemoedVNodeCall:D3,getVNodeBlockHelper:Wf,getVNodeHelper:Hf,hasDynamicKeyVBind:R3,hasScopeRef:za,helperNameMap:Uf,injectProp:Jg,isCoreComponent:uC,isFnExpression:O3,isFnExpressionBrowser:C3,isFnExpressionNode:ile,isFunctionType:Xae,isInDestructureAssignment:zae,isInNewExpression:jae,isMemberExpression:hC,isMemberExpressionBrowser:I3,isMemberExpressionNode:nle,isReferencedIdentifier:Wae,isSimpleIdentifier:Fy,isSlotOutlet:Xg,isStaticArgOf:zu,isStaticExp:Ms,isStaticProperty:T3,isStaticPropertyKey:Jae,isTemplateNode:_p,isText:eb,isVSlot:fC,locStub:Ei,noopDirectiveTransform:u$,parse:yce,parserOptions:kC,processExpression:ib,processFor:Z3,processIf:X3,processSlotOutlet:a$,registerRuntimeHelpers:v3,resolveComponentType:s$,stringifyExpression:Y3,toValidAssetId:xp,trackSlotScopes:e$,trackVForSlotScopes:zle,transform:z3,transformBind:J3,transformElement:i$,transformExpression:Ble,transformModel:wC,transformOn:bC,transformStyle:h$,traverseNode:Uy,unwrapTSNode:x3,walkBlockDeclarations:Gae,walkFunctionParams:Kae,walkIdentifiers:Hae,warnDeprecation:Bae},Symbol.toStringTag,{value:"Module"})),bce=mS(vce),wce=mS(gY),Sce=mS(a7);/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/var xM;function Ece(){return xM||(xM=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=bce,t=wce,r=Sce;function i(l){var c=Object.create(null);if(l)for(var h in l)c[h]=l[h];return c.default=l,Object.freeze(c)}var s=i(t);const o=Object.create(null);function a(l,c){if(!r.isString(l))if(l.nodeType)l=l.innerHTML;else return r.NOOP;const h=r.genCacheKey(l,c),d=o[h];if(d)return d;if(l[0]==="#"){const S=document.querySelector(l);l=S?S.innerHTML:""}const p=r.extend({hoistStatic:!0,onError:void 0,onWarn:r.NOOP},c);!p.isCustomElement&&typeof customElements<"u"&&(p.isCustomElement=S=>!!customElements.get(S));const{code:y}=e.compile(l,p),w=new Function("Vue",y)(s);return w._rc=!0,o[h]=w}t.registerRuntimeCompiler(a),n.compile=a,Object.keys(t).forEach(function(l){l!=="default"&&!Object.prototype.hasOwnProperty.call(n,l)&&(n[l]=t[l])})}(o1)),o1}var AM;function Tce(){return AM||(AM=1,s1.exports=Ece()),s1.exports}/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function IM(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Gl(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?IM(Object(t),!0).forEach(function(r){_ce(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):IM(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ob(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ob=function(e){return typeof e}:ob=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ob(n)}function _ce(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ya(){return ya=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ya.apply(this,arguments)}function xce(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Ace(n,e){if(n==null)return{};var t=xce(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Ice(n){return Cce(n)||Oce(n)||kce(n)||Rce()}function Cce(n){if(Array.isArray(n))return rx(n)}function Oce(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function kce(n,e){if(n){if(typeof n=="string")return rx(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return rx(n,e)}}function rx(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Rce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Pce="1.14.0";function Vc(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var Xc=Vc(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Hy=Vc(/Edge/i),CM=Vc(/firefox/i),pg=Vc(/safari/i)&&!Vc(/chrome/i)&&!Vc(/android/i),m$=Vc(/iP(ad|od|hone)/i),Dce=Vc(/chrome/i)&&Vc(/android/i),g$={capture:!1,passive:!1};function Tn(n,e,t){n.addEventListener(e,t,!Xc&&g$)}function yn(n,e,t){n.removeEventListener(e,t,!Xc&&g$)}function yw(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function Mce(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function ja(n,e,t,r){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&yw(n,e):yw(n,e))||r&&n===t)return n;if(n===t)break}while(n=Mce(n))}return null}var OM=/\s+/g;function Cr(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var r=(" "+n.className+" ").replace(OM," ").replace(" "+e+" "," ");n.className=(r+(t?" "+e:"")).replace(OM," ")}}function Pt(n,e,t){var r=n&&n.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=t+(typeof t=="string"?"":"px")}}function Of(n,e){var t="";if(typeof n=="string")t=n;else do{var r=Pt(n,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!e&&(n=n.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function y$(n,e,t){if(n){var r=n.getElementsByTagName(e),i=0,s=r.length;if(t)for(;i<s;i++)t(r[i],i);return r}return[]}function $l(){var n=document.scrollingElement;return n||document.documentElement}function Er(n,e,t,r,i){if(!(!n.getBoundingClientRect&&n!==window)){var s,o,a,l,c,h,d;if(n!==window&&n.parentNode&&n!==$l()?(s=n.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,h=s.height,d=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,d=window.innerWidth),(e||t)&&n!==window&&(i=i||n.parentNode,!Xc))do if(i&&i.getBoundingClientRect&&(Pt(i,"transform")!=="none"||t&&Pt(i,"position")!=="static")){var p=i.getBoundingClientRect();o-=p.top+parseInt(Pt(i,"border-top-width")),a-=p.left+parseInt(Pt(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&n!==window){var y=Of(i||n),w=y&&y.a,S=y&&y.d;y&&(o/=S,a/=w,d/=w,h/=S,l=o+h,c=a+d)}return{top:o,left:a,bottom:l,right:c,width:d,height:h}}}function kM(n,e,t){for(var r=ju(n,!0),i=Er(n)[e];r;){var s=Er(r)[t],o=void 0;if(o=i>=s,!o)return r;if(r===$l())break;r=ju(r,!1)}return!1}function Ap(n,e,t,r){for(var i=0,s=0,o=n.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Ht.ghost&&(r||o[s]!==Ht.dragged)&&ja(o[s],t.draggable,n,!1)){if(i===e)return o[s];i++}s++}return null}function RC(n,e){for(var t=n.lastElementChild;t&&(t===Ht.ghost||Pt(t,"display")==="none"||e&&!yw(t,e));)t=t.previousElementSibling;return t||null}function Vr(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==Ht.clone&&(!e||yw(n,e))&&t++;return t}function RM(n){var e=0,t=0,r=$l();if(n)do{var i=Of(n),s=i.a,o=i.d;e+=n.scrollLeft*s,t+=n.scrollTop*o}while(n!==r&&(n=n.parentNode));return[e,t]}function Nce(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===n[t][r])return Number(t)}return-1}function ju(n,e){if(!n||!n.getBoundingClientRect)return $l();var t=n,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=Pt(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return $l();if(r||e)return t;r=!0}}while(t=t.parentNode);return $l()}function Lce(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function l1(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var mg;function v$(n,e){return function(){if(!mg){var t=arguments,r=this;t.length===1?n.call(r,t[0]):n.apply(r,t),mg=setTimeout(function(){mg=void 0},e)}}}function Vce(){clearTimeout(mg),mg=void 0}function b$(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function PC(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function PM(n,e){Pt(n,"position","absolute"),Pt(n,"top",e.top),Pt(n,"left",e.left),Pt(n,"width",e.width),Pt(n,"height",e.height)}function c1(n){Pt(n,"position",""),Pt(n,"top",""),Pt(n,"left",""),Pt(n,"width",""),Pt(n,"height","")}var hs="Sortable"+new Date().getTime();function Fce(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(Pt(i,"display")==="none"||i===Ht.ghost)){n.push({target:i,rect:Er(i)});var s=Gl({},n[n.length-1].rect);if(i.thisAnimationDuration){var o=Of(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){n.push(r)},removeAnimationState:function(r){n.splice(Nce(n,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;n.forEach(function(a){var l=0,c=a.target,h=c.fromRect,d=Er(c),p=c.prevFromRect,y=c.prevToRect,w=a.rect,S=Of(c,!0);S&&(d.top-=S.f,d.left-=S.e),c.toRect=d,c.thisAnimationDuration&&l1(p,d)&&!l1(h,d)&&(w.top-d.top)/(w.left-d.left)===(h.top-d.top)/(h.left-d.left)&&(l=Uce(w,p,y,i.options)),l1(d,h)||(c.prevFromRect=h,c.prevToRect=d,l||(l=i.options.animation),i.animate(c,w,d,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),n=[]},animate:function(r,i,s,o){if(o){Pt(r,"transition",""),Pt(r,"transform","");var a=Of(this.el),l=a&&a.a,c=a&&a.d,h=(i.left-s.left)/(l||1),d=(i.top-s.top)/(c||1);r.animatingX=!!h,r.animatingY=!!d,Pt(r,"transform","translate3d("+h+"px,"+d+"px,0)"),this.forRepaintDummy=Bce(r),Pt(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Pt(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Pt(r,"transition",""),Pt(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function Bce(n){return n.offsetWidth}function Uce(n,e,t,r){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*r.animation}var _d=[],u1={initializeByDefault:!0},Wy={mount:function(e){for(var t in u1)u1.hasOwnProperty(t)&&!(t in e)&&(e[t]=u1[t]);_d.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),_d.push(e)},pluginEvent:function(e,t,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";_d.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](Gl({sortable:t},r)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](Gl({sortable:t},r)))})},initializePlugins:function(e,t,r,i){_d.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,t,e.options);c.sortable=e,c.options=e.options,e[l]=c,ya(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,t){var r={};return _d.forEach(function(i){typeof i.eventProperties=="function"&&ya(r,i.eventProperties.call(t[i.pluginName],e))}),r},modifyOption:function(e,t,r){var i;return _d.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(e[s.pluginName],r))}),i}};function zm(n){var e=n.sortable,t=n.rootEl,r=n.name,i=n.targetEl,s=n.cloneEl,o=n.toEl,a=n.fromEl,l=n.oldIndex,c=n.newIndex,h=n.oldDraggableIndex,d=n.newDraggableIndex,p=n.originalEvent,y=n.putSortable,w=n.extraEventProperties;if(e=e||t&&t[hs],!!e){var S,E=e.options,C="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Xc&&!Hy?S=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(S=document.createEvent("Event"),S.initEvent(r,!0,!0)),S.to=o||t,S.from=a||t,S.item=i||t,S.clone=s,S.oldIndex=l,S.newIndex=c,S.oldDraggableIndex=h,S.newDraggableIndex=d,S.originalEvent=p,S.pullMode=y?y.lastPutMode:void 0;var L=Gl(Gl({},w),Wy.getEventProperties(r,e));for(var P in L)S[P]=L[P];t&&t.dispatchEvent(S),E[C]&&E[C].call(e,S)}}var $ce=["evt"],Zs=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=Ace(r,$ce);Wy.pluginEvent.bind(Ht)(e,t,Gl({dragEl:ht,parentEl:Dr,ghostEl:ln,rootEl:wr,nextEl:uf,lastDownEl:ab,cloneEl:Mr,cloneHidden:$u,dragStarted:jm,putSortable:Ni,activeSortable:Ht.active,originalEvent:i,oldIndex:Hd,oldDraggableIndex:gg,newIndex:Ro,newDraggableIndex:Mu,hideGhostForTarget:T$,unhideGhostForTarget:_$,cloneNowHidden:function(){$u=!0},cloneNowShown:function(){$u=!1},dispatchSortableEvent:function(a){Is({sortable:t,name:a,originalEvent:i})}},s))};function Is(n){zm(Gl({putSortable:Ni,cloneEl:Mr,targetEl:ht,rootEl:wr,oldIndex:Hd,oldDraggableIndex:gg,newIndex:Ro,newDraggableIndex:Mu},n))}var ht,Dr,ln,wr,uf,ab,Mr,$u,Hd,Ro,gg,Mu,r0,Ni,Nd=!1,vw=!1,bw=[],sf,Ha,h1,f1,DM,MM,jm,xd,yg,vg=!1,i0=!1,lb,Zi,d1=[],ix=!1,ww=[],hE=typeof document<"u",s0=m$,NM=Hy||Xc?"cssFloat":"float",Hce=hE&&!Dce&&!m$&&"draggable"in document.createElement("div"),w$=function(){if(hE){if(Xc)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),S$=function(e,t){var r=Pt(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Ap(e,0,t),o=Ap(e,1,t),a=s&&Pt(s),l=o&&Pt(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Er(s).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Er(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var d=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[NM]==="none"||o&&r[NM]==="none"&&c+h>i)?"vertical":"horizontal"},Wce=function(e,t,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?t.left:t.top,l=r?t.right:t.bottom,c=r?t.width:t.height;return i===a||s===l||i+o/2===a+c/2},zce=function(e,t){var r;return bw.some(function(i){var s=i[hs].options.emptyInsertThreshold;if(!(!s||RC(i))){var o=Er(i),a=e>=o.left-s&&e<=o.right+s,l=t>=o.top-s&&t<=o.bottom+s;if(a&&l)return r=i}}),r},E$=function(e){function t(s,o){return function(a,l,c,h){var d=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||d))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(a,l,c,h),o)(a,l,c,h);var p=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===p||s.join&&s.indexOf(p)>-1}}var r={},i=e.group;(!i||ob(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=t(i.pull,!0),r.checkPut=t(i.put),r.revertClone=i.revertClone,e.group=r},T$=function(){!w$&&ln&&Pt(ln,"display","none")},_$=function(){!w$&&ln&&Pt(ln,"display","")};hE&&document.addEventListener("click",function(n){if(vw)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),vw=!1,!1},!0);var of=function(e){if(ht){e=e.touches?e.touches[0]:e;var t=zce(e.clientX,e.clientY);if(t){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[hs]._onDragOver(r)}}},jce=function(e){ht&&ht.parentNode[hs]._isOutsideThisEl(e.target)};function Ht(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=ya({},e),n[hs]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return S$(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ht.supportPointer!==!1&&"PointerEvent"in window&&!pg,emptyInsertThreshold:5};Wy.initializePlugins(this,n,t);for(var r in t)!(r in e)&&(e[r]=t[r]);E$(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Hce,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Tn(n,"pointerdown",this._onTapStart):(Tn(n,"mousedown",this._onTapStart),Tn(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(Tn(n,"dragover",this),Tn(n,"dragenter",this)),bw.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ya(this,Fce())}Ht.prototype={constructor:Ht,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(xd=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,ht):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,h=i.filter;if(Zce(r),!ht&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&pg&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=ja(l,i.draggable,r,!1),!(l&&l.animated)&&ab!==l)){if(Hd=Vr(l),gg=Vr(l,i.draggable),typeof h=="function"){if(h.call(this,e,l,this)){Is({sortable:t,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Zs("filter",t,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(d){if(d=ja(c,d.trim(),r,!1),d)return Is({sortable:t,rootEl:d,name:"filter",targetEl:l,fromEl:r,toEl:r}),Zs("filter",t,{evt:e}),!0}),h)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!ja(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!ht&&r.parentNode===s){var c=Er(r);if(wr=s,ht=r,Dr=ht.parentNode,uf=ht.nextSibling,ab=r,r0=o.group,Ht.dragged=ht,sf={target:ht,clientX:(t||e).clientX,clientY:(t||e).clientY},DM=sf.clientX-c.left,MM=sf.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,ht.style["will-change"]="all",l=function(){if(Zs("delayEnded",i,{evt:e}),Ht.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!CM&&i.nativeDraggable&&(ht.draggable=!0),i._triggerDragStart(e,t),Is({sortable:i,name:"choose",originalEvent:e}),Cr(ht,o.chosenClass,!0)},o.ignore.split(",").forEach(function(h){y$(ht,h.trim(),p1)}),Tn(a,"dragover",of),Tn(a,"mousemove",of),Tn(a,"touchmove",of),Tn(a,"mouseup",i._onDrop),Tn(a,"touchend",i._onDrop),Tn(a,"touchcancel",i._onDrop),CM&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ht.draggable=!0),Zs("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Hy||Xc))){if(Ht.eventCanceled){this._onDrop();return}Tn(a,"mouseup",i._disableDelayedDrag),Tn(a,"touchend",i._disableDelayedDrag),Tn(a,"touchcancel",i._disableDelayedDrag),Tn(a,"mousemove",i._delayedDragTouchMoveHandler),Tn(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Tn(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ht&&p1(ht),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;yn(e,"mouseup",this._disableDelayedDrag),yn(e,"touchend",this._disableDelayedDrag),yn(e,"touchcancel",this._disableDelayedDrag),yn(e,"mousemove",this._delayedDragTouchMoveHandler),yn(e,"touchmove",this._delayedDragTouchMoveHandler),yn(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?Tn(document,"pointermove",this._onTouchMove):t?Tn(document,"touchmove",this._onTouchMove):Tn(document,"mousemove",this._onTouchMove):(Tn(ht,"dragend",this),Tn(wr,"dragstart",this._onDragStart));try{document.selection?cb(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Nd=!1,wr&&ht){Zs("dragStarted",this,{evt:t}),this.nativeDraggable&&Tn(document,"dragover",jce);var r=this.options;!e&&Cr(ht,r.dragClass,!1),Cr(ht,r.ghostClass,!0),Ht.active=this,e&&this._appendGhost(),Is({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Ha){this._lastX=Ha.clientX,this._lastY=Ha.clientY,T$();for(var e=document.elementFromPoint(Ha.clientX,Ha.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ha.clientX,Ha.clientY),e!==t);)t=e;if(ht.parentNode[hs]._isOutsideThisEl(e),t)do{if(t[hs]){var r=void 0;if(r=t[hs]._onDragOver({clientX:Ha.clientX,clientY:Ha.clientY,target:e,rootEl:t}),r&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);_$()}},_onTouchMove:function(e){if(sf){var t=this.options,r=t.fallbackTolerance,i=t.fallbackOffset,s=e.touches?e.touches[0]:e,o=ln&&Of(ln,!0),a=ln&&o&&o.a,l=ln&&o&&o.d,c=s0&&Zi&&RM(Zi),h=(s.clientX-sf.clientX+i.x)/(a||1)+(c?c[0]-d1[0]:0)/(a||1),d=(s.clientY-sf.clientY+i.y)/(l||1)+(c?c[1]-d1[1]:0)/(l||1);if(!Ht.active&&!Nd){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(ln){o?(o.e+=h-(h1||0),o.f+=d-(f1||0)):o={a:1,b:0,c:0,d:1,e:h,f:d};var p="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Pt(ln,"webkitTransform",p),Pt(ln,"mozTransform",p),Pt(ln,"msTransform",p),Pt(ln,"transform",p),h1=h,f1=d,Ha=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ln){var e=this.options.fallbackOnBody?document.body:wr,t=Er(ht,!0,s0,!0,e),r=this.options;if(s0){for(Zi=e;Pt(Zi,"position")==="static"&&Pt(Zi,"transform")==="none"&&Zi!==document;)Zi=Zi.parentNode;Zi!==document.body&&Zi!==document.documentElement?(Zi===document&&(Zi=$l()),t.top+=Zi.scrollTop,t.left+=Zi.scrollLeft):Zi=$l(),d1=RM(Zi)}ln=ht.cloneNode(!0),Cr(ln,r.ghostClass,!1),Cr(ln,r.fallbackClass,!0),Cr(ln,r.dragClass,!0),Pt(ln,"transition",""),Pt(ln,"transform",""),Pt(ln,"box-sizing","border-box"),Pt(ln,"margin",0),Pt(ln,"top",t.top),Pt(ln,"left",t.left),Pt(ln,"width",t.width),Pt(ln,"height",t.height),Pt(ln,"opacity","0.8"),Pt(ln,"position",s0?"absolute":"fixed"),Pt(ln,"zIndex","100000"),Pt(ln,"pointerEvents","none"),Ht.ghost=ln,e.appendChild(ln),Pt(ln,"transform-origin",DM/parseInt(ln.style.width)*100+"% "+MM/parseInt(ln.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,i=e.dataTransfer,s=r.options;if(Zs("dragStart",this,{evt:e}),Ht.eventCanceled){this._onDrop();return}Zs("setupClone",this),Ht.eventCanceled||(Mr=PC(ht),Mr.draggable=!1,Mr.style["will-change"]="",this._hideClone(),Cr(Mr,this.options.chosenClass,!1),Ht.clone=Mr),r.cloneId=cb(function(){Zs("clone",r),!Ht.eventCanceled&&(r.options.removeCloneOnHide||wr.insertBefore(Mr,ht),r._hideClone(),Is({sortable:r,name:"clone"}))}),!t&&Cr(ht,s.dragClass,!0),t?(vw=!0,r._loopId=setInterval(r._emulateDragOver,50)):(yn(document,"mouseup",r._onDrop),yn(document,"touchend",r._onDrop),yn(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,ht)),Tn(document,"drop",r),Pt(ht,"transform","translateZ(0)")),Nd=!0,r._dragStartId=cb(r._dragStarted.bind(r,t,e)),Tn(document,"selectstart",r),jm=!0,pg&&Pt(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Ht.active,h=r0===l,d=a.sort,p=Ni||c,y,w=this,S=!1;if(ix)return;function E(ae,Ce){Zs(ae,w,Gl({evt:e,isOwner:h,axis:y?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:d,fromSortable:p,target:r,completed:L,onMove:function(Ge,ot){return o0(wr,t,ht,i,Ge,Er(Ge),e,ot)},changed:P},Ce))}function C(){E("dragOverAnimationCapture"),w.captureAnimationState(),w!==p&&p.captureAnimationState()}function L(ae){return E("dragOverCompleted",{insertion:ae}),ae&&(h?c._hideClone():c._showClone(w),w!==p&&(Cr(ht,Ni?Ni.options.ghostClass:c.options.ghostClass,!1),Cr(ht,a.ghostClass,!0)),Ni!==w&&w!==Ht.active?Ni=w:w===Ht.active&&Ni&&(Ni=null),p===w&&(w._ignoreWhileAnimating=r),w.animateAll(function(){E("dragOverAnimationComplete"),w._ignoreWhileAnimating=null}),w!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(r===ht&&!ht.animated||r===t&&!r.animated)&&(xd=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(ht.parentNode[hs]._isOutsideThisEl(e.target),!ae&&of(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),S=!0}function P(){Ro=Vr(ht),Mu=Vr(ht,a.draggable),Is({sortable:w,name:"change",toEl:t,newIndex:Ro,newDraggableIndex:Mu,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=ja(r,a.draggable,t,!0),E("dragOver"),Ht.eventCanceled)return S;if(ht.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||w._ignoreWhileAnimating===r)return L(!1);if(vw=!1,c&&!a.disabled&&(h?d||(o=Dr!==wr):Ni===this||(this.lastPutMode=r0.checkPull(this,c,ht,e))&&l.checkPut(this,c,ht,e))){if(y=this._getDirection(e,r)==="vertical",i=Er(ht),E("dragOverValid"),Ht.eventCanceled)return S;if(o)return Dr=wr,C(),this._hideClone(),E("revert"),Ht.eventCanceled||(uf?wr.insertBefore(ht,uf):wr.appendChild(ht)),L(!0);var F=RC(t,a.draggable);if(!F||Yce(e,y,this)&&!F.animated){if(F===ht)return L(!1);if(F&&t===e.target&&(r=F),r&&(s=Er(r)),o0(wr,t,ht,i,r,s,e,!!r)!==!1)return C(),t.appendChild(ht),Dr=t,P(),L(!0)}else if(F&&qce(e,y,this)){var U=Ap(t,0,a,!0);if(U===ht)return L(!1);if(r=U,s=Er(r),o0(wr,t,ht,i,r,s,e,!1)!==!1)return C(),t.insertBefore(ht,U),Dr=t,P(),L(!0)}else if(r.parentNode===t){s=Er(r);var j=0,N,O=ht.parentNode!==t,A=!Wce(ht.animated&&ht.toRect||i,r.animated&&r.toRect||s,y),R=y?"top":"left",k=kM(r,"top","top")||kM(ht,"top","top"),V=k?k.scrollTop:void 0;xd!==r&&(N=s[R],vg=!1,i0=!A&&a.invertSwap||O),j=Xce(e,r,s,y,A?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,i0,xd===r);var D;if(j!==0){var Z=Vr(ht);do Z-=j,D=Dr.children[Z];while(D&&(Pt(D,"display")==="none"||D===ln))}if(j===0||D===r)return L(!1);xd=r,yg=j;var le=r.nextElementSibling,Q=!1;Q=j===1;var re=o0(wr,t,ht,i,r,s,e,Q);if(re!==!1)return(re===1||re===-1)&&(Q=re===1),ix=!0,setTimeout(Gce,30),C(),Q&&!le?t.appendChild(ht):r.parentNode.insertBefore(ht,Q?le:r),k&&b$(k,0,V-k.scrollTop),Dr=ht.parentNode,N!==void 0&&!i0&&(lb=Math.abs(N-Er(r)[R])),P(),L(!0)}if(t.contains(ht))return L(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){yn(document,"mousemove",this._onTouchMove),yn(document,"touchmove",this._onTouchMove),yn(document,"pointermove",this._onTouchMove),yn(document,"dragover",of),yn(document,"mousemove",of),yn(document,"touchmove",of)},_offUpEvents:function(){var e=this.el.ownerDocument;yn(e,"mouseup",this._onDrop),yn(e,"touchend",this._onDrop),yn(e,"pointerup",this._onDrop),yn(e,"touchcancel",this._onDrop),yn(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;if(Ro=Vr(ht),Mu=Vr(ht,r.draggable),Zs("drop",this,{evt:e}),Dr=ht&&ht.parentNode,Ro=Vr(ht),Mu=Vr(ht,r.draggable),Ht.eventCanceled){this._nulling();return}Nd=!1,i0=!1,vg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),sx(this.cloneId),sx(this._dragStartId),this.nativeDraggable&&(yn(document,"drop",this),yn(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),pg&&Pt(document.body,"user-select",""),Pt(ht,"transform",""),e&&(jm&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),ln&&ln.parentNode&&ln.parentNode.removeChild(ln),(wr===Dr||Ni&&Ni.lastPutMode!=="clone")&&Mr&&Mr.parentNode&&Mr.parentNode.removeChild(Mr),ht&&(this.nativeDraggable&&yn(ht,"dragend",this),p1(ht),ht.style["will-change"]="",jm&&!Nd&&Cr(ht,Ni?Ni.options.ghostClass:this.options.ghostClass,!1),Cr(ht,this.options.chosenClass,!1),Is({sortable:this,name:"unchoose",toEl:Dr,newIndex:null,newDraggableIndex:null,originalEvent:e}),wr!==Dr?(Ro>=0&&(Is({rootEl:Dr,name:"add",toEl:Dr,fromEl:wr,originalEvent:e}),Is({sortable:this,name:"remove",toEl:Dr,originalEvent:e}),Is({rootEl:Dr,name:"sort",toEl:Dr,fromEl:wr,originalEvent:e}),Is({sortable:this,name:"sort",toEl:Dr,originalEvent:e})),Ni&&Ni.save()):Ro!==Hd&&Ro>=0&&(Is({sortable:this,name:"update",toEl:Dr,originalEvent:e}),Is({sortable:this,name:"sort",toEl:Dr,originalEvent:e})),Ht.active&&((Ro==null||Ro===-1)&&(Ro=Hd,Mu=gg),Is({sortable:this,name:"end",toEl:Dr,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Zs("nulling",this),wr=ht=Dr=ln=uf=Mr=ab=$u=sf=Ha=jm=Ro=Mu=Hd=gg=xd=yg=Ni=r0=Ht.dragged=Ht.ghost=Ht.clone=Ht.active=null,ww.forEach(function(e){e.checked=!0}),ww.length=h1=f1=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ht&&(this._onDragOver(e),Kce(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)t=r[i],ja(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||Qce(t));return e},sort:function(e,t){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];ja(a,this.options.draggable,i,!1)&&(r[s]=a)},this),t&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ja(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(t===void 0)return r[e];var i=Wy.modifyOption(this,e,t);typeof i<"u"?r[e]=i:r[e]=t,e==="group"&&E$(r)},destroy:function(){Zs("destroy",this);var e=this.el;e[hs]=null,yn(e,"mousedown",this._onTapStart),yn(e,"touchstart",this._onTapStart),yn(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(yn(e,"dragover",this),yn(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),bw.splice(bw.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!$u){if(Zs("hideClone",this),Ht.eventCanceled)return;Pt(Mr,"display","none"),this.options.removeCloneOnHide&&Mr.parentNode&&Mr.parentNode.removeChild(Mr),$u=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if($u){if(Zs("showClone",this),Ht.eventCanceled)return;ht.parentNode==wr&&!this.options.group.revertClone?wr.insertBefore(Mr,ht):uf?wr.insertBefore(Mr,uf):wr.appendChild(Mr),this.options.group.revertClone&&this.animate(ht,Mr),Pt(Mr,"display",""),$u=!1}}};function Kce(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function o0(n,e,t,r,i,s,o,a){var l,c=n[hs],h=c.options.onMove,d;return window.CustomEvent&&!Xc&&!Hy?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=n,l.dragged=t,l.draggedRect=r,l.related=i||e,l.relatedRect=s||Er(e),l.willInsertAfter=a,l.originalEvent=o,n.dispatchEvent(l),h&&(d=h.call(c,l,o)),d}function p1(n){n.draggable=!1}function Gce(){ix=!1}function qce(n,e,t){var r=Er(Ap(t.el,0,t.options,!0)),i=10;return e?n.clientX<r.left-i||n.clientY<r.top&&n.clientX<r.right:n.clientY<r.top-i||n.clientY<r.bottom&&n.clientX<r.left}function Yce(n,e,t){var r=Er(RC(t.el,t.options.draggable)),i=10;return e?n.clientX>r.right+i||n.clientX<=r.right&&n.clientY>r.bottom&&n.clientX>=r.left:n.clientX>r.right&&n.clientY>r.top||n.clientX<=r.right&&n.clientY>r.bottom+i}function Xce(n,e,t,r,i,s,o,a){var l=r?n.clientY:n.clientX,c=r?t.height:t.width,h=r?t.top:t.left,d=r?t.bottom:t.right,p=!1;if(!o){if(a&&lb<c*i){if(!vg&&(yg===1?l>h+c*s/2:l<d-c*s/2)&&(vg=!0),vg)p=!0;else if(yg===1?l<h+lb:l>d-lb)return-yg}else if(l>h+c*(1-i)/2&&l<d-c*(1-i)/2)return Jce(e)}return p=p||o,p&&(l<h+c*s/2||l>d-c*s/2)?l>h+c/2?1:-1:0}function Jce(n){return Vr(ht)<Vr(n)?1:-1}function Qce(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,r=0;t--;)r+=e.charCodeAt(t);return r.toString(36)}function Zce(n){ww.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var r=e[t];r.checked&&ww.push(r)}}function cb(n){return setTimeout(n,0)}function sx(n){return clearTimeout(n)}hE&&Tn(document,"touchmove",function(n){(Ht.active||Nd)&&n.cancelable&&n.preventDefault()});Ht.utils={on:Tn,off:yn,css:Pt,find:y$,is:function(e,t){return!!ja(e,t,e,!1)},extend:Lce,throttle:v$,closest:ja,toggleClass:Cr,clone:PC,index:Vr,nextTick:cb,cancelNextTick:sx,detectDirection:S$,getChild:Ap};Ht.get=function(n){return n[hs]};Ht.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Ht.utils=Gl(Gl({},Ht.utils),r.utils)),Wy.mount(r)})};Ht.create=function(n,e){return new Ht(n,e)};Ht.version=Pce;var ni=[],Km,ox,ax=!1,m1,g1,Sw,Gm;function eue(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?Tn(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Tn(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Tn(document,"touchmove",this._handleFallbackAutoScroll):Tn(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?yn(document,"dragover",this._handleAutoScroll):(yn(document,"pointermove",this._handleFallbackAutoScroll),yn(document,"touchmove",this._handleFallbackAutoScroll),yn(document,"mousemove",this._handleFallbackAutoScroll)),LM(),ub(),Vce()},nulling:function(){Sw=ox=Km=ax=Gm=m1=g1=null,ni.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var i=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(s,o);if(Sw=t,r||this.options.forceAutoScrollFallback||Hy||Xc||pg){y1(t,this.options,a,r);var l=ju(a,!0);ax&&(!Gm||s!==m1||o!==g1)&&(Gm&&LM(),Gm=setInterval(function(){var c=ju(document.elementFromPoint(s,o),!0);c!==l&&(l=c,ub()),y1(t,i.options,c,r)},10),m1=s,g1=o)}else{if(!this.options.bubbleScroll||ju(a,!0)===$l()){ub();return}y1(t,this.options,ju(a,!1),!1)}}},ya(n,{pluginName:"scroll",initializeByDefault:!0})}function ub(){ni.forEach(function(n){clearInterval(n.pid)}),ni=[]}function LM(){clearInterval(Gm)}var y1=v$(function(n,e,t,r){if(e.scroll){var i=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=$l(),c=!1,h;ox!==t&&(ox=t,ub(),Km=e.scroll,h=e.scrollFn,Km===!0&&(Km=ju(t,!0)));var d=0,p=Km;do{var y=p,w=Er(y),S=w.top,E=w.bottom,C=w.left,L=w.right,P=w.width,F=w.height,U=void 0,j=void 0,N=y.scrollWidth,O=y.scrollHeight,A=Pt(y),R=y.scrollLeft,k=y.scrollTop;y===l?(U=P<N&&(A.overflowX==="auto"||A.overflowX==="scroll"||A.overflowX==="visible"),j=F<O&&(A.overflowY==="auto"||A.overflowY==="scroll"||A.overflowY==="visible")):(U=P<N&&(A.overflowX==="auto"||A.overflowX==="scroll"),j=F<O&&(A.overflowY==="auto"||A.overflowY==="scroll"));var V=U&&(Math.abs(L-i)<=o&&R+P<N)-(Math.abs(C-i)<=o&&!!R),D=j&&(Math.abs(E-s)<=o&&k+F<O)-(Math.abs(S-s)<=o&&!!k);if(!ni[d])for(var Z=0;Z<=d;Z++)ni[Z]||(ni[Z]={});(ni[d].vx!=V||ni[d].vy!=D||ni[d].el!==y)&&(ni[d].el=y,ni[d].vx=V,ni[d].vy=D,clearInterval(ni[d].pid),(V!=0||D!=0)&&(c=!0,ni[d].pid=setInterval((function(){r&&this.layer===0&&Ht.active._onTouchMove(Sw);var le=ni[this.layer].vy?ni[this.layer].vy*a:0,Q=ni[this.layer].vx?ni[this.layer].vx*a:0;typeof h=="function"&&h.call(Ht.dragged.parentNode[hs],Q,le,n,Sw,ni[this.layer].el)!=="continue"||b$(ni[this.layer].el,Q,le)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&p!==l&&(p=ju(p,!1)));ax=c}},30),x$=function(e){var t=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var c=r||s;a();var h=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(h.clientX,h.clientY);l(),c&&!c.el.contains(d)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function DC(){}DC.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Ap(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:x$};ya(DC,{pluginName:"revertOnSpill"});function MC(){}MC.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:x$};ya(MC,{pluginName:"removeOnSpill"});var ra;function tue(){function n(){this.defaults={swapClass:"sortable-swap-highlight"}}return n.prototype={dragStart:function(t){var r=t.dragEl;ra=r},dragOverValid:function(t){var r=t.completed,i=t.target,s=t.onMove,o=t.activeSortable,a=t.changed,l=t.cancel;if(o.options.swap){var c=this.sortable.el,h=this.options;if(i&&i!==c){var d=ra;s(i)!==!1?(Cr(i,h.swapClass,!0),ra=i):ra=null,d&&d!==ra&&Cr(d,h.swapClass,!1)}a(),r(!0),l()}},drop:function(t){var r=t.activeSortable,i=t.putSortable,s=t.dragEl,o=i||this.sortable,a=this.options;ra&&Cr(ra,a.swapClass,!1),ra&&(a.swap||i&&i.options.swap)&&s!==ra&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),nue(s,ra),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){ra=null}},ya(n,{pluginName:"swap",eventProperties:function(){return{swapItem:ra}}})}function nue(n,e){var t=n.parentNode,r=e.parentNode,i,s;!t||!r||t.isEqualNode(e)||r.isEqualNode(n)||(i=Vr(n),s=Vr(e),t.isEqualNode(r)&&i<s&&s++,t.insertBefore(e,t.children[i]),r.insertBefore(n,r.children[s]))}var nn=[],ko=[],xm,Wa,Am=!1,eo=!1,Ad=!1,rr,Im,a0;function rue(){function n(e){for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this));e.options.supportPointer?Tn(document,"pointerup",this._deselectMultiDrag):(Tn(document,"mouseup",this._deselectMultiDrag),Tn(document,"touchend",this._deselectMultiDrag)),Tn(document,"keydown",this._checkKeyDown),Tn(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";nn.length&&Wa===e?nn.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return n.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var r=t.dragEl;rr=r},delayEnded:function(){this.isMultiDrag=~nn.indexOf(rr)},setupClone:function(t){var r=t.sortable,i=t.cancel;if(this.isMultiDrag){for(var s=0;s<nn.length;s++)ko.push(PC(nn[s])),ko[s].sortableIndex=nn[s].sortableIndex,ko[s].draggable=!1,ko[s].style["will-change"]="",Cr(ko[s],this.options.selectedClass,!1),nn[s]===rr&&Cr(ko[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(t){var r=t.sortable,i=t.rootEl,s=t.dispatchSortableEvent,o=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||nn.length&&Wa===r&&(VM(!0,i),s("clone"),o()))},showClone:function(t){var r=t.cloneNowShown,i=t.rootEl,s=t.cancel;this.isMultiDrag&&(VM(!1,i),ko.forEach(function(o){Pt(o,"display","")}),r(),a0=!1,s())},hideClone:function(t){var r=this;t.sortable;var i=t.cloneNowHidden,s=t.cancel;this.isMultiDrag&&(ko.forEach(function(o){Pt(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),a0=!0,s())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&Wa&&Wa.multiDrag._deselectMultiDrag(),nn.forEach(function(r){r.sortableIndex=Vr(r)}),nn=nn.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Ad=!0},dragStarted:function(t){var r=this,i=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){nn.forEach(function(o){o!==rr&&Pt(o,"position","absolute")});var s=Er(rr,!1,!0,!0);nn.forEach(function(o){o!==rr&&PM(o,s)}),eo=!0,Am=!0}i.animateAll(function(){eo=!1,Am=!1,r.options.animation&&nn.forEach(function(o){c1(o)}),r.options.sort&&l0()})}},dragOver:function(t){var r=t.target,i=t.completed,s=t.cancel;eo&&~nn.indexOf(r)&&(i(!1),s())},revert:function(t){var r=t.fromSortable,i=t.rootEl,s=t.sortable,o=t.dragRect;nn.length>1&&(nn.forEach(function(a){s.addAnimationState({target:a,rect:eo?Er(a):o}),c1(a),a.fromRect=o,r.removeAnimationState(a)}),eo=!1,iue(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var r=t.sortable,i=t.isOwner,s=t.insertion,o=t.activeSortable,a=t.parentEl,l=t.putSortable,c=this.options;if(s){if(i&&o._hideClone(),Am=!1,c.animation&&nn.length>1&&(eo||!i&&!o.options.sort&&!l)){var h=Er(rr,!1,!0,!0);nn.forEach(function(p){p!==rr&&(PM(p,h),a.appendChild(p))}),eo=!0}if(!i)if(eo||l0(),nn.length>1){var d=a0;o._showClone(r),o.options.animation&&!a0&&d&&ko.forEach(function(p){o.addAnimationState({target:p,rect:Im}),p.fromRect=Im,p.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(t){var r=t.dragRect,i=t.isOwner,s=t.activeSortable;if(nn.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){Im=ya({},r);var o=Of(rr,!0);Im.top-=o.f,Im.left-=o.e}},dragOverAnimationComplete:function(){eo&&(eo=!1,l0())},drop:function(t){var r=t.originalEvent,i=t.rootEl,s=t.parentEl,o=t.sortable,a=t.dispatchSortableEvent,l=t.oldIndex,c=t.putSortable,h=c||this.sortable;if(r){var d=this.options,p=s.children;if(!Ad)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Cr(rr,d.selectedClass,!~nn.indexOf(rr)),~nn.indexOf(rr))nn.splice(nn.indexOf(rr),1),xm=null,zm({sortable:o,rootEl:i,name:"deselect",targetEl:rr});else{if(nn.push(rr),zm({sortable:o,rootEl:i,name:"select",targetEl:rr}),r.shiftKey&&xm&&o.el.contains(xm)){var y=Vr(xm),w=Vr(rr);if(~y&&~w&&y!==w){var S,E;for(w>y?(E=y,S=w):(E=w,S=y+1);E<S;E++)~nn.indexOf(p[E])||(Cr(p[E],d.selectedClass,!0),nn.push(p[E]),zm({sortable:o,rootEl:i,name:"select",targetEl:p[E]}))}}else xm=rr;Wa=h}if(Ad&&this.isMultiDrag){if(eo=!1,(s[hs].options.sort||s!==i)&&nn.length>1){var C=Er(rr),L=Vr(rr,":not(."+this.options.selectedClass+")");if(!Am&&d.animation&&(rr.thisAnimationDuration=null),h.captureAnimationState(),!Am&&(d.animation&&(rr.fromRect=C,nn.forEach(function(F){if(F.thisAnimationDuration=null,F!==rr){var U=eo?Er(F):C;F.fromRect=U,h.addAnimationState({target:F,rect:U})}})),l0(),nn.forEach(function(F){p[L]?s.insertBefore(F,p[L]):s.appendChild(F),L++}),l===Vr(rr))){var P=!1;nn.forEach(function(F){if(F.sortableIndex!==Vr(F)){P=!0;return}}),P&&a("update")}nn.forEach(function(F){c1(F)}),h.animateAll()}Wa=h}(i===s||c&&c.lastPutMode!=="clone")&&ko.forEach(function(F){F.parentNode&&F.parentNode.removeChild(F)})}},nullingGlobal:function(){this.isMultiDrag=Ad=!1,ko.length=0},destroyGlobal:function(){this._deselectMultiDrag(),yn(document,"pointerup",this._deselectMultiDrag),yn(document,"mouseup",this._deselectMultiDrag),yn(document,"touchend",this._deselectMultiDrag),yn(document,"keydown",this._checkKeyDown),yn(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(typeof Ad<"u"&&Ad)&&Wa===this.sortable&&!(t&&ja(t.target,this.options.draggable,this.sortable.el,!1))&&!(t&&t.button!==0))for(;nn.length;){var r=nn[0];Cr(r,this.options.selectedClass,!1),nn.shift(),zm({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},ya(n,{pluginName:"multiDrag",utils:{select:function(t){var r=t.parentNode[hs];!r||!r.options.multiDrag||~nn.indexOf(t)||(Wa&&Wa!==r&&(Wa.multiDrag._deselectMultiDrag(),Wa=r),Cr(t,r.options.selectedClass,!0),nn.push(t))},deselect:function(t){var r=t.parentNode[hs],i=nn.indexOf(t);!r||!r.options.multiDrag||!~i||(Cr(t,r.options.selectedClass,!1),nn.splice(i,1))}},eventProperties:function(){var t=this,r=[],i=[];return nn.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;eo&&s!==rr?o=-1:eo?o=Vr(s,":not(."+t.options.selectedClass+")"):o=Vr(s),i.push({multiDragElement:s,index:o})}),{items:Ice(nn),clones:[].concat(ko),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),t==="ctrl"?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function iue(n,e){nn.forEach(function(t,r){var i=e.children[t.sortableIndex+(n?Number(r):0)];i?e.insertBefore(t,i):e.appendChild(t)})}function VM(n,e){ko.forEach(function(t,r){var i=e.children[t.sortableIndex+(n?Number(r):0)];i?e.insertBefore(t,i):e.appendChild(t)})}function l0(){nn.forEach(function(n){n!==rr&&n.parentNode&&n.parentNode.removeChild(n)})}Ht.mount(new eue);Ht.mount(MC,DC);const sue=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:rue,Sortable:Ht,Swap:tue,default:Ht},Symbol.toStringTag,{value:"Module"})),oue=mS(sue);var aue=Z0.exports,FM;function lue(){return FM||(FM=1,function(n,e){(function(r,i){n.exports=i(Tce(),oue)})(typeof self<"u"?self:aue,function(t,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,c){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var h in a)o.d(c,h,(function(d){return a[d]}).bind(null,h));return c},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),c={};c[l]="z",i.exports=String(c)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,c,h){if(a(l),c===void 0)return l;switch(h){case 0:return function(){return l.call(c)};case 1:return function(d){return l.call(c,d)};case 2:return function(d,p){return l.call(c,d,p)};case 3:return function(d,p,y){return l.call(c,d,p,y)}}return function(){return l.apply(c,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,c={}.toString,h=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],d=function(p){try{return l(p)}catch{return h.slice()}};i.exports.f=function(y){return h&&c.call(y)=="[object Window]"?d(y):l(a(y))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),c=o("5c6c"),h=o("fc6a"),d=o("c04e"),p=o("5135"),y=o("0cfb"),w=Object.getOwnPropertyDescriptor;s.f=a?w:function(E,C){if(E=h(E),C=d(C,!0),y)try{return w(E,C)}catch{}if(p(E,C))return c(!l.f.call(E,C),E[C])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,c=o("a640"),h=o("ae40"),d=c("reduce"),p=h("reduce",{1:0});a({target:"Array",proto:!0,forced:!d||!p},{reduce:function(w){return l(this,w,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(c,h){var d=c.exec;if(typeof d=="function"){var p=d.call(c,h);if(typeof p!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return p}if(a(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,h)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("17c2"),h=o("9112");for(var d in l){var p=a[d],y=p&&p.prototype;if(y&&y.forEach!==c)try{h(y,"forEach",c)}catch{y.forEach=c}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),c=o("ae40"),h=l("forEach"),d=c("forEach");i.exports=!h||!d?function(y){return a(this,y,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),c=!1;try{var h=0,d={next:function(){return{done:!!h++}},return:function(){c=!0}};d[l]=function(){return this},Array.from(d,function(){throw 2})}catch{}i.exports=function(p,y){if(!y&&!c)return!1;var w=!1;try{var S={};S[l]=function(){return{next:function(){return{done:w=!0}}}},p(S)}catch{}return w}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),c=o("2d00"),h=l("species");i.exports=function(d){return c>=51||!a(function(){var p=[],y=p.constructor={};return y[h]=function(){return{foo:1}},p[d](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,c=Math.min;i.exports=function(h,d){var p=a(h);return p<0?l(p+d,0):c(p,d)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,c=o("9112"),h=o("6eeb"),d=o("ce4e"),p=o("e893"),y=o("94ca");i.exports=function(w,S){var E=w.target,C=w.global,L=w.stat,P,F,U,j,N,O;if(C?F=a:L?F=a[E]||d(E,{}):F=(a[E]||{}).prototype,F)for(U in S){if(N=S[U],w.noTargetGet?(O=l(F,U),j=O&&O.value):j=F[U],P=y(C?U:E+(L?".":"#")+U,w.forced),!P&&j!==void 0){if(typeof N==typeof j)continue;p(N,j)}(w.sham||j&&j.sham)&&c(N,"sham",!0),h(F,U,N,w)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),c=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(d){return a(d,c)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),c=o("d039"),h=o("ad6d"),d="toString",p=RegExp.prototype,y=p[d],w=c(function(){return y.call({source:"a",flags:"b"})!="/a/b"}),S=y.name!=d;(w||S)&&a(RegExp.prototype,d,function(){var C=l(this),L=String(C.source),P=C.flags,F=String(P===void 0&&C instanceof RegExp&&!("flags"in p)?h.call(C):P);return"/"+L+"/"+F},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,c=o("50c4"),h=o("5a34"),d=o("1d80"),p=o("ab13"),y=o("c430"),w="".startsWith,S=Math.min,E=p("startsWith"),C=!y&&!E&&!!function(){var L=l(String.prototype,"startsWith");return L&&!L.writable}();a({target:"String",proto:!0,forced:!C&&!E},{startsWith:function(P){var F=String(d(this));h(P);var U=c(S(arguments.length>1?arguments[1]:void 0,F.length)),j=String(P);return w?w.call(F,j,U):F.slice(U,U+j.length)===j}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),c=a.process,h=c&&c.versions,d=h&&h.v8,p,y;d?(p=d.split("."),y=p[0]+p[1]):l&&(p=l.match(/Edge\/(\d+)/),(!p||p[1]>=74)&&(p=l.match(/Chrome\/(\d+)/),p&&(y=p[1]))),i.exports=y&&+y},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),c=o("b622"),h=c("iterator");i.exports=function(d){if(d!=null)return d[h]||d["@@iterator"]||l[a(d)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("825a"),h=o("df75");i.exports=a?Object.defineProperties:function(p,y){c(p);for(var w=h(y),S=w.length,E=0,C;S>E;)l.f(p,C=w[E++],y[C]);return p}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),c=o("7dd0"),h="String Iterator",d=l.set,p=l.getterFor(h);c(String,"String",function(y){d(this,{type:h,string:String(y),index:0})},function(){var w=p(this),S=w.string,E=w.index,C;return E>=S.length?{value:void 0,done:!0}:(C=a(S,E),w.index+=C.length,{value:C,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),c="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(h){return l(h)=="String"?c.call(h,""):Object(h)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),c=o("9bf2"),h=a("unscopables"),d=Array.prototype;d[h]==null&&c.f(d,h,{configurable:!0,value:l(null)}),i.exports=function(p){d[h][p]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),c=o("b622"),h=c("match");i.exports=function(d){var p;return a(d)&&((p=d[h])!==void 0?!!p:l(d)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),c=o("23cb"),h=function(d){return function(p,y,w){var S=a(p),E=l(S.length),C=c(w,E),L;if(d&&y!=y){for(;E>C;)if(L=S[C++],L!=L)return!0}else for(;E>C;C++)if((d||C in S)&&S[C]===y)return d||C||0;return!d&&-1}};i.exports={includes:h(!0),indexOf:h(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,c=o("1dde"),h=o("ae40"),d=c("filter"),p=h("filter");a({target:"Array",proto:!0,forced:!d||!p},{filter:function(w){return l(this,w,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),c=o("9bdd"),h=o("e95a"),d=o("50c4"),p=o("8418"),y=o("35a1");i.exports=function(S){var E=l(S),C=typeof this=="function"?this:Array,L=arguments.length,P=L>1?arguments[1]:void 0,F=P!==void 0,U=y(E),j=0,N,O,A,R,k,V;if(F&&(P=a(P,L>2?arguments[2]:void 0,2)),U!=null&&!(C==Array&&h(U)))for(R=U.call(E),k=R.next,O=new C;!(A=k.call(R)).done;j++)V=F?c(R,P,[A.value,j],!0):A.value,p(O,j,V);else for(N=d(E.length),O=new C(N);N>j;j++)V=F?P(E[j],j):E[j],p(O,j,V);return O.length=j,O}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(h){return l(h)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(c){return c>0?l(a(c),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),c=o("7b0b"),h=o("50c4"),d=o("a691"),p=o("1d80"),y=o("8aa5"),w=o("14c3"),S=Math.max,E=Math.min,C=Math.floor,L=/\$([$&'`]|\d\d?|<[^>]*>)/g,P=/\$([$&'`]|\d\d?)/g,F=function(U){return U===void 0?U:String(U)};a("replace",2,function(U,j,N,O){var A=O.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,R=O.REPLACE_KEEPS_$0,k=A?"$":"$0";return[function(Z,le){var Q=p(this),re=Z==null?void 0:Z[U];return re!==void 0?re.call(Z,Q,le):j.call(String(Q),Z,le)},function(D,Z){if(!A&&R||typeof Z=="string"&&Z.indexOf(k)===-1){var le=N(j,D,this,Z);if(le.done)return le.value}var Q=l(D),re=String(this),ae=typeof Z=="function";ae||(Z=String(Z));var Ce=Q.global;if(Ce){var He=Q.unicode;Q.lastIndex=0}for(var Ge=[];;){var ot=w(Q,re);if(ot===null||(Ge.push(ot),!Ce))break;var ut=String(ot[0]);ut===""&&(Q.lastIndex=y(re,h(Q.lastIndex),He))}for(var Mt="",_e=0,Ne=0;Ne<Ge.length;Ne++){ot=Ge[Ne];for(var oe=String(ot[0]),Ee=S(E(d(ot.index),re.length),0),me=[],Ie=1;Ie<ot.length;Ie++)me.push(F(ot[Ie]));var Me=ot.groups;if(ae){var Ye=[oe].concat(me,Ee,re);Me!==void 0&&Ye.push(Me);var X=String(Z.apply(void 0,Ye))}else X=V(oe,re,Ee,me,Me,Z);Ee>=_e&&(Mt+=re.slice(_e,Ee)+X,_e=Ee+oe.length)}return Mt+re.slice(_e)}];function V(D,Z,le,Q,re,ae){var Ce=le+D.length,He=Q.length,Ge=P;return re!==void 0&&(re=c(re),Ge=L),j.call(ae,Ge,function(ot,ut){var Mt;switch(ut.charAt(0)){case"$":return"$";case"&":return D;case"`":return Z.slice(0,le);case"'":return Z.slice(Ce);case"<":Mt=re[ut.slice(1,-1)];break;default:var _e=+ut;if(_e===0)return ot;if(_e>He){var Ne=C(_e/10);return Ne===0?ot:Ne<=He?Q[Ne-1]===void 0?ut.charAt(1):Q[Ne-1]+ut.charAt(1):ot}Mt=Q[_e-1]}return Mt===void 0?"":Mt})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(c,h){return l[c]||(l[c]=h!==void 0?h:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),c=o("7418"),h=o("825a");i.exports=a("Reflect","ownKeys")||function(p){var y=l.f(h(p)),w=c.f;return w?y.concat(w(p)):y}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),c=o("7b0b"),h=o("50c4"),d=o("1c0b"),p=o("65f0");a({target:"Array",proto:!0},{flatMap:function(w){var S=c(this),E=h(S.length),C;return d(w),C=p(S,0),C.length=l(C,S,S,E,0,1,w,arguments.length>1?arguments[1]:void 0),C}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),c=function(h){return function(d,p){var y=String(l(d)),w=a(p),S=y.length,E,C;return w<0||w>=S?h?"":void 0:(E=y.charCodeAt(w),E<55296||E>56319||w+1===S||(C=y.charCodeAt(w+1))<56320||C>57343?h?y.charAt(w):E:h?y.slice(w,w+2):(E-55296<<10)+(C-56320)+65536)}};i.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),c=o("b622"),h=c("species");i.exports=function(d,p){var y;return l(d)&&(y=d.constructor,typeof y=="function"&&(y===Array||l(y.prototype))?y=void 0:a(y)&&(y=y[h],y===null&&(y=void 0))),new(y===void 0?Array:y)(p===0?0:p)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),c=o("861d"),h=o("9112"),d=o("5135"),p=o("f772"),y=o("d012"),w=l.WeakMap,S,E,C,L=function(A){return C(A)?E(A):S(A,{})},P=function(A){return function(R){var k;if(!c(R)||(k=E(R)).type!==A)throw TypeError("Incompatible receiver, "+A+" required");return k}};if(a){var F=new w,U=F.get,j=F.has,N=F.set;S=function(A,R){return N.call(F,A,R),R},E=function(A){return U.call(F,A)||{}},C=function(A){return j.call(F,A)}}else{var O=p("state");y[O]=!0,S=function(A,R){return h(A,O,R),R},E=function(A){return d(A,O)?A[O]:{}},C=function(A){return d(A,O)}}i.exports={set:S,get:E,has:C,enforce:L,getterFor:P}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),c=o("5135"),h=o("ce4e"),d=o("8925"),p=o("69f3"),y=p.get,w=p.enforce,S=String(String).split("String");(i.exports=function(E,C,L,P){var F=P?!!P.unsafe:!1,U=P?!!P.enumerable:!1,j=P?!!P.noTargetGet:!1;if(typeof L=="function"&&(typeof C=="string"&&!c(L,"name")&&l(L,"name",C),w(L).source=S.join(typeof C=="string"?C:"")),E===a){U?E[C]=L:h(C,L);return}else F?!j&&E[C]&&(U=!0):delete E[C];U?E[C]=L:l(E,C,L)})(Function.prototype,"toString",function(){return typeof this=="function"&&y(this).source||d(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),c=o("fc6a"),h=o("d1e7").f,d=function(p){return function(y){for(var w=c(y),S=l(w),E=S.length,C=0,L=[],P;E>C;)P=S[C++],(!a||h.call(w,P))&&L.push(p?[P,w[P]]:w[P]);return L}};i.exports={entries:d(!0),values:d(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),c=o("e538"),h=o("9bf2").f;i.exports=function(d){var p=a.Symbol||(a.Symbol={});l(p,d)||h(p,d,{value:c.f(d)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),c=o("7839"),h=o("d012"),d=o("1be4"),p=o("cc12"),y=o("f772"),w=">",S="<",E="prototype",C="script",L=y("IE_PROTO"),P=function(){},F=function(A){return S+C+w+A+S+"/"+C+w},U=function(A){A.write(F("")),A.close();var R=A.parentWindow.Object;return A=null,R},j=function(){var A=p("iframe"),R="java"+C+":",k;return A.style.display="none",d.appendChild(A),A.src=String(R),k=A.contentWindow.document,k.open(),k.write(F("document.F=Object")),k.close(),k.F},N,O=function(){try{N=document.domain&&new ActiveXObject("htmlfile")}catch{}O=N?U(N):j();for(var A=c.length;A--;)delete O[E][c[A]];return O()};h[L]=!0,i.exports=Object.create||function(R,k){var V;return R!==null?(P[E]=a(R),V=new P,P[E]=null,V[L]=R):V=O(),k===void 0?V:l(V,k)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),c=o("e163"),h=o("d2bb"),d=o("d44e"),p=o("9112"),y=o("6eeb"),w=o("b622"),S=o("c430"),E=o("3f8c"),C=o("ae93"),L=C.IteratorPrototype,P=C.BUGGY_SAFARI_ITERATORS,F=w("iterator"),U="keys",j="values",N="entries",O=function(){return this};i.exports=function(A,R,k,V,D,Z,le){l(k,R,V);var Q=function(Ne){if(Ne===D&&Ge)return Ge;if(!P&&Ne in Ce)return Ce[Ne];switch(Ne){case U:return function(){return new k(this,Ne)};case j:return function(){return new k(this,Ne)};case N:return function(){return new k(this,Ne)}}return function(){return new k(this)}},re=R+" Iterator",ae=!1,Ce=A.prototype,He=Ce[F]||Ce["@@iterator"]||D&&Ce[D],Ge=!P&&He||Q(D),ot=R=="Array"&&Ce.entries||He,ut,Mt,_e;if(ot&&(ut=c(ot.call(new A)),L!==Object.prototype&&ut.next&&(!S&&c(ut)!==L&&(h?h(ut,L):typeof ut[F]!="function"&&p(ut,F,O)),d(ut,re,!0,!0),S&&(E[re]=O))),D==j&&He&&He.name!==j&&(ae=!0,Ge=function(){return He.call(this)}),(!S||le)&&Ce[F]!==Ge&&p(Ce,F,Ge),E[R]=Ge,D)if(Mt={values:Q(j),keys:Z?Ge:Q(U),entries:Q(N)},le)for(_e in Mt)(P||ae||!(_e in Ce))&&y(Ce,_e,Mt[_e]);else a({target:R,proto:!0,forced:P||ae},Mt);return Mt}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),c=a.WeakMap;i.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),c=o("5c6c");i.exports=function(h,d,p){var y=a(d);y in h?l.f(h,y,c(0,p)):h[y]=p}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,c;(function(h,d){l=[],a=d,c=typeof a=="function"?a.apply(s,l):a,c!==void 0&&(i.exports=c)})(typeof self<"u"?self:this,function(){function h(){var d=Object.getOwnPropertyDescriptor(document,"currentScript");if(!d&&"currentScript"in document&&document.currentScript||d&&d.get!==h&&document.currentScript)return document.currentScript;try{throw new Error}catch(N){var p=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,y=/@([^@]*):(\d+):(\d+)\s*$/ig,w=p.exec(N.stack)||y.exec(N.stack),S=w&&w[1]||!1,E=w&&w[2]||!1,C=document.location.href.replace(document.location.hash,""),L,P,F,U=document.getElementsByTagName("script");S===C&&(L=document.documentElement.outerHTML,P=new RegExp("(?:[^\\n]+?\\n){0,"+(E-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),F=L.replace(P,"$1").trim());for(var j=0;j<U.length;j++)if(U[j].readyState==="interactive"||U[j].src===S||S===C&&U[j].innerHTML&&U[j].innerHTML.trim()===F)return U[j];return null}}return h})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(c){return l.call(c)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,c,h){return c+(h?a(l,c).length:1)}},"8bbf":function(i,s){i.exports=t},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("5c6c");i.exports=a?function(h,d,p){return l.f(h,d,c(1,p))}:function(h,d,p){return h[d]=p,h}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),c=RegExp.prototype.exec,h=String.prototype.replace,d=c,p=function(){var E=/a/,C=/b*/g;return c.call(E,"a"),c.call(C,"a"),E.lastIndex!==0||C.lastIndex!==0}(),y=l.UNSUPPORTED_Y||l.BROKEN_CARET,w=/()??/.exec("")[1]!==void 0,S=p||w||y;S&&(d=function(C){var L=this,P,F,U,j,N=y&&L.sticky,O=a.call(L),A=L.source,R=0,k=C;return N&&(O=O.replace("y",""),O.indexOf("g")===-1&&(O+="g"),k=String(C).slice(L.lastIndex),L.lastIndex>0&&(!L.multiline||L.multiline&&C[L.lastIndex-1]!==`
`)&&(A="(?: "+A+")",k=" "+k,R++),F=new RegExp("^(?:"+A+")",O)),w&&(F=new RegExp("^"+A+"$(?!\\s)",O)),p&&(P=L.lastIndex),U=c.call(N?F:L,k),N?U?(U.input=U.input.slice(R),U[0]=U[0].slice(R),U.index=L.lastIndex,L.lastIndex+=U[0].length):L.lastIndex=0:p&&U&&(L.lastIndex=L.global?U.index+U[0].length:P),w&&U&&U.length>1&&h.call(U[0],F,function(){for(j=1;j<arguments.length-2;j++)arguments[j]===void 0&&(U[j]=void 0)}),U}),i.exports=d},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,c=function(w,S){var E=d[h(w)];return E==y?!0:E==p?!1:typeof S=="function"?a(S):!!S},h=c.normalize=function(w){return String(w).replace(l,".").toLowerCase()},d=c.data={},p=c.NATIVE="N",y=c.POLYFILL="P";i.exports=c},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("e8b5"),h=o("861d"),d=o("7b0b"),p=o("50c4"),y=o("8418"),w=o("65f0"),S=o("1dde"),E=o("b622"),C=o("2d00"),L=E("isConcatSpreadable"),P=9007199254740991,F="Maximum allowed index exceeded",U=C>=51||!l(function(){var A=[];return A[L]=!1,A.concat()[0]!==A}),j=S("concat"),N=function(A){if(!h(A))return!1;var R=A[L];return R!==void 0?!!R:c(A)},O=!U||!j;a({target:"Array",proto:!0,forced:O},{concat:function(R){var k=d(this),V=w(k,0),D=0,Z,le,Q,re,ae;for(Z=-1,Q=arguments.length;Z<Q;Z++)if(ae=Z===-1?k:arguments[Z],N(ae)){if(re=p(ae.length),D+re>P)throw TypeError(F);for(le=0;le<re;le++,D++)le in ae&&y(V,D,ae[le])}else{if(D>=P)throw TypeError(F);y(V,D++,ae)}return V.length=D,V}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,c,h,d){try{return d?c(a(h)[0],h[1]):c(h)}catch(y){var p=l.return;throw p!==void 0&&a(p.call(l)),y}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),c=o("825a"),h=o("c04e"),d=Object.defineProperty;s.f=a?d:function(y,w,S){if(c(y),w=h(w,!0),c(S),l)try{return d(y,w,S)}catch{}if("get"in S||"set"in S)throw TypeError("Accessors not supported");return"value"in S&&(y[w]=S.value),y}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),c=o("5c6c"),h=o("d44e"),d=o("3f8c"),p=function(){return this};i.exports=function(y,w,S){var E=w+" Iterator";return y.prototype=l(a,{next:c(1,S)}),h(y,E,!1,!0),d[E]=p,y}},"9f7f":function(i,s,o){var a=o("d039");function l(c,h){return RegExp(c,h)}s.UNSUPPORTED_Y=a(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),c=o("0366"),h=function(d,p,y,w,S,E,C,L){for(var P=S,F=0,U=C?c(C,L,3):!1,j;F<w;){if(F in y){if(j=U?U(y[F],F,p):y[F],E>0&&a(j))P=h(d,p,j,l(j.length),P,E-1)-1;else{if(P>=9007199254740991)throw TypeError("Exceed the acceptable array length");d[P]=j}P++}F++}return P};i.exports=h},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),c=o("a691"),h=o("50c4"),d=o("7b0b"),p=o("65f0"),y=o("8418"),w=o("1dde"),S=o("ae40"),E=w("splice"),C=S("splice",{ACCESSORS:!0,0:0,1:2}),L=Math.max,P=Math.min,F=9007199254740991,U="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!E||!C},{splice:function(N,O){var A=d(this),R=h(A.length),k=l(N,R),V=arguments.length,D,Z,le,Q,re,ae;if(V===0?D=Z=0:V===1?(D=0,Z=R-k):(D=V-2,Z=P(L(c(O),0),R-k)),R+D-Z>F)throw TypeError(U);for(le=p(A,Z),Q=0;Q<Z;Q++)re=k+Q,re in A&&y(le,Q,A[re]);if(le.length=Z,D<Z){for(Q=k;Q<R-Z;Q++)re=Q+Z,ae=Q+D,re in A?A[ae]=A[re]:delete A[ae];for(Q=R;Q>R-Z+D;Q--)delete A[Q-1]}else if(D>Z)for(Q=R-Z;Q>k;Q--)re=Q+Z-1,ae=Q+D-1,re in A?A[ae]=A[re]:delete A[ae];for(Q=0;Q<D;Q++)A[Q+k]=arguments[Q+2];return A.length=R-Z+D,le}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),c=o("d066"),h=o("c430"),d=o("83ab"),p=o("4930"),y=o("fdbf"),w=o("d039"),S=o("5135"),E=o("e8b5"),C=o("861d"),L=o("825a"),P=o("7b0b"),F=o("fc6a"),U=o("c04e"),j=o("5c6c"),N=o("7c73"),O=o("df75"),A=o("241c"),R=o("057f"),k=o("7418"),V=o("06cf"),D=o("9bf2"),Z=o("d1e7"),le=o("9112"),Q=o("6eeb"),re=o("5692"),ae=o("f772"),Ce=o("d012"),He=o("90e3"),Ge=o("b622"),ot=o("e538"),ut=o("746f"),Mt=o("d44e"),_e=o("69f3"),Ne=o("b727").forEach,oe=ae("hidden"),Ee="Symbol",me="prototype",Ie=Ge("toPrimitive"),Me=_e.set,Ye=_e.getterFor(Ee),X=Object[me],ee=l.Symbol,be=c("JSON","stringify"),Ue=V.f,ke=D.f,Ke=R.f,at=Z.f,Xe=re("symbols"),Le=re("op-symbols"),ze=re("string-to-symbol-registry"),Et=re("symbol-to-string-registry"),lt=re("wks"),mt=l.QObject,ft=!mt||!mt[me]||!mt[me].findChild,Tt=d&&w(function(){return N(ke({},"a",{get:function(){return ke(this,"a",{value:7}).a}})).a!=7})?function(kt,At,Oe){var zt=Ue(X,At);zt&&delete X[At],ke(kt,At,Oe),zt&&kt!==X&&ke(X,At,zt)}:ke,Wt=function(kt,At){var Oe=Xe[kt]=N(ee[me]);return Me(Oe,{type:Ee,tag:kt,description:At}),d||(Oe.description=At),Oe},de=y?function(kt){return typeof kt=="symbol"}:function(kt){return Object(kt)instanceof ee},ge=function(At,Oe,zt){At===X&&ge(Le,Oe,zt),L(At);var on=U(Oe,!0);return L(zt),S(Xe,on)?(zt.enumerable?(S(At,oe)&&At[oe][on]&&(At[oe][on]=!1),zt=N(zt,{enumerable:j(0,!1)})):(S(At,oe)||ke(At,oe,j(1,{})),At[oe][on]=!0),Tt(At,on,zt)):ke(At,on,zt)},Se=function(At,Oe){L(At);var zt=F(Oe),on=O(zt).concat(je(zt));return Ne(on,function(yr){(!d||rt.call(zt,yr))&&ge(At,yr,zt[yr])}),At},Pe=function(At,Oe){return Oe===void 0?N(At):Se(N(At),Oe)},rt=function(At){var Oe=U(At,!0),zt=at.call(this,Oe);return this===X&&S(Xe,Oe)&&!S(Le,Oe)?!1:zt||!S(this,Oe)||!S(Xe,Oe)||S(this,oe)&&this[oe][Oe]?zt:!0},Ot=function(At,Oe){var zt=F(At),on=U(Oe,!0);if(!(zt===X&&S(Xe,on)&&!S(Le,on))){var yr=Ue(zt,on);return yr&&S(Xe,on)&&!(S(zt,oe)&&zt[oe][on])&&(yr.enumerable=!0),yr}},Rt=function(At){var Oe=Ke(F(At)),zt=[];return Ne(Oe,function(on){!S(Xe,on)&&!S(Ce,on)&&zt.push(on)}),zt},je=function(At){var Oe=At===X,zt=Ke(Oe?Le:F(At)),on=[];return Ne(zt,function(yr){S(Xe,yr)&&(!Oe||S(X,yr))&&on.push(Xe[yr])}),on};if(p||(ee=function(){if(this instanceof ee)throw TypeError("Symbol is not a constructor");var At=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Oe=He(At),zt=function(on){this===X&&zt.call(Le,on),S(this,oe)&&S(this[oe],Oe)&&(this[oe][Oe]=!1),Tt(this,Oe,j(1,on))};return d&&ft&&Tt(X,Oe,{configurable:!0,set:zt}),Wt(Oe,At)},Q(ee[me],"toString",function(){return Ye(this).tag}),Q(ee,"withoutSetter",function(kt){return Wt(He(kt),kt)}),Z.f=rt,D.f=ge,V.f=Ot,A.f=R.f=Rt,k.f=je,ot.f=function(kt){return Wt(Ge(kt),kt)},d&&(ke(ee[me],"description",{configurable:!0,get:function(){return Ye(this).description}}),h||Q(X,"propertyIsEnumerable",rt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!p,sham:!p},{Symbol:ee}),Ne(O(lt),function(kt){ut(kt)}),a({target:Ee,stat:!0,forced:!p},{for:function(kt){var At=String(kt);if(S(ze,At))return ze[At];var Oe=ee(At);return ze[At]=Oe,Et[Oe]=At,Oe},keyFor:function(At){if(!de(At))throw TypeError(At+" is not a symbol");if(S(Et,At))return Et[At]},useSetter:function(){ft=!0},useSimple:function(){ft=!1}}),a({target:"Object",stat:!0,forced:!p,sham:!d},{create:Pe,defineProperty:ge,defineProperties:Se,getOwnPropertyDescriptor:Ot}),a({target:"Object",stat:!0,forced:!p},{getOwnPropertyNames:Rt,getOwnPropertySymbols:je}),a({target:"Object",stat:!0,forced:w(function(){k.f(1)})},{getOwnPropertySymbols:function(At){return k.f(P(At))}}),be){var tn=!p||w(function(){var kt=ee();return be([kt])!="[null]"||be({a:kt})!="{}"||be(Object(kt))!="{}"});a({target:"JSON",stat:!0,forced:tn},{stringify:function(At,Oe,zt){for(var on=[At],yr=1,ji;arguments.length>yr;)on.push(arguments[yr++]);if(ji=Oe,!(!C(Oe)&&At===void 0||de(At)))return E(Oe)||(Oe=function(cl,yo){if(typeof ji=="function"&&(yo=ji.call(this,cl,yo)),!de(yo))return yo}),on[1]=Oe,be.apply(null,on)}})}ee[me][Ie]||le(ee[me],Ie,ee[me].valueOf),Mt(ee,Ee),Ce[oe]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),c=o("1c7e"),h=!c(function(d){Array.from(d)});a({target:"Array",stat:!0,forced:h},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,c){var h=[][l];return!!h&&a(function(){h.call(null,c||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(c){var h=/./;try{"/./"[c](h)}catch{try{return h[l]=!1,"/./"[c](h)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("5135"),h=Object.defineProperty,d={},p=function(y){throw y};i.exports=function(y,w){if(c(d,y))return d[y];w||(w={});var S=[][y],E=c(w,"ACCESSORS")?w.ACCESSORS:!1,C=c(w,0)?w[0]:p,L=c(w,1)?w[1]:void 0;return d[y]=!!S&&!l(function(){if(E&&!a)return!0;var P={length:-1};E?h(P,1,{enumerable:!0,get:p}):P[1]=1,S.call(P,C,L)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),c=o("5135"),h=o("b622"),d=o("c430"),p=h("iterator"),y=!1,w=function(){return this},S,E,C;[].keys&&(C=[].keys(),"next"in C?(E=a(a(C)),E!==Object.prototype&&(S=E)):y=!0),S==null&&(S={}),!d&&!c(S,p)&&l(S,p,w),i.exports={IteratorPrototype:S,BUGGY_SAFARI_ITERATORS:y}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,c=Function.prototype,h=c.toString,d=/^\s*function ([^ (]*)/,p="name";a&&!(p in c)&&l(c,p,{configurable:!0,get:function(){try{return h.call(this).match(d)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),c=o("5135"),h=o("90e3"),d=o("4930"),p=o("fdbf"),y=l("wks"),w=a.Symbol,S=p?w:w&&w.withoutSetter||h;i.exports=function(E){return c(y,E)||(d&&c(w,E)?y[E]=w[E]:y[E]=S("Symbol."+E)),y[E]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),c=o("df75"),h=o("d039"),d=h(function(){c(1)});a({target:"Object",stat:!0,forced:d},{keys:function(y){return c(l(y))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),c=o("7b0b"),h=o("50c4"),d=o("65f0"),p=[].push,y=function(w){var S=w==1,E=w==2,C=w==3,L=w==4,P=w==6,F=w==5||P;return function(U,j,N,O){for(var A=c(U),R=l(A),k=a(j,N,3),V=h(R.length),D=0,Z=O||d,le=S?Z(U,V):E?Z(U,0):void 0,Q,re;V>D;D++)if((F||D in R)&&(Q=R[D],re=k(Q,D,A),w)){if(S)le[D]=re;else if(re)switch(w){case 3:return!0;case 5:return Q;case 6:return D;case 2:p.call(le,Q)}else if(L)return!1}return P?-1:C||L?L:le}};i.exports={forEach:y(0),map:y(1),filter:y(2),some:y(3),every:y(4),find:y(5),findIndex:y(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,c){if(!a(l))return l;var h,d;if(c&&typeof(h=l.toString)=="function"&&!a(d=h.call(l))||typeof(h=l.valueOf)=="function"&&!a(d=h.call(l))||!c&&typeof(h=l.toString)=="function"&&!a(d=h.call(l)))return d;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),c="__core-js_shared__",h=a[c]||l(c,{});i.exports=h},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,c=o("44d2"),h=o("ae40"),d="findIndex",p=!0,y=h(d);d in[]&&Array(1)[d](function(){p=!1}),a({target:"Array",proto:!0,forced:p||!y},{findIndex:function(S){return l(this,S,arguments.length>1?arguments[1]:void 0)}}),c(d)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,c=o("a640"),h=o("ae40"),d=[].indexOf,p=!!d&&1/[1].indexOf(1,-0)<0,y=c("indexOf"),w=h("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:p||!y||!w},{indexOf:function(E){return p?d.apply(this,arguments)||0:l(this,E,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),c=o("4d64").indexOf,h=o("d012");i.exports=function(d,p){var y=l(d),w=0,S=[],E;for(E in y)!a(h,E)&&a(y,E)&&S.push(E);for(;p.length>w;)a(y,E=p[w++])&&(~c(S,E)||S.push(E));return S}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,c=o("44d2"),h=o("ae40"),d=h("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!d},{includes:function(y){return l(this,y,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),c=a.document,h=l(c)&&l(c.createElement);i.exports=function(d){return h?c.createElement(d):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(c,h){try{l(a,c,h)}catch{a[c]=h}return h}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),c=function(h){return typeof h=="function"?h:void 0};i.exports=function(h,d){return arguments.length<2?c(a[h])||c(l[h]):a[h]&&a[h][d]||l[h]&&l[h][d]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!a.call({1:2},1);s.f=c?function(d){var p=l(this,d);return!!p&&p.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,h={},d;try{d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,d.call(h,[]),c=h instanceof Array}catch{}return function(y,w){return a(y),l(w),c?d.call(y,w):y.__proto__=w,y}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),c=o("b041");a||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),c=o("b622"),h=c("toStringTag");i.exports=function(d,p,y){d&&!l(d=y?d:d.prototype,h)&&a(d,h,{configurable:!0,value:p})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),c=o("44ad"),h=o("50c4"),d=function(p){return function(y,w,S,E){a(w);var C=l(y),L=c(C),P=h(C.length),F=p?P-1:0,U=p?-1:1;if(S<2)for(;;){if(F in L){E=L[F],F+=U;break}if(F+=U,p?F<0:P<=F)throw TypeError("Reduce of empty array with no initial value")}for(;p?F>=0:P>F;F+=U)F in L&&(E=w(E,L[F],F,C));return E}};i.exports={left:d(!1),right:d(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),c=o("b622"),h=o("9263"),d=o("9112"),p=c("species"),y=!l(function(){var L=/./;return L.exec=function(){var P=[];return P.groups={a:"7"},P},"".replace(L,"$<a>")!=="7"}),w=function(){return"a".replace(/./,"$0")==="$0"}(),S=c("replace"),E=function(){return/./[S]?/./[S]("a","$0")==="":!1}(),C=!l(function(){var L=/(?:)/,P=L.exec;L.exec=function(){return P.apply(this,arguments)};var F="ab".split(L);return F.length!==2||F[0]!=="a"||F[1]!=="b"});i.exports=function(L,P,F,U){var j=c(L),N=!l(function(){var D={};return D[j]=function(){return 7},""[L](D)!=7}),O=N&&!l(function(){var D=!1,Z=/a/;return L==="split"&&(Z={},Z.constructor={},Z.constructor[p]=function(){return Z},Z.flags="",Z[j]=/./[j]),Z.exec=function(){return D=!0,null},Z[j](""),!D});if(!N||!O||L==="replace"&&!(y&&w&&!E)||L==="split"&&!C){var A=/./[j],R=F(j,""[L],function(D,Z,le,Q,re){return Z.exec===h?N&&!re?{done:!0,value:A.call(Z,le,Q)}:{done:!0,value:D.call(le,Z,Q)}:{done:!1}},{REPLACE_KEEPS_$0:w,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:E}),k=R[0],V=R[1];a(String.prototype,L,k),a(RegExp.prototype,j,P==2?function(D,Z){return V.call(D,this,Z)}:function(D){return V.call(D,this)})}U&&d(RegExp.prototype[j],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,c=o("1dde"),h=o("ae40"),d=c("map"),p=h("map");a({target:"Array",proto:!0,forced:!d||!p},{map:function(w){return l(this,w,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(c){return c&&c.Math==Math&&c};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("56ef"),h=o("fc6a"),d=o("06cf"),p=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(w){for(var S=h(w),E=d.f,C=c(S),L={},P=0,F,U;C.length>P;)U=E(S,F=C[P++]),U!==void 0&&p(L,F,U);return L}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return c});function l(){return typeof window<"u"?window.console:a.console}var c=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("e260"),h=o("9112"),d=o("b622"),p=d("iterator"),y=d("toStringTag"),w=c.values;for(var S in l){var E=a[S],C=E&&E.prototype;if(C){if(C[p]!==w)try{h(C,p,w)}catch{C[p]=w}if(C[y]||h(C,y,S),l[S]){for(var L in c)if(C[L]!==c[L])try{h(C,L,c[L])}catch{C[L]=c[L]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(h){return a(h,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("da84"),h=o("5135"),d=o("861d"),p=o("9bf2").f,y=o("e893"),w=c.Symbol;if(l&&typeof w=="function"&&(!("description"in w.prototype)||w().description!==void 0)){var S={},E=function(){var j=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),N=this instanceof E?new w(j):j===void 0?w():w(j);return j===""&&(S[N]=!0),N};y(E,w);var C=E.prototype=w.prototype;C.constructor=E;var L=C.toString,P=String(w("test"))=="Symbol(test)",F=/^Symbol\((.*)\)[^)]+$/;p(C,"description",{configurable:!0,get:function(){var j=d(this)?this.valueOf():this,N=L.call(j);if(h(S,j))return"";var O=P?N.slice(7,-1):N.replace(F,"$1");return O===""?void 0:O}}),a({global:!0,forced:!0},{Symbol:E})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),c=o("f772"),h=o("e177"),d=c("IE_PROTO"),p=Object.prototype;i.exports=h?Object.getPrototypeOf:function(y){return y=l(y),a(y,d)?y[d]:typeof y.constructor=="function"&&y instanceof y.constructor?y.constructor.prototype:y instanceof Object?p:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),c=o("3f8c"),h=o("69f3"),d=o("7dd0"),p="Array Iterator",y=h.set,w=h.getterFor(p);i.exports=d(Array,"Array",function(S,E){y(this,{type:p,target:a(S),index:0,kind:E})},function(){var S=w(this),E=S.target,C=S.kind,L=S.index++;return!E||L>=E.length?(S.target=void 0,{value:void 0,done:!0}):C=="keys"?{value:L,done:!1}:C=="values"?{value:E[L],done:!1}:{value:[L,E[L]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("fc6a"),h=o("06cf").f,d=o("83ab"),p=l(function(){h(1)}),y=!d||p;a({target:"Object",stat:!0,forced:y,sham:!d},{getOwnPropertyDescriptor:function(S,E){return h(c(S),E)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),c=o("06cf"),h=o("9bf2");i.exports=function(d,p){for(var y=l(p),w=h.f,S=c.f,E=0;E<y.length;E++){var C=y[E];a(d,C)||w(d,C,S(p,C))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(c){return a(c)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),c=a("iterator"),h=Array.prototype;i.exports=function(d){return d!==void 0&&(l.Array===d||h[c]===d)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),c=o("b622"),h=c("toStringTag"),d=l(function(){return arguments}())=="Arguments",p=function(y,w){try{return y[w]}catch{}};i.exports=a?l:function(y){var w,S,E;return y===void 0?"Undefined":y===null?"Null":typeof(S=p(w=Object(y),h))=="string"?S:d?l(w):(E=l(w))=="Object"&&typeof w.callee=="function"?"Arguments":E}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),c=a("keys");i.exports=function(h){return c[h]||(c[h]=l(h))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(o.p=c[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function h(de,ge,Se){return ge in de?Object.defineProperty(de,ge,{value:Se,enumerable:!0,configurable:!0,writable:!0}):de[ge]=Se,de}function d(de,ge){var Se=Object.keys(de);if(Object.getOwnPropertySymbols){var Pe=Object.getOwnPropertySymbols(de);ge&&(Pe=Pe.filter(function(rt){return Object.getOwnPropertyDescriptor(de,rt).enumerable})),Se.push.apply(Se,Pe)}return Se}function p(de){for(var ge=1;ge<arguments.length;ge++){var Se=arguments[ge]!=null?arguments[ge]:{};ge%2?d(Object(Se),!0).forEach(function(Pe){h(de,Pe,Se[Pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(Se)):d(Object(Se)).forEach(function(Pe){Object.defineProperty(de,Pe,Object.getOwnPropertyDescriptor(Se,Pe))})}return de}function y(de){if(Array.isArray(de))return de}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function w(de,ge){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(de)))){var Se=[],Pe=!0,rt=!1,Ot=void 0;try{for(var Rt=de[Symbol.iterator](),je;!(Pe=(je=Rt.next()).done)&&(Se.push(je.value),!(ge&&Se.length===ge));Pe=!0);}catch(tn){rt=!0,Ot=tn}finally{try{!Pe&&Rt.return!=null&&Rt.return()}finally{if(rt)throw Ot}}return Se}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function S(de,ge){(ge==null||ge>de.length)&&(ge=de.length);for(var Se=0,Pe=new Array(ge);Se<ge;Se++)Pe[Se]=de[Se];return Pe}function E(de,ge){if(de){if(typeof de=="string")return S(de,ge);var Se=Object.prototype.toString.call(de).slice(8,-1);if(Se==="Object"&&de.constructor&&(Se=de.constructor.name),Se==="Map"||Se==="Set")return Array.from(de);if(Se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Se))return S(de,ge)}}function C(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L(de,ge){return y(de)||w(de,ge)||E(de,ge)||C()}function P(de){if(Array.isArray(de))return S(de)}function F(de){if(typeof Symbol<"u"&&Symbol.iterator in Object(de))return Array.from(de)}function U(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j(de){return P(de)||F(de)||E(de)||U()}var N=o("a352"),O=o.n(N);function A(de){de.parentElement!==null&&de.parentElement.removeChild(de)}function R(de,ge,Se){var Pe=Se===0?de.children[0]:de.children[Se-1].nextSibling;de.insertBefore(ge,Pe)}var k=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function V(de){var ge=Object.create(null);return function(Pe){var rt=ge[Pe];return rt||(ge[Pe]=de(Pe))}}var D=/-(\w)/g,Z=V(function(de){return de.replace(D,function(ge,Se){return Se.toUpperCase()})});o("5db7"),o("73d9");var le=["Start","Add","Remove","Update","End"],Q=["Choose","Unchoose","Sort","Filter","Clone"],re=["Move"],ae=[re,le,Q].flatMap(function(de){return de}).map(function(de){return"on".concat(de)}),Ce={manage:re,manageAndEmit:le,emit:Q};function He(de){return ae.indexOf(de)!==-1}o("caad"),o("2ca0");var Ge=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function ot(de){return Ge.includes(de)}function ut(de){return["transition-group","TransitionGroup"].includes(de)}function Mt(de){return["id","class","role","style"].includes(de)||de.startsWith("data-")||de.startsWith("aria-")||de.startsWith("on")}function _e(de){return de.reduce(function(ge,Se){var Pe=L(Se,2),rt=Pe[0],Ot=Pe[1];return ge[rt]=Ot,ge},{})}function Ne(de){var ge=de.$attrs,Se=de.componentData,Pe=Se===void 0?{}:Se,rt=_e(Object.entries(ge).filter(function(Ot){var Rt=L(Ot,2),je=Rt[0];return Rt[1],Mt(je)}));return p(p({},rt),Pe)}function oe(de){var ge=de.$attrs,Se=de.callBackBuilder,Pe=_e(Ee(ge));Object.entries(Se).forEach(function(Ot){var Rt=L(Ot,2),je=Rt[0],tn=Rt[1];Ce[je].forEach(function(kt){Pe["on".concat(kt)]=tn(kt)})});var rt="[data-draggable]".concat(Pe.draggable||"");return p(p({},Pe),{},{draggable:rt})}function Ee(de){return Object.entries(de).filter(function(ge){var Se=L(ge,2),Pe=Se[0];return Se[1],!Mt(Pe)}).map(function(ge){var Se=L(ge,2),Pe=Se[0],rt=Se[1];return[Z(Pe),rt]}).filter(function(ge){var Se=L(ge,2),Pe=Se[0];return Se[1],!He(Pe)})}o("c740");function me(de,ge){if(!(de instanceof ge))throw new TypeError("Cannot call a class as a function")}function Ie(de,ge){for(var Se=0;Se<ge.length;Se++){var Pe=ge[Se];Pe.enumerable=Pe.enumerable||!1,Pe.configurable=!0,"value"in Pe&&(Pe.writable=!0),Object.defineProperty(de,Pe.key,Pe)}}function Me(de,ge,Se){return ge&&Ie(de.prototype,ge),de}var Ye=function(ge){var Se=ge.el;return Se},X=function(ge,Se){return ge.__draggable_context=Se},ee=function(ge){return ge.__draggable_context},be=function(){function de(ge){var Se=ge.nodes,Pe=Se.header,rt=Se.default,Ot=Se.footer,Rt=ge.root,je=ge.realList;me(this,de),this.defaultNodes=rt,this.children=[].concat(j(Pe),j(rt),j(Ot)),this.externalComponent=Rt.externalComponent,this.rootTransition=Rt.transition,this.tag=Rt.tag,this.realList=je}return Me(de,[{key:"render",value:function(Se,Pe){var rt=this.tag,Ot=this.children,Rt=this._isRootComponent,je=Rt?{default:function(){return Ot}}:Ot;return Se(rt,Pe,je)}},{key:"updated",value:function(){var Se=this.defaultNodes,Pe=this.realList;Se.forEach(function(rt,Ot){X(Ye(rt),{element:Pe[Ot],index:Ot})})}},{key:"getUnderlyingVm",value:function(Se){return ee(Se)}},{key:"getVmIndexFromDomIndex",value:function(Se,Pe){var rt=this.defaultNodes,Ot=rt.length,Rt=Pe.children,je=Rt.item(Se);if(je===null)return Ot;var tn=ee(je);if(tn)return tn.index;if(Ot===0)return 0;var kt=Ye(rt[0]),At=j(Rt).findIndex(function(Oe){return Oe===kt});return Se<At?0:Ot}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),de}(),Ue=o("8bbf");function ke(de,ge){var Se=de[ge];return Se?Se():[]}function Ke(de){var ge=de.$slots,Se=de.realList,Pe=de.getKey,rt=Se||[],Ot=["header","footer"].map(function(Oe){return ke(ge,Oe)}),Rt=L(Ot,2),je=Rt[0],tn=Rt[1],kt=ge.item;if(!kt)throw new Error("draggable element must have an item slot");var At=rt.flatMap(function(Oe,zt){return kt({element:Oe,index:zt}).map(function(on){return on.key=Pe(Oe),on.props=p(p({},on.props||{}),{},{"data-draggable":!0}),on})});if(At.length!==rt.length)throw new Error("Item slot must have only one child");return{header:je,footer:tn,default:At}}function at(de){var ge=ut(de),Se=!ot(de)&&!ge;return{transition:ge,externalComponent:Se,tag:Se?Object(Ue.resolveComponent)(de):ge?Ue.TransitionGroup:de}}function Xe(de){var ge=de.$slots,Se=de.tag,Pe=de.realList,rt=de.getKey,Ot=Ke({$slots:ge,realList:Pe,getKey:rt}),Rt=at(Se);return new be({nodes:Ot,root:Rt,realList:Pe})}function Le(de,ge){var Se=this;Object(Ue.nextTick)(function(){return Se.$emit(de.toLowerCase(),ge)})}function ze(de){var ge=this;return function(Se,Pe){if(ge.realList!==null)return ge["onDrag".concat(de)](Se,Pe)}}function Et(de){var ge=this,Se=ze.call(this,de);return function(Pe,rt){Se.call(ge,Pe,rt),Le.call(ge,de,Pe)}}var lt=null,mt={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ge){return ge}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},ft=["update:modelValue","change"].concat(j([].concat(j(Ce.manageAndEmit),j(Ce.emit)).map(function(de){return de.toLowerCase()}))),Tt=Object(Ue.defineComponent)({name:"draggable",inheritAttrs:!1,props:mt,emits:ft,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ge=this.$slots,Se=this.$attrs,Pe=this.tag,rt=this.componentData,Ot=this.realList,Rt=this.getKey,je=Xe({$slots:ge,tag:Pe,realList:Ot,getKey:Rt});this.componentStructure=je;var tn=Ne({$attrs:Se,componentData:rt});return je.render(Ue.h,tn)}catch(kt){return this.error=!0,Object(Ue.h)("pre",{style:{color:"red"}},kt.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&k.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ge=this;if(!this.error){var Se=this.$attrs,Pe=this.$el,rt=this.componentStructure;rt.updated();var Ot=oe({$attrs:Se,callBackBuilder:{manageAndEmit:function(tn){return Et.call(ge,tn)},emit:function(tn){return Le.bind(ge,tn)},manage:function(tn){return ze.call(ge,tn)}}}),Rt=Pe.nodeType===1?Pe:Pe.parentElement;this._sortable=new O.a(Rt,Ot),this.targetDomElement=Rt,Rt.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ge=this.list;return ge||this.modelValue},getKey:function(){var ge=this.itemKey;return typeof ge=="function"?ge:function(Se){return Se[ge]}}},watch:{$attrs:{handler:function(ge){var Se=this._sortable;Se&&Ee(ge).forEach(function(Pe){var rt=L(Pe,2),Ot=rt[0],Rt=rt[1];Se.option(Ot,Rt)})},deep:!0}},methods:{getUnderlyingVm:function(ge){return this.componentStructure.getUnderlyingVm(ge)||null},getUnderlyingPotencialDraggableComponent:function(ge){return ge.__draggable_component__},emitChanges:function(ge){var Se=this;Object(Ue.nextTick)(function(){return Se.$emit("change",ge)})},alterList:function(ge){if(this.list){ge(this.list);return}var Se=j(this.modelValue);ge(Se),this.$emit("update:modelValue",Se)},spliceList:function(){var ge=arguments,Se=function(rt){return rt.splice.apply(rt,j(ge))};this.alterList(Se)},updatePosition:function(ge,Se){var Pe=function(Ot){return Ot.splice(Se,0,Ot.splice(ge,1)[0])};this.alterList(Pe)},getRelatedContextFromMoveEvent:function(ge){var Se=ge.to,Pe=ge.related,rt=this.getUnderlyingPotencialDraggableComponent(Se);if(!rt)return{component:rt};var Ot=rt.realList,Rt={list:Ot,component:rt};if(Se!==Pe&&Ot){var je=rt.getUnderlyingVm(Pe)||{};return p(p({},je),Rt)}return Rt},getVmIndexFromDomIndex:function(ge){return this.componentStructure.getVmIndexFromDomIndex(ge,this.targetDomElement)},onDragStart:function(ge){this.context=this.getUnderlyingVm(ge.item),ge.item._underlying_vm_=this.clone(this.context.element),lt=ge.item},onDragAdd:function(ge){var Se=ge.item._underlying_vm_;if(Se!==void 0){A(ge.item);var Pe=this.getVmIndexFromDomIndex(ge.newIndex);this.spliceList(Pe,0,Se);var rt={element:Se,newIndex:Pe};this.emitChanges({added:rt})}},onDragRemove:function(ge){if(R(this.$el,ge.item,ge.oldIndex),ge.pullMode==="clone"){A(ge.clone);return}var Se=this.context,Pe=Se.index,rt=Se.element;this.spliceList(Pe,1);var Ot={element:rt,oldIndex:Pe};this.emitChanges({removed:Ot})},onDragUpdate:function(ge){A(ge.item),R(ge.from,ge.item,ge.oldIndex);var Se=this.context.index,Pe=this.getVmIndexFromDomIndex(ge.newIndex);this.updatePosition(Se,Pe);var rt={element:this.context.element,oldIndex:Se,newIndex:Pe};this.emitChanges({moved:rt})},computeFutureIndex:function(ge,Se){if(!ge.element)return 0;var Pe=j(Se.to.children).filter(function(je){return je.style.display!=="none"}),rt=Pe.indexOf(Se.related),Ot=ge.component.getVmIndexFromDomIndex(rt),Rt=Pe.indexOf(lt)!==-1;return Rt||!Se.willInsertAfter?Ot:Ot+1},onDragMove:function(ge,Se){var Pe=this.move,rt=this.realList;if(!Pe||!rt)return!0;var Ot=this.getRelatedContextFromMoveEvent(ge),Rt=this.computeFutureIndex(Ot,ge),je=p(p({},this.context),{},{futureIndex:Rt}),tn=p(p({},ge),{},{relatedContext:Ot,draggedContext:je});return Pe(tn,Se)},onDragEnd:function(){lt=null}}}),Wt=Tt;s.default=Wt},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),c=o("e8b5"),h=o("23cb"),d=o("50c4"),p=o("fc6a"),y=o("8418"),w=o("b622"),S=o("1dde"),E=o("ae40"),C=S("slice"),L=E("slice",{ACCESSORS:!0,0:0,1:2}),P=w("species"),F=[].slice,U=Math.max;a({target:"Array",proto:!0,forced:!C||!L},{slice:function(N,O){var A=p(this),R=d(A.length),k=h(N,R),V=h(O===void 0?R:O,R),D,Z,le;if(c(A)&&(D=A.constructor,typeof D=="function"&&(D===Array||c(D.prototype))?D=void 0:l(D)&&(D=D[P],D===null&&(D=void 0)),D===Array||D===void 0))return F.call(A,k,V);for(Z=new(D===void 0?Array:D)(U(V-k,0)),le=0;k<V;k++,le++)k in A&&y(Z,le,A[k]);return Z.length=le,Z}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(c){return a(l(c))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})}(Z0)),Z0.exports}var cue=lue();const uue=Lp(cue);var hb={exports:{}},hue=hb.exports,BM;function fue(){return BM||(BM=1,function(n,e){(function(t,r){n.exports=r()})(hue,function(){var t="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var l=o.prototype;a.utc=function(S){var E={date:S,utc:!0,args:arguments};return new o(E)},l.utc=function(S){var E=a(this.toDate(),{locale:this.$L,utc:!0});return S?E.add(this.utcOffset(),t):E},l.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var c=l.parse;l.parse=function(S){S.utc&&(this.$u=!0),this.$utils().u(S.$offset)||(this.$offset=S.$offset),c.call(this,S)};var h=l.init;l.init=function(){if(this.$u){var S=this.$d;this.$y=S.getUTCFullYear(),this.$M=S.getUTCMonth(),this.$D=S.getUTCDate(),this.$W=S.getUTCDay(),this.$H=S.getUTCHours(),this.$m=S.getUTCMinutes(),this.$s=S.getUTCSeconds(),this.$ms=S.getUTCMilliseconds()}else h.call(this)};var d=l.utcOffset;l.utcOffset=function(S,E){var C=this.$utils().u;if(C(S))return this.$u?0:C(this.$offset)?d.call(this):this.$offset;if(typeof S=="string"&&(S=function(U){U===void 0&&(U="");var j=U.match(r);if(!j)return null;var N=(""+j[0]).match(i)||["-",0,0],O=N[0],A=60*+N[1]+ +N[2];return A===0?0:O==="+"?A:-A}(S),S===null))return this;var L=Math.abs(S)<=16?60*S:S,P=this;if(E)return P.$offset=L,P.$u=S===0,P;if(S!==0){var F=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(P=this.local().add(L+F,t)).$offset=L,P.$x.$localOffset=F}else P=this.utc();return P};var p=l.format;l.format=function(S){var E=S||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return p.call(this,E)},l.valueOf=function(){var S=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*S},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var y=l.toDate;l.toDate=function(S){return S==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():y.call(this)};var w=l.diff;l.diff=function(S,E,C){if(S&&this.$u===S.$u)return w.call(this,S,E,C);var L=this.local(),P=a(S).local();return w.call(L,P,E,C)}}})}(hb)),hb.exports}var due=fue();const A$=Lp(due);var fb={exports:{}},pue=fb.exports,UM;function mue(){return UM||(UM=1,function(n,e){(function(t,r){n.exports=r()})(pue,function(){var t={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,l=function(p,y,w){w===void 0&&(w={});var S=new Date(p),E=function(C,L){L===void 0&&(L={});var P=L.timeZoneName||"short",F=C+"|"+P,U=r[F];return U||(U=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:C,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:P}),r[F]=U),U}(y,w);return E.formatToParts(S)},c=function(p,y){for(var w=l(p,y),S=[],E=0;E<w.length;E+=1){var C=w[E],L=C.type,P=C.value,F=t[L];F>=0&&(S[F]=parseInt(P,10))}var U=S[3],j=U===24?0:U,N=S[0]+"-"+S[1]+"-"+S[2]+" "+j+":"+S[4]+":"+S[5]+":000",O=+p;return(o.utc(N).valueOf()-(O-=O%1e3))/6e4},h=s.prototype;h.tz=function(p,y){p===void 0&&(p=a);var w,S=this.utcOffset(),E=this.toDate(),C=E.toLocaleString("en-US",{timeZone:p}),L=Math.round((E-new Date(C))/1e3/60),P=15*-Math.round(E.getTimezoneOffset()/15)-L;if(!Number(P))w=this.utcOffset(0,y);else if(w=o(C,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(P,!0),y){var F=w.utcOffset();w=w.add(S-F,"minute")}return w.$x.$timezone=p,w},h.offsetName=function(p){var y=this.$x.$timezone||o.tz.guess(),w=l(this.valueOf(),y,{timeZoneName:p}).find(function(S){return S.type.toLowerCase()==="timezonename"});return w&&w.value};var d=h.startOf;h.startOf=function(p,y){if(!this.$x||!this.$x.$timezone)return d.call(this,p,y);var w=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return d.call(w,p,y).tz(this.$x.$timezone,!0)},o.tz=function(p,y,w){var S=w&&y,E=w||y||a,C=c(+o(),E);if(typeof p!="string")return o(p).tz(E);var L=function(j,N,O){var A=j-60*N*1e3,R=c(A,O);if(N===R)return[A,N];var k=c(A-=60*(R-N)*1e3,O);return R===k?[A,R]:[j-60*Math.min(R,k)*1e3,Math.max(R,k)]}(o.utc(p,S).valueOf(),C,E),P=L[0],F=L[1],U=o(P).utcOffset(F);return U.$x.$timezone=E,U},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(p){a=p}}})}(fb)),fb.exports}var gue=mue();const I$=Lp(gue),C$=UA("page",{state:()=>({selectedPageId:null,listeners:[]}),actions:{selectPage(n){this.selectedPageId=n,this.listeners.forEach(e=>e(n))},addListener(n){this.listeners.push(n)},removeListener(n){this.listeners=this.listeners.filter(e=>e!==n)}}}),yue=`Welcome to your smart notepad (v1.0)
Created by Zoltan (zoltan@mentalfuse.com)

Content is saved locally, nothing leaves your machine
Can be installed as a browser app (pin to home too)
To start blank, select all and delete or create page 
Enjoy


How to:
Results can be copied to the clipboard by using the copy icon next to the ghost text
Results can be pinned by using the plus sign next to the ghost text
Dark and Light modes are supported 
Typical shortcusts work.
Below are some of the examples you can type in and use

Variable declaration:
You can declare a variable using 'name:value' pairs, these can be used in calculations
Variables will auto update calculations in every line
Variables and numbers can be mixed togeter, and you can also use expressions
team:5
hours:7.5
workdays:21
days: workdays * (12-2)

team * hours
((team * hours) * workdays) * 10
capacity: (team * hours) * days

Formulas: =sum() or sum of ...
Some of the most used excel functions are available at your fingertips
Use = to bring out the formula helper (sum, avg, etc.)
=sum(1,2,4,5)
or, you can just use natural language: 
sum of 1 2 4 5 
pert of 23 44 54
median of 5 12 8

Percentage:
10% of 100
11% of 198
20% * 8
10% * 20%
vat: 18%
120 * vat
adjusted: 70%
capacity * adjusted

Date and Calendar like calculations
today
from today until tomorrow
from today until tomorrow in days
from today until 31 march 2025 in workdays
q1
from q1 to q2
milestone: from q1 to q2 in days
January 1st, 2025 to June 30th, 2025 in days
easter
second week of march
last weekend of march
week 5
week 09
week 12

Date Arithmetic
12 Jan 2025 + 1 month
tomorrow + 5 days
january 10 + 5 workdays

Event 'reminders'
Just start typing basic event type entries to get a side panel reminder
Clicking on the event in the sidebar highlights that row
Call Bob tomorrow
Meet with Telme next week
Submit proposal next Friday

You can mark events complete by using keywords: done, complete, OK, or [x]
[x] Create default page example today

Unit conversion
5km to m
30C to F

Proportions:
if 1 unit requires 2 parts than 3 units requires ??
If 10 grams requires 5 liters than 20 grams requires ??
if 2.5 x requires 10 y than 5 x requires ??
`,vue=["title"],bue={key:0,class:"text-xs",title:"Archived"},wue={class:"flex-1 overflow-hidden"},Sue={class:"block truncate font-medium"},Eue={class:"text-xs text-gray-500 dark:text-gray-400"},Tue={class:"absolute right-2 gap-1 p-1 rounded items-center"},_ue=["disabled"],xue=["disabled"],Aue=["disabled"],Iue=["disabled"],Cue={__name:"PageListItem",props:{page:{type:Object,required:!0},isSelected:{type:Boolean,default:!1},isProcessing:{type:Boolean,default:!1},isEven:{type:Boolean,default:!1},isArchived:{type:Boolean,default:!1}},emits:["select","rename","delete","archive","unarchive"],setup(n){const e=n,t=gn(()=>e.page.name.replace(/_\d{4}-\d{2}-\d{2}_\d{2}-\d{2}-\d{2}$/,"")||e.page.name),r=gn(()=>{const i=e.isArchived?e.page.archivedAt||e.page.lastModified||e.page.createdAt:e.page.lastModified||e.page.createdAt;let s="";return e.isArchived&&e.page.archivedAt&&(s=" "),i?`${s}${ar(i).format("D MMM, YYYY, h:mm A")}`:"No date"});return(i,s)=>(nt(),pt("li",{class:pi(["group relative flex items-center border-b dark:border-gray-700 last:border-b-0 transition-colors text-sm",[{"bg-blue-50 dark:bg-slate-700":n.isSelected},{"bg-gray-50/50 dark:bg-gray-900/50":!n.isSelected&&!n.isEven},{"bg-white dark:bg-custom-dark":!n.isSelected&&n.isEven},{"opacity-70 italic":n.isArchived&&!n.isSelected}]])},[Qe("span",{onClick:s[0]||(s[0]=o=>i.$emit("select",n.page.id)),class:"flex-1 p-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",title:n.page.name},[n.isArchived?(nt(),pt("span",bue,"")):Br("",!0),Qe("div",wue,[Qe("span",Sue,or(t.value),1),Qe("small",Eue,or(r.value),1)])],8,vue),Qe("div",Tue,[n.isArchived?(nt(),pt("button",{key:1,onClick:s[2]||(s[2]=Ud(o=>i.$emit("unarchive",n.page.id),["stop"])),disabled:n.isProcessing,title:"Unarchive page",class:"p-1 text-sm text-gray-500 hover:text-green-600 dark:hover:bg-gray-600 hover:bg-blue-100 dark:text-gray-400 dark:hover:text-green-400 disabled:opacity-50 disabled:cursor-not-allowed"},"  ",8,xue)):(nt(),pt("button",{key:0,onClick:s[1]||(s[1]=Ud(o=>i.$emit("archive",n.page.id),["stop"])),disabled:n.isProcessing,title:"Archive page",class:"p-1 text-sm text-gray-500 hover:text-yellow-600 dark:hover:bg-gray-600 hover:bg-blue-100 dark:hover:text-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed"},"  ",8,_ue)),Qe("button",{onClick:s[3]||(s[3]=Ud(o=>i.$emit("rename",n.page),["stop"])),disabled:n.isProcessing,title:"Rename page",class:"p-1 text-sm text-gray-500 hover:text-blue-600 dark:hover:bg-gray-600 hover:bg-blue-100 dark:text-gray-400 dark:hover:text-blue-400 disabled:opacity-50 disabled:cursor-not-allowed"},"  ",8,Aue),Qe("button",{onClick:s[4]||(s[4]=Ud(o=>i.$emit("delete",n.page.id),["stop"])),disabled:n.isProcessing,title:"Delete page",class:"p-1 text-sm text-gray-500 hover:text-red-600 dark:hover:bg-gray-600 hover:bg-blue-100 dark:text-gray-400 dark:hover:text-red-500 disabled:opacity-50 disabled:cursor-not-allowed"},"  ",8,Iue)])],2))}},$M=go(Cue,[["__scopeId","data-v-c77ecb85"]]),Oue={props:{handlePageSelect:Function},setup(n){const e=Nt(""),t=Nt([]),r=async()=>{if(!e.value.trim()){t.value=[];return}const l=await mi.pages.toArray();t.value=l.filter(c=>c.content.toLowerCase().includes(e.value.toLowerCase())).map(c=>({id:c.id,name:c.name,content:i(c.content,e.value)}))},i=(l,c)=>{const h=l.toLowerCase().indexOf(c.toLowerCase());if(h===-1)return l.slice(0,100)+"...";const d=Math.max(0,h-30),p=Math.min(l.length,h+30);return(d>0?"...":"")+l.slice(d,p)+(p<l.length?"...":"")};return{query:e,searchResults:t,searchNotes:r,highlightMatch:l=>{const c=new RegExp(`(${e.value})`,"gi");return l.replace(c,"<mark>$1</mark>")},handleSelect:l=>{n.handlePageSelect&&n.handlePageSelect(l)},clearSearch:()=>{e.value="",t.value=[]}}}},kue={class:"p-2 border-b dark:border-gray-700"},Rue={class:"flex gap-2"},Pue={key:0,class:"mt-2 space-y-2 bg-white dark:bg-gray-800 p-2 border border-gray-300 dark:border-gray-700 rounded-md shadow"},Due=["onClick"],Mue={class:"font-medium text-gray-900 dark:text-gray-100"},Nue=["innerHTML"],Lue={key:1,class:"text-sm text-gray-500 dark:text-gray-400 italic"};function Vue(n,e,t,r,i,s){return nt(),pt("div",kue,[Qe("div",Rue,[Pc(Qe("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.query=o),onInput:e[1]||(e[1]=(...o)=>r.searchNotes&&r.searchNotes(...o)),placeholder:"Search notes...",class:"flex-1 px-2 py-1 text-sm border rounded focus:outline-none focus:ring-1 focus:ring-blue-100 bg-white dark:bg-gray-800 dark:border-gray-700"},null,544),[[el,r.query]]),r.searchResults.length?(nt(),pt("button",{key:0,onClick:e[2]||(e[2]=(...o)=>r.clearSearch&&r.clearSearch(...o)),class:"px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600"},"")):Br("",!0)]),r.searchResults.length?(nt(),pt("div",Pue,[(nt(!0),pt(lr,null,Pf(r.searchResults,o=>(nt(),pt("div",{key:o.id,onClick:a=>r.handleSelect(o.id),class:"p-2 border-b last:border-b-0 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700"},[Qe("h4",Mue,or(o.name),1),Qe("p",{class:"text-sm text-gray-600 dark:text-gray-400",innerHTML:r.highlightMatch(o.content)},null,8,Nue)],8,Due))),128))])):r.query?(nt(),pt("p",Lue,"No results found")):Br("",!0)])}const Fue=go(Oue,[["render",Vue]]),Bue={class:"left-0 h-[calc(100vh-3rem)] transition-all duration-300 ease-in-out flex bg-white dark:bg-custom-dark"},Uue={key:0,class:"flex gap-2"},$ue=["disabled"],Hue=["disabled"],Wue={key:1,class:"p-1 text-sm text-gray-600 dark:text-gray-400"},zue={class:"p-2 border-b dark:border-gray-700"},jue={class:"flex gap-2 items-center"},Kue={class:"flex items-center justify-end px-2 pt-1 text-xs text-gray-500 dark:text-gray-400 gap-2"},Gue={key:0},que={key:1},Yue=["title"],Xue={key:0},Jue={key:1},Que={key:1,class:"px-2"},Zue=["onClick"],ehe={class:"font-semibold text-sm"},the={class:"text-xs px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded"},v1=300,nhe={__name:"Sidebar3",props:{selectedPageId:{type:String,default:null},isSidebarOpen:{type:Boolean,required:!0}},emits:["toggleSidebar","page-created","page-deleted","page-selected","page-renamed","pages-reordered","page-archived","page-unarchived"],setup(n,{emit:e}){ar.extend(A$),ar.extend(I$);const t={TODAY:"Today",YESTERDAY:"Yesterday",THIS_WEEK:"This Week",LAST_WEEK:"Last Week",LAST_MONTH:"Last Month",OLDER:"Older",ARCHIVE:"Archive"},r=[t.TODAY,t.YESTERDAY,t.THIS_WEEK,t.LAST_WEEK,t.LAST_MONTH,t.OLDER,t.ARCHIVE],i=n,s=e,o=ks("syncManager"),a=C$(),l=Nt(!1),c=Nt([]),h=Nt(""),d=Nt(""),p=Nt(!1),y=Nt(null),w=r.reduce((_e,Ne)=>(_e[Ne]=Ne===t.TODAY,_e),{}),S=Mp(w),E=gn(()=>d.value.trim().length>0),C=gn(()=>{if(!E.value)return[];const _e=d.value.toLowerCase();return c.value.filter(Ne=>Ne.name.toLowerCase().includes(_e))}),L=gn(()=>C.value.length),P=gn(()=>Object.values(S).some(_e=>_e===!0)),F=gn(()=>{if(E.value)return{};const _e=r.reduce((oe,Ee)=>(oe[Ee]=[],oe),{});return[...c.value].sort((oe,Ee)=>{if(oe.isArchived&&!Ee.isArchived)return 1;if(!oe.isArchived&&Ee.isArchived)return-1;const me=oe.lastModified||oe.createdAt,Ie=Ee.lastModified||Ee.createdAt;return!me&&!Ie?0:me?Ie?ar(Ie).diff(ar(me)):-1:1}).forEach(oe=>{if(oe.isArchived)_e[t.ARCHIVE].push(oe);else{const Ee=U(oe.createdAt,oe.lastModified);_e[Ee]?_e[Ee].push(oe):_e[t.OLDER].push(oe)}}),_e});gn(()=>r.filter(_e=>{var Ne;return((Ne=F.value[_e])==null?void 0:Ne.length)>0}));const U=(_e,Ne)=>{const oe=ar.utc().startOf("day"),Ee=_e||Ne;if(!Ee)return t.OLDER;const me=ar.utc(Ee).startOf("day"),Ie=oe.diff(me,"day");return Ie===0?t.TODAY:Ie===1?t.YESTERDAY:me.isSame(oe,"week")?t.THIS_WEEK:me.isSame(oe.subtract(1,"week"),"week")?t.LAST_WEEK:me.isSame(oe,"month")?t.LAST_MONTH:t.OLDER},j=async()=>{try{const _e=await Bn.getItem("sidebarGroupStates");_e&&Object.keys(_e).forEach(Ne=>{S.hasOwnProperty(Ne)&&(S[Ne]=_e[Ne])})}catch(_e){console.error("Failed to load group states:",_e)}},N=async()=>{try{await Bn.setItem("sidebarGroupStates",{...S})}catch(_e){console.error("Failed to save group states:",_e)}},O=async()=>{try{y.value=await Bn.getItem("lastSelectedPageId")}catch(_e){console.error("Failed to load last selected page ID:",_e)}},A=async _e=>{try{y.value=_e,await Bn.setItem("lastSelectedPageId",_e)}catch(Ne){console.error("Failed to save last selected page ID:",Ne)}},R=async()=>{l.value=!0;try{c.value=await mi.getPages()||[],k()}catch(_e){console.error("Failed to load pages:",_e)}finally{l.value=!1}},k=()=>{if(c.value.length===0)D();else if(c.value.length===1)Ge(c.value[0].id);else if(y.value){const _e=c.value.some(Ne=>Ne.id===y.value);Ge(_e?y.value:c.value[0].id)}else c.value.length>0&&Ge(c.value[0].id)},V=async(_e="")=>{let Ne=h.value.trim();if(!(l.value||c.value.length>=v1)){Ne||(Ne="default"),l.value=!0;try{if(c.value.some(Ye=>Ye.name.toLowerCase()===Ne.toLowerCase()))throw new Error(`Page named "${Ne}" already exists.`);const oe=await Bn.getItem("selectedTimezone")||"UTC",Ee=ar().tz(oe).format("YYYY-MM-DD_HH-mm-ss"),me=`${Ne}_${Ee}`,Ie=new Date().toISOString(),Me={id:crypto.randomUUID(),name:me,order:c.value.length,createdAt:Ie,lastModified:Ie,lastSynced:"",content:_e,isEncrypted:0,pendingSync:1,syncStatus:"scheduled"};await mi.createPage(Me),c.value.push(Me),h.value="",Ge(Me.id),s("page-created",Me)}catch(oe){console.error("Failed to create page:",oe),alert(oe.message||"Failed to create page. Please try again.")}finally{l.value=!1}}},D=async(_e=yue)=>{c.value.length>0||await V(_e)},Z=_e=>{var Ee;const Ne=_e.name.split("_")[0],oe=(Ee=prompt("Enter new name:",Ne))==null?void 0:Ee.trim();oe&&oe!==Ne&&le(_e,oe)},le=async(_e,Ne)=>{if(!(!Ne||l.value)){l.value=!0;try{if(c.value.some(Me=>Me.id!==_e.id&&Me.name.toLowerCase()===Ne.toLowerCase()))throw new Error(`A page with the name "${Ne}" already exists.`);const oe=await Bn.getItem("selectedTimezone")||"UTC",Ee=ar().tz(oe).format("YYYY-MM-DD_HH-mm-ss"),me=`${Ne}_${Ee}`;await mi.updatePage(_e.id,{name:me,lastModified:new Date().toISOString(),pendingSync:1});const Ie=c.value.findIndex(Me=>Me.id===_e.id);Ie>-1&&(c.value[Ie].name=me,c.value[Ie].lastModified=new Date().toISOString()),s("page-renamed",{id:_e.id,newName:me})}catch(oe){console.error("Failed to rename page:",oe),alert(oe.message||"Failed to rename page.")}finally{l.value=!1}}},Q=_e=>{confirm("Are you sure you want to delete this page? This action cannot be undone.")&&re(_e)},re=async _e=>{var Ne;if(!l.value){l.value=!0;try{if(await mi.deletePage(_e),await Bn.markPageForDeletion(_e),c.value=c.value.filter(oe=>oe.id!==_e),(Ne=o.value)==null||Ne.handlePageDeletion(_e).then(oe=>{oe.success?console.log("Sync Manager: Page deletion sync initiated."):console.warn("Sync Manager: Failed to initiate page deletion sync.")}),_e===i.selectedPageId){const oe=c.value[0];oe?Ge(oe.id):(s("page-selected",null),D())}s("page-deleted",_e)}catch(oe){console.error("Failed to delete page:",oe),alert("Failed to delete page. Please try again.")}finally{l.value=!1}}},ae=async _e=>{if(l.value)return;l.value=!0;const Ne=new Date().toISOString();try{const oe={isArchived:!0,archivedAt:Ne,lastModified:Ne,pendingSync:1};await mi.updatePage(_e,oe);const Ee=c.value.findIndex(me=>me.id===_e);Ee>-1&&(c.value[Ee]={...c.value[Ee],...oe}),s("page-archived",_e)}catch(oe){console.error("Failed to archive page:",oe),alert("Failed to archive page.")}finally{l.value=!1}},Ce=async _e=>{if(l.value)return;l.value=!0;const Ne=new Date().toISOString();try{const oe={isArchived:!1,archivedAt:null,lastModified:Ne,pendingSync:1};await mi.updatePage(_e,oe);const Ee=c.value.findIndex(me=>me.id===_e);Ee>-1&&(c.value[Ee]={...c.value[Ee],...oe}),s("page-unarchived",_e)}catch(oe){console.error("Failed to unarchive page:",oe),alert("Failed to unarchive page.")}finally{l.value=!1}},He=()=>{const _e=!P.value;for(const Ne in S)S[Ne]=_e;N()},Ge=_e=>{_e!==i.selectedPageId&&(A(_e),s("page-selected",_e),a.selectPage(_e))},ot=()=>{d.value=""},ut=_e=>{S.hasOwnProperty(_e)&&(S[_e]=!S[_e],N())},Mt=async({moved:_e,oldIndex:Ne,newIndex:oe})=>{};return Fs(async()=>{await j(),await O(),await R()}),(_e,Ne)=>(nt(),pt("div",Bue,[Qe("div",{class:pi(["bg-white dark:bg-custom-dark transition-all duration-300 ease-in-out w-full",[n.isSidebarOpen?"translate-x-0":"-translate-x-full"]])},[Qe("form",{onSubmit:Ne[1]||(Ne[1]=Ud(oe=>V(),["prevent"])),class:"p-2 border-b dark:border-gray-700"},[c.value.length<v1?(nt(),pt("div",Uue,[Pc(Qe("input",{"onUpdate:modelValue":Ne[0]||(Ne[0]=oe=>h.value=oe),placeholder:"New page name",disabled:l.value,class:"flex-1 px-2 py-1 text-sm border rounded focus:outline-none focus:ring-1 focus:ring-blue-100 bg-white dark:bg-gray-800 dark:border-gray-700"},null,8,$ue),[[el,h.value]]),Qe("button",{type:"submit",disabled:l.value,class:"px-3 py-1 text-sm bg-blue-50 text-gray-800 dark:bg-gray-800 dark:text-white rounded dark:hover:bg-gray-700 hover:bg-blue-100 disabled:opacity-50 disabled:cursor-not-allowed"}," + ",8,Hue)])):(nt(),pt("div",Wue," Page limit reached ("+or(v1)+"). Upgrade for more. "))],32),Qe("div",zue,[Qe("div",jue,[Pc(Qe("input",{"onUpdate:modelValue":Ne[2]||(Ne[2]=oe=>d.value=oe),type:"text",placeholder:"Search pages...",class:"flex-1 px-2 py-1 text-sm border rounded focus:outline-none focus:ring-1 focus:ring-blue-100 bg-white dark:bg-gray-800 dark:border-gray-700"},null,512),[[el,d.value]]),d.value?(nt(),pt("button",{key:0,onClick:ot,title:"Clear search",class:"px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600"},"  ")):Br("",!0)])]),c.value.length>0?(nt(),Za(Fue,{key:0,handlePageSelect:Ge})):Br("",!0),Qe("div",Kue,[E.value?(nt(),pt("span",que,or(L.value)+" matching pages",1)):(nt(),pt("span",Gue,or(c.value.length)+" pages",1)),!E.value&&c.value.length>0?(nt(),pt("button",{key:2,onClick:He,class:"p-0.5 rounded hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus:ring-1 focus:ring-blue-300 dark:focus:ring-gray-500",title:P.value?"Collapse all groups":"Expand all groups","aria-label":"Toggle all groups"},[P.value?(nt(),pt("span",Xue,Ne[4]||(Ne[4]=[Qe("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-3.5 h-3.5"},[Qe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5M15 15l5.25 5.25"})],-1)]))):(nt(),pt("span",Jue,Ne[5]||(Ne[5]=[Qe("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-3.5 h-3.5"},[Qe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m4.5 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})],-1)])))],8,Yue)):Br("",!0)]),E.value?(nt(),pt("ul",Que,[(nt(!0),pt(lr,null,Pf(C.value,(oe,Ee)=>(nt(),Za($M,{key:oe.id,page:oe,isSelected:oe.id===n.selectedPageId,isProcessing:l.value,isArchived:!!oe.isArchived,isEven:Ee%2===0,onSelect:Ge,onRename:Z,onDelete:Q,onArchive:ae,onUnarchive:Ce},null,8,["page","isSelected","isProcessing","isArchived","isEven"]))),128))])):(nt(!0),pt(lr,{key:2},Pf(F.value,(oe,Ee)=>(nt(),pt("div",{key:Ee},[oe.length>0?(nt(),pt("div",{key:0,onClick:me=>ut(Ee),class:pi(["cursor-pointer p-2 border-b dark:border-gray-700 flex justify-between items-center sticky top-0 bg-white dark:bg-custom-dark z-10 hover:bg-gray-50 dark:hover:bg-gray-800",{"bg-gray-100 dark:bg-gray-800":S[Ee]}])},[Qe("span",ehe,or(Ee),1),Qe("span",the,or(oe.length),1)],10,Zue)):Br("",!0),S[Ee]&&oe.length>0?(nt(),Za(sa(uue),{key:1,"model-value":oe,"onUpdate:modelValue":me=>F.value[Ee]=me,group:"pages",onStart:Ne[3]||(Ne[3]=me=>p.value=!0),onEnd:Mt,"item-key":"id",tag:"ul",class:"list-none p-0 m-0",disabled:!0},{item:Tc(({element:me,index:Ie})=>[hn($M,{page:me,isSelected:me.id===n.selectedPageId,isProcessing:l.value,isArchived:!!me.isArchived,isEven:Ie%2===0,onSelect:Ge,onRename:Z,onDelete:Q,onArchive:ae,onUnarchive:Ce},null,8,["page","isSelected","isProcessing","isArchived","isEven"])]),_:2},1032,["model-value","onUpdate:modelValue"])):Br("",!0)]))),128))],2)]))}};let lx=[],O$=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?O$:lx).push(t=t+n[e])})();function rhe(n){if(n<768)return!1;for(let e=0,t=lx.length;;){let r=e+t>>1;if(n<lx[r])t=r;else if(n>=O$[r])e=r+1;else return!0;if(e==t)return!1}}function HM(n){return n>=127462&&n<=127487}const WM=8205;function ihe(n,e,t=!0,r=!0){return(t?k$:she)(n,e,r)}function k$(n,e,t){if(e==n.length)return e;e&&R$(n.charCodeAt(e))&&P$(n.charCodeAt(e-1))&&e--;let r=b1(n,e);for(e+=zM(r);e<n.length;){let i=b1(n,e);if(r==WM||i==WM||t&&rhe(i))e+=zM(i),r=i;else if(HM(i)){let s=0,o=e-2;for(;o>=0&&HM(b1(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function she(n,e,t){for(;e>0;){let r=k$(n,e-2,t);if(r<e)return r;e--}return 0}function b1(n,e){let t=n.charCodeAt(e);if(!P$(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return R$(r)?(t-55296<<10)+(r-56320)+65536:t}function R$(n){return n>=56320&&n<57344}function P$(n){return n>=55296&&n<56320}function zM(n){return n<65536?1:2}class $n{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=Ip(this,e,t);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),Pl.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Ip(this,e,t);let r=[];return this.decompose(e,t,r,0),Pl.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new bg(this),s=new bg(e);for(let o=t,a=t;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new bg(this,e)}iterRange(e,t=this.length){return new D$(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new M$(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?$n.empty:e.length<=32?new Yr(e):Pl.from(Yr.split(e,[]))}}class Yr extends $n{constructor(e,t=ohe(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((t?r:a)>=e)return new ahe(i,a,r,o);i=a+1,r++}}decompose(e,t,r,i){let s=e<=0&&t>=this.length?this:new Yr(jM(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=db(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new Yr(a,o.length+s.length));else{let l=a.length>>1;r.push(new Yr(a.slice(0,l)),new Yr(a.slice(l)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof Yr))return super.replace(e,t,r);[e,t]=Ip(this,e,t);let i=db(this.text,db(r.text,jM(this.text,0,e)),t),s=this.length+r.length-(t-e);return i.length<=32?new Yr(i,s):Pl.from(Yr.split(i,[]),s)}sliceString(e,t=this.length,r=`
`){[e,t]=Ip(this,e,t);let i="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&t>s&&(i+=a.slice(Math.max(0,e-s),t-s)),s=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(t.push(new Yr(r,i)),r=[],i=-1);return i>-1&&t.push(new Yr(r,i)),t}}class Pl extends $n{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((t?l:a)>=e)return o.lineInner(e,t,r,i);i=a+1,r=l+1}}decompose(e,t,r,i){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&t>=o){let c=i&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!c?r.push(a):a.decompose(e-o,t-o,r,c)}o=l+1}}replace(e,t,r){if([e,t]=Ip(this,e,t),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&t<=a){let l=o.replace(e-s,t-s,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let h=this.children.slice();return h[i]=l,new Pl(h,this.length-(t-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=Ip(this,e,t);let i="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&t>o&&(i+=a.sliceString(e-o,t-o,r)),o=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Pl))return 0;let r=0,[i,s,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==o||s==a)return r;let l=this.children[i],c=e.children[s];if(l!=c)return r+l.scanIdentical(c,t);r+=l.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let y of e)r+=y.lines;if(r<32){let y=[];for(let w of e)w.flatten(y);return new Yr(y,t)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,h=[];function d(y){let w;if(y.lines>s&&y instanceof Pl)for(let S of y.children)d(S);else y.lines>o&&(l>o||!l)?(p(),a.push(y)):y instanceof Yr&&l&&(w=h[h.length-1])instanceof Yr&&y.lines+w.lines<=32?(l+=y.lines,c+=y.length+1,h[h.length-1]=new Yr(w.text.concat(y.text),w.length+1+y.length)):(l+y.lines>i&&p(),l+=y.lines,c+=y.length+1,h.push(y))}function p(){l!=0&&(a.push(h.length==1?h[0]:Pl.from(h,c)),c=-1,l=h.length=0)}for(let y of e)d(y);return p(),a.length==1?a[0]:new Pl(a,t)}}$n.empty=new Yr([""],0);function ohe(n){let e=-1;for(let t of n)e+=t.length+1;return e}function db(n,e,t=0,r=1e9){for(let i=0,s=0,o=!0;s<n.length&&i<=r;s++){let a=n[s],l=i+a.length;l>=t&&(l>r&&(a=a.slice(0,r-i)),i<t&&(a=a.slice(t-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function jM(n,e,t){return db(n,[""],e,t)}class bg{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Yr?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof Yr?i.text.length:i.children.length;if(o==(t>0?a:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Yr){let l=i.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Yr?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class D${constructor(e,t,r){this.value="",this.done=!1,this.cursor=new bg(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class M${constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&($n.prototype[Symbol.iterator]=function(){return this.iter()},bg.prototype[Symbol.iterator]=D$.prototype[Symbol.iterator]=M$.prototype[Symbol.iterator]=function(){return this});class ahe{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}function Ip(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function Wi(n,e,t=!0,r=!0){return ihe(n,e,t,r)}function lhe(n){return n>=56320&&n<57344}function che(n){return n>=55296&&n<56320}function oo(n,e){let t=n.charCodeAt(e);if(!che(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return lhe(r)?(t-55296<<10)+(r-56320)+65536:t}function NC(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Dl(n){return n<65536?1:2}const cx=/\r\n?|\n/;var Ps=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(Ps||(Ps={}));class Hl{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,t=!1){ux(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new Hl(e)}composeDesc(e){return this.empty?e:e.empty?this:N$(this,e)}mapDesc(e,t=!1){return e.empty?this:hx(this,e,t)}mapPos(e,t=-1,r=Ps.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return s+(e-i);s+=a}else{if(r!=Ps.Simple&&c>=e&&(r==Ps.TrackDel&&i<e&&c>e||r==Ps.TrackBefore&&i<e||r==Ps.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!a)return e==i||t<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=t&&a>=e)return i<e&&a>t?"cover":!0;i=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Hl(e)}static create(e){return new Hl(e)}}class di extends Hl{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ux(this,(t,r,i,s,o)=>e=e.replace(i,i+(r-t),o),!1),e}mapDesc(e,t=!1){return hx(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,s=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a>=0){t[i]=a,t[i+1]=o;let l=i>>1;for(;r.length<l;)r.push($n.empty);r.push(o?e.slice(s,s+o):$n.empty)}s+=o}return new di(t,r)}compose(e){return this.empty?e:e.empty?this:N$(this,e,!0)}map(e,t=!1){return e.empty?this:hx(this,e,t,!0)}iterChanges(e,t=!1){ux(this,e,t)}get desc(){return Hl.create(this.sections)}filter(e){let t=[],r=[],i=[],s=new Zg(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let h=Math.min(s.len,l-a);is(i,h,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;is(t,h,d),d>0&&Ku(r,t,s.text),s.forward(h),a+=h}let c=e[o++];for(;a<c;){if(s.done)break e;let h=Math.min(s.len,c-a);is(t,h,-1),is(i,h,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(h),a+=h}}return{changes:new di(t,r),filtered:Hl.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],s=[],o=0,a=null;function l(h=!1){if(!h&&!i.length)return;o<t&&is(i,t-o,-1);let d=new di(i,s);a=a?a.compose(d.map(a)):d,i=[],s=[],o=0}function c(h){if(Array.isArray(h))for(let d of h)c(d);else if(h instanceof di){if(h.length!=t)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${t})`);l(),a=a?a.compose(h.map(a)):h}else{let{from:d,to:p=d,insert:y}=h;if(d>p||d<0||p>t)throw new RangeError(`Invalid change range ${d} to ${p} (in doc of length ${t})`);let w=y?typeof y=="string"?$n.of(y.split(r||cx)):y:$n.empty,S=w.length;if(d==p&&S==0)return;d<o&&l(),d>o&&is(i,d-o,-1),is(i,p-d,S),Ku(s,i,w),o=p}}return c(e),l(!a),a}static empty(e){return new di(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<i;)r.push($n.empty);r[i]=$n.of(s.slice(1)),t.push(s[0],r[i].length)}}}return new di(t,r)}static createSet(e,t){return new di(e,t)}}function is(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:i>=0&&e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function Ku(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push($n.empty);n.push(t)}}function ux(n,e,t){let r=n.inserted;for(let i=0,s=0,o=0;o<n.sections.length;){let a=n.sections[o++],l=n.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,h=s,d=$n.empty;for(;c+=a,h+=l,l&&r&&(d=d.append(r[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)a=n.sections[o++],l=n.sections[o++];e(i,c,s,h,d),i=c,s=h}}}function hx(n,e,t,r=!1){let i=[],s=r?[]:null,o=new Zg(n),a=new Zg(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);is(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!t))){let c=a.len;for(is(i,a.ins,-1);c;){let h=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=h&&(is(i,0,o.ins),s&&Ku(s,i,o.text),l=o.i),o.forward(h),c-=h}a.next()}else if(o.ins>=0){let c=0,h=o.len;for(;h;)if(a.ins==-1){let d=Math.min(h,a.len);c+=d,h-=d,a.forward(d)}else if(a.ins==0&&a.len<h)h-=a.len,a.next();else break;is(i,c,l<o.i?o.ins:0),s&&l<o.i&&Ku(s,i,o.text),l=o.i,o.forward(o.len-h)}else{if(o.done&&a.done)return s?di.createSet(i,s):Hl.create(i);throw new Error("Mismatched change set lengths")}}}function N$(n,e,t=!1){let r=[],i=t?[]:null,s=new Zg(n),o=new Zg(e);for(let a=!1;;){if(s.done&&o.done)return i?di.createSet(r,i):Hl.create(r);if(s.ins==0)is(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)is(r,0,o.ins,a),i&&Ku(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=r.length;if(s.ins==-1){let h=o.ins==-1?-1:o.off?0:o.ins;is(r,l,h,a),i&&h&&Ku(i,r,o.text)}else o.ins==-1?(is(r,s.off?0:s.len,l,a),i&&Ku(i,r,s.textBit(l))):(is(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Ku(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>c),s.forward2(l),o.forward(l)}}}}class Zg{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?$n.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?$n.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class vf{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new vf(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return $e.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return $e.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return $e.range(e.anchor,e.head)}static create(e,t,r){return new vf(e,t,r)}}class $e{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:$e.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new $e([this.main],0)}addRange(e,t=!0){return $e.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,$e.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new $e(e.ranges.map(t=>vf.fromJSON(t)),e.main)}static single(e,t=e){return new $e([$e.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return $e.normalized(e.slice(),t);r=s.to}return new $e(e,t)}static cursor(e,t=0,r,i){return vf.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,t,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?vf.create(t,e,48|s):vf.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let r=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?$e.range(l,a):$e.range(a,l))}}return new $e(e,t)}}function L$(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let LC=0;class Ct{constructor(e,t,r,i,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=LC++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ct(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:VC),!!e.static,e.enables)}of(e){return new pb([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new pb(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new pb(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function VC(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class pb{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=LC++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,h=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((t=e[d.id])!==null&&t!==void 0?t:1)&1||h.push(e[d.id]);return{create(d){return d.values[o]=r(d),1},update(d,p){if(l&&p.docChanged||c&&(p.docChanged||p.selection)||fx(d,h)){let y=r(d);if(a?!KM(y,d.values[o],i):!i(y,d.values[o]))return d.values[o]=y,1}return 0},reconfigure:(d,p)=>{let y,w=p.config.address[s];if(w!=null){let S=Tw(p,w);if(this.dependencies.every(E=>E instanceof Ct?p.facet(E)===d.facet(E):E instanceof Jr?p.field(E,!1)==d.field(E,!1):!0)||(a?KM(y=r(d),S,i):i(y=r(d),S)))return d.values[o]=S,0}else y=r(d);return d.values[o]=y,1}}}}function KM(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function fx(n,e){let t=!1;for(let r of e)wg(n,r)&1&&(t=!0);return t}function uhe(n,e,t){let r=t.map(l=>n[l.id]),i=t.map(l=>l.type),s=r.filter(l=>!(l&1)),o=n[e.id]>>1;function a(l){let c=[];for(let h=0;h<r.length;h++){let d=Tw(l,r[h]);if(i[h]==2)for(let p of d)c.push(p);else c.push(d)}return e.combine(c)}return{create(l){for(let c of r)wg(l,c);return l.values[o]=a(l),1},update(l,c){if(!fx(l,s))return 0;let h=a(l);return e.compare(h,l.values[o])?0:(l.values[o]=h,1)},reconfigure(l,c){let h=fx(l,r),d=c.config.facets[e.id],p=c.facet(e);if(d&&!h&&VC(t,d))return l.values[o]=p,0;let y=a(l);return e.compare(y,p)?(l.values[o]=p,0):(l.values[o]=y,1)}}}const c0=Ct.define({static:!0});class Jr{constructor(e,t,r,i,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new Jr(LC++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(c0).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let s=r.values[t],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[t]=o,1)},reconfigure:(r,i)=>{let s=r.facet(c0),o=i.facet(c0),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(r.values[t]=a.create(r),1):i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,c0.of({field:this,create:e})]}get extension(){return this}}const hf={lowest:4,low:3,default:2,high:1,highest:0};function Cm(n){return e=>new V$(e,n)}const id={highest:Cm(hf.highest),high:Cm(hf.high),default:Cm(hf.default),low:Cm(hf.low),lowest:Cm(hf.lowest)};class V${constructor(e,t){this.inner=e,this.prec=t}}class zy{of(e){return new dx(this,e)}reconfigure(e){return zy.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class dx{constructor(e,t){this.compartment=e,this.inner=t}}class Ew{constructor(e,t,r,i,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],s=Object.create(null),o=new Map;for(let p of hhe(e,t,o))p instanceof Jr?i.push(p):(s[p.facet.id]||(s[p.facet.id]=[])).push(p);let a=Object.create(null),l=[],c=[];for(let p of i)a[p.id]=c.length<<1,c.push(y=>p.slot(y));let h=r==null?void 0:r.config.facets;for(let p in s){let y=s[p],w=y[0].facet,S=h&&h[p]||[];if(y.every(E=>E.type==0))if(a[w.id]=l.length<<1|1,VC(S,y))l.push(r.facet(w));else{let E=w.combine(y.map(C=>C.value));l.push(r&&w.compare(E,r.facet(w))?r.facet(w):E)}else{for(let E of y)E.type==0?(a[E.id]=l.length<<1|1,l.push(E.value)):(a[E.id]=c.length<<1,c.push(C=>E.dynamicSlot(C)));a[w.id]=c.length<<1,c.push(E=>uhe(E,w,y))}}let d=c.map(p=>p(a));return new Ew(e,o,d,a,l,s)}}function hhe(n,e,t){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof dx&&t.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof dx){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),s(c,a)}else if(o instanceof V$)s(o.inner,o.prec);else if(o instanceof Jr)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof pb)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,hf.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(n,hf.default),r.reduce((o,a)=>o.concat(a))}function wg(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function Tw(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const F$=Ct.define(),px=Ct.define({combine:n=>n.some(e=>e),static:!0}),B$=Ct.define({combine:n=>n.length?n[0]:void 0,static:!0}),U$=Ct.define(),$$=Ct.define(),H$=Ct.define(),W$=Ct.define({combine:n=>n.length?n[0]:!1});class Jc{constructor(e,t){this.type=e,this.value=t}static define(){return new fhe}}class fhe{of(e){return new Jc(this,e)}}class dhe{constructor(e){this.map=e}of(e){return new en(this,e)}}class en{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new en(this.type,t)}is(e){return this.type==e}static define(e={}){return new dhe(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(t);s&&r.push(s)}return r}}en.reconfigure=en.define();en.appendConfig=en.define();class bi{constructor(e,t,r,i,s,o){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&L$(r,t.newLength),s.some(a=>a.type==bi.time)||(this.annotations=s.concat(bi.time.of(Date.now())))}static create(e,t,r,i,s,o){return new bi(e,t,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(bi.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}bi.time=Jc.define();bi.userEvent=Jc.define();bi.addToHistory=Jc.define();bi.remote=Jc.define();function phe(n,e){let t=[];for(let r=0,i=0;;){let s,o;if(r<n.length&&(i==e.length||e[i]>=n[r]))s=n[r++],o=n[r++];else if(i<e.length)s=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function z$(n,e,t){var r;let i,s,o;return t?(i=e.changes,s=di.empty(e.changes.length),o=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:en.mapEffects(n.effects,i).concat(en.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function mx(n,e,t){let r=e.selection,i=tp(e.annotations);return e.userEvent&&(i=i.concat(bi.userEvent.of(e.userEvent))),{changes:e.changes instanceof di?e.changes:di.of(e.changes||[],t,n.facet(B$)),selection:r&&(r instanceof $e?r:$e.single(r.anchor,r.head)),effects:tp(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function j$(n,e,t){let r=mx(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;r=z$(r,mx(n,e[s],o?r.changes.newLength:n.doc.length),o)}let i=bi.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return ghe(t?mhe(i):i)}function mhe(n){let e=n.startState,t=!0;for(let i of e.facet(U$)){let s=i(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:phe(t,s))}if(t!==!0){let i,s;if(t===!1)s=n.changes.invertedDesc,i=di.empty(e.doc.length);else{let o=n.changes.filter(t);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=bi.create(e,i,n.selection&&n.selection.map(s),en.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet($$);for(let i=r.length-1;i>=0;i--){let s=r[i](n);s instanceof bi?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof bi?n=s[0]:n=j$(e,tp(s),!1)}return n}function ghe(n){let e=n.startState,t=e.facet(H$),r=n;for(let i=t.length-1;i>=0;i--){let s=t[i](n);s&&Object.keys(s).length&&(r=z$(r,mx(e,s,n.changes.newLength),!0))}return r==n?n:bi.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const yhe=[];function tp(n){return n==null?yhe:Array.isArray(n)?n:[n]}var Tr=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Tr||(Tr={}));const vhe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let gx;try{gx=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function bhe(n){if(gx)return gx.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||vhe.test(t)))return!0}return!1}function whe(n){return e=>{if(!/\S/.test(e))return Tr.Space;if(bhe(e))return Tr.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Tr.Word;return Tr.Other}}class Ln{constructor(e,t,r,i,s,o){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)wg(this,a<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return wg(this,r),Tw(this,r)}update(...e){return j$(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let a of e.effects)a.is(zy.reconfigure)?(t&&(i=new Map,t.compartments.forEach((l,c)=>i.set(c,l)),t=null),i.set(a.value.compartment,a.value.extension)):a.is(en.reconfigure)?(t=null,r=a.value):a.is(en.appendConfig)&&(t=null,r=tp(r).concat(a.value));let s;t?s=e.startState.values.slice():(t=Ew.resolve(r,i,this),s=new Ln(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(px)?e.newSelection:e.newSelection.asSingle();new Ln(t,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:$e.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),s=[r.range],o=tp(r.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),c=this.changes(l.changes),h=c.map(i);for(let p=0;p<a;p++)s[p]=s[p].map(h);let d=i.mapDesc(c,!0);s.push(l.range.map(d)),i=i.compose(h),o=en.mapEffects(o,h).concat(en.mapEffects(tp(l.effects),d))}return{changes:i,selection:$e.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof di?e:di.of(e,this.doc.length,this.facet(Ln.lineSeparator))}toText(e){return $n.of(e.split(this.facet(Ln.lineSeparator)||cx))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(wg(this,t),Tw(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Jr&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Ln.create({doc:e.doc,selection:$e.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=Ew.resolve(e.extensions||[],new Map),r=e.doc instanceof $n?e.doc:$n.of((e.doc||"").split(t.staticFacet(Ln.lineSeparator)||cx)),i=e.selection?e.selection instanceof $e?e.selection:$e.single(e.selection.anchor,e.selection.head):$e.single(0);return L$(i,r.length),t.staticFacet(px)||(i=i.asSingle()),new Ln(t,r,i,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Ln.tabSize)}get lineBreak(){return this.facet(Ln.lineSeparator)||`
`}get readOnly(){return this.facet(W$)}phrase(e,...t){for(let r of this.facet(Ln.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let s of this.facet(F$))for(let o of s(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return whe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=Wi(t,o,!1);if(s(t.slice(l,o))!=Tr.Word)break;o=l}for(;a<i;){let l=Wi(t,a);if(s(t.slice(a,l))!=Tr.Word)break;a=l}return o==a?null:$e.range(o+r,a+r)}}Ln.allowMultipleSelections=px;Ln.tabSize=Ct.define({combine:n=>n.length?n[0]:4});Ln.lineSeparator=B$;Ln.readOnly=W$;Ln.phrases=Ct.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});Ln.languageData=F$;Ln.changeFilter=U$;Ln.transactionFilter=$$;Ln.transactionExtender=H$;zy.reconfigure=en.define();function Yl(n,e,t={}){let r={};for(let i of n)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class zf{eq(e){return this==e}range(e,t=e){return yx.create(e,t,this)}}zf.prototype.startSide=zf.prototype.endSide=0;zf.prototype.point=!1;zf.prototype.mapMode=Ps.TrackDel;let yx=class K${constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new K$(e,t,r)}};function vx(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class FC{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,t,r,i){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],h=this.from[l]+e,d=this.to[l]+e,p,y;if(h==d){let w=t.mapPos(h,c.startSide,c.mapMode);if(w==null||(p=y=w,c.startSide!=c.endSide&&(y=t.mapPos(h,c.endSide),y<p)))continue}else if(p=t.mapPos(h,c.startSide),y=t.mapPos(d,c.endSide),p>y||p==y&&c.startSide>0&&c.endSide<=0)continue;(y-p||c.endSide-c.startSide)<0||(o<0&&(o=p),c.point&&(a=Math.max(a,y-p)),r.push(c),i.push(p-o),s.push(y-o))}return{mapped:r.length?new FC(i,s,r,a):null,pos:o}}}class Un{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new Un(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(r&&(t=t.slice().sort(vx)),this.isEmpty)return t.length?Un.of(t):this;let a=new G$(this,null,-1).goto(0),l=0,c=[],h=new va;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let d=t[l++];h.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&h.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(h.addInner(a.from,a.to,a.value)||c.push(yx.create(a.from,a.to,a.value))),a.next());return h.finishInner(this.nextLayer.isEmpty&&!c.length?Un.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),t.push(l),r.push(e.mapPos(a));else if(c===!0){let{mapped:h,pos:d}=l.map(a,e);h&&(i=Math.max(i,h.maxPoint),t.push(h),r.push(d))}}let s=this.nextLayer.map(e);return t.length==0?s:new Un(r,t,s||Un.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return ey.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return ey.from(e).goto(t)}static compare(e,t,r,i,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=t.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=GM(o,a,r),c=new Om(o,l,s),h=new Om(a,l,s);r.iterGaps((d,p,y)=>qM(c,d,h,p,y,i)),r.empty&&r.length==0&&qM(c,0,h,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=999999999);let s=e.filter(h=>!h.isEmpty&&t.indexOf(h)<0),o=t.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=GM(s,o),l=new Om(s,a,0).goto(r),c=new Om(o,a,0).goto(r);for(;;){if(l.to!=c.to||!bx(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,t,r,i,s=-1){let o=new Om(e,null,s).goto(t),a=t,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let h=o.activeForPoint(o.to),d=o.pointFrom<t?h.length+1:o.point.startSide<0?h.length:Math.min(h.length,l);i.point(a,c,o.point,h,d,o.pointRank),l=Math.min(o.openEnd(c),h.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,t=!1){let r=new va;for(let i of e instanceof yx?[e]:t?She(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return Un.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=Un.empty;i=i.nextLayer)t=new Un(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}Un.empty=new Un([],[],null,-1);function She(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(vx(e,r)>0)return n.slice().sort(vx);e=r}return n}Un.empty.nextLayer=Un.empty;class va{finishChunk(e){this.chunks.push(new FC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new va)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Un.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Un.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function GM(n,e,t){let r=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(t?t.mapPos(a):a)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class G${constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class ey{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new G$(o,t,r,s));return i.length==1?i[0]:new ey(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)w1(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)w1(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),w1(this.heap,0)}}}function w1(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class Om{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ey.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){u0(this.active,e),u0(this.activeTo,e),u0(this.activeRank,e),this.minActive=YM(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||i-this.activeTo[t])>0;)t++;h0(this.active,t,r),h0(this.activeTo,t,i),h0(this.activeRank,t,s),e&&h0(e,t,this.cursor.from),this.minActive=YM(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&u0(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function qM(n,e,t,r,i,s){n.goto(e),t.goto(r);let o=r+i,a=r,l=r-e;for(;;){let c=n.to+l-t.to,h=c||n.endSide-t.endSide,d=h<0?n.to+l:t.to,p=Math.min(d,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&bx(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(a,p,n.point,t.point):p>a&&!bx(n.active,t.active)&&s.compareRange(a,p,n.active,t.active),d>o)break;(c||n.openEnd!=t.openEnd)&&s.boundChange&&s.boundChange(d),a=d,h<=0&&n.next(),h>=0&&t.next()}}function bx(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function u0(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function h0(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function YM(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function Qp(n,e,t=n.length){let r=0;for(let i=0;i<t&&i<n.length;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Wi(n,i));return r}function wx(n,e,t,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==n.length)break;s+=n.charCodeAt(i)==9?t-s%t:1,i=Wi(n,i)}return r===!0?-1:n.length}const Sx="",XM=typeof Symbol>"u"?"__"+Sx:Symbol.for(Sx),Ex=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),JM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class yh{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let h=[],d=/^@(\w+)\b/.exec(o[0]),p=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let y in a){let w=a[y];if(/&/.test(y))s(y.split(/,\s*/).map(S=>o.map(E=>S.replace(/&/,E))).reduce((S,E)=>S.concat(E)),w,l);else if(w&&typeof w=="object"){if(!d)throw new RangeError("The value of a property ("+y+") should be a primitive value.");s(i(y),w,h,p)}else w!=null&&h.push(y.replace(/_.*/,"").replace(/[A-Z]/g,S=>"-"+S.toLowerCase())+": "+w+";")}(h.length||p)&&l.push((r&&!d&&!c?o.map(r):o).join(", ")+" {"+h.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=JM[XM]||1;return JM[XM]=e+1,Sx+e.toString(36)}static mount(e,t,r){let i=e[Ex],s=r&&r.nonce;i?s&&i.setNonce(s):i=new Ehe(e,s),i.mount(Array.isArray(t)?t:[t],e)}}let QM=new Map;class Ehe{constructor(e,t){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=QM.get(r);if(s)return e[Ex]=s;this.sheet=new i.CSSStyleSheet,QM.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Ex]=this}mount(e,t){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),r)for(let c=0;c<a.rules.length;c++)r.insertRule(a.rules[c],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var vh={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ty={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},The=typeof navigator<"u"&&/Mac/.test(navigator.platform),_he=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ui=0;Ui<10;Ui++)vh[48+Ui]=vh[96+Ui]=String(Ui);for(var Ui=1;Ui<=24;Ui++)vh[Ui+111]="F"+Ui;for(var Ui=65;Ui<=90;Ui++)vh[Ui]=String.fromCharCode(Ui+32),ty[Ui]=String.fromCharCode(Ui);for(var S1 in vh)ty.hasOwnProperty(S1)||(ty[S1]=vh[S1]);function xhe(n){var e=The&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||_he&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?ty:vh)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function ny(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Tx(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function mb(n,e){if(!e.anchorNode)return!1;try{return Tx(n,e.anchorNode)}catch{return!1}}function ry(n){return n.nodeType==3?Kf(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Sg(n,e,t,r){return t?ZM(n,e,t,r,-1)||ZM(n,e,t,r,1):!1}function jf(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function _w(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function ZM(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:ql(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=jf(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?ql(n):0}else return!1}}function ql(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function fE(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function Ahe(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function q$(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function Ihe(n,e,t,r,i,s,o,a){let l=n.ownerDocument,c=l.defaultView||window;for(let h=n,d=!1;h&&!d;)if(h.nodeType==1){let p,y=h==l.body,w=1,S=1;if(y)p=Ahe(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(d=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let L=h.getBoundingClientRect();({scaleX:w,scaleY:S}=q$(h,L)),p={left:L.left,right:L.left+h.clientWidth*w,top:L.top,bottom:L.top+h.clientHeight*S}}let E=0,C=0;if(i=="nearest")e.top<p.top?(C=-(p.top-e.top+o),t>0&&e.bottom>p.bottom+C&&(C=e.bottom-p.bottom+C+o)):e.bottom>p.bottom&&(C=e.bottom-p.bottom+o,t<0&&e.top-C<p.top&&(C=-(p.top+C-e.top+o)));else{let L=e.bottom-e.top,P=p.bottom-p.top;C=(i=="center"&&L<=P?e.top+L/2-P/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-P+o)-p.top}if(r=="nearest"?e.left<p.left?(E=-(p.left-e.left+s),t>0&&e.right>p.right+E&&(E=e.right-p.right+E+s)):e.right>p.right&&(E=e.right-p.right+s,t<0&&e.left<p.left+E&&(E=-(p.left+E-e.left+s))):E=(r=="center"?e.left+(e.right-e.left)/2-(p.right-p.left)/2:r=="start"==a?e.left-s:e.right-(p.right-p.left)+s)-p.left,E||C)if(y)c.scrollBy(E,C);else{let L=0,P=0;if(C){let F=h.scrollTop;h.scrollTop+=C/S,P=(h.scrollTop-F)*S}if(E){let F=h.scrollLeft;h.scrollLeft+=E/w,L=(h.scrollLeft-F)*w}e={left:e.left-L,top:e.top-P,right:e.right-L,bottom:e.bottom-P},L&&Math.abs(L-E)<1&&(r="nearest"),P&&Math.abs(P-C)<1&&(i="nearest")}if(y)break;h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}function Che(n){let e=n.ownerDocument,t,r;for(let i=n.parentNode;i&&!(i==e.body||t&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:r}}class Ohe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?ql(t):0),r,Math.min(e.focusOffset,r?ql(r):0))}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let Id=null;function Y$(n){if(n.setActive)return n.setActive();if(Id)return n.focus(Id);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Id==null?{get preventScroll(){return Id={preventScroll:!0},!0}}:void 0),!Id){Id=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],s=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let eN;function Kf(n,e,t=e){let r=eN||(eN=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function np(n,e,t,r){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,n.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,n.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function khe(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function X$(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function Rhe(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,ql(t));;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=ql(t))}else{if(t==n)return!0;r=jf(t),t=t.parentNode}}function J$(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Q$(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=ql(t)}else if(t.parentNode&&!_w(t))r=jf(t),t=t.parentNode;else return null}}function Z$(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!_w(t))r=jf(t)+1,t=t.parentNode;else return null}}class fs{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new fs(e.parentNode,jf(e),t)}static after(e,t){return new fs(e.parentNode,jf(e)+1,t)}}const BC=[];class tr{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=tr.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&s!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=tN(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&t&&t.node==r&&(t.written=!0);s;)s=tN(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=ql(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!tr.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=r,h=r;l<this.children.length;l++){let d=this.children[l],p=c+d.length;if(c<e&&p>t)return d.domBoundsAround(e,t,c);if(p>=e&&i==-1&&(i=l,s=c),c>t&&d.dom.parentNode==this.dom){o=l,a=h;break}h=p,c=p+d.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=BC){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new e6(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}tr.prototype.breakAfter=0;function tN(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class e6{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function t6(n,e,t,r,i,s,o,a,l){let{children:c}=n,h=c.length?c[e]:null,d=s.length?s[s.length-1]:null,p=d?d.breakAfter:o;if(!(e==r&&h&&!o&&!p&&s.length<2&&h.merge(t,i,s.length?d:null,t==0,a,l))){if(r<c.length){let y=c[r];y&&(i<y.length||y.breakAfter&&(d!=null&&d.breakAfter))?(e==r&&(y=y.split(i),i=0),!p&&d&&y.merge(0,i,d,!0,0,l)?s[s.length-1]=y:((i||y.children.length&&!y.children[0].length)&&y.merge(0,i,null,!1,0,l),s.push(y))):y!=null&&y.breakAfter&&(d?d.breakAfter=1:o=1),r++}for(h&&(h.breakAfter=o,t>0&&(!o&&s.length&&h.merge(t,h.length,s[0],!1,a,0)?h.breakAfter=s.shift().breakAfter:(t<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(t,h.length,null,!1,a,0),e++));e<r&&s.length;)if(c[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||s.length)&&n.replaceChildren(e,r,s)}}function n6(n,e,t,r,i,s){let o=n.childCursor(),{i:a,off:l}=o.findPos(t,1),{i:c,off:h}=o.findPos(e,-1),d=e-t;for(let p of r)d+=p.length;n.length+=d,t6(n,c,h,a,l,r,0,i,s)}let ao=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},_x=typeof document<"u"?document:{documentElement:{style:{}}};const xx=/Edge\/(\d+)/.exec(ao.userAgent),r6=/MSIE \d/.test(ao.userAgent),Ax=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ao.userAgent),dE=!!(r6||Ax||xx),nN=!dE&&/gecko\/(\d+)/i.test(ao.userAgent),E1=!dE&&/Chrome\/(\d+)/.exec(ao.userAgent),rN="webkitFontSmoothing"in _x.documentElement.style,i6=!dE&&/Apple Computer/.test(ao.vendor),iN=i6&&(/Mobile\/\w+/.test(ao.userAgent)||ao.maxTouchPoints>2);var St={mac:iN||/Mac/.test(ao.platform),windows:/Win/.test(ao.platform),linux:/Linux|X11/.test(ao.platform),ie:dE,ie_version:r6?_x.documentMode||6:Ax?+Ax[1]:xx?+xx[1]:0,gecko:nN,gecko_version:nN?+(/Firefox\/(\d+)/.exec(ao.userAgent)||[0,0])[1]:0,chrome:!!E1,chrome_version:E1?+E1[1]:0,ios:iN,android:/Android\b/.test(ao.userAgent),webkit:rN,safari:i6,webkit_version:rN?+(/\bAppleWebKit\/(\d+)/.exec(ao.userAgent)||[0,0])[1]:0,tabSize:_x.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Phe=256;class sl extends tr{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof sl)||this.length-(t-e)+r.length>Phe||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new sl(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new fs(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Dhe(this.dom,e,t)}}class Gc extends tr{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(X$(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,s,o){return r&&(!(r instanceof Gc&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(n6(this,e,t,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&t.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Gc(this.mark,t,o)}domAtPos(e){return s6(this,e)}coordsAt(e,t){return a6(this,e,t)}}function Dhe(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&t<0||e==r&&t>=0?St.chrome||St.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):t<0?i--:s<r&&s++;let a=Kf(n,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:t>=0)?0:a.length-1];return St.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?fE(l,o<0):l||null}class Gu extends tr{static create(e,t,r){return new Gu(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=Gu.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,i,s,o){return r&&(!(r instanceof Gu)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof Gu&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return $n.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):$n.empty}domAtPos(e){return(this.length?e==0:this.side>0)?fs.before(this.dom):fs.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return fE(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Cp extends tr{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Cp&&e.side==this.side}split(){return new Cp(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?fs.before(this.dom):fs.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return $n.empty}get isHidden(){return!0}}sl.prototype.children=Gu.prototype.children=Cp.prototype.children=BC;function s6(n,e){let t=n.dom,{children:r}=n,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new fs(t,0)}function o6(n,e,t){let r,{children:i}=n;t>0&&e instanceof Gc&&i.length&&(r=i[i.length-1])instanceof Gc&&r.mark.eq(e.mark)?o6(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function a6(n,e,t){let r=null,i=-1,s=null,o=-1;function a(c,h){for(let d=0,p=0;d<c.children.length&&p<=h;d++){let y=c.children[d],w=p+y.length;w>=h&&(y.children.length?a(y,h-p):(!s||s.isHidden&&t>0)&&(w>h||p==w&&y.getSide()>0)?(s=y,o=h-p):(p<h||p==w&&y.getSide()<0&&!y.isHidden)&&(r=y,i=h-p)),p=w}}a(n,e);let l=(t<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),t):Mhe(n)}function Mhe(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=ry(e);return t[t.length-1]||null}function Ix(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const sN=Object.create(null);function xw(n,e,t){if(n==e)return!0;n||(n=sN),e||(e=sN);let r=Object.keys(n),i=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let s of r)if(s!=t&&(i.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function Cx(n,e,t){let r=!1;if(e)for(let i in e)t&&i in t||(r=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(r=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return r}function Nhe(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class Qc{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ns=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Ns||(Ns={}));class Lt extends zf{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new jy(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new bh(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=l6(e,t);r=(s?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new bh(e,r,i,t,e.widget||null,!0)}static line(e){return new Ky(e)}static set(e,t=!1){return Un.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Lt.none=Un.empty;class jy extends Lt{constructor(e){let{start:t,end:r}=l6(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof jy&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&xw(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}jy.prototype.point=!1;class Ky extends Lt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Ky&&this.spec.class==e.spec.class&&xw(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Ky.prototype.mapMode=Ps.TrackBefore;Ky.prototype.point=!0;class bh extends Lt{constructor(e,t,r,i,s,o){super(t,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?Ps.TrackBefore:Ps.TrackAfter:Ps.TrackDel}get type(){return this.startSide!=this.endSide?Ns.WidgetRange:this.startSide<=0?Ns.WidgetBefore:Ns.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof bh&&Lhe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}bh.prototype.point=!0;function l6(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function Lhe(n,e){return n==e||!!(n&&e&&n.compare(e))}function gb(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class ri extends tr{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,s,o){if(r){if(!(r instanceof ri))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),n6(this,e,t,r?r.children.slice():[],s,o),!0}split(e){let t=new ri;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){xw(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){o6(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=Ix(t,this.attrs||{})),r&&(this.attrs=Ix({class:r},this.attrs||{}))}domAtPos(e){return s6(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(X$(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Cx(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&tr.get(i)instanceof Gc;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=tr.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!St.ios||!this.children.some(s=>s instanceof sl))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof sl)||/[^ -~]/.test(r.text))return null;let i=ry(r.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=a6(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof ri&&this.children.length==0&&e.children.length==0&&xw(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=t){if(s instanceof ri)return s;if(o>t)break}i=o+s.breakAfter}return null}}class Fc extends tr{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,s,o){return r&&(!(r instanceof Fc)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?fs.before(this.dom):fs.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new Fc(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return BC}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):$n.empty}domBoundsAround(){return null}become(e){return e instanceof Fc&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);return r||(this.widget instanceof Ox?null:fE(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class Ox extends Qc{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Eg{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Fc&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ri),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(f0(new Cp(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Fc)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(f0(new sl(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof bh){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(r instanceof bh)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Fc(r.widget||Op.block,a,r));else{let l=Gu.create(r.widget||Op.inline,a,a?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<t||r.startSide>0),h=!l.isEditable&&(e<t||s>i.length||r.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(d.append(f0(new Cp(1),i),s),s=i.length+Math.max(0,s-i.length)),d.append(f0(l,i),s),this.atCursorPos=h,this.pendingBuffer=h?e<t||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,i,s){let o=new Eg(e,t,r,s);return o.openEnd=Un.spans(i,t,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function f0(n,e){for(let t of e)n=new Gc(t,[n],n.length);return n}class Op extends Qc{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Op.inline=new Op("span");Op.block=new Op("div");var mr=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(mr||(mr={}));const Gf=mr.LTR,UC=mr.RTL;function c6(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const Vhe=c6("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Fhe=c6("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),kx=Object.create(null),Tl=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);kx[e]=t,kx[t]=-e}function u6(n){return n<=247?Vhe[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?Fhe[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const Bhe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class qu{get dir(){return this.level%2?UC:Gf}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<t:a.to>t:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function h6(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!h6(r.inner,i.inner))return!1}return!0}const er=[];function Uhe(n,e,t,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:t,l=s?256:i;for(let c=o,h=l,d=l;c<a;c++){let p=u6(n.charCodeAt(c));p==512?p=h:p==8&&d==4&&(p=16),er[c]=p==4?2:p,p&7&&(d=p),h=p}for(let c=o,h=l,d=l;c<a;c++){let p=er[c];if(p==128)c<a-1&&h==er[c+1]&&h&24?p=er[c]=h:er[c]=256;else if(p==64){let y=c+1;for(;y<a&&er[y]==64;)y++;let w=c&&h==8||y<t&&er[y]==8?d==1?1:8:256;for(let S=c;S<y;S++)er[S]=w;c=y-1}else p==8&&d==1&&(er[c]=1);h=p,p&7&&(d=p)}}}function $he(n,e,t,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let c=o?r[o-1].to:e,h=o<r.length?r[o].from:t;for(let d=c,p,y,w;d<h;d++)if(y=kx[p=n.charCodeAt(d)])if(y<0){for(let S=a-3;S>=0;S-=3)if(Tl[S+1]==-y){let E=Tl[S+2],C=E&2?i:E&4?E&1?s:i:0;C&&(er[d]=er[Tl[S]]=C),a=S;break}}else{if(Tl.length==189)break;Tl[a++]=d,Tl[a++]=p,Tl[a++]=l}else if((w=er[d])==2||w==1){let S=w==i;l=S?0:1;for(let E=a-3;E>=0;E-=3){let C=Tl[E+2];if(C&2)break;if(S)Tl[E+2]|=2;else{if(C&4)break;Tl[E+2]|=4}}}}}function Hhe(n,e,t,r){for(let i=0,s=r;i<=t.length;i++){let o=i?t[i-1].to:n,a=i<t.length?t[i].from:e;for(let l=o;l<a;){let c=er[l];if(c==256){let h=l+1;for(;;)if(h==a){if(i==t.length)break;h=t[i++].to,a=i<t.length?t[i].from:e}else if(er[h]==256)h++;else break;let d=s==1,p=(h<e?er[h]:r)==1,y=d==p?d?1:2:r;for(let w=h,S=i,E=S?t[S-1].to:n;w>l;)w==E&&(w=t[--S].from,E=S?t[S-1].to:n),er[--w]=y;l=h}else s=c,l++}}}function Rx(n,e,t,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,c=0;l<t;){let h=!0,d=!1;if(c==s.length||l<s[c].from){let S=er[l];S!=a&&(h=!1,d=S==16)}let p=!h&&a==1?[]:null,y=h?r:r+1,w=l;e:for(;;)if(c<s.length&&w==s[c].from){if(d)break e;let S=s[c];if(!h)for(let E=S.to,C=c+1;;){if(E==t)break e;if(C<s.length&&s[C].from==E)E=s[C++].to;else{if(er[E]==a)break e;break}}if(c++,p)p.push(S);else{S.from>l&&o.push(new qu(l,S.from,y));let E=S.direction==Gf!=!(y%2);Px(n,E?r+1:r,i,S.inner,S.from,S.to,o),l=S.to}w=S.to}else{if(w==t||(h?er[w]!=a:er[w]==a))break;w++}p?Rx(n,l,w,r+1,i,p,o):l<w&&o.push(new qu(l,w,y)),l=w}else for(let l=t,c=s.length;l>e;){let h=!0,d=!1;if(!c||l>s[c-1].to){let S=er[l-1];S!=a&&(h=!1,d=S==16)}let p=!h&&a==1?[]:null,y=h?r:r+1,w=l;e:for(;;)if(c&&w==s[c-1].to){if(d)break e;let S=s[--c];if(!h)for(let E=S.from,C=c;;){if(E==e)break e;if(C&&s[C-1].to==E)E=s[--C].from;else{if(er[E-1]==a)break e;break}}if(p)p.push(S);else{S.to<l&&o.push(new qu(S.to,l,y));let E=S.direction==Gf!=!(y%2);Px(n,E?r+1:r,i,S.inner,S.from,S.to,o),l=S.from}w=S.from}else{if(w==e||(h?er[w-1]!=a:er[w-1]==a))break;w--}p?Rx(n,w,l,r+1,i,p,o):w<l&&o.push(new qu(w,l,y)),l=w}}function Px(n,e,t,r,i,s,o){let a=e%2?2:1;Uhe(n,i,s,r,a),$he(n,i,s,r,a),Hhe(i,s,r,a),Rx(n,i,s,e,t,r,o)}function Whe(n,e,t){if(!n)return[new qu(0,0,e==UC?1:0)];if(e==Gf&&!t.length&&!Bhe.test(n))return f6(n.length);if(t.length)for(;n.length>er.length;)er[er.length]=256;let r=[],i=e==Gf?0:1;return Px(n,i,i,t,0,n.length,r),r}function f6(n){return[new qu(0,n,0)]}let d6="";function zhe(n,e,t,r,i){var s;let o=r.head-n.from,a=qu.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],c=l.side(i,t);if(o==c){let p=a+=i?1:-1;if(p<0||p>=e.length)return null;l=e[a=p],o=l.side(!i,t),c=l.side(i,t)}let h=Wi(n.text,o,l.forward(i,t));(h<l.from||h>l.to)&&(h=c),d6=n.text.slice(Math.min(o,h),Math.max(o,h));let d=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return d&&h==c&&d.level+(i?0:1)<l.level?$e.cursor(d.side(!i,t)+n.from,d.forward(i,t)?1:-1,d.level):$e.cursor(h+n.from,l.forward(i,t)?-1:1,l.level)}function jhe(n,e,t){for(let r=e;r<t;r++){let i=u6(n.charCodeAt(r));if(i==1)return Gf;if(i==2||i==4)return UC}return Gf}const p6=Ct.define(),m6=Ct.define(),g6=Ct.define(),y6=Ct.define(),Dx=Ct.define(),v6=Ct.define(),b6=Ct.define(),$C=Ct.define(),HC=Ct.define(),w6=Ct.define({combine:n=>n.some(e=>e)}),S6=Ct.define({combine:n=>n.some(e=>e)}),E6=Ct.define();class rp{constructor(e,t="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new rp(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new rp($e.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const d0=en.define({map:(n,e)=>n.map(e)}),T6=en.define();function ho(n,e,t){let r=n.facet(y6);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Ic=Ct.define({combine:n=>n.length?n[0]:!0});let Khe=0;const qm=Ct.define();class kr{constructor(e,t,r,i,s){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=i,this.extension=s(this)}static define(e,t){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=t||{};return new kr(Khe++,e,r,i,a=>{let l=[qm.of(a)];return o&&l.push(iy.of(c=>{let h=c.plugin(a);return h?o(h):Lt.none})),s&&l.push(s(a)),l})}static fromClass(e,t){return kr.define(r=>new e(r),t)}}class T1{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(ho(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){ho(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){ho(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const _6=Ct.define(),WC=Ct.define(),iy=Ct.define(),x6=Ct.define(),zC=Ct.define(),A6=Ct.define();function oN(n,e){let t=n.state.facet(A6);if(!t.length)return t;let r=t.map(s=>s instanceof Function?s(n):s),i=[];return Un.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,h=o-e.from,d=i;for(let p=a.length-1;p>=0;p--,l--){let y=a[p].spec.bidiIsolate,w;if(y==null&&(y=jhe(e.text,c,h)),l>0&&d.length&&(w=d[d.length-1]).to==c&&w.direction==y)w.to=h,d=w.inner;else{let S={from:c,to:h,direction:y,inner:[]};d.push(S),d=S.inner}}}}),i}const I6=Ct.define();function jC(n){let e=0,t=0,r=0,i=0;for(let s of n.state.facet(I6)){let o=s(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:r,bottom:i}}const Ym=Ct.define();class pa{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new pa(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],c=o-a,h=l?l.fromB:1e9;for(;s<t.length&&t[s]<h;){let d=t[s],p=t[s+1],y=Math.max(a,d),w=Math.min(h,p);if(y<=w&&new pa(y+c,w+c,y,w).addToSet(r),p>h)break;s+=2}if(!l)return r;new pa(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class Aw{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=di.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new pa(s,o,a,l))),this.changedRanges=i}static create(e,t,r){return new Aw(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class aN extends tr{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Lt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ri],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new pa(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:c,toA:h})=>h<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!Zhe(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?qhe(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:h}=this.hasComposition;r=new pa(c,h,e.changes.mapPos(c,-1),e.changes.mapPos(h,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(St.ie||St.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=Jhe(o,a,e.changes);return r=pa.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=St.chrome||St.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Fc&&o.widget instanceof Ox&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,t,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:h,toB:d}=a,p,y,w,S;if(r&&r.range.fromB<d&&r.range.toB>h){let F=Eg.build(this.view.state.doc,h,r.range.fromB,this.decorations,this.dynamicDecorationMap),U=Eg.build(this.view.state.doc,r.range.toB,d,this.decorations,this.dynamicDecorationMap);y=F.breakAtStart,w=F.openStart,S=U.openEnd;let j=this.compositionView(r);U.breakAtStart?j.breakAfter=1:U.content.length&&j.merge(j.length,j.length,U.content[0],!1,U.openStart,0)&&(j.breakAfter=U.content[0].breakAfter,U.content.shift()),F.content.length&&j.merge(0,0,F.content[F.content.length-1],!0,0,F.openEnd)&&F.content.pop(),p=F.content.concat(j).concat(U.content)}else({content:p,breakAtStart:y,openStart:w,openEnd:S}=Eg.build(this.view.state.doc,h,d,this.decorations,this.dynamicDecorationMap));let{i:E,off:C}=s.findPos(c,1),{i:L,off:P}=s.findPos(l,-1);t6(this,L,P,E,C,p,y,w,S)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(T6)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new sl(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new Gc(i,[t],t.length);let r=new ri;return r.append(t,0),r}fixCompositionDOM(e){let t=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=tr.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];t(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],t(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(Ic)||this.dom.tabIndex>-1)&&mb(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(St.gecko&&a.empty&&!this.hasComposition&&Ghe(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new fs(d,0),o=!0}let h=this.view.observer.selectionRange;(o||!h.focusNode||(!Sg(l.node,l.offset,h.anchorNode,h.anchorOffset)||!Sg(c.node,c.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,a))&&(this.view.observer.ignore(()=>{St.android&&St.chrome&&this.dom.contains(h.focusNode)&&Qhe(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=ny(this.view.root);if(d)if(a.empty){if(St.gecko){let p=Yhe(l.node,l.offset);if(p&&p!=3){let y=(p==1?Q$:Z$)(l.node,l.offset);y&&(l=new fs(y.node,y.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let p=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),p.setEnd(c.node,c.offset),p.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(p)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new fs(h.anchorNode,h.anchorOffset),this.impreciseHead=c.precise?null:new fs(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Sg(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=ny(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let o=ri.find(this,t.head);if(!o)return;let a=o.posAtStart;if(t.head==a||t.head==a+o.length)return;let l=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!l||!c||l.bottom>c.top)return;let h=this.domAtPos(t.head+t.assoc);r.collapse(h.node,h.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=t.from&&r.collapse(i,s)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let i=e.offset;!r&&i<t.childNodes.length;i++){let s=tr.get(t.childNodes[i]);s instanceof ri&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=tr.get(t.childNodes[i]);s instanceof ri&&(r=s.domAtPos(s.length))}return r?new fs(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=tr.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof ri)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof ri&&!(r instanceof ri&&t>=0)))r=a,i=c;else if(r&&c==e&&l==e&&a instanceof Fc&&Math.abs(t)<2){if(a.deco.startSide<0)break;o&&(r=null)}s=c}return r?r.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),i=this.children[t];if(!(i instanceof ri))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof sl))return null;let s=Wi(i.text,r);if(s==r)return null;let o=Kf(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==mr.LTR;for(let c=0,h=0;h<this.children.length;h++){let d=this.children[h],p=c+d.length;if(p>i)break;if(c>=r){let y=d.dom.getBoundingClientRect();if(t.push(y.height),o){let w=d.dom.lastChild,S=w?ry(w):[];if(S.length){let E=S[S.length-1],C=l?E.right-y.left:y.right-E.left;C>a&&(a=C,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=p)}}}c=p+d.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?mr.RTL:mr.LTR}measureTextSize(){for(let s of this.children)if(s instanceof ri){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=ry(e.firstChild)[0];t=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new e6(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(t.lineBlockAt(o).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(Lt.replace({widget:new Ox(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Lt.set(e)}updateDeco(){let e=1,t=this.view.state.facet(iy).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(x6).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,t.push(Un.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(E6))try{if(c(this.view,e.range,e))return!0}catch(h){ho(this.view.state,h,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=jC(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;Ihe(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==mr.LTR)}}function Ghe(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function C6(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=Q$(t.focusNode,t.focusOffset),i=Z$(t.focusNode,t.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=tr.get(i.node);if(!a||a instanceof sl&&a.text!=i.node.nodeValue)s=i;else if(n.docView.lastCompositionAfterCursor){let l=tr.get(r.node);!l||l instanceof sl&&l.text!=r.node.nodeValue||(s=i)}}if(n.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function qhe(n,e,t){let r=C6(n,t);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,c=new pa(l.mapPos(s),l.mapPos(o),s,o),h=[];for(let d=i.parentNode;;d=d.parentNode){let p=tr.get(d);if(p instanceof Gc)h.push({node:d,deco:p.mark});else{if(p instanceof ri||d.nodeName=="DIV"&&d.parentNode==n.contentDOM)return{range:c,text:i,marks:h,line:d};if(d!=n.contentDOM)h.push({node:d,deco:new jy({inclusive:!0,attributes:Nhe(d),tagName:d.tagName.toLowerCase()})});else return null}}}function Yhe(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let Xhe=class{constructor(){this.changes=[]}compareRange(e,t){gb(e,t,this.changes)}comparePoint(e,t){gb(e,t,this.changes)}boundChange(e){gb(e,e,this.changes)}};function Jhe(n,e,t){let r=new Xhe;return Un.compare(n,e,t,r),r.changes}function Qhe(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Zhe(n,e){let t=!1;return e&&n.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(t=!0)}),t}function efe(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),s=e-i.from;if(i.length==0)return $e.cursor(e);s==0?t=1:s==i.length&&(t=-1);let o=s,a=s;t<0?o=Wi(i.text,s,!1):a=Wi(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let c=Wi(i.text,o,!1);if(r(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=Wi(i.text,a);if(r(i.text.slice(a,c))!=l)break;a=c}return $e.range(o+i.from,a+i.from)}function tfe(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function nfe(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function _1(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function lN(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function cN(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function Mx(n,e,t){let r,i,s,o,a=!1,l,c,h,d;for(let w=n.firstChild;w;w=w.nextSibling){let S=ry(w);for(let E=0;E<S.length;E++){let C=S[E];i&&_1(i,C)&&(C=lN(cN(C,i.bottom),i.top));let L=tfe(e,C),P=nfe(t,C);if(L==0&&P==0)return w.nodeType==3?uN(w,e,t):Mx(w,e,t);if(!r||o>P||o==P&&s>L){r=w,i=C,s=L,o=P;let F=P?t<C.top?-1:1:L?e<C.left?-1:1:0;a=!F||(F>0?E<S.length-1:E>0)}L==0?t>C.bottom&&(!h||h.bottom<C.bottom)?(l=w,h=C):t<C.top&&(!d||d.top>C.top)&&(c=w,d=C):h&&_1(h,C)?h=cN(h,C.bottom):d&&_1(d,C)&&(d=lN(d,C.top))}}if(h&&h.bottom>=t?(r=l,i=h):d&&d.top<=t&&(r=c,i=d),!r)return{node:n,offset:0};let p=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return uN(r,p,t);if(a&&r.contentEditable!="false")return Mx(r,p,t);let y=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:y}}function uN(n,e,t){let r=n.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=Kf(n,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let h=l[c];if(h.top==h.bottom)continue;o||(o=e-h.left);let d=(h.top>t?h.top-t:t-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&d<s){let p=e>=(h.left+h.right)/2,y=p;if((St.chrome||St.gecko)&&Kf(n,a).getBoundingClientRect().left==h.right&&(y=!p),d<=0)return{node:n,offset:a+(y?1:0)};i=a+(y?1:0),s=d}}}return{node:n,offset:i>-1?i:o>0?n.nodeValue.length:0}}function O6(n,e,t,r=-1){var i,s;let o=n.contentDOM.getBoundingClientRect(),a=o.top+n.viewState.paddingTop,l,{docHeight:c}=n.viewState,{x:h,y:d}=e,p=d-a;if(p<0)return 0;if(p>c)return n.state.doc.length;for(let F=n.viewState.heightOracle.textHeight/2,U=!1;l=n.elementAtHeight(p),l.type!=Ns.Text;)for(;p=r>0?l.bottom+F:l.top-F,!(p>=0&&p<=c);){if(U)return t?null:0;U=!0,r=-r}d=a+p;let y=l.from;if(y<n.viewport.from)return n.viewport.from==0?0:t?null:hN(n,o,l,h,d);if(y>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:hN(n,o,l,h,d);let w=n.dom.ownerDocument,S=n.root.elementFromPoint?n.root:w,E=S.elementFromPoint(h,d);E&&!n.contentDOM.contains(E)&&(E=null),E||(h=Math.max(o.left+1,Math.min(o.right-1,h)),E=S.elementFromPoint(h,d),E&&!n.contentDOM.contains(E)&&(E=null));let C,L=-1;if(E&&((i=n.docView.nearest(E))===null||i===void 0?void 0:i.isEditable)!=!1){if(w.caretPositionFromPoint){let F=w.caretPositionFromPoint(h,d);F&&({offsetNode:C,offset:L}=F)}else if(w.caretRangeFromPoint){let F=w.caretRangeFromPoint(h,d);F&&({startContainer:C,startOffset:L}=F,(!n.contentDOM.contains(C)||St.safari&&rfe(C,L,h)||St.chrome&&ife(C,L,h))&&(C=void 0))}C&&(L=Math.min(ql(C),L))}if(!C||!n.docView.dom.contains(C)){let F=ri.find(n.docView,y);if(!F)return p>l.top+l.height/2?l.to:l.from;({node:C,offset:L}=Mx(F.dom,h,d))}let P=n.docView.nearest(C);if(!P)return null;if(P.isWidget&&((s=P.dom)===null||s===void 0?void 0:s.nodeType)==1){let F=P.dom.getBoundingClientRect();return e.y<F.top||e.y<=F.bottom&&e.x<=(F.left+F.right)/2?P.posAtStart:P.posAtEnd}else return P.localPosFromDOM(C,L)+P.posAtStart}function hN(n,e,t,r,i){let s=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,l=Math.floor((i-t.top-(n.defaultLineHeight-a)*.5)/a);s+=l*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+wx(o,s,n.state.tabSize)}function rfe(n,e,t){let r;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Kf(n,r-1,r).getBoundingClientRect().left>t}function ife(n,e,t){if(e!=0)return!1;for(let i=n;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=n.nodeType==1?n.getBoundingClientRect():Kf(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function Nx(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==Ns.Text))return r}return t}function sfe(n,e,t,r){let i=Nx(n,e.head),s=!r||i.type!=Ns.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=n.dom.getBoundingClientRect(),a=n.textDirectionAt(i.from),l=n.posAtCoords({x:t==(a==mr.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return $e.cursor(l,t?-1:1)}return $e.cursor(t?i.to:i.from,t?-1:1)}function fN(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=n.bidiSpans(i),o=n.textDirectionAt(i.from);for(let a=e,l=null;;){let c=zhe(i,s,o,a,t),h=d6;if(!c){if(i.number==(t?n.state.doc.lines:1))return a;h=`
`,i=n.state.doc.line(i.number+(t?1:-1)),s=n.bidiSpans(i),c=n.visualLineSide(i,!t)}if(l){if(!l(h))return a}else{if(!r)return c;l=r(h)}a=c}}function ofe(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return s=>{let o=r(s);return i==Tr.Space&&(i=o),i==o}}function afe(n,e,t,r){let i=e.head,s=t?1:-1;if(i==(t?n.state.doc.length:0))return $e.cursor(i,e.assoc);let o=e.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),c=n.coordsAtPos(i,e.assoc||-1),h=n.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let y=n.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,n.defaultCharacterWidth*(i-y.from))),a=(s<0?y.top:y.bottom)+h}let d=l.left+o,p=r??n.viewState.heightOracle.textHeight>>1;for(let y=0;;y+=10){let w=a+(p+y)*s,S=O6(n,{x:d,y:w},!1,s);if(w<l.top||w>l.bottom||(s<0?S<i:S>i)){let E=n.docView.coordsForChar(S),C=!E||w<E.top?-1:1;return $e.cursor(S,C,void 0,o)}}}function yb(n,e,t){for(;;){let r=0;for(let i of n)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||t||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function x1(n,e,t){let r=yb(n.state.facet(zC).map(i=>i(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:$e.cursor(r,r<t.from?1:-1)}const Xm="";class lfe{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ln.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Xm}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let a=tr.get(i),l=tr.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:_w(i))||_w(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(t))&&(s=a.index,o=a[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let t=tr.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(cfe(e,r.node,r.offset)?t:0))}}function cfe(n,e,t){for(;;){if(!e||t<ql(e))return!1;if(e==n)return!0;t=jf(e)+1,e=e.parentNode}}class dN{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class ufe{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let a=s||o?[]:dfe(e),l=new lfe(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=pfe(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!Tx(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!Tx(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),h=e.viewport;if((St.ios||St.chrome)&&e.state.selection.main.empty&&l!=c&&(h.from>0||h.to<e.state.doc.length)){let d=Math.min(l,c),p=Math.max(l,c),y=h.from-d,w=h.to-p;(y==0||y==1||d==0)&&(w==0||w==-1||p==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=$e.single(c,l)}}}function k6(n,e){let t,{newSel:r}=e,i=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,c=null;(s===8||St.android&&e.text.length<a-o)&&(l=i.to,c="end");let h=ffe(n.state.doc.sliceString(o,a,Xm),e.text,l-o,c);h&&(St.chrome&&s==13&&h.toB==h.from+2&&e.text.slice(h.from,h.toB)==Xm+Xm&&h.toB--,t={from:o+h.from,to:o+h.toA,insert:$n.of(e.text.slice(h.from,h.toB).split(Xm))})}else r&&(!n.hasFocus&&n.state.facet(Ic)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:(St.mac||St.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=$e.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:$n.of([t.insert.toString().replace("."," ")])}):t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:St.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=$e.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:$n.of([" "])}),t)return KC(n,t,r,s);if(r&&!r.main.eq(i)){let o=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),a=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function KC(n,e,t,r=-1){if(St.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(St.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&np(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&np(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&np(n.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,a=()=>o||(o=hfe(n,e,t));return n.state.facet(v6).some(l=>l(n,e.from,e.to,s,a))||n.dispatch(a()),!0}function hfe(n,e,t){let r,i=n.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",l=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(n.state.toText(a+e.insert.sliceString(0,void 0,n.state.lineBreak)+l))}else{let a=i.changes(e),l=t&&t.main.to<=a.newLength?t.main:void 0;if(i.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=n.state.sliceDoc(e.from,e.to),h,d=t&&C6(n,t.main.head);if(d){let w=e.insert.length-(e.to-e.from);h={from:d.from,to:d.to-w}}else h=n.state.doc.lineAt(s.head);let p=s.to-e.to,y=s.to-s.from;r=i.changeByRange(w=>{if(w.from==s.from&&w.to==s.to)return{changes:a,range:l||w.map(a)};let S=w.to-p,E=S-c.length;if(w.to-w.from!=y||n.state.sliceDoc(E,S)!=c||w.to>=h.from&&w.from<=h.to)return{range:w};let C=i.changes({from:E,to:S,insert:e.insert}),L=w.to-s.to;return{changes:C,range:l?$e.range(Math.max(0,l.anchor+L),Math.max(0,l.head+L)):w.map(C)}})}else r={changes:a,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,o+=".compose",n.inputState.compositionFirstChange&&(o+=".start",n.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function ffe(n,e,t,r){let i=Math.min(n.length,e.length),s=0;for(;s<i&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&n.length==e.length)return null;let o=n.length,a=e.length;for(;o>0&&a>0&&n.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));t-=o+l-s}if(o<s&&n.length<e.length){let l=t<=s&&t>=o?s-t:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=t<=s&&t>=a?s-t:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function dfe(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new dN(t,r)),(i!=t||s!=r)&&e.push(new dN(i,s))),e}function pfe(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?$e.single(t+e,r+e):null}class mfe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,St.safari&&e.contentDOM.addEventListener("input",()=>null),St.gecko&&Rfe(e.contentDOM.ownerDocument)}handleEvent(e){!Tfe(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,t);for(let i of r.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=gfe(e),r=this.handlers,i=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!t[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&P6.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),St.android&&St.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return St.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=R6.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||yfe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,np(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:St.safari&&!St.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function pN(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(i){ho(t.state,i)}}}function gfe(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let i=r.spec;if(i&&i.domEventHandlers)for(let s in i.domEventHandlers){let o=i.domEventHandlers[s];o&&t(s).handlers.push(pN(r.value,o))}if(i&&i.domEventObservers)for(let s in i.domEventObservers){let o=i.domEventObservers[s];o&&t(s).observers.push(pN(r.value,o))}}for(let r in ol)t(r).handlers.push(ol[r]);for(let r in ba)t(r).observers.push(ba[r]);return e}const R6=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],yfe="dthko",P6=[16,17,18,20,91,92,224,225],p0=6;function m0(n){return Math.max(0,n)*.7+8}function vfe(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class bfe{constructor(e,t,r,i){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=Che(e.contentDOM),this.atoms=e.state.facet(zC).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ln.allowMultipleSelections)&&wfe(e,t),this.dragging=Efe(e,t)&&N6(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&vfe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=jC(this.view);e.clientX-l.left<=i+p0?t=-m0(i-e.clientX):e.clientX+l.right>=o-p0&&(t=m0(e.clientX-o)),e.clientY-l.top<=s+p0?r=-m0(s-e.clientY):e.clientY+l.bottom>=a-p0&&(r=m0(e.clientY-a)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=yb(this.atoms,i.from,0);o!=i.from&&(s=$e.cursor(o,-1))}else{let o=yb(this.atoms,i.from,-1),a=yb(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=$e.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(t||(t=e.ranges.slice()),t[r]=s)}return t?$e.create(t,e.mainIndex):e}select(e){let{view:t}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function wfe(n,e){let t=n.state.facet(p6);return t.length?t[0](e):St.mac?e.metaKey:e.ctrlKey}function Sfe(n,e){let t=n.state.facet(m6);return t.length?t[0](e):St.mac?!e.altKey:!e.ctrlKey}function Efe(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=ny(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Tfe(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=tr.get(t))&&r.ignoreEvent(e))return!1;return!0}const ol=Object.create(null),ba=Object.create(null),D6=St.ie&&St.ie_version<15||St.ios&&St.webkit_version<604;function _fe(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),M6(n,t.value)},50)}function pE(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function M6(n,e){e=pE(n.state,$C,e);let{state:t}=n,r,i=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(Lx!=null&&t.selection.ranges.every(l=>l.empty)&&Lx==s.toString()){let l=-1;r=t.changeByRange(c=>{let h=t.doc.lineAt(c.from);if(h.from==l)return{range:c};l=h.from;let d=t.toText((o?s.line(i++).text:e)+t.lineBreak);return{changes:{from:h.from,insert:d},range:$e.cursor(c.from+d.length)}})}else o?r=t.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:$e.cursor(l.from+c.length)}}):r=t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}ba.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};ol.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);ba.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};ba.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};ol.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(g6))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=Ife(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new bfe(n,e,t,r)),r&&n.observer.ignore(()=>{Y$(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function mN(n,e,t,r){if(r==1)return $e.cursor(e,t);if(r==2)return efe(n.state,e,t);{let i=ri.find(n.docView,e),s=n.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<n.state.doc.length&&a==s.to&&a++,$e.range(o,a)}}let gN=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function xfe(n,e,t,r){let i=ri.find(n.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&gN(t,r,o))return-1;let a=i.coordsAt(s,1);return a&&gN(t,r,a)?1:o&&o.bottom>=r?-1:1}function yN(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:xfe(n,t,e.clientX,e.clientY)}}const Afe=St.ie&&St.ie_version<=11;let vN=null,bN=0,wN=0;function N6(n){if(!Afe)return n.detail;let e=vN,t=wN;return vN=n,wN=Date.now(),bN=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(bN+1)%3:1}function Ife(n,e){let t=yN(n,e),r=N6(e),i=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),i=i.map(s.changes))},get(s,o,a){let l=yN(n,s),c,h=mN(n,l.pos,l.bias,r);if(t.pos!=l.pos&&!o){let d=mN(n,t.pos,t.bias,r),p=Math.min(d.from,h.from),y=Math.max(d.to,h.to);h=p<h.from?$e.range(p,y):$e.range(y,p)}return o?i.replaceRange(i.main.extend(h.from,h.to)):a&&r==1&&i.ranges.length>1&&(c=Cfe(i,l.pos))?c:a?i.addRange(h):$e.create([h])}}}function Cfe(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return $e.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}ol.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=t.to||o<=t.from)&&(t=$e.range(s,o))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",pE(n.state,HC,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ol.dragend=n=>(n.inputState.draggedContent=null,!1);function SN(n,e,t,r){if(t=pE(n.state,$C,t),!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,o=r&&s&&Sfe(n,e)?{from:s.from,to:s.to}:null,a={from:i,insert:t},l=n.state.changes(o?[o,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}ol.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),i=0,s=()=>{++i==t.length&&SN(n,e,r.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(t[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return SN(n,e,r,!0),!0}return!1};ol.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=D6?null:e.clipboardData;return t?(M6(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(_fe(n),!1)};function Ofe(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function kfe(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),i=o.number}r=!0}return{text:pE(n,HC,e.join(n.lineBreak)),ranges:t,linewise:r}}let Lx=null;ol.copy=ol.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=kfe(n.state);if(!t&&!i)return!1;Lx=i?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=D6?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(Ofe(n,t),!1)};const L6=Jc.define();function V6(n,e){let t=[];for(let r of n.facet(b6)){let i=r(n,e);i&&t.push(i)}return t?n.update({effects:t,annotations:L6.of(!0)}):null}function F6(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=V6(n.state,e);t?n.dispatch(t):n.update([])}},10)}ba.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),F6(n)};ba.blur=n=>{n.observer.clearSelectionRange(),F6(n)};ba.compositionstart=ba.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};ba.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,St.chrome&&St.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};ba.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};ol.beforeinput=(n,e)=>{var t,r;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=n.posAtDOM(a.startContainer,a.startOffset),c=n.posAtDOM(a.endContainer,a.endOffset);return KC(n,{from:l,to:c,insert:n.state.toText(s)},null),!0}}let i;if(St.chrome&&St.android&&(i=R6.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return St.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),St.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>ba.compositionend(n,e),20),!1};const EN=new Set;function Rfe(n){EN.has(n)||(EN.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const TN=["pre-wrap","normal","pre-line","break-spaces"];let kp=!1;function _N(){kp=!1}class Pfe{constructor(e){this.lineWrapping=e,this.doc=$n.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return TN.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,s,o){let a=TN.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let h=o[c];h<0?c++:this.heightSamples[Math.floor(h*10)]=!0}}return l}}class Dfe{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Ml{constructor(e,t,r,i,s){this.from=e,this.length=t,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Ns.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof bh?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ml(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var fr=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(fr||(fr={}));const vb=.001;class Ls{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>vb&&(kp=!0),this.height=e)}replace(e,t,r){return Ls.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:h,toB:d}=i[a],p=s.lineAt(l,fr.ByPosNoHeight,r.setDoc(t),0,0),y=p.to>=c?p:s.lineAt(c,fr.ByPosNoHeight,r,0,0);for(d+=y.to-c,c=y.to;a>0&&p.from<=i[a-1].toA;)l=i[a-1].fromA,h=i[a-1].fromB,a--,l<p.from&&(p=s.lineAt(l,fr.ByPosNoHeight,r,0,0));h+=p.from-l,l=p.from;let w=GC.build(r.setDoc(o),e,h,d);s=Iw(s,s.replace(l,c,w))}return s.updateHeight(r,0)}static empty(){return new Do(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,s=0;for(;;)if(t==r)if(i>s*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[t++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,r++),new Mfe(Ls.of(e.slice(0,t)),o,Ls.of(e.slice(r)))}}function Iw(n,e){return n==e?n:(n.constructor!=e.constructor&&(kp=!0),e)}Ls.prototype.size=1;class B6 extends Ls{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,i){return new Ml(i,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,t,r,i,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Do extends B6{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,i){return new Ml(i,this.length,r,this.height,this.breaks)}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof Do||i instanceof Fi&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Fi?i=new Do(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Ls.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Fi extends Ls{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,t,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let c=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),h=t.doc.lineAt(c),d=a+h.length*l,p=Math.max(r,e-d/2);return new Ml(h.from,h.length,p,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:h,length:d}=t.doc.line(s+c);return new Ml(h,d,r+a*c,a,0)}}lineAt(e,t,r,i,s){if(t==fr.ByHeight)return this.blockAt(e,r,i,s);if(t==fr.ByPosNoHeight){let{from:y,to:w}=r.doc.lineAt(e);return new Ml(y,w-y,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),c=r.doc.lineAt(e),h=a+c.length*l,d=c.number-o,p=i+a*d+l*(c.from-s-d);return new Ml(c.from,c.length,Math.max(i,Math.min(p,i+this.height-h)),h,0)}forEachLine(e,t,r,i,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(r,s);for(let h=e,d=i;h<=t;){let p=r.doc.lineAt(h);if(h==e){let w=p.number-a;d+=l*w+c*(e-s-w)}let y=l+c*p.length;o(new Ml(p.from,p.length,d,y,0)),d+=y,h=p.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let s=r[r.length-1];s instanceof Fi?r[r.length-1]=new Fi(s.length+i):r.push(null,new Fi(i-1))}if(e>0){let s=r[0];s instanceof Fi?r[0]=new Fi(e+s.length):r.unshift(new Fi(e-1),null)}return Ls.of(r)}decomposeLeft(e,t){t.push(new Fi(e-1),null)}decomposeRight(e,t){t.push(null,new Fi(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],a=Math.max(t,i.from),l=-1;for(i.from>t&&o.push(new Fi(i.from-t-1).updateHeight(e,t));a<=s&&i.more;){let h=e.doc.lineAt(a).length;o.length&&o.push(null);let d=i.heights[i.index++];l==-1?l=d:Math.abs(d-l)>=vb&&(l=-2);let p=new Do(h,d);p.outdated=!1,o.push(p),a+=h+1}a<=s&&o.push(null,new Fi(s-a).updateHeight(e,a));let c=Ls.of(o);return(l<0||Math.abs(c.height-this.height)>=vb||Math.abs(l-this.heightMetrics(e,t).perLine)>=vb)&&(kp=!0),Iw(this,c)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Mfe extends Ls{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=t==fr.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,t,r,i,s):this.right.lineAt(e,t,r,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let h=t==fr.ByPosNoHeight?fr.ByPosNoHeight:fr.ByPos;return l?c.join(this.right.lineAt(a,h,r,o,a)):this.left.lineAt(a,h,r,i,s).join(c)}forEachLine(e,t,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,r,i,s,o),t>=l&&this.right.forEachLine(e,t,r,a,l,o);else{let c=this.lineAt(l,fr.ByPos,r,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,s,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,r,a,l,o)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&xN(s,o-1),t<this.length){let a=s.length;this.decomposeRight(t,s),xN(s,a)}return Ls.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ls.of(this.break?[e,null,t]:[e,t]):(this.left=Iw(this.left,e),this.right=Iw(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:s,right:o}=this,a=t+s.length+this.break,l=null;return i&&i.from<=t+s.length&&i.more?l=s=s.updateHeight(e,t,r,i):s.updateHeight(e,t,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function xN(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof Fi&&(r=n[e+1])instanceof Fi&&n.splice(e-1,3,new Fi(t.length+1+r.length))}const Nfe=5;class GC{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Do?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Do(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new B6(o,i,r)):(o||s||i>=Nfe)&&this.addLineDeco(i,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Do(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new Fi(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Do)return e;let t=new Do(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Do)&&!this.isCovered?this.nodes.push(new Do(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Do&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let s=new GC(r,e);return Un.spans(t,r,i,s,0),s.finish(r)}}function Lfe(n,e,t){let r=new Vfe;return Un.compare(n,e,t,r,0),r.changes}class Vfe{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&gb(e,t,this.changes,5)}}function Ffe(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,s=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let c=n.parentNode;c&&c!=r.body;)if(c.nodeType==1){let h=c,d=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&d.overflow!="visible"){let p=h.getBoundingClientRect();s=Math.max(s,p.left),o=Math.min(o,p.right),a=Math.max(a,p.top),l=Math.min(c==n.parentNode?i.innerHeight:l,p.bottom)}c=d.position=="absolute"||d.position=="fixed"?h.offsetParent:h.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function Bfe(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function Ufe(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class A1{constructor(e,t,r,i){this.from=e,this.to=t,this.size=r,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,t){return Lt.replace({widget:new $fe(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class $fe extends Qc{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class AN{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IN,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=mr.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(WC).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new Pfe(t),this.stateDeco=e.facet(iy).filter(r=>typeof r!="function"),this.heightMap=Ls.empty().applyChanges(this.stateDeco,$n.empty,this.heightOracle.setDoc(e.doc),[new pa(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Lt.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new g0(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?IN:new qC(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Jm(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(iy).filter(h=>typeof h!="function");let i=e.changedRanges,s=pa.extendWithRanges(i,Lfe(r,this.stateDeco,e?e.changes:di.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);_N(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||kp)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(S6)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?mr.RTL:mr.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,h=0;if(a.width&&a.height){let{scaleX:F,scaleY:U}=q$(t,a);(F>.005&&Math.abs(this.scaleX-F)>.005||U>.005&&Math.abs(this.scaleY-U)>.005)&&(this.scaleX=F,this.scaleY=U,c|=16,o=l=!0)}let d=(parseInt(r.paddingTop)||0)*this.scaleY,p=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=p)&&(this.paddingTop=d,this.paddingBottom=p,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let y=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=y&&(this.scrollAnchorHeight=-1,this.scrollTop=y),this.scrolledToBottom=J$(e.scrollDOM);let w=(this.printing?Ufe:Ffe)(t,this.paddingTop),S=w.top-this.pixelViewport.top,E=w.bottom-this.pixelViewport.bottom;this.pixelViewport=w;let C=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(C!=this.inView&&(this.inView=C,C&&(l=!0)),!this.inView&&!this.scrollTarget&&!Bfe(e.dom))return 0;let L=a.width;if((this.contentDOMWidth!=L||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let F=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(F)&&(o=!0),o||i.lineWrapping&&Math.abs(L-this.contentDOMWidth)>i.charWidth){let{lineHeight:U,charWidth:j,textHeight:N}=e.docView.measureTextSize();o=U>0&&i.refresh(s,U,j,N,L/j,F),o&&(e.docView.minWidth=0,c|=16)}S>0&&E>0?h=Math.max(S,E):S<0&&E<0&&(h=Math.min(S,E)),_N();for(let U of this.viewports){let j=U.from==this.viewport.from?F:e.docView.measureVisibleLineHeights(U);this.heightMap=(o?Ls.empty().applyChanges(this.stateDeco,$n.empty,this.heightOracle,[new pa(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new Dfe(U.from,j))}kp&&(c|=2)}let P=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return P&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),c|=this.updateForViewport()),(c&2||P)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new g0(i.lineAt(o-r*1e3,fr.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,fr.ByHeight,s,0,0).to);if(t){let{head:c}=t.range;if(c<l.from||c>l.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(c,fr.ByPos,s,0,0),p;t.y=="center"?p=(d.top+d.bottom)/2-h/2:t.y=="start"||t.y=="nearest"&&c<l.from?p=d.top:p=d.bottom-h,l=new g0(i.lineAt(p-1e3/2,fr.ByHeight,s,0,0).from,i.lineAt(p+h+1e3/2,fr.ByHeight,s,0,0).to)}}return l}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new g0(this.heightMap.lineAt(r,fr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,fr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,fr.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,fr.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new A1(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=mr.LTR&&!r)return[];let a=[],l=(h,d,p,y)=>{if(d-h<s)return;let w=this.state.selection.main,S=[w.from];w.empty||S.push(w.to);for(let C of S)if(C>h&&C<d){l(h,C-10,p,y),l(C+10,d,p,y);return}let E=Wfe(e,C=>C.from>=p.from&&C.to<=p.to&&Math.abs(C.from-h)<s&&Math.abs(C.to-d)<s&&!S.some(L=>C.from<L&&C.to>L));if(!E){if(d<p.to&&t&&r&&t.visibleRanges.some(P=>P.from<=d&&P.to>=d)){let P=t.moveToLineBoundary($e.cursor(d),!1,!0).head;P>h&&(d=P)}let C=this.gapSize(p,h,d,y),L=r||C<2e6?C:2e6;E=new A1(h,d,C,L)}a.push(E)},c=h=>{if(h.length<o||h.type!=Ns.Text)return;let d=Hfe(h.from,h.to,this.stateDeco);if(d.total<o)return;let p=this.scrollTarget?this.scrollTarget.range.head:null,y,w;if(r){let S=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,E,C;if(p!=null){let L=v0(d,p),P=((this.visibleBottom-this.visibleTop)/2+S)/h.height;E=L-P,C=L+P}else E=(this.visibleTop-h.top-S)/h.height,C=(this.visibleBottom-h.top+S)/h.height;y=y0(d,E),w=y0(d,C)}else{let S=d.total*this.heightOracle.charWidth,E=i*this.heightOracle.charWidth,C=0;if(S>2e6)for(let j of e)j.from>=h.from&&j.from<h.to&&j.size!=j.displaySize&&j.from*this.heightOracle.charWidth+C<this.pixelViewport.left&&(C=j.size-j.displaySize);let L=this.pixelViewport.left+C,P=this.pixelViewport.right+C,F,U;if(p!=null){let j=v0(d,p),N=((P-L)/2+E)/S;F=j-N,U=j+N}else F=(L-E)/S,U=(P+E)/S;y=y0(d,F),w=y0(d,U)}y>h.from&&l(h.from,y,h,d),w<h.to&&l(w,h.to,h,d)};for(let h of this.viewportLines)Array.isArray(h.type)?h.type.forEach(c):c(h);return a}gapSize(e,t,r,i){let s=v0(i,r)-v0(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){A1.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Lt.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];Un.spans(t,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],a=r[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Jm(this.heightMap.lineAt(e,fr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Jm(this.heightMap.lineAt(this.scaler.fromDOM(e),fr.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Jm(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class g0{constructor(e,t){this.from=e,this.to=t}}function Hfe(n,e,t){let r=[],i=n,s=0;return Un.spans(t,n,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function y0({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function v0(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function Wfe(n,e){for(let t of n)if(e(t))return t}const IN={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class qC{constructor(e,t,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let c=t.lineAt(a,fr.ByPos,e,0,0).top,h=t.lineAt(l,fr.ByPos,e,0,0).bottom;return i+=h-c,{from:a,to:l,top:c,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof qC?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function Jm(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new Ml(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(i=>Jm(i,e)):n._content)}const b0=Ct.define({combine:n=>n.join(" ")}),Vx=Ct.define({combine:n=>n.indexOf(!0)>-1}),Fx=yh.newName(),U6=yh.newName(),$6=yh.newName(),H6={"&light":"."+U6,"&dark":"."+$6};function Bx(n,e,t){return new yh(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const zfe=Bx("."+Fx,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},H6),jfe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},I1=St.ie&&St.ie_version<=11;class Kfe{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Ohe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(St.ie&&St.ie_version<=11||St.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(St.chrome&&St.chrome_version<126)&&(this.editContext=new qfe(e),e.state.facet(Ic)&&(e.contentDOM.editContext=this.editContext.editContext)),I1&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(Ic)?r.root.activeElement!=this.dom:!mb(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(St.ie&&St.ie_version<=11||St.android&&St.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Sg(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=ny(e.root);if(!t)return!1;let r=St.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Gfe(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let i=mb(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Rhe(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,jfe),I1&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),I1&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&np(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:r}=o:(t=Math.min(o.from,t),r=Math.max(o.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&mb(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new ufe(this.view,e,t,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,i=k6(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=CN(t,e.previousSibling||e.target.previousSibling,-1),i=CN(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ic)!=e.state.facet(Ic)&&(e.view.contentDOM.editContext=e.state.facet(Ic)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function CN(n,e,t){for(;e;){let r=tr.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function ON(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return Sg(o.node,o.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function Gfe(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return ON(n,i)}let t=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?ON(n,t):null}class qfe{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(r.updateRangeStart),l=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:$n.of(r.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let h=$e.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));h.main.eq(i)||e.dispatch({selection:h,userEvent:"select"});return}if((St.mac||St.android)&&c.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:$n.of([r.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let h=this.to-this.from+(c.to-c.from+c.insert.length);KC(e,c,$e.single(this.toEditorPos(r.selectionStart,h),this.toEditorPos(r.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}t.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let h=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;i.push(Lt.mark({attributes:{style:h}}).range(l,c))}}}e.dispatch({effects:T6.of(Lt.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=ny(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(r)return;let h=c.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(c)){i=this.pendingContextChange=null,t+=h,this.to+=h;return}else i=null,this.revertPending(e.state);if(s+=t,o+=t,o<=this.from)this.from+=h,this.to+=h;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=h}t+=h}),i&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class vt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||khe(e.parent)||document,this.viewState=new AN(e.state||Ln.create(e)),e.scrollTo&&e.scrollTo.is(d0)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(qm).map(i=>new T1(i));for(let i of this.plugins)i.update(this);this.observer=new Kfe(this),this.inputState=new mfe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new aN(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof bi?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,s=this.state;for(let p of e){if(p.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=p.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(p=>p.annotation(L6))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=V6(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,h=null;if(c?(this.observer.clearDelayedAndroidKey(),h=this.observer.readChange(),(h&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(h=null)):this.observer.clear(),s.facet(Ln.phrases)!=this.state.facet(Ln.phrases))return this.setState(s);i=Aw.create(this,s,e),i.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let p of e){if(d&&(d=d.map(p.changes)),p.scrollIntoView){let{main:y}=p.state.selection;d=new rp(y.empty?y:$e.cursor(y.head,y.head>y.anchor?-1:1))}for(let y of p.effects)y.is(d0)&&(d=y.value.clip(this.state))}this.viewState.update(i,d),this.bidiCache=Cw.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Ym)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(p=>p.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(b0)!=i.state.facet(b0)&&(this.viewState.mustMeasureContent=!0),(t||r||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let p of this.state.facet(Dx))try{p(i)}catch(y){ho(this.state,y,"update listener")}(l||h)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),h&&!k6(this,h)&&c.force&&np(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new AN(e),this.plugins=e.facet(qm).map(r=>new T1(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new aN(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(qm),r=e.state.facet(qm);if(t!=r){let i=[];for(let s of r){let o=t.indexOf(s);if(o<0)i.push(new T1(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){ho(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(J$(r))s=-1,o=this.viewState.heightMap.height;else{let y=this.viewState.scrollAnchorAt(i);s=y.from,o=y.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let h=c.map(y=>{try{return y.read(this)}catch(w){return ho(this.state,w),kN}}),d=Aw.create(this,this.state,[]),p=!1;d.flags|=l,t?t.flags|=l:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),p=this.docView.update(d),p&&this.docViewUpdate());for(let y=0;y<c.length;y++)if(h[y]!=kN)try{let w=c[y];w.write&&w.write(h[y],this)}catch(w){ho(this.state,w)}if(p&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let w=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(w>1||w<-1){i=i+w,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(Dx))a(t)}get themeClasses(){return Fx+" "+(this.state.facet(Vx)?$6:U6)+" "+this.state.facet(b0)}updateAttrs(){let e=RN(this,_6,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Ic)?"true":"false",class:"cm-content",style:`${St.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),RN(this,WC,t);let r=this.observer.ignore(()=>{let i=Cx(this.contentDOM,this.contentAttrs,t),s=Cx(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(vt.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Ym);let e=this.state.facet(vt.cspNonce);yh.mount(this.root,this.styleModules.concat(zfe).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return x1(this,e,fN(this,e,t,r))}moveByGroup(e,t){return x1(this,e,fN(this,e,t,r=>ofe(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[t?r.length-1:0];return $e.cursor(s.side(t,i)+e.from,s.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,r=!0){return sfe(this,e,t,r)}moveVertically(e,t,r){return x1(this,e,afe(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),O6(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[qu.find(s,e-i.from,-1,t)];return fE(r,o.dir==mr.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(w6)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Yfe)return f6(e.length);let t=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||h6(s.isolates,r=oN(this,e))))return s.order;r||(r=oN(this,e));let i=Whe(e.text,t,r);return this.bidiCache.push(new Cw(e.from,e.to,t,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||St.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Y$(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return d0.of(new rp(typeof e=="number"?$e.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return d0.of(new rp($e.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return kr.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return kr.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=yh.newName(),i=[b0.of(r),Ym.of(Bx(`.${r}`,e))];return t&&t.dark&&i.push(Vx.of(!0)),i}static baseTheme(e){return id.lowest(Ym.of(Bx("."+Fx,e,H6)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&tr.get(r)||tr.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}vt.styleModule=Ym;vt.inputHandler=v6;vt.clipboardInputFilter=$C;vt.clipboardOutputFilter=HC;vt.scrollHandler=E6;vt.focusChangeEffect=b6;vt.perLineTextDirection=w6;vt.exceptionSink=y6;vt.updateListener=Dx;vt.editable=Ic;vt.mouseSelectionStyle=g6;vt.dragMovesSelection=m6;vt.clickAddsSelectionRange=p6;vt.decorations=iy;vt.outerDecorations=x6;vt.atomicRanges=zC;vt.bidiIsolatedRanges=A6;vt.scrollMargins=I6;vt.darkTheme=Vx;vt.cspNonce=Ct.define({combine:n=>n.length?n[0]:""});vt.contentAttributes=WC;vt.editorAttributes=_6;vt.lineWrapping=vt.contentAttributes.of({class:"cm-lineWrapping"});vt.announce=en.define();const Yfe=4096,kN={};class Cw{constructor(e,t,r,i,s,o){this.from=e,this.to=t,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:mr.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!t.touchesRange(o.from,o.to)&&r.push(new Cw(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function RN(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(n):s;o&&Ix(o,t)}return t}const Xfe=St.mac?"mac":St.windows?"win":St.linux?"linux":"key";function Jfe(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<t.length-1;++l){const c=t[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function w0(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const Qfe=id.default(vt.domEventHandlers({keydown(n,e){return z6(W6(e.state),n,e,"editor")}})),YC=Ct.define({enables:Qfe}),PN=new WeakMap;function W6(n){let e=n.facet(YC),t=PN.get(e);return t||PN.set(e,t=tde(e.reduce((r,i)=>r.concat(i),[]))),t}function Zfe(n,e,t){return z6(W6(n.state),e,n,t)}let Hu=null;const ede=4e3;function tde(n,e=Xfe){let t=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,h)=>{var d,p;let y=t[o]||(t[o]=Object.create(null)),w=a.split(/ (?!$)/).map(C=>Jfe(C,e));for(let C=1;C<w.length;C++){let L=w.slice(0,C).join(" ");i(L,!0),y[L]||(y[L]={preventDefault:!0,stopPropagation:!1,run:[P=>{let F=Hu={view:P,prefix:L,scope:o};return setTimeout(()=>{Hu==F&&(Hu=null)},ede),!0}]})}let S=w.join(" ");i(S,!1);let E=y[S]||(y[S]={preventDefault:!1,stopPropagation:!1,run:((p=(d=y._any)===null||d===void 0?void 0:d.run)===null||p===void 0?void 0:p.slice())||[]});l&&E.run.push(l),c&&(E.preventDefault=!0),h&&(E.stopPropagation=!0)};for(let o of n){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let h=t[c]||(t[c]=Object.create(null));h._any||(h._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let p in h)h[p].run.push(y=>d(y,Ux))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return t}let Ux=null;function z6(n,e,t,r){Ux=e;let i=xhe(e),s=oo(i,0),o=Dl(s)==i.length&&i!=" ",a="",l=!1,c=!1,h=!1;Hu&&Hu.view==t&&Hu.scope==r&&(a=Hu.prefix+" ",P6.indexOf(e.keyCode)<0&&(c=!0,Hu=null));let d=new Set,p=E=>{if(E){for(let C of E.run)if(!d.has(C)&&(d.add(C),C(t)))return E.stopPropagation&&(h=!0),!0;E.preventDefault&&(E.stopPropagation&&(h=!0),c=!0)}return!1},y=n[r],w,S;return y&&(p(y[a+w0(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(St.windows&&e.ctrlKey&&e.altKey)&&(w=vh[e.keyCode])&&w!=i?(p(y[a+w0(w,e,!0)])||e.shiftKey&&(S=ty[e.keyCode])!=i&&S!=w&&p(y[a+w0(S,e,!1)]))&&(l=!0):o&&e.shiftKey&&p(y[a+w0(i,e,!0)])&&(l=!0),!l&&p(y._any)&&(l=!0)),c&&(l=!0),l&&h&&e.stopPropagation(),Ux=null,l}class Gy{constructor(e,t,r,i,s){this.className=e,this.left=t,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=j6(e);return[new Gy(t,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return nde(e,t,r)}}function j6(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==mr.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function DN(n,e,t,r){let i=n.coordsAtPos(e,t*2);if(!i)return r;let s=n.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=n.posAtCoords({x:s.left+1,y:o}),l=n.posAtCoords({x:s.right-1,y:o});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function nde(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),s=n.textDirection==mr.LTR,o=n.contentDOM,a=o.getBoundingClientRect(),l=j6(n),c=o.querySelector(".cm-line"),h=c&&window.getComputedStyle(c),d=a.left+(h?parseInt(h.paddingLeft)+Math.min(0,parseInt(h.textIndent)):0),p=a.right-(h?parseInt(h.paddingRight):0),y=Nx(n,r),w=Nx(n,i),S=y.type==Ns.Text?y:null,E=w.type==Ns.Text?w:null;if(S&&(n.lineWrapping||y.widgetLineBreaks)&&(S=DN(n,r,1,S)),E&&(n.lineWrapping||w.widgetLineBreaks)&&(E=DN(n,i,-1,E)),S&&E&&S.from==E.from&&S.to==E.to)return L(P(t.from,t.to,S));{let U=S?P(t.from,null,S):F(y,!1),j=E?P(null,t.to,E):F(w,!0),N=[];return(S||y).to<(E||w).from-(S&&E?1:0)||y.widgetLineBreaks>1&&U.bottom+n.defaultLineHeight/2<j.top?N.push(C(d,U.bottom,p,j.top)):U.bottom<j.top&&n.elementAtHeight((U.bottom+j.top)/2).type==Ns.Text&&(U.bottom=j.top=(U.bottom+j.top)/2),L(U).concat(N).concat(L(j))}function C(U,j,N,O){return new Gy(e,U-l.left,j-l.top,N-U,O-j)}function L({top:U,bottom:j,horizontal:N}){let O=[];for(let A=0;A<N.length;A+=2)O.push(C(N[A],U,N[A+1],j));return O}function P(U,j,N){let O=1e9,A=-1e9,R=[];function k(Z,le,Q,re,ae){let Ce=n.coordsAtPos(Z,Z==N.to?-2:2),He=n.coordsAtPos(Q,Q==N.from?2:-2);!Ce||!He||(O=Math.min(Ce.top,He.top,O),A=Math.max(Ce.bottom,He.bottom,A),ae==mr.LTR?R.push(s&&le?d:Ce.left,s&&re?p:He.right):R.push(!s&&re?d:He.left,!s&&le?p:Ce.right))}let V=U??N.from,D=j??N.to;for(let Z of n.visibleRanges)if(Z.to>V&&Z.from<D)for(let le=Math.max(Z.from,V),Q=Math.min(Z.to,D);;){let re=n.state.doc.lineAt(le);for(let ae of n.bidiSpans(re)){let Ce=ae.from+re.from,He=ae.to+re.from;if(Ce>=Q)break;He>le&&k(Math.max(Ce,le),U==null&&Ce<=V,Math.min(He,Q),j==null&&He>=D,ae.dir)}if(le=re.to+1,le>=Q)break}return R.length==0&&k(V,U==null,D,j==null,n.textDirection),{top:O,bottom:A,horizontal:R}}function F(U,j){let N=a.top+(j?U.top:U.bottom);return{top:N,bottom:N,horizontal:[]}}}function rde(n,e){return n.constructor==e.constructor&&n.eq(e)}class ide{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(bb)!=e.state.facet(bb)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(bb);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!rde(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[r].constructor&&i.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const bb=Ct.define();function K6(n){return[kr.define(e=>new ide(e,n)),bb.of(n)]}const G6=!(St.ios&&St.webkit&&St.webkit_version<534),sy=Ct.define({combine(n){return Yl(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function sde(n={}){return[sy.of(n),ode,ade,lde,S6.of(!0)]}function q6(n){return n.startState.facet(sy)!=n.state.facet(sy)}const ode=K6({above:!0,markers(n){let{state:e}=n,t=e.facet(sy),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||G6:t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:$e.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Gy.forRange(n,o,a))r.push(l)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=q6(n);return t&&MN(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){MN(e.state,n)},class:"cm-cursorLayer"});function MN(n,e){e.style.animationDuration=n.facet(sy).cursorBlinkRate+"ms"}const ade=K6({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Gy.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||q6(n)},class:"cm-selectionLayer"}),$x={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};G6&&($x[".cm-line"].caretColor=$x[".cm-content"].caretColor="transparent !important");const lde=id.highest(vt.theme($x)),Y6=en.define({map(n,e){return n==null?null:e.mapPos(n)}}),Qm=Jr.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(Y6)?r.value:t,n)}}),cde=kr.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Qm);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Qm)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(Qm),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let r=n.scrollDOM.getBoundingClientRect();return{left:t.left-r.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-r.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Qm)!=n&&this.view.dispatch({effects:Y6.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function ude(){return[Qm,cde]}function NN(n,e,t,r,i){e.lastIndex=0;for(let s=n.iterRange(t,r),o=t,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function hde(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:s}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class fde{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(a,l,c,h)=>i(h,c,c+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,c,h)=>{let d=r(a,l,c);d&&h(c,c+a[0].length,d)};else if(r)this.addMatch=(a,l,c,h)=>h(c,c+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new va,r=t.add.bind(t);for(let{from:i,to:s}of hde(e,this.maxLength))NN(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,h=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){h=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let p=[],y,w=(S,E,C)=>p.push(C.range(S,E));if(l==c)for(this.regexp.lastIndex=h-l.from;(y=this.regexp.exec(l.text))&&y.index<d-l.from;)this.addMatch(y,e,y.index+l.from,w);else NN(e.state.doc,this.regexp,h,d,(S,E)=>this.addMatch(E,e,S,w));t=t.update({filterFrom:h,filterTo:d,filter:(S,E)=>S<h||E>d,add:p})}}return t}}const Hx=/x/.unicode!=null?"gu":"g",dde=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Hx),pde={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let C1=null;function mde(){var n;if(C1==null&&typeof document<"u"&&document.body){let e=document.body.style;C1=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return C1||!1}const wb=Ct.define({combine(n){let e=Yl(n,{render:null,specialChars:dde,addSpecialChars:null});return(e.replaceTabs=!mde())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Hx)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Hx)),e}});function gde(n={}){return[wb.of(n),yde()]}let LN=null;function yde(){return LN||(LN=kr.fromClass(class{constructor(n){this.view=n,this.decorations=Lt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(wb)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new fde({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,s=oo(e[0],0);if(s==9){let o=i.lineAt(r),a=t.state.tabSize,l=Qp(o.text,a,r-o.from);return Lt.replace({widget:new Sde((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Lt.replace({widget:new wde(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(wb);n.startState.facet(wb)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const vde="";function bde(n){return n>=32?vde:n==10?"":String.fromCharCode(9216+n)}class wde extends Qc{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=bde(this.code),r=e.state.phrase("Control character")+" "+(pde[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let s=document.createElement("span");return s.textContent=t,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Sde extends Qc{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Ede(){return _de}const Tde=Lt.line({class:"cm-activeLine"}),_de=kr.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let i=n.lineBlockAt(r.head);i.from>e&&(t.push(Tde.range(i.from)),e=i.from)}return Lt.set(t)}},{decorations:n=>n.decorations}),Wx=2e3;function xde(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),s=[];if(e.off>Wx||t.off>Wx||e.col<0||t.col<0){let o=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=r;l<=i;l++){let c=n.doc.line(l);c.length<=a&&s.push($e.range(c.from+o,c.to+a))}}else{let o=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=r;l<=i;l++){let c=n.doc.line(l),h=wx(c.text,o,n.tabSize,!0);if(h<0)s.push($e.cursor(c.to));else{let d=wx(c.text,a,n.tabSize);s.push($e.range(c.from+h,c.from+d))}}}return s}function Ade(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function VN(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,s=i>Wx?-1:i==r.length?Ade(n,e.clientX):Qp(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:s,off:i}}function Ide(n,e){let t=VN(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(t.line).from),o=i.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let a=VN(n,i);if(!a)return r;let l=xde(n.state,t,a);return l.length?o?$e.create(l.concat(r.ranges)):$e.create(l):r}}:null}function Cde(n){let e=t=>t.altKey&&t.button==0;return vt.mouseSelectionStyle.of((t,r)=>e(r)?Ide(t,r):null)}const Ode={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},kde={style:"cursor: crosshair"};function Rde(n={}){let[e,t]=Ode[n.key||"Alt"],r=kr.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[r,vt.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?kde:null})]}const km="-10000px";class X6{constructor(e,t,r,i){this.facet=t,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,t){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=t?[]:null;for(let l=0;l<s.length;l++){let c=s[l],h=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let p=this.tooltips[d];p&&p.create==c.create&&(h=d)}if(h<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[h];a&&(a[l]=t[h]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return t&&(a.forEach((l,c)=>t[c]=l),t.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function Pde(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const O1=Ct.define({combine:n=>{var e,t,r;return{position:St.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||Pde}}}),FN=new WeakMap,XC=kr.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(O1);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new X6(n,JC,(t,r)=>this.createTooltip(t,r),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(O1);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),r=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=km,t.dom.style.left="0px",this.container.insertBefore(t.dom,r),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(n=r.destroy)===null||n===void 0||n.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(St.gecko)t=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==km&&s.style.left=="0px"){let o=s.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(n=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=jC(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(O1).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:r,scaleX:i,scaleY:s}=n,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:h}=c,d=n.pos[a],p=n.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(t.top,r.top)||d.top>=Math.min(t.bottom,r.bottom)||d.right<Math.max(t.left,r.left)-.1||d.left>Math.min(t.right,r.right)+.1)){h.style.top=km;continue}let y=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,w=y?7:0,S=p.right-p.left,E=(e=FN.get(c))!==null&&e!==void 0?e:p.bottom-p.top,C=c.offset||Mde,L=this.view.textDirection==mr.LTR,P=p.width>r.right-r.left?L?r.left:r.right-p.width:L?Math.max(r.left,Math.min(d.left-(y?14:0)+C.x,r.right-S)):Math.min(Math.max(r.left,d.left-S+(y?14:0)-C.x),r.right-S),F=this.above[a];!l.strictSide&&(F?d.top-E-w-C.y<r.top:d.bottom+E+w+C.y>r.bottom)&&F==r.bottom-d.bottom>d.top-r.top&&(F=this.above[a]=!F);let U=(F?d.top-r.top:r.bottom-d.bottom)-w;if(U<E&&c.resize!==!1){if(U<this.view.defaultLineHeight){h.style.top=km;continue}FN.set(c,E),h.style.height=(E=U)/s+"px"}else h.style.height&&(h.style.height="");let j=F?d.top-E-w-C.y:d.bottom+w+C.y,N=P+S;if(c.overlap!==!0)for(let O of o)O.left<N&&O.right>P&&O.top<j+E&&O.bottom>j&&(j=F?O.top-E-2-w:O.bottom+w+2);if(this.position=="absolute"?(h.style.top=(j-n.parent.top)/s+"px",BN(h,(P-n.parent.left)/i)):(h.style.top=j/s+"px",BN(h,P/i)),y){let O=d.left+(L?C.x:-C.x)-(P+14-7);y.style.left=O/i+"px"}c.overlap!==!0&&o.push({left:P,top:j,right:N,bottom:j+E}),h.classList.toggle("cm-tooltip-above",F),h.classList.toggle("cm-tooltip-below",!F),c.positioned&&c.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=km}},{eventObservers:{scroll(){this.maybeMeasure()}}});function BN(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const Dde=vt.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Mde={x:0,y:0},JC=Ct.define({enables:[XC,Dde]}),Ow=Ct.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class mE{static create(e){return new mE(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new X6(e,Ow,(t,r)=>this.createHostedView(t,r),t=>t.dom.remove())}createHostedView(e,t){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Nde=JC.compute([Ow],n=>{let e=n.facet(Ow);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var r;return(r=t.end)!==null&&r!==void 0?r:t.pos})),create:mE.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class Lde{constructor(e,t,r,i,s){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,r=e.docView.nearest(t.target);if(!r)return;let i,s=1;if(r instanceof Gu)i=r.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let a=e.coordsAtPos(i);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(h=>h.from<=i&&h.to>=i),c=l&&l.dir==mr.RTL?-1:1;s=t.x<a.left?-c:c}let o=this.source(e,i,s);if(o!=null&&o.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>ho(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(XC),t=e?e.manager.tooltips.findIndex(r=>r.create==mE.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!Vde(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,a=(r=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&r!==void 0?r:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!Fde(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=r=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const S0=4;function Vde(n,e){let{left:t,right:r,top:i,bottom:s}=n.getBoundingClientRect(),o;if(o=n.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();i=Math.min(a.top,i),s=Math.max(a.bottom,s)}return e.clientX>=t-S0&&e.clientX<=r+S0&&e.clientY>=i-S0&&e.clientY<=s+S0}function Fde(n,e,t,r,i,s){let o=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=n.posAtCoords({x:r,y:i},!1);return l>=e&&l<=t}function Bde(n,e={}){let t=en.define(),r=Jr.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of i){let l=s.changes.mapPos(a.pos,-1,Ps.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}i=o}for(let o of s.effects)o.is(t)&&(i=o.value),o.is(Ude)&&(i=[]);return i},provide:i=>Ow.from(i)});return{active:r,extension:[r,kr.define(i=>new Lde(i,n,r,t,e.hoverTime||300)),Nde]}}function J6(n,e){let t=n.plugin(XC);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}const Ude=en.define(),UN=Ct.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function oy(n,e){let t=n.plugin(Q6),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const Q6=kr.fromClass(class{constructor(n){this.input=n.state.facet(ay),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(UN);this.top=new E0(n,!0,e.topContainer),this.bottom=new E0(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(UN);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new E0(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new E0(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(ay);if(t!=this.input){let r=t.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let c=this.specs.indexOf(l),h;c<0?(h=l(n.view),a.push(h)):(h=this.panels[c],h.update&&h.update(n)),i.push(h),(h.top?s:o).push(h)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>vt.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class E0{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=$N(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=$N(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function $N(n){let e=n.nextSibling;return n.remove(),e}const ay=Ct.define({enables:Q6});class qc extends zf{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}qc.prototype.elementClass="";qc.prototype.toDOM=void 0;qc.prototype.mapMode=Ps.TrackBefore;qc.prototype.startSide=qc.prototype.endSide=-1;qc.prototype.point=!0;const Sb=Ct.define(),$de=Ct.define(),Hde={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Un.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Tg=Ct.define();function Wde(n){return[Z6(),Tg.of(Object.assign(Object.assign({},Hde),n))]}const HN=Ct.define({combine:n=>n.some(e=>e)});function Z6(n){return[zde]}const zde=kr.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(Tg).map(e=>new zN(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(HN),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(HN)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Un.iter(this.view.state.facet(Sb),this.view.viewport.from),r=[],i=this.gutters.map(s=>new jde(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Ns.Text&&o){zx(t,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==Ns.Text){zx(t,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(Tg),t=n.state.facet(Tg),r=n.docChanged||n.heightChanged||n.viewportChanged||!Un.eq(n.startState.facet(Sb),n.state.facet(Sb),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let s of t){let o=e.indexOf(s);o<0?i.push(new zN(this.view,s)):(this.gutters[o].update(n),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>vt.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==mr.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function WN(n){return Array.isArray(n)?n:[n]}function zx(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class jde{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Un.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:i}=this,s=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==i.elements.length){let a=new e5(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=t.bottom,this.i++}line(e,t,r){let i=[];zx(this.cursor,i,t.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,t,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),i=r?[r]:null;for(let s of e.state.facet($de)){let o=s(e,t.widget,t);o&&(i||(i=[])).push(o)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class zN{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=WN(t.markers(e)),t.initialSpacer&&(this.spacer=new e5(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=WN(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Un.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class e5{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),Kde(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<t.length?t[s++]:null,c=!1;if(l){let h=l.elementClass;h&&(r+=" "+h);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let h=this.markers[o++];if(h.toDOM){h.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&o++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function Kde(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const Gde=Ct.define(),qde=Ct.define(),Wd=Ct.define({combine(n){return Yl(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let s=r[i],o=t[i];r[i]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return r}})}});class k1 extends qc{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function R1(n,e){return n.state.facet(Wd).formatNumber(e,n.state)}const Yde=Tg.compute([Wd],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Gde)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new k1(R1(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let i of e.state.facet(qde)){let s=i(e,t,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Wd)!=e.state.facet(Wd),initialSpacer(e){return new k1(R1(e,jN(e.state.doc.lines)))},updateSpacer(e,t){let r=R1(t.view,jN(t.view.state.doc.lines));return r==e.number?e:new k1(r)},domEventHandlers:n.facet(Wd).domEventHandlers}));function Xde(n={}){return[Wd.of(n),Z6(),Yde]}function jN(n){let e=9;for(;e<n;)e=e*10+9;return e}const Jde=new class extends qc{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Qde=Sb.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(Jde.range(i)))}return Un.of(e)});function Zde(){return Qde}const epe=1024;let tpe=0;class P1{constructor(e,t){this.from=e,this.to=t}}class Rn{constructor(e={}){this.id=tpe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=wa.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Rn.closedBy=new Rn({deserialize:n=>n.split(" ")});Rn.openedBy=new Rn({deserialize:n=>n.split(" ")});Rn.group=new Rn({deserialize:n=>n.split(" ")});Rn.isolate=new Rn({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Rn.contextHash=new Rn({perNode:!0});Rn.lookAhead=new Rn({perNode:!0});Rn.mounted=new Rn({perNode:!0});class kw{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Rn.mounted.id]}}const npe=Object.create(null);class wa{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):npe,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new wa(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Rn.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(Rn.group),s=-1;s<(i?i.length:0);s++){let o=t[s<0?r.name:i[s]];if(o)return o}}}}wa.none=new wa("",Object.create(null),0,8);const T0=new WeakMap,KN=new WeakMap;var $i;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})($i||($i={}));class ps{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=kw.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Kx(this.topNode,e)}cursorAt(e,t=0,r=0){let i=T0.get(this)||this.topNode,s=new Kx(i);return s.moveTo(e,t),T0.set(this,s._tree),s}get topNode(){return new ma(this,0,0,null)}resolve(e,t=0){let r=ly(T0.get(this)||this.topNode,e,t,!1);return T0.set(this,r),r}resolveInner(e,t=0){let r=ly(KN.get(this)||this.topNode,e,t,!0);return KN.set(this,r),r}resolveStack(e,t=0){return spe(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&$i.IncludeAnonymous)>0;for(let l=this.cursor(o|$i.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:eO(wa.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new ps(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new ps(wa.none,t,r,i)))}static build(e){return ope(e)}}ps.empty=new ps(wa.none,[],[],0);class QC{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new QC(this.buffer,this.index)}}class wh{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return wa.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(t5(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,t,r){let i=this.buffer,s=new Uint16Array(t-e),o=0;for(let a=e,l=0;a<t;){s[l++]=i[a++],s[l++]=i[a++]-r;let c=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,c)}return new wh(s,o,this.set)}}function t5(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function ly(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!r&&n instanceof ma&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=r?0:$i.IgnoreOverlays;if(r)for(let o=n,a=o.parent;a;o=a,a=o.parent)o instanceof ma&&o.index<0&&((i=a.enter(e,t,s))===null||i===void 0?void 0:i.from)!=o.from&&(n=a);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class n5{cursor(e=0){return new Kx(this,e)}getChild(e,t=null,r=null){let i=GN(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return GN(this,e,t,r)}resolve(e,t=0){return ly(this,e,t,!1)}resolveInner(e,t=0){return ly(this,e,t,!0)}matchContext(e){return jx(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}get node(){return this}get next(){return this.parent}}class ma extends n5{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=t>0?a.length:-1;e!=c;e+=t){let h=a[e],d=l[e]+o.from;if(t5(i,r,d,d+h.length)){if(h instanceof wh){if(s&$i.ExcludeBuffers)continue;let p=h.findChild(0,h.buffer.length,t,r-d,i);if(p>-1)return new Yu(new rpe(o,h,e,d),null,p)}else if(s&$i.IncludeAnonymous||!h.type.isAnonymous||ZC(h)){let p;if(!(s&$i.IgnoreMounts)&&(p=kw.get(h))&&!p.overlay)return new ma(p.tree,d,e,o);let y=new ma(h,d,e,o);return s&$i.IncludeAnonymous||!y.type.isAnonymous?y:y.nextChild(t<0?h.children.length-1:0,t,r,i)}}}if(s&$i.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&$i.IgnoreOverlays)&&(i=kw.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((t>0?o<=s:o<s)&&(t<0?a>=s:a>s))return new ma(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function GN(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function jx(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class rpe{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class Yu extends n5{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new Yu(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&$i.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Yu(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Yu(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Yu(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),t.push(0)}return new ps(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function r5(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let r=t instanceof ma&&t.index<0?null:t.parent,i=n.slice();return r?i[e]=r:i.splice(e,1),new ipe(i,t)}class ipe{constructor(e,t){this.heads=e,this.node=t}get next(){return r5(this.heads)}}function spe(n,e,t){let r=n.resolveInner(e,t),i=null;for(let s=r instanceof ma?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,t)),s=o}else{let o=kw.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new ma(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(ly(a,e,t,!1))}}return i?r5(i):r}class Kx{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ma)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof ma?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&$i.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&$i.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&$i.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&$i.IncludeAnonymous||a instanceof wh||!a.type.isAnonymous||ZC(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)t=new Yu(this.buffer,t,this.stack[i]);return this.bufferNode=new Yu(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return jx(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return jx(this._tree,e,i);let o=r[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function ZC(n){return n.children.some(e=>e instanceof wh||!e.type.isAnonymous||ZC(e))}function ope(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=epe,reused:s=[],minRepeatType:o=r.types.length}=n,a=Array.isArray(t)?new QC(t,t.length):t,l=r.types,c=0,h=0;function d(U,j,N,O,A,R){let{id:k,start:V,end:D,size:Z}=a,le=h,Q=c;for(;Z<0;)if(a.next(),Z==-1){let Ge=s[k];N.push(Ge),O.push(V-U);return}else if(Z==-3){c=k;return}else if(Z==-4){h=k;return}else throw new RangeError(`Unrecognized record size: ${Z}`);let re=l[k],ae,Ce,He=V-U;if(D-V<=i&&(Ce=E(a.pos-j,A))){let Ge=new Uint16Array(Ce.size-Ce.skip),ot=a.pos-Ce.size,ut=Ge.length;for(;a.pos>ot;)ut=C(Ce.start,Ge,ut);ae=new wh(Ge,D-Ce.start,r),He=Ce.start-U}else{let Ge=a.pos-Z;a.next();let ot=[],ut=[],Mt=k>=o?k:-1,_e=0,Ne=D;for(;a.pos>Ge;)Mt>=0&&a.id==Mt&&a.size>=0?(a.end<=Ne-i&&(w(ot,ut,V,_e,a.end,Ne,Mt,le,Q),_e=ot.length,Ne=a.end),a.next()):R>2500?p(V,Ge,ot,ut):d(V,Ge,ot,ut,Mt,R+1);if(Mt>=0&&_e>0&&_e<ot.length&&w(ot,ut,V,_e,V,Ne,Mt,le,Q),ot.reverse(),ut.reverse(),Mt>-1&&_e>0){let oe=y(re,Q);ae=eO(re,ot,ut,0,ot.length,0,D-V,oe,oe)}else ae=S(re,ot,ut,D-V,le-D,Q)}N.push(ae),O.push(He)}function p(U,j,N,O){let A=[],R=0,k=-1;for(;a.pos>j;){let{id:V,start:D,end:Z,size:le}=a;if(le>4)a.next();else{if(k>-1&&D<k)break;k<0&&(k=Z-i),A.push(V,D,Z),R++,a.next()}}if(R){let V=new Uint16Array(R*4),D=A[A.length-2];for(let Z=A.length-3,le=0;Z>=0;Z-=3)V[le++]=A[Z],V[le++]=A[Z+1]-D,V[le++]=A[Z+2]-D,V[le++]=le;N.push(new wh(V,A[2]-D,r)),O.push(D-U)}}function y(U,j){return(N,O,A)=>{let R=0,k=N.length-1,V,D;if(k>=0&&(V=N[k])instanceof ps){if(!k&&V.type==U&&V.length==A)return V;(D=V.prop(Rn.lookAhead))&&(R=O[k]+V.length+D)}return S(U,N,O,A,R,j)}}function w(U,j,N,O,A,R,k,V,D){let Z=[],le=[];for(;U.length>O;)Z.push(U.pop()),le.push(j.pop()+N-A);U.push(S(r.types[k],Z,le,R-A,V-R,D)),j.push(A-N)}function S(U,j,N,O,A,R,k){if(R){let V=[Rn.contextHash,R];k=k?[V].concat(k):[V]}if(A>25){let V=[Rn.lookAhead,A];k=k?[V].concat(k):[V]}return new ps(U,j,N,O,k)}function E(U,j){let N=a.fork(),O=0,A=0,R=0,k=N.end-i,V={size:0,start:0,skip:0};e:for(let D=N.pos-U;N.pos>D;){let Z=N.size;if(N.id==j&&Z>=0){V.size=O,V.start=A,V.skip=R,R+=4,O+=4,N.next();continue}let le=N.pos-Z;if(Z<0||le<D||N.start<k)break;let Q=N.id>=o?4:0,re=N.start;for(N.next();N.pos>le;){if(N.size<0)if(N.size==-3)Q+=4;else break e;else N.id>=o&&(Q+=4);N.next()}A=re,O+=Z,R+=Q}return(j<0||O==U)&&(V.size=O,V.start=A,V.skip=R),V.size>4?V:void 0}function C(U,j,N){let{id:O,start:A,end:R,size:k}=a;if(a.next(),k>=0&&O<o){let V=N;if(k>4){let D=a.pos-(k-4);for(;a.pos>D;)N=C(U,j,N)}j[--N]=V,j[--N]=R-U,j[--N]=A-U,j[--N]=O}else k==-3?c=O:k==-4&&(h=O);return N}let L=[],P=[];for(;a.pos>0;)d(n.start||0,n.bufferStart||0,L,P,-1,0);let F=(e=n.length)!==null&&e!==void 0?e:L.length?P[0]+L[0].length:0;return new ps(l[n.topID],L.reverse(),P.reverse(),F)}const qN=new WeakMap;function Eb(n,e){if(!n.isAnonymous||e instanceof wh||e.type!=n)return 1;let t=qN.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof ps)){t=1;break}t+=Eb(n,r)}qN.set(e,t)}return t}function eO(n,e,t,r,i,s,o,a,l){let c=0;for(let w=r;w<i;w++)c+=Eb(n,e[w]);let h=Math.ceil(c*1.5/8),d=[],p=[];function y(w,S,E,C,L){for(let P=E;P<C;){let F=P,U=S[P],j=Eb(n,w[P]);for(P++;P<C;P++){let N=Eb(n,w[P]);if(j+N>=h)break;j+=N}if(P==F+1){if(j>h){let N=w[F];y(N.children,N.positions,0,N.children.length,S[F]+L);continue}d.push(w[F])}else{let N=S[P-1]+w[P-1].length-U;d.push(eO(n,w,S,F,P,U,N,null,l))}p.push(U+L-s)}}return y(e,t,r,i,0),(a||l)(d,p,o)}class kf{constructor(e,t,r,i,s=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new kf(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let h=a<t.length?t[a]:null,d=h?h.fromA:1e9;if(d-l>=r)for(;o&&o.from<d;){let p=o;if(l>=p.from||d<=p.to||c){let y=Math.max(p.from,l)-c,w=Math.min(p.to,d)-c;p=y>=w?null:new kf(y,w,p.tree,p.offset+c,a>0,!!h)}if(p&&i.push(p),o.to>d)break;o=s<e.length?e[s++]:null}if(!h)break;l=h.toA,c=h.toA-h.toB}return i}}class ape{startParse(e,t,r){return typeof e=="string"&&(e=new lpe(e)),r=r?r.length?r.map(i=>new P1(i.from,i.to)):[new P1(0,0)]:[new P1(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}}class lpe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Rn({perNode:!0});let cpe=0;class ia{constructor(e,t,r,i){this.name=e,this.set=t,this.base=r,this.modified=i,this.id=cpe++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof ia&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let i=new ia(r,[],null,[]);if(i.set.push(i),t)for(let s of t.set)i.set.push(s);return i}static defineModifier(e){let t=new Rw(e);return r=>r.modified.indexOf(t)>-1?r:Rw.get(r.base||r,r.modified.concat(t).sort((i,s)=>i.id-s.id))}}let upe=0;class Rw{constructor(e){this.name=e,this.instances=[],this.id=upe++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(a=>a.base==e&&hpe(t,a.modified));if(r)return r;let i=[],s=new ia(e.name,i,e,t);for(let a of t)a.instances.push(s);let o=fpe(t);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(Rw.get(a,l));return s}}function hpe(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function fpe(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function dpe(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],o=2,a=i;for(let d=0;;){if(a=="..."&&d>0&&d+3==i.length){o=1;break}let p=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!p)throw new RangeError("Invalid path: "+i);if(s.push(p[0]=="*"?"":p[0][0]=='"'?JSON.parse(p[0]):p[0]),d+=p[0].length,d==i.length)break;let y=i[d++];if(d==i.length&&y=="!"){o=0;break}if(y!="/")throw new RangeError("Invalid path: "+i);a=i.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let h=new Pw(r,o,l>0?s.slice(0,l):null);e[c]=h.sort(e[c])}}return i5.add(e)}const i5=new Rn;class Pw{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Pw.empty=new Pw([],2,null);function s5(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=t[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function ppe(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function mpe(n,e,t,r=0,i=n.length){let s=new gpe(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}class gpe{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=t)return;o.isTop&&(s=this.highlighters.filter(y=>!y.scope||y.scope(o)));let c=i,h=ype(e)||Pw.empty,d=ppe(s,h.tags);if(d&&(c&&(c+=" "),c+=d,h.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(t,a),c),h.opaque)return;let p=e.tree&&e.tree.prop(Rn.mounted);if(p&&p.overlay){let y=e.node.enter(p.overlay[0].from+a,1),w=this.highlighters.filter(E=>!E.scope||E.scope(p.tree.type)),S=e.firstChild();for(let E=0,C=a;;E++){let L=E<p.overlay.length?p.overlay[E]:null,P=L?L.from+a:l,F=Math.max(t,C),U=Math.min(r,P);if(F<U&&S)for(;e.from<U&&(this.highlightRange(e,F,U,i,s),this.startSpan(Math.min(U,e.to),c),!(e.to>=P||!e.nextSibling())););if(!L||P>r)break;C=L.to+a,C>t&&(this.highlightRange(y.cursor(),Math.max(t,L.from+a),Math.min(r,C),"",w),this.startSpan(Math.min(r,C),c))}S&&e.parent()}else if(e.firstChild()){p&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function ype(n){let e=n.type.prop(i5);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const dt=ia.define,_0=dt(),Nu=dt(),YN=dt(Nu),XN=dt(Nu),Lu=dt(),x0=dt(Lu),D1=dt(Lu),Il=dt(),af=dt(Il),_l=dt(),xl=dt(),Gx=dt(),Rm=dt(Gx),A0=dt(),De={comment:_0,lineComment:dt(_0),blockComment:dt(_0),docComment:dt(_0),name:Nu,variableName:dt(Nu),typeName:YN,tagName:dt(YN),propertyName:XN,attributeName:dt(XN),className:dt(Nu),labelName:dt(Nu),namespace:dt(Nu),macroName:dt(Nu),literal:Lu,string:x0,docString:dt(x0),character:dt(x0),attributeValue:dt(x0),number:D1,integer:dt(D1),float:dt(D1),bool:dt(Lu),regexp:dt(Lu),escape:dt(Lu),color:dt(Lu),url:dt(Lu),keyword:_l,self:dt(_l),null:dt(_l),atom:dt(_l),unit:dt(_l),modifier:dt(_l),operatorKeyword:dt(_l),controlKeyword:dt(_l),definitionKeyword:dt(_l),moduleKeyword:dt(_l),operator:xl,derefOperator:dt(xl),arithmeticOperator:dt(xl),logicOperator:dt(xl),bitwiseOperator:dt(xl),compareOperator:dt(xl),updateOperator:dt(xl),definitionOperator:dt(xl),typeOperator:dt(xl),controlOperator:dt(xl),punctuation:Gx,separator:dt(Gx),bracket:Rm,angleBracket:dt(Rm),squareBracket:dt(Rm),paren:dt(Rm),brace:dt(Rm),content:Il,heading:af,heading1:dt(af),heading2:dt(af),heading3:dt(af),heading4:dt(af),heading5:dt(af),heading6:dt(af),contentSeparator:dt(Il),list:dt(Il),quote:dt(Il),emphasis:dt(Il),strong:dt(Il),link:dt(Il),monospace:dt(Il),strikethrough:dt(Il),inserted:dt(),deleted:dt(),changed:dt(),invalid:dt(),meta:A0,documentMeta:dt(A0),annotation:dt(A0),processingInstruction:dt(A0),definition:ia.defineModifier("definition"),constant:ia.defineModifier("constant"),function:ia.defineModifier("function"),standard:ia.defineModifier("standard"),local:ia.defineModifier("local"),special:ia.defineModifier("special")};for(let n in De){let e=De[n];e instanceof ia&&(e.name=n)}s5([{tag:De.link,class:"tok-link"},{tag:De.heading,class:"tok-heading"},{tag:De.emphasis,class:"tok-emphasis"},{tag:De.strong,class:"tok-strong"},{tag:De.keyword,class:"tok-keyword"},{tag:De.atom,class:"tok-atom"},{tag:De.bool,class:"tok-bool"},{tag:De.url,class:"tok-url"},{tag:De.labelName,class:"tok-labelName"},{tag:De.inserted,class:"tok-inserted"},{tag:De.deleted,class:"tok-deleted"},{tag:De.literal,class:"tok-literal"},{tag:De.string,class:"tok-string"},{tag:De.number,class:"tok-number"},{tag:[De.regexp,De.escape,De.special(De.string)],class:"tok-string2"},{tag:De.variableName,class:"tok-variableName"},{tag:De.local(De.variableName),class:"tok-variableName tok-local"},{tag:De.definition(De.variableName),class:"tok-variableName tok-definition"},{tag:De.special(De.variableName),class:"tok-variableName2"},{tag:De.definition(De.propertyName),class:"tok-propertyName tok-definition"},{tag:De.typeName,class:"tok-typeName"},{tag:De.namespace,class:"tok-namespace"},{tag:De.className,class:"tok-className"},{tag:De.macroName,class:"tok-macroName"},{tag:De.propertyName,class:"tok-propertyName"},{tag:De.operator,class:"tok-operator"},{tag:De.comment,class:"tok-comment"},{tag:De.meta,class:"tok-meta"},{tag:De.invalid,class:"tok-invalid"},{tag:De.punctuation,class:"tok-punctuation"}]);var M1;const Zm=new Rn,vpe=new Rn;class Nl{constructor(e,t,r=[],i=""){this.data=e,this.name=i,Ln.prototype.hasOwnProperty("tree")||Object.defineProperty(Ln.prototype,"tree",{get(){return ys(this)}}),this.parser=t,this.extension=[Sh.of(this),Ln.languageData.of((s,o,a)=>{let l=JN(s,o,a),c=l.type.prop(Zm);if(!c)return[];let h=s.facet(c),d=l.type.prop(vpe);if(d){let p=l.resolve(o-l.from,a);for(let y of d)if(y.test(p,s)){let w=s.facet(y.facet);return y.type=="replace"?w:w.concat(h)}}return h})].concat(r)}isActiveAt(e,t,r=-1){return JN(e,t,r).type.prop(Zm)==this.data}findRegions(e){let t=e.facet(Sh);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(Zm)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(Rn.mounted);if(a){if(a.tree.prop(Zm)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof ps&&i(c,s.positions[l]+o)}};return i(ys(e),0),r}get allowsNesting(){return!0}}Nl.setState=en.define();function JN(n,e,t){let r=n.facet(Sh),i=ys(n).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,t,$i.ExcludeBuffers))s.type.isTop&&(i=s);return i}function ys(n){let e=n.field(Nl.state,!1);return e?e.tree:ps.empty}class bpe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let Pm=null;class Dw{constructor(e,t,r=[],i,s,o,a,l){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Dw(e,t,[],ps.empty,0,r,[],null)}startParse(){return this.parser.startParse(new bpe(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=ps.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(kf.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(kf.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Pm;Pm=this;try{return e()}finally{Pm=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=QN(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,h,d,p)=>l.push({fromA:c,toA:h,fromB:d,toB:p})),r=kf.applyChanges(r,l),i=ps.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let h=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);h<d&&a.push({from:h,to:d})}}}return new Dw(this.parser,t,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=QN(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends ape{createParse(t,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=Pm;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new ps(wa.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Pm}}function QN(n,e,t){return kf.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Rp{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Rp(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Dw.create(e.facet(Sh).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Rp(r)}}Nl.state=Jr.define({create:Rp.init,update(n,e){for(let t of e.effects)if(t.is(Nl.setState))return t.value;return e.startState.facet(Sh)!=e.state.facet(Sh)?Rp.init(e.state):n.apply(e)}});let o5=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(o5=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const N1=typeof navigator<"u"&&(!((M1=navigator.scheduling)===null||M1===void 0)&&M1.isInputPending)?()=>navigator.scheduling.isInputPending():null,wpe=kr.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Nl.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Nl.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=o5(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Nl.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!N1?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>N1&&N1()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Nl.setState.of(new Rp(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>ho(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Sh=Ct.define({combine(n){return n.length?n[0]:null},enables:n=>[Nl.state,wpe,vt.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]}),Spe=Ct.define(),tO=Ct.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Mw(n){let e=n.facet(tO);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function cy(n,e){let t="",r=n.tabSize,i=n.facet(tO)[0];if(i=="	"){for(;e>=r;)t+="	",e-=r;i=" "}for(let s=0;s<e;s++)t+=i;return t}function nO(n,e){n instanceof Ln&&(n=new gE(n));for(let r of n.state.facet(Spe)){let i=r(n,e);if(i!==void 0)return i}let t=ys(n.state);return t.length>=e?Tpe(n,t,e):null}class gE{constructor(e,t={}){this.state=e,this.options=t,this.unit=Mw(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return Qp(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Epe=new Rn;function Tpe(n,e,t){let r=e.resolveStack(t),i=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return a5(r,n,t)}function a5(n,e,t){for(let r=n;r;r=r.next){let i=xpe(r.node);if(i)return i(rO.create(e,t,r))}return 0}function _pe(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function xpe(n){let e=n.type.prop(Epe);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Rn.closedBy))){let i=n.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>Ope(o,!0,1,void 0,s&&!_pe(o)?i.from:void 0)}return n.parent==null?Ape:null}function Ape(){return 0}class rO extends gE{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new rO(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(Ipe(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return a5(this.context.next,this.base,this.pos)}}function Ipe(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function Cpe(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(t.to-s.from))[0].length;return{from:t.from,to:t.to+c}}a=l.to}}function Ope(n,e,t,r,i){let s=n.textAfter,o=s.match(/^\s*/)[0].length,a=i==n.pos+o,l=Cpe(n);return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*t)}const kpe=200;function Rpe(){return Ln.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+kpe)return n;let s=t.sliceString(i.from,r);if(!e.some(c=>c.test(s)))return n;let{state:o}=n,a=-1,l=[];for(let{head:c}of o.selection.ranges){let h=o.doc.lineAt(c);if(h.from==a)continue;a=h.from;let d=nO(o,h.from);if(d==null)continue;let p=/^\s*/.exec(h.text)[0],y=cy(o,d);p!=y&&l.push({from:h.from,to:h.from+p.length,insert:y})}return l.length?[n,{changes:l,sequential:!0}]:n})}const Ppe=Ct.define(),Dpe=new Rn;function Mpe(n,e,t){let r=ys(n);if(r.length<t)return null;let i=r.resolveStack(t,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=t||a.from>t)continue;if(s&&a.from<e)break;let l=a.type.prop(Dpe);if(l&&(a.to<r.length-50||r.length==n.doc.length||!Npe(a))){let c=l(a,n);c&&c.from<=t&&c.from>=e&&c.to>t&&(s=c)}}return s}function Npe(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Nw(n,e,t){for(let r of n.facet(Ppe)){let i=r(n,e,t);if(i)return i}return Mpe(n,e,t)}function l5(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const yE=en.define({map:l5}),qy=en.define({map:l5});function c5(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const qf=Jr.define({create(){return Lt.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(yE)&&!Lpe(n,t.value.from,t.value.to)){let{preparePlaceholder:r}=e.state.facet(f5),i=r?Lt.replace({widget:new Wpe(r(e.state,t.value))}):ZN;n=n.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(qy)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,s)=>{i<r&&s>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return n},provide:n=>vt.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(ZN.range(r,i))}return Lt.set(e,!0)}});function Lw(n,e,t){var r;let i=null;return(r=n.field(qf,!1))===null||r===void 0||r.between(e,t,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function Lpe(n,e,t){let r=!1;return n.between(e,e,(i,s)=>{i==e&&s==t&&(r=!0)}),r}function u5(n,e){return n.field(qf,!1)?e:e.concat(en.appendConfig.of(d5()))}const Vpe=n=>{for(let e of c5(n)){let t=Nw(n.state,e.from,e.to);if(t)return n.dispatch({effects:u5(n.state,[yE.of(t),h5(n,t)])}),!0}return!1},Fpe=n=>{if(!n.state.field(qf,!1))return!1;let e=[];for(let t of c5(n)){let r=Lw(n.state,t.from,t.to);r&&e.push(qy.of(r),h5(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function h5(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return vt.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const Bpe=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),s=Nw(e,i.from,i.to);s&&t.push(yE.of(s)),r=(s?n.lineBlockAt(s.to):i).to+1}return t.length&&n.dispatch({effects:u5(n.state,t)}),!!t.length},Upe=n=>{let e=n.state.field(qf,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(qy.of({from:r,to:i}))}),n.dispatch({effects:t}),!0},$pe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Vpe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Fpe},{key:"Ctrl-Alt-[",run:Bpe},{key:"Ctrl-Alt-]",run:Upe}],Hpe={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},f5=Ct.define({combine(n){return Yl(n,Hpe)}});function d5(n){return[qf,Kpe]}function p5(n,e){let{state:t}=n,r=t.facet(f5),i=o=>{let a=n.lineBlockAt(n.posAtDOM(o.target)),l=Lw(n.state,a.from,a.to);l&&n.dispatch({effects:qy.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(n,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const ZN=Lt.replace({widget:new class extends Qc{toDOM(n){return p5(n,null)}}});class Wpe extends Qc{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return p5(e,this.value)}}const zpe={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class L1 extends qc{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function jpe(n={}){let e=Object.assign(Object.assign({},zpe),n),t=new L1(e,!0),r=new L1(e,!1),i=kr.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Sh)!=o.state.facet(Sh)||o.startState.field(qf,!1)!=o.state.field(qf,!1)||ys(o.startState)!=ys(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new va;for(let l of o.viewportLineBlocks){let c=Lw(o.state,l.from,l.to)?r:Nw(o.state,l.from,l.to)?t:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:s}=e;return[i,Wde({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||Un.empty},initialSpacer(){return new L1(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let c=Lw(o.state,a.from,a.to);if(c)return o.dispatch({effects:qy.of(c)}),!0;let h=Nw(o.state,a.from,a.to);return h?(o.dispatch({effects:yE.of(h)}),!0):!1}})}),d5()]}const Kpe=vt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Yy{constructor(e,t){this.specs=e;let r;function i(a){let l=yh.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof Nl?a=>a.prop(Zm)==o.data:o?a=>a==o:void 0,this.style=s5(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new yh(r):null,this.themeType=t.themeType}static define(e,t){return new Yy(e,t||{})}}const qx=Ct.define(),m5=Ct.define({combine(n){return n.length?[n[0]]:null}});function V1(n){let e=n.facet(qx);return e.length?e:n.facet(m5)}function g5(n,e){let t=[qpe],r;return n instanceof Yy&&(n.module&&t.push(vt.styleModule.of(n.module)),r=n.themeType),e!=null&&e.fallback?t.push(m5.of(n)):r?t.push(qx.computeN([vt.darkTheme],i=>i.facet(vt.darkTheme)==(r=="dark")?[n]:[])):t.push(qx.of(n)),t}class Gpe{constructor(e){this.markCache=Object.create(null),this.tree=ys(e.state),this.decorations=this.buildDeco(e,V1(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=ys(e.state),r=V1(e.state),i=r!=V1(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!i&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return Lt.none;let r=new va;for(let{from:i,to:s}of e.visibleRanges)mpe(this.tree,t,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=Lt.mark({class:l})))},i,s);return r.finish()}}const qpe=id.high(kr.fromClass(Gpe,{decorations:n=>n.decorations})),Ype=Yy.define([{tag:De.meta,color:"#404740"},{tag:De.link,textDecoration:"underline"},{tag:De.heading,textDecoration:"underline",fontWeight:"bold"},{tag:De.emphasis,fontStyle:"italic"},{tag:De.strong,fontWeight:"bold"},{tag:De.strikethrough,textDecoration:"line-through"},{tag:De.keyword,color:"#708"},{tag:[De.atom,De.bool,De.url,De.contentSeparator,De.labelName],color:"#219"},{tag:[De.literal,De.inserted],color:"#164"},{tag:[De.string,De.deleted],color:"#a11"},{tag:[De.regexp,De.escape,De.special(De.string)],color:"#e40"},{tag:De.definition(De.variableName),color:"#00f"},{tag:De.local(De.variableName),color:"#30a"},{tag:[De.typeName,De.namespace],color:"#085"},{tag:De.className,color:"#167"},{tag:[De.special(De.variableName),De.macroName],color:"#256"},{tag:De.definition(De.propertyName),color:"#00c"},{tag:De.comment,color:"#940"},{tag:De.invalid,color:"#f00"}]),Xpe=vt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),y5=1e4,v5="()[]{}",b5=Ct.define({combine(n){return Yl(n,{afterCursor:!0,brackets:v5,maxScanDistance:y5,renderMatch:Zpe})}}),Jpe=Lt.mark({class:"cm-matchingBracket"}),Qpe=Lt.mark({class:"cm-nonmatchingBracket"});function Zpe(n){let e=[],t=n.matched?Jpe:Qpe;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const eme=Jr.define({create(){return Lt.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(b5);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Ll(e.state,i.head,-1,r)||i.head>0&&Ll(e.state,i.head-1,1,r)||r.afterCursor&&(Ll(e.state,i.head,1,r)||i.head<e.state.doc.length&&Ll(e.state,i.head+1,-1,r));s&&(t=t.concat(r.renderMatch(s,e.state)))}return Lt.set(t,!0)},provide:n=>vt.decorations.from(n)}),tme=[eme,Xpe];function nme(n={}){return[b5.of(n),tme]}const rme=new Rn;function Yx(n,e,t){let r=n.prop(e<0?Rn.openedBy:Rn.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function Xx(n){let e=n.type.prop(rme);return e?e(n.node):n}function Ll(n,e,t,r={}){let i=r.maxScanDistance||y5,s=r.brackets||v5,o=ys(n),a=o.resolveInner(e,t);for(let l=a;l;l=l.parent){let c=Yx(l.type,t,s);if(c&&l.from<l.to){let h=Xx(l);if(h&&(t>0?e>=h.from&&e<h.to:e>h.from&&e<=h.to))return ime(n,e,t,l,h,c,s)}}return sme(n,e,t,o,a.type,i,s)}function ime(n,e,t,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},c=0,h=a==null?void 0:a.cursor();if(h&&(t<0?h.childBefore(r.from):h.childAfter(r.to)))do if(t<0?h.to<=r.from:h.from>=r.to){if(c==0&&s.indexOf(h.type.name)>-1&&h.from<h.to){let d=Xx(h);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(Yx(h.type,t,o))c++;else if(Yx(h.type,-t,o)){if(c==0){let d=Xx(h);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(t<0?h.prevSibling():h.nextSibling());return{start:l,matched:!1}}function sme(n,e,t,r,i,s,o){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},h=n.doc.iterRange(e,t>0?n.doc.length:0),d=0;for(let p=0;!h.next().done&&p<=s;){let y=h.value;t<0&&(p+=y.length);let w=e+p*t;for(let S=t>0?0:y.length-1,E=t>0?y.length:-1;S!=E;S+=t){let C=o.indexOf(y[S]);if(!(C<0||r.resolveInner(w+S,1).type!=i))if(C%2==0==t>0)d++;else{if(d==1)return{start:c,end:{from:w+S,to:w+S+1},matched:C>>1==l>>1};d--}}t>0&&(p+=y.length)}return h.done?{start:c,matched:!1}:null}const ome=Object.create(null),e2=[wa.none],t2=[],n2=Object.create(null),ame=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])ame[n]=lme(ome,e);function F1(n,e){t2.indexOf(n)>-1||(t2.push(n),console.warn(e))}function lme(n,e){let t=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let h=n[c]||De[c];h?typeof h=="function"?l.length?l=l.map(h):F1(c,`Modifier ${c} used at start of tag`):l.length?F1(c,`Tag ${c} used as modifier`):l=Array.isArray(h)?h:[h]:F1(c,`Unknown highlighting tag ${c}`)}for(let c of l)t.push(c)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+t.map(a=>a.id),s=n2[i];if(s)return s.id;let o=n2[i]=wa.define({id:e2.length,name:r,props:[dpe({[r]:t})]});return e2.push(o),o.id}mr.RTL,mr.LTR;const cme=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=sO(n.state,t.from);return r.line?ume(n):r.block?fme(n):!1};function iO(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const ume=iO(mme,0),hme=iO(w5,0),fme=iO((n,e)=>w5(n,e,pme(e)),0);function sO(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Dm=50;function dme(n,{open:e,close:t},r,i){let s=n.sliceDoc(r-Dm,r),o=n.sliceDoc(i,i+Dm),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+t.length)==t)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let h,d;i-r<=2*Dm?h=d=n.sliceDoc(r,i):(h=n.sliceDoc(r,r+Dm),d=n.sliceDoc(i-Dm,i));let p=/^\s*/.exec(h)[0].length,y=/\s*$/.exec(d)[0].length,w=d.length-y-t.length;return h.slice(p,p+e.length)==e&&d.slice(w,w+t.length)==t?{open:{pos:r+p+e.length,margin:/\s/.test(h.charAt(p+e.length))?1:0},close:{pos:i-y-t.length,margin:/\s/.test(d.charAt(w-1))?1:0}}:null}function pme(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to);i.from>r.from&&i.from==t.to&&(i=t.to==r.to+1?r:n.doc.lineAt(t.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function w5(n,e,t=e.selection.ranges){let r=t.map(s=>sO(e,s.from).block);if(!r.every(s=>s))return null;let i=t.map((s,o)=>dme(e,r[o],s.from,s.to));if(n!=2&&!i.every(s=>s))return{changes:e.changes(t.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(n!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:c,close:h}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:h.pos-h.margin,to:h.pos+l.close.length})}return{changes:s}}return null}function mme(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of t){let a=r.length,l=1e9,c=sO(e,s).line;if(c){for(let h=s;h<=o;){let d=e.doc.lineAt(h);if(d.from>i&&(s==o||o>d.from)){i=d.from;let p=/^\s*/.exec(d.text)[0].length,y=p==d.length,w=d.text.slice(p,p+c.length)==c?p:-1;p<d.text.length&&p<l&&(l=p),r.push({line:d,comment:w,token:c,indent:p,empty:y,single:!1})}h=d.to+1}if(l<1e9)for(let h=a;h<r.length;h++)r[h].indent<r[h].line.text.length&&(r[h].indent=l);r.length==a+1&&(r[a].single=!0)}}if(n!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:h,single:d}of r)(d||!h)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let c=o.from+a,h=c+l.length;o.text[h-o.from]==" "&&h++,s.push({from:c,to:h})}return{changes:s}}return null}const Jx=Jc.define(),gme=Jc.define(),yme=Ct.define(),S5=Ct.define({combine(n){return Yl(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}}),E5=Jr.define({create(){return Vl.empty},update(n,e){let t=e.state.facet(S5),r=e.annotation(Jx);if(r){let l=fo.fromTransaction(e,r.selection),c=r.side,h=c==0?n.undone:n.done;return l?h=Vw(h,h.length,t.minDepth,l):h=x5(h,e.startState.selection),new Vl(c==0?r.rest:h,c==0?h:r.rest)}let i=e.annotation(gme);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(bi.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=fo.fromTransaction(e),o=e.annotation(bi.time),a=e.annotation(bi.userEvent);return s?n=n.addChanges(s,o,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,a,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Vl(n.done.map(fo.fromJSON),n.undone.map(fo.fromJSON))}});function vme(n={}){return[E5,S5.of(n),vt.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?T5:e.inputType=="historyRedo"?Qx:null;return r?(e.preventDefault(),r(t)):!1}})]}function vE(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(E5,!1);if(!i)return!1;let s=i.pop(n,t,e);return s?(r(s),!0):!1}}const T5=vE(0,!1),Qx=vE(1,!1),bme=vE(0,!0),wme=vE(1,!0);class fo{constructor(e,t,r,i,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new fo(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new fo(e.changes&&di.fromJSON(e.changes),[],e.mapped&&Hl.fromJSON(e.mapped),e.startSelection&&$e.fromJSON(e.startSelection),e.selectionsAfter.map($e.fromJSON))}static fromTransaction(e,t){let r=la;for(let i of e.startState.facet(yme)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new fo(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,la)}static selection(e){return new fo(void 0,la,void 0,void 0,e)}}function Vw(n,e,t,r){let i=e+1>t+20?e-t-1:0,s=n.slice(i,e);return s.push(r),s}function Sme(n,e){let t=[],r=!1;return n.iterChangedRanges((i,s)=>t.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<t.length;){let c=t[l++],h=t[l++];a>=c&&o<=h&&(r=!0)}}),r}function Eme(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function _5(n,e){return n.length?e.length?n.concat(e):n:e}const la=[],Tme=200;function x5(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Tme));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),Vw(n,n.length-1,1e9,t.setSelAfter(r)))}else return[fo.selection([e])]}function _me(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function B1(n,e){if(!n.length)return n;let t=n.length,r=la;for(;t;){let i=xme(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=n.slice(0,t);return s[t-1]=i,s}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[fo.selection(r)]:la}function xme(n,e,t){let r=_5(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):la,t);if(!n.changes)return fo.selection(r);let i=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new fo(i,en.mapEffects(n.effects,e),o,n.startSelection.map(s),r)}const Ame=/^(input\.type|delete)($|\.)/;class Vl{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Vl(this.done,this.undone):this}addChanges(e,t,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||Ame.test(r))&&(!a.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,Sme(a.changes,e.changes))||r=="input.type.compose")?o=Vw(o,o.length-1,i.minDepth,new fo(e.changes.compose(a.changes),_5(en.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,la)):o=Vw(o,o.length,i.minDepth,e),new Vl(o,la,t,r)}addSelection(e,t,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:la;return s.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&Eme(s[s.length-1],e)?this:new Vl(x5(this.done,e),this.undone,t,r)}addMapping(e){return new Vl(B1(this.done,e),B1(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||t.selection;if(r&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Jx.of({side:e,rest:_me(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?la:i.slice(0,i.length-1);return s.mapped&&(a=B1(a,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Jx.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Vl.empty=new Vl(la,la);const Ime=[{key:"Mod-z",run:T5,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Qx,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Qx,preventDefault:!0},{key:"Mod-u",run:bme,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:wme,preventDefault:!0}];function Zp(n,e){return $e.create(n.ranges.map(e),n.mainIndex)}function Xl(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ll({state:n,dispatch:e},t){let r=Zp(n.selection,t);return r.eq(n.selection,!0)?!1:(e(Xl(n,r)),!0)}function bE(n,e){return $e.cursor(e?n.to:n.from)}function A5(n,e){return ll(n,t=>t.empty?n.moveByChar(t,e):bE(t,e))}function bs(n){return n.textDirectionAt(n.state.selection.main.head)==mr.LTR}const I5=n=>A5(n,!bs(n)),C5=n=>A5(n,bs(n));function O5(n,e){return ll(n,t=>t.empty?n.moveByGroup(t,e):bE(t,e))}const Cme=n=>O5(n,!bs(n)),Ome=n=>O5(n,bs(n));function kme(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function wE(n,e,t){let r=ys(n).resolveInner(e.head),i=t?Rn.closedBy:Rn.openedBy;for(let l=e.head;;){let c=t?r.childAfter(l):r.childBefore(l);if(!c)break;kme(n,c,i)?r=c:l=t?c.to:c.from}let s=r.type.prop(i),o,a;return s&&(o=t?Ll(n,r.from,1):Ll(n,r.to,-1))&&o.matched?a=t?o.end.to:o.end.from:a=t?r.to:r.from,$e.cursor(a,t?-1:1)}const Rme=n=>ll(n,e=>wE(n.state,e,!bs(n))),Pme=n=>ll(n,e=>wE(n.state,e,bs(n)));function k5(n,e){return ll(n,t=>{if(!t.empty)return bE(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const R5=n=>k5(n,!1),P5=n=>k5(n,!0);function D5(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,i;if(e){for(let s of n.state.facet(vt.scrollMargins)){let o=s(n);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function M5(n,e){let t=D5(n),{state:r}=n,i=Zp(r.selection,o=>o.empty?n.moveVertically(o,e,t.height):bE(o,e));if(i.eq(r.selection))return!1;let s;if(t.selfScroll){let o=n.coordsAtPos(r.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),l=a.top+t.marginTop,c=a.bottom-t.marginBottom;o&&o.top>l&&o.bottom<c&&(s=vt.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return n.dispatch(Xl(r,i),{effects:s}),!0}const r2=n=>M5(n,!1),Zx=n=>M5(n,!0);function Rh(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let s=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=$e.cursor(r.from+s))}return i}const Dme=n=>ll(n,e=>Rh(n,e,!0)),Mme=n=>ll(n,e=>Rh(n,e,!1)),Nme=n=>ll(n,e=>Rh(n,e,!bs(n))),Lme=n=>ll(n,e=>Rh(n,e,bs(n))),Vme=n=>ll(n,e=>$e.cursor(n.lineBlockAt(e.head).from,1)),Fme=n=>ll(n,e=>$e.cursor(n.lineBlockAt(e.head).to,-1));function Bme(n,e,t){let r=!1,i=Zp(n.selection,s=>{let o=Ll(n,s.head,-1)||Ll(n,s.head,1)||s.head>0&&Ll(n,s.head-1,1)||s.head<n.doc.length&&Ll(n,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return $e.cursor(a)});return r?(e(Xl(n,i)),!0):!1}const Ume=({state:n,dispatch:e})=>Bme(n,e);function Sa(n,e){let t=Zp(n.state.selection,r=>{let i=e(r);return $e.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Xl(n.state,t)),!0)}function N5(n,e){return Sa(n,t=>n.moveByChar(t,e))}const L5=n=>N5(n,!bs(n)),V5=n=>N5(n,bs(n));function F5(n,e){return Sa(n,t=>n.moveByGroup(t,e))}const $me=n=>F5(n,!bs(n)),Hme=n=>F5(n,bs(n)),Wme=n=>Sa(n,e=>wE(n.state,e,!bs(n))),zme=n=>Sa(n,e=>wE(n.state,e,bs(n)));function B5(n,e){return Sa(n,t=>n.moveVertically(t,e))}const U5=n=>B5(n,!1),$5=n=>B5(n,!0);function H5(n,e){return Sa(n,t=>n.moveVertically(t,e,D5(n).height))}const i2=n=>H5(n,!1),s2=n=>H5(n,!0),jme=n=>Sa(n,e=>Rh(n,e,!0)),Kme=n=>Sa(n,e=>Rh(n,e,!1)),Gme=n=>Sa(n,e=>Rh(n,e,!bs(n))),qme=n=>Sa(n,e=>Rh(n,e,bs(n))),Yme=n=>Sa(n,e=>$e.cursor(n.lineBlockAt(e.head).from)),Xme=n=>Sa(n,e=>$e.cursor(n.lineBlockAt(e.head).to)),o2=({state:n,dispatch:e})=>(e(Xl(n,{anchor:0})),!0),a2=({state:n,dispatch:e})=>(e(Xl(n,{anchor:n.doc.length})),!0),l2=({state:n,dispatch:e})=>(e(Xl(n,{anchor:n.selection.main.anchor,head:0})),!0),c2=({state:n,dispatch:e})=>(e(Xl(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),Jme=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),Qme=({state:n,dispatch:e})=>{let t=SE(n).map(({from:r,to:i})=>$e.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:$e.create(t),userEvent:"select"})),!0},Zme=({state:n,dispatch:e})=>{let t=Zp(n.selection,r=>{let i=ys(n),s=i.resolveStack(r.from,1);if(r.empty){let o=i.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&o.next)return $e.range(a.to,a.from)}return r});return t.eq(n.selection)?!1:(e(Xl(n,t)),!0)},ege=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=$e.create([t.main]):t.main.empty||(r=$e.create([$e.cursor(t.main.head)])),r?(e(Xl(n,r)),!0):!1};function Xy(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(t="delete.backward",l=I0(n,l,!1)):l>o&&(t="delete.forward",l=I0(n,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=I0(n,o,!1),a=I0(n,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:$e.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?vt.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function I0(n,e,t){if(n instanceof vt)for(let r of n.state.facet(vt.atomicRanges).map(i=>i(n)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=t?s:i)});return e}const W5=(n,e,t)=>Xy(n,r=>{let i=r.from,{state:s}=n,o=s.doc.lineAt(i),a,l;if(t&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let c=Qp(a,s.tabSize),h=c%Mw(s)||Mw(s);for(let d=0;d<h&&a[a.length-1-d]==" ";d++)i--;l=i}else l=Wi(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=Wi(o.text,l-o.from,!1,!1)+o.from);return l}),eA=n=>W5(n,!1,!0),z5=n=>W5(n,!0,!1),j5=(n,e)=>Xy(n,t=>{let r=t.head,{state:i}=n,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==t.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Wi(s.text,r-s.from,e)+s.from,c=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),h=o(c);if(a!=null&&h!=a)break;(c!=" "||r!=t.head)&&(a=h),r=l}return r}),K5=n=>j5(n,!1),tge=n=>j5(n,!0),nge=n=>Xy(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),rge=n=>Xy(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),ige=n=>Xy(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),sge=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:$n.of(["",""])},range:$e.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},oge=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,s=n.doc.lineAt(i),o=i==s.from?i-1:Wi(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Wi(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:n.doc.slice(i,a).append(n.doc.slice(o,i))},range:$e.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function SE(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),s=n.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=n.doc.lineAt(r.to-1)),t>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});t=s.number+1}return e}function G5(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let s of SE(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),a=o.length+1;if(t){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let l of s.ranges)i.push($e.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let l of s.ranges)i.push($e.range(l.anchor-a,l.head-a))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:$e.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const age=({state:n,dispatch:e})=>G5(n,e,!1),lge=({state:n,dispatch:e})=>G5(n,e,!0);function q5(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of SE(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const cge=({state:n,dispatch:e})=>q5(n,e,!1),uge=({state:n,dispatch:e})=>q5(n,e,!0),hge=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(SE(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Zp(e.selection,i=>{let s;if(n.lineWrapping){let o=n.lineBlockAt(i.head),a=n.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,s)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function fge(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ys(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(Rn.closedBy))&&s.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const u2=Y5(!1),dge=Y5(!0);function Y5(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!n&&s==o&&fge(e,s);n&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new gE(e,{simulateBreak:s,simulateDoubleBreak:!!l}),h=nO(c,s);for(h==null&&(h=Qp(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",cy(e,h)];return l&&d.push(cy(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:$n.of(d)},range:$e.cursor(s+1+d[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function oO(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=n.doc.lineAt(o);a.number>t&&(r.empty||r.to>a.from)&&(e(a,i,r),t=a.number),o=a.to+1}let s=n.changes(i);return{changes:i,range:$e.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const pge=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new gE(n,{overrideIndentation:s=>{let o=t[s];return o??-1}}),i=oO(n,(s,o,a)=>{let l=nO(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let c=/^\s*/.exec(s.text)[0],h=cy(n,l);(c!=h||a.from<s.from+c.length)&&(t[s.from]=l,o.push({from:s.from,to:s.from+c.length,insert:h}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},mge=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(oO(n,(t,r)=>{r.push({from:t.from,insert:n.facet(tO)})}),{userEvent:"input.indent"})),!0),gge=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(oO(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let s=Qp(i,n.tabSize),o=0,a=cy(n,Math.max(0,s-Mw(n)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),yge=n=>(n.setTabFocusMode(),!0),vge=[{key:"Ctrl-b",run:I5,shift:L5,preventDefault:!0},{key:"Ctrl-f",run:C5,shift:V5},{key:"Ctrl-p",run:R5,shift:U5},{key:"Ctrl-n",run:P5,shift:$5},{key:"Ctrl-a",run:Vme,shift:Yme},{key:"Ctrl-e",run:Fme,shift:Xme},{key:"Ctrl-d",run:z5},{key:"Ctrl-h",run:eA},{key:"Ctrl-k",run:nge},{key:"Ctrl-Alt-h",run:K5},{key:"Ctrl-o",run:sge},{key:"Ctrl-t",run:oge},{key:"Ctrl-v",run:Zx}],bge=[{key:"ArrowLeft",run:I5,shift:L5,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Cme,shift:$me,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Nme,shift:Gme,preventDefault:!0},{key:"ArrowRight",run:C5,shift:V5,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Ome,shift:Hme,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Lme,shift:qme,preventDefault:!0},{key:"ArrowUp",run:R5,shift:U5,preventDefault:!0},{mac:"Cmd-ArrowUp",run:o2,shift:l2},{mac:"Ctrl-ArrowUp",run:r2,shift:i2},{key:"ArrowDown",run:P5,shift:$5,preventDefault:!0},{mac:"Cmd-ArrowDown",run:a2,shift:c2},{mac:"Ctrl-ArrowDown",run:Zx,shift:s2},{key:"PageUp",run:r2,shift:i2},{key:"PageDown",run:Zx,shift:s2},{key:"Home",run:Mme,shift:Kme,preventDefault:!0},{key:"Mod-Home",run:o2,shift:l2},{key:"End",run:Dme,shift:jme,preventDefault:!0},{key:"Mod-End",run:a2,shift:c2},{key:"Enter",run:u2,shift:u2},{key:"Mod-a",run:Jme},{key:"Backspace",run:eA,shift:eA},{key:"Delete",run:z5},{key:"Mod-Backspace",mac:"Alt-Backspace",run:K5},{key:"Mod-Delete",mac:"Alt-Delete",run:tge},{mac:"Mod-Backspace",run:rge},{mac:"Mod-Delete",run:ige}].concat(vge.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),wge=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Rme,shift:Wme},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Pme,shift:zme},{key:"Alt-ArrowUp",run:age},{key:"Shift-Alt-ArrowUp",run:cge},{key:"Alt-ArrowDown",run:lge},{key:"Shift-Alt-ArrowDown",run:uge},{key:"Escape",run:ege},{key:"Mod-Enter",run:dge},{key:"Alt-l",mac:"Ctrl-l",run:Qme},{key:"Mod-i",run:Zme,preventDefault:!0},{key:"Mod-[",run:gge},{key:"Mod-]",run:mge},{key:"Mod-Alt-\\",run:pge},{key:"Shift-Mod-k",run:hge},{key:"Shift-Mod-\\",run:Ume},{key:"Mod-/",run:cme},{key:"Alt-A",run:hme},{key:"Ctrl-m",mac:"Shift-Alt-m",run:yge}].concat(bge);function sr(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)X5(n,arguments[e]);return n}function X5(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)X5(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const h2=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Pp{constructor(e,t,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(h2(a)):h2,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return oo(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=NC(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Dl(e);let i=this.normalize(t);if(i.length)for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<t.length&&t.charCodeAt(s)==a&&o++}}}match(e,t,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:r}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Pp.prototype[Symbol.iterator]=function(){return this});const J5={from:-1,to:-1,match:/.*/.exec("")},aO="gm"+(/x/.unicode==null?"":"u");class Q5{constructor(e,t,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=J5,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Z5(e,t,r,i,s);this.re=new RegExp(t,aO+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=Fw(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=Fw(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const U1=new WeakMap;class ip{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=U1.get(e);if(!i||i.from>=r||i.to<=t){let a=new ip(t,e.sliceString(t,r));return U1.set(e,a),a}if(i.from==t&&i.to==r)return i;let{text:s,from:o}=i;return o>t&&(s=e.sliceString(t,o)+s,o=t),i.to<r&&(s+=e.sliceString(i.to,r)),U1.set(e,new ip(o,s)),new ip(t,s.slice(t-o,r-o))}}class Z5{constructor(e,t,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=J5,this.matchPos=Fw(e,i),this.re=new RegExp(t,aO+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=ip.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,i=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this.matchPos=Fw(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ip.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Q5.prototype[Symbol.iterator]=Z5.prototype[Symbol.iterator]=function(){return this});function Sge(n){try{return new RegExp(n,aO),!0}catch{return!1}}function Fw(n,e){if(e>=n.length)return e;let t=n.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function tA(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=sr("input",{class:"cm-textfield",name:"line",value:e}),r=sr("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),n.dispatch({effects:Bw.of(!1)}),n.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},sr("label",n.state.phrase("Go to line"),": ",t)," ",sr("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!s)return;let{state:o}=n,a=o.doc.lineAt(o.selection.main.head),[,l,c,h,d]=s,p=h?+h.slice(1):0,y=c?+c:a.number;if(c&&d){let E=y/100;l&&(E=E*(l=="-"?-1:1)+a.number/o.doc.lines),y=Math.round(o.doc.lines*E)}else c&&l&&(y=y*(l=="-"?-1:1)+a.number);let w=o.doc.line(Math.max(1,Math.min(o.doc.lines,y))),S=$e.cursor(w.from+Math.max(0,Math.min(p,w.length)));n.dispatch({effects:[Bw.of(!1),vt.scrollIntoView(S.from,{y:"center"})],selection:S}),n.focus()}return{dom:r}}const Bw=en.define(),f2=Jr.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(Bw)&&(n=t.value);return n},provide:n=>ay.from(n,e=>e?tA:null)}),Ege=n=>{let e=oy(n,tA);if(!e){let t=[Bw.of(!0)];n.state.field(f2,!1)==null&&t.push(en.appendConfig.of([f2,Tge])),n.dispatch({effects:t}),e=oy(n,tA)}return e&&e.dom.querySelector("input").select(),!0},Tge=vt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),_ge={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},xge=Ct.define({combine(n){return Yl(n,_ge,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function Age(n){return[Rge,kge]}const Ige=Lt.mark({class:"cm-selectionMatch"}),Cge=Lt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function d2(n,e,t,r){return(t==0||n(e.sliceDoc(t-1,t))!=Tr.Word)&&(r==e.doc.length||n(e.sliceDoc(r,r+1))!=Tr.Word)}function Oge(n,e,t,r){return n(e.sliceDoc(t,t+1))==Tr.Word&&n(e.sliceDoc(r-1,r))==Tr.Word}const kge=kr.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(xge),{state:t}=n,r=t.selection;if(r.ranges.length>1)return Lt.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return Lt.none;let l=t.wordAt(i.head);if(!l)return Lt.none;o=t.charCategorizer(i.head),s=t.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return Lt.none;if(e.wholeWords){if(s=t.sliceDoc(i.from,i.to),o=t.charCategorizer(i.head),!(d2(o,t,i.from,i.to)&&Oge(o,t,i.from,i.to)))return Lt.none}else if(s=t.sliceDoc(i.from,i.to),!s)return Lt.none}let a=[];for(let l of n.visibleRanges){let c=new Pp(t.doc,s,l.from,l.to);for(;!c.next().done;){let{from:h,to:d}=c.value;if((!o||d2(o,t,h,d))&&(i.empty&&h<=i.from&&d>=i.to?a.push(Cge.range(h,d)):(h>=i.to||d<=i.from)&&a.push(Ige.range(h,d)),a.length>e.maxMatches))return Lt.none}}return Lt.set(a)}},{decorations:n=>n.decorations}),Rge=vt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Pge=({state:n,dispatch:e})=>{let{selection:t}=n,r=$e.create(t.ranges.map(i=>n.wordAt(i.head)||$e.cursor(i.head)),t.mainIndex);return r.eq(t)?!1:(e(n.update({selection:r})),!0)};function Dge(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),s=i&&i.from==t.from&&i.to==t.to;for(let o=!1,a=new Pp(n.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Pp(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=n.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Mge=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return Pge({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=r))return!1;let i=Dge(n,r);return i?(e(n.update({selection:n.selection.addRange($e.range(i.from,i.to),!1),effects:vt.scrollIntoView(i.to)})),!0):!1},em=Ct.define({combine(n){return Yl(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Kge(e),scrollToMatch:e=>vt.scrollIntoView(e)})}});class e9{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Sge(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Fge(this):new Lge(this)}getCursor(e,t=0,r){let i=e.doc?e:Ln.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Vd(this,i,t,r):Ld(this,i,t,r)}}class t9{constructor(e){this.spec=e}}function Ld(n,e,t,r){return new Pp(e.doc,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?Nge(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Nge(n,e){return(t,r,i,s)=>((s>t||s+i.length<r)&&(s=Math.max(0,t-2),i=n.sliceString(s,Math.min(n.length,r+2))),(e(Uw(i,t-s))!=Tr.Word||e($w(i,t-s))!=Tr.Word)&&(e($w(i,r-s))!=Tr.Word||e(Uw(i,r-s))!=Tr.Word))}class Lge extends t9{constructor(e){super(e)}nextMatch(e,t,r){let i=Ld(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,t+this.spec.unquoted.length);i=Ld(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==t&&i.value.to==r?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let s=Math.max(t,i-1e4-this.spec.unquoted.length),o=Ld(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==t)return null;i-=1e4}}prevMatch(e,t,r){let i=this.prevMatchInRange(e,0,t);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=t||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=Ld(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=Ld(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Vd(n,e,t,r){return new Q5(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?Vge(e.charCategorizer(e.selection.main.head)):void 0},t,r)}function Uw(n,e){return n.slice(Wi(n,e,!1),e)}function $w(n,e){return n.slice(e,Wi(n,e))}function Vge(n){return(e,t,r)=>!r[0].length||(n(Uw(r.input,r.index))!=Tr.Word||n($w(r.input,r.index))!=Tr.Word)&&(n($w(r.input,r.index+r[0].length))!=Tr.Word||n(Uw(r.input,r.index+r[0].length))!=Tr.Word)}class Fge extends t9{nextMatch(e,t,r){let i=Vd(this.spec,e,r,e.doc.length).next();return i.done&&(i=Vd(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let s=Math.max(t,r-i*1e4),o=Vd(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==t||a.from>s+10))return a;if(s==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return t})}matchAll(e,t){let r=Vd(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=Vd(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const uy=en.define(),lO=en.define(),sh=Jr.define({create(n){return new $1(nA(n).create(),null)},update(n,e){for(let t of e.effects)t.is(uy)?n=new $1(t.value.create(),n.panel):t.is(lO)&&(n=new $1(n.query,t.value?cO:null));return n},provide:n=>ay.from(n,e=>e.panel)});class $1{constructor(e,t){this.query=e,this.panel=t}}const Bge=Lt.mark({class:"cm-searchMatch"}),Uge=Lt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),$ge=kr.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(sh))}update(n){let e=n.state.field(sh);(e!=n.startState.field(sh)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Lt.none;let{view:t}=this,r=new va;for(let i=0,s=t.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;n.highlight(t.state,a,l,(c,h)=>{let d=t.state.selection.ranges.some(p=>p.from==c&&p.to==h);r.add(c,h,d?Uge:Bge)})}return r.finish()}},{decorations:n=>n.decorations});function Jy(n){return e=>{let t=e.state.field(sh,!1);return t&&t.query.spec.valid?n(e,t):i9(e)}}const Hw=Jy((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state,t,t);if(!r)return!1;let i=$e.single(r.from,r.to),s=n.state.facet(em);return n.dispatch({selection:i,effects:[uO(n,r),s.scrollToMatch(i.main,n)],userEvent:"select.search"}),r9(n),!0}),Ww=Jy((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t,r,r);if(!i)return!1;let s=$e.single(i.from,i.to),o=n.state.facet(em);return n.dispatch({selection:s,effects:[uO(n,i),o.scrollToMatch(s.main,n)],userEvent:"select.search"}),r9(n),!0}),Hge=Jy((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:$e.create(t.map(r=>$e.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),Wge=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,s=[],o=0;for(let a=new Pp(n.doc,n.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push($e.range(a.value.from,a.value.to))}return e(n.update({selection:$e.create(s,o),userEvent:"select.search.matches"})),!0},p2=Jy((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,r,r);if(!s)return!1;let o=s,a=[],l,c,h=[];if(o.from==r&&o.to==i&&(c=t.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(t,o.from,o.to),h.push(vt.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),o){let d=a.length==0||a[0].from>=s.to?0:s.to-s.from-c.length;l=$e.single(o.from-d,o.to-d),h.push(uO(n,o)),h.push(t.facet(em).scrollToMatch(l.main,n))}return n.dispatch({changes:a,selection:l,effects:h,userEvent:"input.replace"}),!0}),zge=Jy((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:vt.announce.of(r),userEvent:"input.replace.all"}),!0});function cO(n){return n.state.facet(em).createPanel(n)}function nA(n,e){var t,r,i,s,o;let a=n.selection.main,l=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=n.facet(em);return new e9({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:c.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function n9(n){let e=oy(n,cO);return e&&e.dom.querySelector("[main-field]")}function r9(n){let e=n9(n);e&&e==n.root.activeElement&&e.select()}const i9=n=>{let e=n.state.field(sh,!1);if(e&&e.panel){let t=n9(n);if(t&&t!=n.root.activeElement){let r=nA(n.state,e.query.spec);r.valid&&n.dispatch({effects:uy.of(r)}),t.focus(),t.select()}}else n.dispatch({effects:[lO.of(!0),e?uy.of(nA(n.state,e.query.spec)):en.appendConfig.of(qge)]});return!0},s9=n=>{let e=n.state.field(sh,!1);if(!e||!e.panel)return!1;let t=oy(n,cO);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:lO.of(!1)}),!0},jge=[{key:"Mod-f",run:i9,scope:"editor search-panel"},{key:"F3",run:Hw,shift:Ww,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Hw,shift:Ww,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:s9,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Wge},{key:"Mod-Alt-g",run:Ege},{key:"Mod-d",run:Mge,preventDefault:!0}];class Kge{constructor(e){this.view=e;let t=this.query=e.state.field(sh).query.spec;this.commit=this.commit.bind(this),this.searchField=sr("input",{value:t.search,placeholder:Oo(e,"Find"),"aria-label":Oo(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=sr("input",{value:t.replace,placeholder:Oo(e,"Replace"),"aria-label":Oo(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=sr("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=sr("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=sr("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function r(i,s,o){return sr("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=sr("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Hw(e),[Oo(e,"next")]),r("prev",()=>Ww(e),[Oo(e,"previous")]),r("select",()=>Hge(e),[Oo(e,"all")]),sr("label",null,[this.caseField,Oo(e,"match case")]),sr("label",null,[this.reField,Oo(e,"regexp")]),sr("label",null,[this.wordField,Oo(e,"by word")]),...e.state.readOnly?[]:[sr("br"),this.replaceField,r("replace",()=>p2(e),[Oo(e,"replace")]),r("replaceAll",()=>zge(e),[Oo(e,"replace all")])],sr("button",{name:"close",onclick:()=>s9(e),"aria-label":Oo(e,"close"),type:"button"},[""])])}commit(){let e=new e9({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:uy.of(e)}))}keydown(e){Zfe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Ww:Hw)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),p2(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(uy)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(em).top}}function Oo(n,e){return n.state.phrase(e)}const C0=30,O0=/[\s\.,:;?!]/;function uO(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,s=Math.max(r.from,e-C0),o=Math.min(i,t+C0),a=n.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<C0;l++)if(!O0.test(a[l+1])&&O0.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-C0;l--)if(!O0.test(a[l-1])&&O0.test(a[l])){a=a.slice(0,l);break}}return vt.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${r.number}.`)}const Gge=vt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),qge=[sh,id.low($ge),Gge];class o9{constructor(e,t,r,i){this.state=e,this.pos=t,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=ys(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),s=i.search(a9(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function m2(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Yge(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let r=m2(e)+m2(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Xge(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:Yge(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}class g2{constructor(e,t,r,i){this.completion=e,this.source=t,this.match=r,this.score=i}}function Rf(n){return n.selection.main.from}function a9(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?n:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const l9=Jc.define();function Jge(n,e,t,r){let{main:i}=n.selection,s=t-i.from,o=r-i.from;return Object.assign(Object.assign({},n.changeByRange(a=>{if(a!=i&&t!=r&&n.sliceDoc(a.from+s,a.from+o)!=n.sliceDoc(t,r))return{range:a};let l=n.toText(e);return{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:l},range:$e.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const y2=new WeakMap;function Qge(n){if(!Array.isArray(n))return n;let e=y2.get(n);return e||y2.set(n,e=Xge(n)),e}const zw=en.define(),hy=en.define();class Zge{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=oo(e,t),i=Dl(r);this.chars.push(r);let s=e.slice(t,t+i),o=s.toUpperCase();this.folded.push(oo(o==s?s.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:s,byWord:o}=this;if(t.length==1){let L=oo(e,0),P=Dl(L),F=P==e.length?0:-100;if(L!=t[0])if(L==r[0])F+=-200;else return null;return this.ret(F,[0,P])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,c=0;if(a<0){for(let L=0,P=Math.min(e.length,200);L<P&&c<l;){let F=oo(e,L);(F==t[c]||F==r[c])&&(i[c++]=L),L+=Dl(F)}if(c<l)return null}let h=0,d=0,p=!1,y=0,w=-1,S=-1,E=/[a-z]/.test(e),C=!0;for(let L=0,P=Math.min(e.length,200),F=0;L<P&&d<l;){let U=oo(e,L);a<0&&(h<l&&U==t[h]&&(s[h++]=L),y<l&&(U==t[y]||U==r[y]?(y==0&&(w=L),S=L+1,y++):y=0));let j,N=U<255?U>=48&&U<=57||U>=97&&U<=122?2:U>=65&&U<=90?1:0:(j=NC(U))!=j.toLowerCase()?1:j!=j.toUpperCase()?2:0;(!L||N==1&&E||F==0&&N!=0)&&(t[d]==U||r[d]==U&&(p=!0)?o[d++]=L:o.length&&(C=!1)),F=N,L+=Dl(U)}return d==l&&o[0]==0&&C?this.result(-100+(p?-200:0),o,e):y==l&&w==0?this.ret(-200-e.length+(S==e.length?0:-100),[0,S]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):y==l?this.ret(-900-e.length,[w,S]):d==l?this.result(-100+(p?-200:0)+-700+(C?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[],s=0;for(let o of t){let a=o+(this.astral?Dl(oo(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}class eye{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const Ii=Ct.define({combine(n){return Yl(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:tye,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>v2(e(r),t(r)),optionClass:(e,t)=>r=>v2(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function v2(n,e){return n?e?n+" "+e:n:e}function tye(n,e,t,r,i,s){let o=n.textDirection==mr.RTL,a=o,l=!1,c="top",h,d,p=e.left-i.left,y=i.right-e.right,w=r.right-r.left,S=r.bottom-r.top;if(a&&p<Math.min(w,y)?a=!1:!a&&y<Math.min(w,p)&&(a=!0),w<=(a?p:y))h=Math.max(i.top,Math.min(t.top,i.bottom-S))-e.top,d=Math.min(400,a?p:y);else{l=!0,d=Math.min(400,(o?e.right:i.right-e.left)-30);let L=i.bottom-e.bottom;L>=S||L>e.top?h=t.bottom-e.top:(c="bottom",h=e.bottom-t.top)}let E=(e.bottom-e.top)/s.offsetHeight,C=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${h/E}px; max-width: ${d/C}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function nye(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=t.displayLabel||t.label,l=0;for(let c=0;c<s.length;){let h=s[c++],d=s[c++];h>l&&o.appendChild(document.createTextNode(a.slice(l,h)));let p=o.appendChild(document.createElement("span"));p.appendChild(document.createTextNode(a.slice(h,d))),p.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function H1(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class rye{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:s,selected:o}=i.open,a=e.state.facet(Ii);this.optionContent=nye(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=H1(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(t).open;for(let h=l.target,d;h&&h!=this.dom;h=h.parentNode)if(h.nodeName=="LI"&&(d=/-(\d+)$/.exec(h.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(Ii).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:hy.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=H1(s.length,o,e.state.facet(Ii).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=H1(t.options.length,t.selected,this.view.state.facet(Ii).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>ho(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&sye(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,t.bottom)-10||i.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(Ii).positionInfo(this.view,t,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let p=typeof c=="string"?c:c.name;if(p!=s&&(o>r.from||r.from==0))if(s=p,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let y=i.appendChild(document.createElement("completion-section"));y.textContent=p}}const h=i.appendChild(document.createElement("li"));h.id=t+"-"+o,h.setAttribute("role","option");let d=this.optionClass(a);d&&(h.className=d);for(let p of this.optionContent){let y=p(a,this.view.state,this.view,l);y&&h.appendChild(y)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function iye(n,e){return t=>new rye(t,n,e)}function sye(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=t.height/n.offsetHeight;r.top<t.top?n.scrollTop-=(t.top-r.top)/i:r.bottom>t.bottom&&(n.scrollTop+=(r.bottom-t.bottom)/i)}function b2(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function oye(n,e){let t=[],r=null,i=c=>{t.push(c);let{section:h}=c.completion;if(h){r||(r=[]);let d=typeof h=="string"?h:h.name;r.some(p=>p.name==d)||r.push(typeof h=="string"?{name:d}:h)}},s=e.facet(Ii);for(let c of n)if(c.hasResult()){let h=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)i(new g2(d,c.source,h?h(d):[],1e9-t.length));else{let d=e.sliceDoc(c.from,c.to),p,y=s.filterStrict?new eye(d):new Zge(d);for(let w of c.result.options)if(p=y.match(w.label)){let S=w.displayLabel?h?h(w,p.matched):[]:p.matched;i(new g2(w,c.source,S,p.score+(w.boost||0)))}}}if(r){let c=Object.create(null),h=0,d=(p,y)=>{var w,S;return((w=p.rank)!==null&&w!==void 0?w:1e9)-((S=y.rank)!==null&&S!==void 0?S:1e9)||(p.name<y.name?-1:1)};for(let p of r.sort(d))h-=1e5,c[p.name]=h;for(let p of t){let{section:y}=p.completion;y&&(p.score+=c[typeof y=="string"?y:y.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of t.sort((h,d)=>d.score-h.score||l(h.completion,d.completion))){let h=c.completion;!a||a.label!=h.label||a.detail!=h.detail||a.type!=null&&h.type!=null&&a.type!=h.type||a.apply!=h.apply||a.boost!=h.boost?o.push(c):b2(c.completion)>b2(a)&&(o[o.length-1]=c),a=c.completion}return o}class zd{constructor(e,t,r,i,s,o){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new zd(this.options,w2(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,s,o){if(i&&!o&&e.some(c=>c.isPending))return i.setDisabled();let a=oye(e,t);if(!a.length)return i&&e.some(c=>c.isPending)?i.setDisabled():null;let l=t.facet(Ii).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let c=i.options[i.selected].completion;for(let h=0;h<a.length;h++)if(a[h].completion==c){l=h;break}}return new zd(a,w2(r,l),{pos:e.reduce((c,h)=>h.hasResult()?Math.min(c,h.from):c,1e8),create:fye,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new zd(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new zd(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class jw{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new jw(uye,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(Ii),s=(r.override||t.languageDataAt("autocomplete",Rf(t)).map(Qge)).map(l=>(this.active.find(h=>h.source==l)||new ca(l,this.active.some(h=>h.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(hO));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!aye(s,this.active)||a?o=zd.build(s,t,this.id,o,r,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new ca(l.source,0):l));for(let l of e.effects)l.is(u9)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new jw(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?lye:cye}}function aye(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;r<e.length&&!e[r].hasResult();)r++;let i=t==n.length,s=r==e.length;if(i||s)return i==s;if(n[t++].result!=e[r++].result)return!1}}const lye={"aria-autocomplete":"list"},cye={};function w2(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const uye=[];function c9(n,e){if(n.isUserEvent("input.complete")){let r=n.annotation(l9);if(r&&e.activateOnCompletion(r))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class ca{constructor(e,t,r=!1){this.source=e,this.state=t,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let r=c9(e,t),i=this;(r&8||r&16&&this.touches(e))&&(i=new ca(i.source,0)),r&4&&i.state==0&&(i=new ca(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(zw))i=new ca(i.source,1,s.value);else if(s.is(hy))i=new ca(i.source,0);else if(s.is(hO))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Rf(e.state))}}class sp extends ca{constructor(e,t,r,i,s,o){super(e,3,t),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,t){var r;if(!(t&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Rf(e.state);if(a>o||!i||t&2&&(Rf(e.startState)==this.from||a<this.limit))return new ca(this.source,t&4?1:0);let l=e.changes.mapPos(this.limit);return hye(i.validFor,e.state,s,o)?new sp(this.source,this.explicit,l,i,s,o):i.update&&(i=i.update(i,s,o,new o9(e.state,a,!1)))?new sp(this.source,this.explicit,l,i,i.from,(r=i.to)!==null&&r!==void 0?r:Rf(e.state)):new ca(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new sp(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ca(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function hye(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):a9(n,!0).test(i)}const hO=en.define({map(n,e){return n.map(t=>t.map(e))}}),u9=en.define(),lo=Jr.define({create(){return jw.start()},update(n,e){return n.update(e)},provide:n=>[JC.from(n,e=>e.tooltip),vt.contentAttributes.from(n,e=>e.attrs)]});function fO(n,e){const t=e.completion.apply||e.completion.label;let r=n.state.field(lo).active.find(i=>i.source==e.source);return r instanceof sp?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},Jge(n.state,t,r.from,r.to)),{annotations:l9.of(e.completion)})):t(n,e.completion,r.from,r.to),!0):!1}const fye=iye(lo,fO);function k0(n,e="option"){return t=>{let r=t.state.field(lo,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(Ii).interactionDelay)return!1;let i=1,s;e=="page"&&(s=J6(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),t.dispatch({effects:u9.of(a)}),!0}}const dye=n=>{let e=n.state.field(lo,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Ii).interactionDelay?!1:fO(n,e.open.options[e.open.selected])},S2=n=>n.state.field(lo,!1)?(n.dispatch({effects:zw.of(!0)}),!0):!1,pye=n=>{let e=n.state.field(lo,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:hy.of(null)}),!0)};class mye{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const gye=50,yye=1e3,vye=kr.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(lo).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(lo),t=n.state.facet(Ii);if(!n.selectionSet&&!n.docChanged&&n.startState.field(lo)==e)return;let r=n.transactions.some(s=>{let o=c9(s,t);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&n.docChanged||o.updates.length+n.transactions.length>gye&&Date.now()-o.time>yye){for(let a of o.context.abortListeners)try{a()}catch(l){ho(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(s=>s.effects.some(o=>o.is(zw)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of n.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(lo);for(let t of e.active)t.isPending&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ii).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=Rf(e),r=new o9(e,t,n.explicit,this.view),i=new mye(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:hy.of(null)}),ho(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ii).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Ii),r=this.view.state.field(lo);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=Rf(s.updates.length?s.updates[0].startState:this.view.state),l=Math.min(a,s.done.from+(s.active.explicit?0:1)),c=new sp(s.active.source,s.active.explicit,l,s.done,s.done.from,(n=s.done.to)!==null&&n!==void 0?n:a);for(let h of s.updates)c=c.update(h,t);if(c.hasResult()){e.push(c);continue}}let o=r.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new ca(s.active.source,0);for(let l of s.updates)a=a.update(l,t);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:hO.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(lo,!1);if(e&&e.tooltip&&this.view.state.facet(Ii).closeOnBlur){let t=e.open&&J6(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:hy.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:zw.of(!1)}),20),this.composing=0}}}),bye=typeof navigator=="object"&&/Win/.test(navigator.platform),wye=id.highest(vt.domEventHandlers({keydown(n,e){let t=e.state.field(lo,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(bye&&n.altKey)||n.metaKey)return!1;let r=t.open.options[t.open.selected],i=t.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(n.key)>-1&&fO(e,r),!1}})),Sye=vt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),fy={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},bf=en.define({map(n,e){let t=e.mapPos(n,-1,Ps.TrackAfter);return t??void 0}}),dO=new class extends zf{};dO.startSide=1;dO.endSide=-1;const h9=Jr.define({create(){return Un.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:r=>r>=t.from&&r<=t.to})}for(let t of e.effects)t.is(bf)&&(n=n.update({add:[dO.range(t.value,t.value+1)]}));return n}});function Eye(){return[_ye,h9]}const W1="()[]{}<>";function f9(n){for(let e=0;e<W1.length;e+=2)if(W1.charCodeAt(e)==n)return W1.charAt(e+1);return NC(n<128?n:n+1)}function d9(n,e){return n.languageDataAt("closeBrackets",e)[0]||fy}const Tye=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),_ye=vt.inputHandler.of((n,e,t,r)=>{if((Tye?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&Dl(oo(r,0))==1||e!=i.from||t!=i.to)return!1;let s=Iye(n.state,r);return s?(n.dispatch(s),!0):!1}),xye=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=d9(n,n.selection.main.head).brackets||fy.brackets,i=null,s=n.changeByRange(o=>{if(o.empty){let a=Cye(n.doc,o.head);for(let l of r)if(l==a&&EE(n.doc,o.head)==f9(oo(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:$e.cursor(o.head-l.length)}}return{range:i=o}});return i||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},Aye=[{key:"Backspace",run:xye}];function Iye(n,e){let t=d9(n,n.selection.main.head),r=t.brackets||fy.brackets;for(let i of r){let s=f9(oo(i,0));if(e==i)return s==i?Rye(n,i,r.indexOf(i+i+i)>-1,t):Oye(n,i,s,t.before||fy.before);if(e==s&&p9(n,n.selection.main.from))return kye(n,i,s)}return null}function p9(n,e){let t=!1;return n.field(h9).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function EE(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Dl(oo(t,0)))}function Cye(n,e){let t=n.sliceString(e-2,e);return Dl(oo(t,0))==t.length?t:t.slice(1)}function Oye(n,e,t,r){let i=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:bf.of(o.to+e.length),range:$e.range(o.anchor+e.length,o.head+e.length)};let a=EE(n.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+t,from:o.head},effects:bf.of(o.head+e.length),range:$e.cursor(o.head+e.length)}:{range:i=o}});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function kye(n,e,t){let r=null,i=n.changeByRange(s=>s.empty&&EE(n.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:$e.cursor(s.head+t.length)}:r={range:s});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Rye(n,e,t,r){let i=r.stringPrefixes||fy.stringPrefixes,s=null,o=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:bf.of(a.to+e.length),range:$e.range(a.anchor+e.length,a.head+e.length)};let l=a.head,c=EE(n.doc,l),h;if(c==e){if(E2(n,l))return{changes:{insert:e+e,from:l},effects:bf.of(l+e.length),range:$e.cursor(l+e.length)};if(p9(n,l)){let p=t&&n.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+p.length,insert:p},range:$e.cursor(l+p.length)}}}else{if(t&&n.sliceDoc(l-2*e.length,l)==e+e&&(h=T2(n,l-2*e.length,i))>-1&&E2(n,h))return{changes:{insert:e+e+e+e,from:l},effects:bf.of(l+e.length),range:$e.cursor(l+e.length)};if(n.charCategorizer(l)(c)!=Tr.Word&&T2(n,l,i)>-1&&!Pye(n,l,e,i))return{changes:{insert:e+e,from:l},effects:bf.of(l+e.length),range:$e.cursor(l+e.length)}}return{range:s=a}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function E2(n,e){let t=ys(n).resolveInner(e+1);return t.parent&&t.from==e}function Pye(n,e,t,r){let i=ys(n).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+s)),l=a.indexOf(t);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let h=i.firstChild;for(;h&&h.from==i.from&&h.to-h.from>t.length+l;){if(n.sliceDoc(h.to-t.length,h.to)==t)return!1;h=h.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function T2(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=Tr.Word)return e;for(let i of t){let s=e-i.length;if(n.sliceDoc(s,e)==i&&r(n.sliceDoc(s-1,s))!=Tr.Word)return s}return-1}function m9(n={}){return[wye,lo,Ii.of(n),vye,Dye,Sye]}const g9=[{key:"Ctrl-Space",run:S2},{mac:"Alt-`",run:S2},{key:"Escape",run:pye},{key:"ArrowDown",run:k0(!0)},{key:"ArrowUp",run:k0(!1)},{key:"PageDown",run:k0(!0,"page")},{key:"PageUp",run:k0(!1,"page")},{key:"Enter",run:dye}],Dye=id.highest(YC.computeN([Ii],n=>n.facet(Ii).defaultKeymap?[g9]:[]));class _2{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class ff{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=e,s=r.facet(dy).markerFilter;s&&(i=s(i,r));let o=e.slice().sort((d,p)=>d.from-p.from||d.to-p.to),a=new va,l=[],c=0;for(let d=0;;){let p=d==o.length?null:o[d];if(!p&&!l.length)break;let y,w;for(l.length?(y=c,w=l.reduce((E,C)=>Math.min(E,C.to),p&&p.from>y?p.from:1e8)):(y=p.from,w=p.to,l.push(p),d++);d<o.length;){let E=o[d];if(E.from==y&&(E.to>E.from||E.to==y))l.push(E),d++,w=Math.min(E.to,w);else{w=Math.min(E.from,w);break}}let S=Kye(l);if(l.some(E=>E.from==E.to||E.from==E.to-1&&r.doc.lineAt(E.from).to==E.from))a.add(y,y,Lt.widget({widget:new Hye(S),diagnostics:l.slice()}));else{let E=l.reduce((C,L)=>L.markClass?C+" "+L.markClass:C,"");a.add(y,w,Lt.mark({class:"cm-lintRange cm-lintRange-"+S+E,diagnostics:l.slice(),inclusiveEnd:l.some(C=>C.to>w)}))}c=w;for(let E=0;E<l.length;E++)l[E].to<=c&&l.splice(E--,1)}let h=a.finish();return new ff(h,t,Dp(h))}}function Dp(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new _2(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new _2(r.from,s,r.diagnostic)}}),r}function Mye(n,e){let t=e.pos,r=e.end||t,i=n.state.facet(dy).hideOn(n,t,r);if(i!=null)return i;let s=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(o=>o.is(y9))||n.changes.touchesRange(s.from,Math.max(s.to,r)))}function Nye(n,e){return n.field(Lo,!1)?e:e.concat(en.appendConfig.of(Gye))}const y9=en.define(),pO=en.define(),v9=en.define(),Lo=Jr.define({create(){return new ff(Lt.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),r=null,i=n.panel;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);r=Dp(t,n.selected.diagnostic,s)||Dp(t,null,s)}!t.size&&i&&e.state.facet(dy).autoPanel&&(i=null),n=new ff(t,i,r)}for(let t of e.effects)if(t.is(y9)){let r=e.state.facet(dy).autoPanel?t.value.length?py.open:null:n.panel;n=ff.init(t.value,r,e.state)}else t.is(pO)?n=new ff(n.diagnostics,t.value?py.open:null,n.selected):t.is(v9)&&(n=new ff(n.diagnostics,n.panel,t.value));return n},provide:n=>[ay.from(n,e=>e.panel),vt.decorations.from(n,e=>e.diagnostics)]}),Lye=Lt.mark({class:"cm-lintRange cm-lintRange-active"});function Vye(n,e,t){let{diagnostics:r}=n.state.field(Lo),i,s=-1,o=-1;r.between(e-(t<0?1:0),e+(t>0?1:0),(l,c,{spec:h})=>{if(e>=l&&e<=c&&(l==c||(e>l||t>0)&&(e<c||t<0)))return i=h.diagnostics,s=l,o=c,!1});let a=n.state.facet(dy).tooltipFilter;return i&&a&&(i=a(i,n.state)),i?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:Fye(n,i)}}}:null}function Fye(n,e){return sr("ul",{class:"cm-tooltip-lint"},e.map(t=>w9(n,t,!1)))}const Bye=n=>{let e=n.state.field(Lo,!1);(!e||!e.panel)&&n.dispatch({effects:Nye(n.state,[pO.of(!0)])});let t=oy(n,py.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},x2=n=>{let e=n.state.field(Lo,!1);return!e||!e.panel?!1:(n.dispatch({effects:pO.of(!1)}),!0)},Uye=n=>{let e=n.state.field(Lo,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)?!1:(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},$ye=[{key:"Mod-Shift-m",run:Bye,preventDefault:!0},{key:"F8",run:Uye}],dy=Ct.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},Yl(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t}))}});function b9(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function w9(n,e,t){var r;let i=t?b9(e.actions):[];return sr("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},sr("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=p=>{if(p.preventDefault(),a)return;a=!0;let y=Dp(n.state.field(Lo).diagnostics,e);y&&s.apply(n,y.from,y.to)},{name:c}=s,h=i[o]?c.indexOf(i[o]):-1,d=h<0?c:[c.slice(0,h),sr("u",c.slice(h,h+1)),c.slice(h+1)];return sr("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${h<0?"":` (access key "${i[o]})"`}.`},d)}),e.source&&sr("div",{class:"cm-diagnosticSource"},e.source))}class Hye extends Qc{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return sr("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class A2{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=w9(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class py{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)x2(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=b9(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Dp(this.view.state.field(Lo).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=sr("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=sr("div",{class:"cm-panel-lint"},this.list,sr("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>x2(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Lo).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Lo),r=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let h of c.diagnostics){if(o.has(h))continue;o.add(h);let d=-1,p;for(let y=r;y<this.items.length;y++)if(this.items[y].diagnostic==h){d=y;break}d<0?(p=new A2(this.view,h),this.items.splice(r,0,p),i=!0):(p=this.items[d],d>r&&(this.items.splice(r,d-r),i=!0)),t&&p.diagnostic==t.diagnostic?p.dom.hasAttribute("aria-selected")||(p.dom.setAttribute("aria-selected","true"),s=p):p.dom.hasAttribute("aria-selected")&&p.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new A2(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Lo),r=Dp(t.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:v9.of(r)})}static open(e){return new py(e)}}function Wye(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function R0(n){return Wye(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const zye=vt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:R0("#d11")},".cm-lintRange-warning":{backgroundImage:R0("orange")},".cm-lintRange-info":{backgroundImage:R0("#999")},".cm-lintRange-hint":{backgroundImage:R0("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function jye(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function Kye(n){let e="hint",t=1;for(let r of n){let i=jye(r.severity);i>t&&(t=i,e=r.severity)}return e}const Gye=[Lo,vt.decorations.compute([Lo],n=>{let{selected:e,panel:t}=n.field(Lo);return!e||!t||e.from==e.to?Lt.none:Lt.set([Lye.range(e.from,e.to)])}),Bde(Vye,{hideOn:Mye}),zye],qye=[Xde(),Zde(),gde(),vme(),jpe(),sde(),ude(),Ln.allowMultipleSelections.of(!0),Rpe(),g5(Ype,{fallback:!0}),nme(),Eye(),m9(),Cde(),Rde(),Ede(),Age(),YC.of([...Aye,...wge,...jge,...Ime,...$pe,...g9,...$ye])],Yye="#e5c07b",I2="#e06c75",Xye="#56b6c2",Jye="#ffffff",Tb="#abb2bf",rA="#7d8799",Qye="#61afef",Zye="#98c379",C2="#d19a66",eve="#c678dd",tve="#21252b",O2="#2c313a",k2="#282c34",z1="#353a42",nve="#3E4451",R2="#528bff",rve=vt.theme({"&":{color:Tb,backgroundColor:k2},".cm-content":{caretColor:R2},".cm-cursor, .cm-dropCursor":{borderLeftColor:R2},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:nve},".cm-panels":{backgroundColor:tve,color:Tb},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:k2,color:rA,border:"none"},".cm-activeLineGutter":{backgroundColor:O2},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:z1},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:z1,borderBottomColor:z1},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:O2,color:Tb}}},{dark:!0}),ive=Yy.define([{tag:De.keyword,color:eve},{tag:[De.name,De.deleted,De.character,De.propertyName,De.macroName],color:I2},{tag:[De.function(De.variableName),De.labelName],color:Qye},{tag:[De.color,De.constant(De.name),De.standard(De.name)],color:C2},{tag:[De.definition(De.name),De.separator],color:Tb},{tag:[De.typeName,De.className,De.number,De.changed,De.annotation,De.modifier,De.self,De.namespace],color:Yye},{tag:[De.operator,De.operatorKeyword,De.url,De.escape,De.regexp,De.link,De.special(De.string)],color:Xye},{tag:[De.meta,De.comment],color:rA},{tag:De.strong,fontWeight:"bold"},{tag:De.emphasis,fontStyle:"italic"},{tag:De.strikethrough,textDecoration:"line-through"},{tag:De.link,color:rA,textDecoration:"underline"},{tag:De.heading,fontWeight:"bold",color:I2},{tag:[De.atom,De.bool,De.special(De.variableName)],color:C2},{tag:[De.processingInstruction,De.string,De.inserted],color:Zye},{tag:De.invalid,color:Jye}]),j1=[rve,g5(ive)];function sve(n){return new Worker(""+new URL("parser_worker-Dz2vZQTp.js",import.meta.url).href,{name:n==null?void 0:n.name})}const iA={pageChanged:!1,clearParsedResults:!1,init(n){if(!n){console.error("pinia not initialized");return}const e=C$(n),{selectedPageId:t}=TY(e);wi(t,(r,i)=>{r!==null&&r!==i&&(this.pageChanged=!0,this.clearParsedResults=!0)})},reset(){this.pageChanged=!1,this.clearParsedResults=!1}},mO=en.define(),_b=en.define(),ove=en.define();class ave{constructor(){this.variableDefinitions=new Map,this.lineDependencies=new Map,this.dependentLines=new Map,this.debugMode=!1}setDebugMode(e){this.debugMode=e}log(...e){this.debugMode&&console.log("[VariableDependencyTracker]",...e)}registerVariableDefinition(e,t){if(!e||typeof t!="number")return;const r=this.variableDefinitions.get(e);r!==void 0&&r!==t&&this.log(`Variable "${e}" redefined from line ${r} to line ${t}`),this.variableDefinitions.set(e,t),this.log(`Registered variable "${e}" defined on line ${t}`)}registerVariableDependency(e,t){if(!(!Array.isArray(t)||t.length===0||typeof e!="number")){if(this.lineDependencies.has(e)){const r=this.lineDependencies.get(e);for(const i of r){const s=this.dependentLines.get(i);s&&(s.delete(e),s.size===0&&this.dependentLines.delete(i))}}this.lineDependencies.set(e,new Set(t)),this.log(`Line ${e} depends on variables:`,t);for(const r of t)this.variableDefinitions.has(r)&&(this.dependentLines.has(r)||this.dependentLines.set(r,new Set),this.dependentLines.get(r).add(e))}}getLinesToReprocess(e){const t=new Set;for(const[i,s]of this.variableDefinitions.entries())if(s===e){this.log(`Line ${e} defines variable "${i}" - checking dependents`);const o=this.dependentLines.get(i)||new Set;for(const a of o)a!==e&&(t.add(a),this.log(`Adding dependent line ${a} for reprocessing`))}const r=Array.from(t);return r.length>0&&this.log(`Found ${r.length} lines that need reprocessing due to changes on line ${e}`),r}handleLineDeleted(e){const t=[];for(const[r,i]of this.variableDefinitions.entries())i===e&&t.push(r);for(const r of t){this.log(`Removing variable "${r}" definition from deleted line ${e}`),this.variableDefinitions.delete(r);const i=this.dependentLines.get(r)||new Set;this.log(`Variable "${r}" had ${i.size} dependent lines that will be affected`),this.dependentLines.delete(r)}this.lineDependencies.delete(e);for(const[r,i]of this.dependentLines.entries())i.has(e)&&(i.delete(e),i.size===0&&this.dependentLines.delete(r))}clear(){this.log("Clearing all variable dependency data"),this.variableDefinitions.clear(),this.lineDependencies.clear(),this.dependentLines.clear()}updateLineNumbers(e){this.log("Updating line numbers after document change");const t=new Map;for(const[i,s]of this.variableDefinitions.entries()){const o=e.get(s);o!==void 0?(t.set(i,o),this.log(`Updated variable "${i}" definition from line ${s} to ${o}`)):this.log(`Variable "${i}" definition on line ${s} no longer exists`)}this.variableDefinitions=t;const r=new Map;for(const[i,s]of this.lineDependencies.entries()){const o=e.get(i);o!==void 0&&r.set(o,s)}this.lineDependencies=r;for(const[i,s]of this.dependentLines.entries()){const o=new Set;for(const a of s){const l=e.get(a);l!==void 0&&o.add(l)}o.size>0?this.dependentLines.set(i,o):this.dependentLines.delete(i)}}dumpState(){console.log("=== Variable Dependency Tracker State ==="),console.log("Variable Definitions:",Object.fromEntries(this.variableDefinitions)),console.log("Line Dependencies:",Array.from(this.lineDependencies.entries()).map(([e,t])=>[e,Array.from(t)])),console.log("Dependent Lines:",Array.from(this.dependentLines.entries()).map(([e,t])=>[e,Array.from(t)])),console.log("=========================================")}}class lve{constructor(e){this.calendarStore=e,this.eventMap=new Map}rebuildEvents(e){const t=[];for(let s=1;s<=e.lines;s++){const o=e.line(s).text.trim();if(!o)continue;const a=this.getParsedResult(s,o);a&&a.type==="event"&&t.push(JSON.parse(JSON.stringify(a.original)))}const r=new Map;t.forEach(s=>{const o=this.calendarStore.generateEventId(s);r.set(o,s)});const i=new Map;return Object.values(this.calendarStore.groupedByMonth).forEach(s=>{s.forEach(o=>{i.set(o.id,o)})}),i.forEach((s,o)=>{r.has(o)||this.calendarStore.removeEvent(s)}),r.forEach((s,o)=>{i.has(o)?JSON.stringify(i.get(o))!==JSON.stringify(s)&&this.calendarStore.updateEvent(i.get(o),s):this.calendarStore.addEvent(s)}),this.eventMap=r,{added:r.size,removed:i.size-r.size}}setParsedResult(e,t){this.parsedResults||(this.parsedResults=new Map),this.parsedResults.set(e,t)}getParsedResult(e,t){return this.parsedResults?this.parsedResults.get(e):null}getEventsForLine(e){return Array.from(this.eventMap.values()).filter(t=>t.sourceLineNumber===e)}clear(){for(const[e,t]of this.eventMap)this.calendarStore.removeEvent(t.event);this.eventMap.clear(),this.parsedResults&&this.parsedResults.clear()}getEventMap(){return this.eventMap}}const Gw=class Gw extends Qc{constructor(e,t=!1,r,i){super(),this.text=e,this.isPinned=t,this.lineNumber=r,this.lineEnd=i}eq(e){return e instanceof Gw&&this.text===e.text&&this.isPinned===e.isPinned&&this.lineNumber===e.lineNumber&&this.lineEnd===e.lineEnd}toDOM(e){const t=document.createElement("span");t.className="ghost-text-wrapper",t.style.height="1.5em",t.style.position="relative",t.style.display="inline-flex",t.style.alignItems="center",t.style.verticalAlign="top";const r=document.createElement("span");r.textContent=`  ${this.text}`,r.className=`ghost-text ${this.isPinned?"pinned":""}`;const i=document.createElement("span");i.className="ghost-text-actions";const s=document.createElement("button");s.innerHTML=`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20 6L9 17l-5-5"></path>
        </svg>`,s.className="ghost-text-button apply-button",s.title="Insert result on new line",s.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation(),e.dispatch({changes:{from:this.lineEnd,insert:`
${this.text}`},selection:{anchor:this.lineEnd+this.text.length+1}}),s.classList.add("applied"),setTimeout(()=>s.classList.remove("applied"),1e3)});const o=document.createElement("button");o.innerHTML=`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
        </svg>`,o.className="ghost-text-button copy-button",o.title="Copy result",o.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation();try{navigator.clipboard.writeText(this.text).then(()=>{o.classList.add("copied"),setTimeout(()=>o.classList.remove("copied"),1e3)}).catch(console.error)}catch(c){console.error("Failed to copy text:",c)}});const a=document.createElement("button");return a.innerHTML=`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2L12 22M2 12L22 12"></path>
        </svg>`,a.className=`ghost-text-button pin-button ${this.isPinned?"active":""}`,a.title=this.isPinned?"Unpin result":"Pin result",a.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation(),e.dispatch({effects:mO.of({lineNumber:this.lineNumber})})}),i.appendChild(o),i.appendChild(a),t.appendChild(r),t.appendChild(i),t}ignoreEvent(e){return e.type!=="click"}};tR(Gw,"buttonSVGs",{apply:`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 6L9 17l-5-5"></path>
            </svg>`,copy:`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>`,pin:`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2L12 22M2 12L22 12"></path>
            </svg>`});let Kw=Gw;const K1=Jr.define({create(){return new Map},update(n,e){const t=new Map(n);if(e.docChanged){const r=e.changes,i=new Map;for(const[s,o]of t){const a=r.mapPos(e.startState.doc.line(s).from);if(a!==null){const l=e.state.doc.lineAt(a);i.set(l.number,e.state.doc.lineAt(a).text)}}t.clear(),i.forEach((s,o)=>t.set(o,s))}for(const r of e.effects)if(r.is(mO)){const{lineNumber:i}=r.value,s=e.state.doc.line(i).text;t.has(i)?t.delete(i):t.set(i,s)}return t}}),G1=Jr.define({create(){return new Map},update(n,e){const t=new Map(n);let r=!1;for(let i of e.effects)if(i.is(ove)){r=!0;break}if(r)return new Map;if(e.docChanged){const i=e.changes,s=new Map;for(const[o,a]of t)try{const l=e.startState.doc.line(o).from,c=i.mapPos(l);if(c!==null){const h=e.state.doc.lineAt(c);s.set(h.number,a)}}catch{continue}t.clear(),s.forEach((o,a)=>t.set(a,o))}for(let i of e.effects)if(i.is(_b)){const{lineNumber:s,result:o}=i.value;o!=null?t.set(s,o):t.delete(s)}return t}});function cve(n,e){let t=null;e=e;const r=new lve(n),i=new ave;function s(h){if(!t)return null;const d=t.state.doc;let p=null;try{const y=d.line(h);if(!y)return null;const w=y.from;p=d.lineAt(w).number}catch(y){console.error("Error finding current line number:",y)}return p}const o=new sve,a=new Map,l=new Map,c=new Map;return o.onmessage=h=>{const{lineNumber:d,result:p,variables:y}=h.data;a.delete(d);const w=s(d);if(r.setParsedResult(d,p),y){if(y.defines)for(const S of y.defines)i.registerVariableDefinition(S,w);y.uses&&y.uses.length>0&&i.registerVariableDependency(w,y.uses)}if(w===null&&(l.delete(d),c.delete(d)),p){const S=l.get(w);if((S==null?void 0:S.value)===p.value)return;l.set(w,p),t&&t.dispatch({effects:_b.of({lineNumber:w,result:p})})}else l.delete(w)},[K1,G1,kr.fromClass(class{constructor(h){this.view=h,t=h,this.decorations=this.computeDecorations(h)}update(h){if(h.docChanged){const d=new Map;for(let p=1;p<=h.startState.doc.lines;p++)try{const y=h.startState.doc.line(p).from,w=h.changes.mapPos(y);if(w!==null){const S=h.state.doc.lineAt(w).number;d.set(p,S)}}catch{}i.updateLineNumbers(d),iA.pageChanged&&(a.clear(),l.clear(),c.clear(),r.clear(),i.clear(),iA.reset())}if(h.docChanged||h.viewportChanged||this.pinnedResultsChanged(h))this.decorations=this.computeDecorations(h.view),r.rebuildEvents(h.state.doc);else if(h.transactions.some(d=>d.effects.some(p=>p.is(_b)))){const d=new va,p=h.view.state.field(K1),y=h.view.state.field(G1);for(let{from:w,to:S}of h.view.visibleRanges){let E=w;for(;E<=S;){const C=h.view.state.doc.lineAt(E),L=y.get(C.number);if(L){const P=Lt.widget({widget:new Kw(L.value,p.has(C.number),C.number,C.to),side:1});d.add(C.to,C.to,P)}E=C.to+1}}this.decorations=d.finish()}}pinnedResultsChanged(h){return h.transactions.some(d=>d.effects.some(p=>p.is(mO)||p.is(_b)))}computeDecorations(h){const d=new va,p=h.state.field(K1),y=h.state.field(G1),w=h.visibleRanges;for(let{from:S,to:E}of w){let C=S;for(;C<=E;){const L=h.state.doc.lineAt(C),P=L.number,F=L.text.trim();if(F)try{const U=c.get(P),j=!U||U.content!==F;if(j&&!a.has(P)){a.set(P,!0),c.set(P,{content:F,lastProcessed:Date.now()});const O=e.timezone||"UTC";if(o.postMessage({lineNumber:P,lineText:F,timezone:O}),i&&j){const A=i.getLinesToReprocess(P);for(const R of A)if(!a.has(R)){a.set(R,!0);const k=c.get(R);k&&(k.lastProcessed=Date.now());const D=h.state.doc.line(R).text.trim();o.postMessage({lineNumber:R,lineText:D,timezone:O})}}}const N=y.get(L.number);if(N&&N.value!==void 0){const O=Lt.widget({widget:new Kw(N&&N.value!==void 0?N.value:"",p.has(L.number),L.number,L.to),side:1});d.add(L.to,L.to,O)}}catch(U){console.error("Error processing line:",U)}else y.delete(P),a.delete(P),c.delete(P);C=L.to+1}}return d.finish()}},{decorations:h=>h.decorations}),vt.baseTheme({"&":{"--ghost-text-fg":"#888","--ghost-text-fg-active":"#ccc","--ghost-text-bg-hover":"rgba(127, 127, 127, 0.1)","--ghost-text-success":"#34D399"},"&.light":{"--ghost-text-fg":"#666","--ghost-text-fg-active":"#333","--ghost-text-bg-hover":"rgba(127, 127, 127, 0.1)","--ghost-text-success":"#059669"},".ghost-text-wrapper":{position:"absolute",display:"inline-flex",alignItems:"center",gap:"8px",opacity:"0.7",transition:"opacity 0.2s",top:"0",right:"0",left:"auto",zIndex:"1",pointerEvents:"auto","&:hover":{opacity:"1"}},".cm-line":{position:"relative"},".ghost-text":{color:"var(--ghost-text-fg)",fontStyle:"italic",fontSize:"14px","&.pinned":{color:"var(--ghost-text-fg-active)",fontWeight:"500"}},".ghost-text-actions":{display:"inline-flex",gap:"4px",opacity:"0",transition:"opacity 0.2s",".ghost-text-wrapper:hover &":{opacity:"1"}},".ghost-text-button":{padding:"2px",border:"none",background:"transparent",color:"var(--ghost-text-fg)",cursor:"pointer",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s","&:hover":{background:"var(--ghost-text-bg-hover)",color:"var(--ghost-text-fg-active)"},"&.active":{color:"var(--ghost-text-fg-active)",background:"var(--ghost-text-bg-hover)"},"&.copied, &.applied":{color:"var(--ghost-text-success)"}}})]}const uve=Jr.define({create(){return Lt.none},update(n,e){if(!e.docChanged&&!e.selection)return n;const t=new va,r=[],i=[{regex:/\b(sum|avg|median|stddev|factorial|percentage)\b/g,class:"cm-function"},{regex:/\b\d+(\.\d+)?\b/g,class:"cm-number"},{regex:/=([^=].*?)$/gm,class:"cm-formula"},{regex:/"(.*?)"/g,class:"cm-string"},{regex:/^(\w+)\s*[:=]\s*(.+)$/gm,class:"cm-variable-assignment"}];for(let s=1;s<=e.state.doc.lines;s++){const o=e.state.doc.line(s),a=o.text;for(const{regex:l,class:c}of i){l.lastIndex=0;let h;for(;(h=l.exec(a))!==null;){const d=o.from+h.index,p=d+h[0].length;r.push({start:d,end:p,className:c})}}}r.sort((s,o)=>s.start-o.start);for(const{start:s,end:o,className:a}of r){const l=Lt.mark({class:a});t.add(s,o,l)}return t.finish()},provide:n=>vt.decorations.from(n)}),hve=vt.baseTheme({".cm-function":{color:"#6f42c1",fontWeight:"bold"},".cm-number":{color:"#005cc5"},".cm-formula":{color:"#22863a",fontStyle:"italic"},".cm-string":{color:"#e36209"},".cm-variable-assignment":{color:"#d1345f",fontWeight:"bold"},"&.dark .cm-function":{color:"#b392f0"},"&.dark .cm-number":{color:"#79b8ff"},"&.dark .cm-formula":{color:"#85e89d"},"&.dark .cm-string":{color:"#ffab70"},"&.dark .cm-variable-assignment":{color:"#ff79c6"}});function fve(){return[uve,hve]}ar.extend(A$);ar.extend(I$);const dve="",pve={sum:(...n)=>math.sum(n),avg:(...n)=>math.mean(n),median:(...n)=>math.median(n),stddev:(...n)=>math.std(n),factorial:n=>math.factorial(n),percentage:(n,e)=>n/e*100,roi:(n,e)=>(n-e)/e*100,compound_interest:(n,e,t)=>n*Math.pow(1+e,t),break_even:(n,e,t)=>n/(e-t),velocity:(n,e)=>n/e,burn_rate:(n,e,t)=>(n-e)/t,pert:(n,e,t)=>(n+4*e+t)/6,cycle_time:(n,e)=>e/n,communication_channels:n=>n*(n-1)/2,resource_utilization:(n,e)=>n/e*100,resource_overallocation:(n,e)=>n-e,variance:(n,e)=>(n-e)/e*100},mve={sum:["sum of","total of","add"],avg:["average of","mean of","avg of"],median:["median of"],stddev:["standard deviation of","std dev of"],factorial:["factorial of"],percentage:["percentage of","percent of"],roi:["roi of"],compound_interest:["interest of"],break_even:["break even of"],velocity:["velocity of"],burn_rate:["burn rate of"],pert:["pert of"],cycle_time:["cycle time of"],communication_channels:["comms channels of"],resource_utilization:["resource utilization of"],resource_overallocation:["resource over of"],variance:["variance of"]};function gve(n){let e=n.matchBefore(/=[a-zA-Z]*$/);if(e){const i=e.text.slice(1).toLowerCase(),s=Object.entries(pve).filter(([o])=>o.toLowerCase().startsWith(i)).map(([o])=>({label:o,type:"function",info:`Calculate ${o} of numbers`,apply:`${o}()`,detail:"formula"}));return{from:e.from+1,options:s}}let t=n.matchBefore(/\w+$/);if(!t&&!n.explicit)return null;const r=[];if(t){const i=t.text.toLowerCase();Object.entries(mve).forEach(([s,o])=>{o.forEach(a=>{a.toLowerCase().startsWith(i)&&r.push({label:a,type:"text",info:`Calculate ${s} of numbers`,apply:`${a} `})})})}return{from:t?t.from:n.pos,options:r}}const yve=m9({override:[gve]}),vve=n=>Ln.transactionFilter.of(e=>{if(!e.docChanged)return e;const t=e.newDoc;if(t.lines>n){const i=t.line(n+1).from-1;return[e.change({from:i,to:t.length,insert:""})]}return e}),bve=n=>kr.fromClass(class{constructor(e){this.view=e,this.notification=null,this.checkLines(e)}update(e){e.docChanged&&this.checkLines(e.view)}checkLines(e){e.state.doc.lines>=n?this.showNotification(e):this.notification&&this.hideNotification()}showNotification(e){this.notification||(this.notification=document.createElement("div"),this.notification.className="editor-line-limit-notification",this.notification.textContent=`Maximum of ${n} lines reached`,this.notification.style.position="absolute",this.notification.style.bottom="30px",this.notification.style.right="10px",this.notification.style.backgroundColor="rgba(255, 100, 100, 0.8)",this.notification.style.color="white",this.notification.style.padding="5px 10px",this.notification.style.borderRadius="3px",this.notification.style.zIndex="10",e.dom.parentNode.appendChild(this.notification),setTimeout(()=>{this.hideNotification()},3e3))}hideNotification(){this.notification&&this.notification.parentNode&&(this.notification.parentNode.removeChild(this.notification),this.notification=null)}destroy(){this.hideNotification()}}),wve={name:"EditorComponent",props:{currentPage:{type:[String,Number],default:null},vaultKey:{type:[String],default:null}},emits:["content-saved","save-error"],inject:["syncManager"],setup(n){const e=ks("syncManager"),t=eF(),r=Nt(null),i=Nt(null),s=Nt(!1),o=Nt(""),a=new zy,l=en.define(),c=$A(),h=f3(),d=1e4,p=Nt({});let y=Nt("");const w=Jr.define({create(){return Lt.none},update(k,V){for(let D of V.effects)if(D.is(l))if(D.value!==null){const Z=V.state.doc.lineAt(D.value);return Lt.set([Lt.line({class:"highlighted-line"}).range(Z.from)])}else return Lt.none;return V.docChanged?Lt.none:k},provide:k=>vt.decorations.from(k)}),S=k=>{if(i.value)try{const V=i.value.state,D=Math.min(k,V.doc.lines),le=V.doc.line(D).from,Q=$e.cursor(le);i.value.dispatch({selection:Q,scrollIntoView:!0,effects:[vt.scrollIntoView(le,{y:"center"}),l.of(le)]}),i.value.focus(),setTimeout(()=>{i.value&&i.value.dispatch({effects:l.of(null)})},2e3)}catch(V){console.error("Error in scrollToLine:",V)}},E=k=>k==null?null:typeof k=="string"&&/^\d+$/.test(k)?parseInt(k,10):typeof k=="number"?k:String(k),C=async()=>{console.log("Forcing sync operation....");const k=n.currentPage,V=await L(n.currentPage);e.value.forceSync(k,V)},L=async k=>{const V=E(k);if(!V)return null;try{const D=await mi.getPage(V,n.vaultKey);return D&&D.trim()?D:dve}catch(D){throw console.error("Error loading content:",D),D}},P=async()=>await Bn.getItem("selectedTimezone"),F=kr.fromClass(class{constructor(k){this.view=k,this.lastProcessedLines=[]}update(k){if(k.docChanged){s.value=!0;const V=k.state.doc.toString();this.processChanges(V),e.value.handleContentChange(n.currentPage,V).then(async D=>{console.log(D),D.savedLocally,D.scheduledForSync&&(y.value="scheduled")}).catch(D=>{console.error("Error handling content change:",D)})}}processChanges(k){const V=k.split(`
`);V.forEach(async(D,Z)=>{const le=D.trim();if(le&&le!==this.lastProcessedLines[Z])try{const Q=this.computeResult(le);Q&&(await mi.saveGhostText(le,Q),this.lastProcessedLines[Z]=le)}catch(Q){console.error("Error processing line:",Q)}}),this.lastProcessedLines.length>V.length&&(this.lastProcessedLines.length=V.length)}computeResult(k){return null}}),U=[vve(d),bve(d)],j=t.value?j1:[],N=async k=>Ln.create({doc:k,extensions:[qye,F,yve,cve(c,h),fve(),a.of(j),w,...U]}),O=k=>{i.value=new vt({state:k,parent:r.value})},A=()=>{i.value&&(i.value.destroy(),i.value=null)},R=async()=>{s.value=!1;let k=await P();k===null&&(k="UTC"),o.value=ar().tz(k||ar.tz.guess()).format("HH:mm:ss"),y.value="synced"};return wi(()=>n.currentPage,async(k,V)=>{if(V&&s.value&&(p.value[V]=i.value.state),!k){A();return}try{const D=await L(k);await Qa(),c.$reset();const Z=await N(D);if(!i.value)O(Z);else{A(),O(Z);const Q=t.value?j1:[];i.value.dispatch({effects:a.reconfigure(Q)})}p.value[k]=Z,s.value=!1;let le=await Bn.getItem("selectedTimezone");le===null&&(le="UTC"),o.value=ar().tz(le||ar.tz.guess()).format("HH:mm:ss")}catch(D){console.error("Error handling page change:",D)}},{immediate:!0}),wi(t,()=>{if(i.value){const k=t.value?j1:[];i.value.dispatch({effects:a.reconfigure(k)})}}),Qf(async()=>{if(n.currentPage&&s.value){const k=i.value.state.doc.toString();await e.value.prepareClose(n.currentPage,k)}A()}),Fs(async()=>{e.value.on("localSaveComplete",R)}),{editor:r,editorView:i,isDirty:s,lastSavedTime:o,isDark:t,scrollToLine:S,forceSync:C}}},Sve={class:"editor-container bg-white dark:bg-custom-dark"},Eve={ref:"editor",class:"editor"},Tve={class:"status-bar"},_ve={key:0};function xve(n,e,t,r,i,s){return nt(),pt("div",Sve,[Qe("div",Eve,null,512),Qe("div",Tve,[Qe("span",null,"Last saved: "+or(this.lastSavedTime),1),this.isDirty?(nt(),pt("span",_ve,"*")):Br("",!0),Qe("button",{onClick:e[0]||(e[0]=(...o)=>r.forceSync&&r.forceSync(...o)),class:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded shadow-lg transition-colors"},e[1]||(e[1]=[DA('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" width="40" height="40" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" data-v-418e301e><path stroke="none" d="M0 0h24v24H0z" fill="none" data-v-418e301e></path><path d="M19.933 13.041a8 8 0 1 1 -9.925 -8.788c3.899 -1 7.935 1.007 9.425 4.747" data-v-418e301e></path><path d="M20 4v5h-5" data-v-418e301e></path></svg><span class="hidden sm:block" data-v-418e301e>Force Sync</span>',2)]))])])}const Ave=go(wve,[["render",xve],["__scopeId","data-v-418e301e"]]),Ive={class:"overflow-y-auto"},Cve={class:"text-sm font-semibold text-gray-500 mb-1"},Ove=["onClick"],kve={key:0,class:"flex flex-col space-y-2 mb-2"},Rve={class:"flex items-center"},Pve={class:"text-sm text-gray-600"},Dve={class:"font-medium break-words"},Mve={class:"text-sm text-gray-400 break-words"},Nve={class:"flex justify-between items-center"},Lve={key:1,class:"text-xs self-start bg-gray-200 text-gray-700"},Vve={key:1,class:"flex flex-col mb-2"},Fve={class:"flex items-center"},Bve={class:"text-sm text-gray-500"},Uve={class:"font-medium break-words"},$ve={class:"text-sm text-gray-600 break-words"},Hve={class:"flex justify-between items-center"},Wve={key:1,class:"text-xs self-start bg-gray-200 text-gray-700"},zve={__name:"CalendarEventList",props:["isEventbarOpen"],emits:["jump-to-line","toggleEventbar"],setup(n,{emit:e}){const t=$A(),r=t.groupedByMonth,i=gn(()=>{const d=t.groupedByMonth,p=Object.entries(d);return p.sort((y,w)=>{const S=ar(y[0],"MMMM YYYY"),E=ar(w[0],"MMMM YYYY");return S.diff(E)}),Object.fromEntries(p)});function s(d,p){return d.length>p?d.slice(0,p)+"...":d}function o(d){const p=ar(d.end).diff(ar(),"day");return p<0?"text-red-800":p<=3?"text-yellow-800":"text-green-800"}function a(d){const p=ar(d.end).diff(ar(),"day");return p<0?"Overdue":p===0?"Today":p===1?"Tomorrow":`${p} days left`}function l(d,p){const y=ar(d),w=ar(p);return y.isSame(w,"day")?y.format("MMM D, YYYY"):`${y.format("MMM D")} - ${w.format("MMM D, YYYY")}`}const c=e,h=d=>{console.log(d),c("jump-to-line",d)};return(d,p)=>(nt(),pt("div",{class:pi(["",[Object.keys(sa(r)).length===0?"":"ml-2 bg-white dark:bg-custom-dark"]])},[Qe("div",Ive,[(nt(!0),pt(lr,null,Pf(i.value,(y,w)=>(nt(),pt("div",{key:w,class:"mb-2"},[Qe("h3",Cve,or(w),1),Qe("ul",null,[(nt(!0),pt(lr,null,Pf(y,S=>(nt(),pt("li",{key:S.rawText,onClick:E=>h(S.lineNumber),class:pi(["text-sm cursor-pointer p-1 mr-2 shadow-sm hover:bg-gray-50 dark:hover:bg-gray-800 transition border-b border-gray-700 last:border-b-0",{"opacity-50":S.status==="completed"}])},[S.isRange?(nt(),pt("div",kve,[Qe("div",Rve,[Qe("span",{class:pi(["w-4 h-0.5 mr-2",S.status==="complete"?"bg-gray-500":"bg-blue-500"])},null,2),Qe("span",Pve,or(l(S.start,S.end)),1)]),Qe("div",null,[Qe("h4",Dve,or(s(S.title,30)),1),Qe("p",Mve,or(s(S.description,50)),1)]),Qe("div",Nve,[S.status!=="completed"?(nt(),pt("span",{key:0,class:pi(["text-xs self-start",o(S)])},or(a(S)),3)):(nt(),pt("span",Lve," Complete "))])])):(nt(),pt("div",Vve,[Qe("div",Fve,[Qe("span",{class:pi(["w-2 h-2 rounded-full mr-2",S.status==="completed"?"bg-gray-700":"bg-blue-500"])},null,2),Qe("span",Bve,or(l(S.start,S.end)),1)]),Qe("h4",Uve,or(s(S.title,30)),1),Qe("p",$ve,or(s(S.description,50)),1),Qe("div",Hve,[S.status!=="completed"?(nt(),pt("span",{key:0,class:pi(["text-xs self-start",o(S)])},or(a(S)),3)):(nt(),pt("span",Wve," Complete "))])]))],10,Ove))),128))])]))),128))])],2))}},jve={data(){return{passphrase:"",isUnlocked:!1,errorMessage:"",attemptCount:0,lastAttemptTime:null,lockoutUntil:null,inactivityTimer:null}},props:{isDark:{type:Boolean,required:!0},maxAttempts:{type:Number,default:5},lockoutDuration:{type:Number,default:3e5},autoLockTimeout:{type:Number,default:6e5}},created(){this.checkLockoutStatus()},beforeUnmount(){this.clearInactivityTimer()},methods:{checkLockoutStatus(){if(this.lockoutUntil&&new Date<this.lockoutUntil){const n=Math.ceil((this.lockoutUntil-new Date)/1e3);return this.errorMessage=`Too many failed attempts. Please try again in ${n} seconds.`,!1}else this.lockoutUntil&&(this.lockoutUntil=null,this.attemptCount=0,this.errorMessage="");return!0},async unlockVault(){try{if(!this.checkLockoutStatus())return;const n=new Date;if(this.lastAttemptTime&&n-this.lastAttemptTime<1e3){this.errorMessage="Please wait before trying again.";return}this.lastAttemptTime=n;let e=null;if(this.passphrase&&(e=await iU(this.passphrase)),e)this.isUnlocked=!0,this.attemptCount=0,this.errorMessage="",this.startInactivityTimer(),this.$emit("vault-unlock-success"),await jp(),this.$emit("vault-unlocked",e);else throw new Error("Incorrect passphrase")}catch{this.attemptCount++,this.attemptCount>=this.maxAttempts?(this.lockoutUntil=new Date(Date.now()+this.lockoutDuration),this.errorMessage=`Too many failed attempts. Please try again in ${Math.ceil(this.lockoutDuration/1e3)} seconds.`):(console.warn(`Failed unlock attempt ${this.attemptCount}/${this.maxAttempts}`),this.errorMessage=`Invalid passphrase. ${this.maxAttempts-this.attemptCount} attempts remaining.`)}},startInactivityTimer(){this.clearInactivityTimer(),this.inactivityTimer=setTimeout(()=>{this.lockVault()},this.autoLockTimeout)},clearInactivityTimer(){this.inactivityTimer&&(clearTimeout(this.inactivityTimer),this.inactivityTimer=null)},lockVault(){this.isUnlocked&&(this.isUnlocked=!1,this.passphrase="",this.$emit("vault-locked"))},resetInactivityTimer(){this.isUnlocked&&this.startInactivityTimer()}},watch:{passphrase(){this.resetInactivityTimer()}}},Kve={key:0,class:"space-y-4"},Gve={key:0,class:"text-red-600 dark:text-red-400 text-sm mt-2"},qve={key:1,class:"text-center space-y-2"};function Yve(n,e,t,r,i,s){return nt(),pt("div",{class:pi([{dark:t.isDark},"max-w-md mx-auto mt-10 p-6 bg-white dark:bg-custom-dark rounded-lg shadow-md"])},[i.isUnlocked?(nt(),pt("div",qve,e[4]||(e[4]=[Qe("span",{class:"text-6xl"},"",-1),Qe("p",{class:"text-xl font-semibold text-green-600 dark:text-green-400"},"Vault Unlocked",-1)]))):(nt(),pt("div",Kve,[e[3]||(e[3]=Qe("label",{for:"passphrase",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Unlock Vault: ",-1)),Pc(Qe("input",{type:"password",id:"passphrase","onUpdate:modelValue":e[0]||(e[0]=o=>i.passphrase=o),onKeyup:e[1]||(e[1]=LV((...o)=>s.unlockVault&&s.unlockVault(...o),["enter"])),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Enter passphrase"},null,544),[[el,i.passphrase]]),Qe("button",{onClick:e[2]||(e[2]=(...o)=>s.unlockVault&&s.unlockVault(...o)),class:"w-full px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-300"}," Unlock "),i.errorMessage?(nt(),pt("p",Gve,or(i.errorMessage),1)):Br("",!0)]))],2)}const Xve=go(jve,[["render",Yve],["__scopeId","data-v-ed4ab840"]]),Jve={data(){return{passphrase:"",confirmPassphrase:"",saveKey:!0,errorMessage:"",successMessage:"",vaultKeyExists:!1,isProcessing:!1}},async created(){},methods:{async checkForExistingKey(){const n=Mc.currentUser;if(n)try{const e=await GI(n.uid);this.vaultKeyExists=!!e}catch(e){console.error("Error checking for existing key:",e)}},async generateKey(){if(this.errorMessage="",this.successMessage="",this.passphrase!==this.confirmPassphrase){this.errorMessage="Passphrases do not match.";return}if(!this.passphrase||this.passphrase.length<3){this.errorMessage="Passphrase must be at least 4 characters.";return}if(!this.isProcessing){this.isProcessing=!0;try{const n=await tU(this.passphrase),e=await nU(n,this.passphrase);if(this.saveKey){const t=Mc.currentUser;if(!t){this.errorMessage="You must be logged in to save the key.",this.isProcessing=!1;return}let r=!1;try{await Pie(t.uid,e),r=!0}catch(i){console.error("Failed to save key to Firestore:",i),this.errorMessage="Failed to save passphrase to cloud. Your passphrase was not saved.",this.isProcessing=!1;return}if(r){let i=null;try{i=await iU(this.passphrase)}catch(s){console.error("Failed to unlock vault:",s),this.errorMessage="Passphrase saved but failed to unlock vault.",this.isProcessing=!1;return}if(i)try{await jp(),this.successMessage="Vault passphrase set and saved successfully!",this.$emit("passphrase-set",this.passphrase)}catch(s){console.error("Failed to sync data:",s),this.errorMessage="Passphrase saved but failed to sync data.",this.isProcessing=!1;return}else{this.errorMessage="Incorrect passphrase. Please try again.",this.isProcessing=!1;return}}}else this.successMessage="Vault passphrase set successfully!",this.$emit("passphrase-set",this.passphrase)}catch(n){console.error("Error setting passphrase:",n),this.errorMessage=`Failed to set passphrase: ${n.message||"Unknown error"}`}finally{this.isProcessing=!1}}},clearSensitiveData(){this.passphrase="",this.confirmPassphrase=""}},beforeDestroy(){this.clearSensitiveData()}},Qve={class:"max-w-md mx-auto mt-10 p-6 bg-white dark:bg-custom-dark rounded-lg shadow-md"},Zve={key:0,class:"space-y-4"},e0e={key:1,class:"space-y-4"},t0e={key:2,class:"mt-4 text-red-600 dark:text-red-400"},n0e={key:3,class:"mt-4 text-green-600 dark:text-green-400"};function r0e(n,e,t,r,i,s){return nt(),pt("div",Qve,[e[8]||(e[8]=Qe("h2",{class:"text-2xl font-bold mb-6 text-gray-800 dark:text-white"},"Secure Vault Setup",-1)),i.vaultKeyExists?(nt(),pt("div",Zve,[e[5]||(e[5]=Qe("p",{class:"text-gray-600 dark:text-gray-300"},"Enter your passphrase to unlock your vault:",-1)),Pc(Qe("input",{type:"password","onUpdate:modelValue":e[0]||(e[0]=o=>i.passphrase=o),placeholder:"Enter passphrase",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[el,i.passphrase]]),Qe("button",{onClick:e[1]||(e[1]=(...o)=>n.unlockVault&&n.unlockVault(...o)),class:"w-full px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-300"}," Unlock ")])):(nt(),pt("div",e0e,[Qe("div",null,[e[6]||(e[6]=Qe("label",{for:"passphrase",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Enter Passphrase:",-1)),Pc(Qe("input",{id:"passphrase",type:"password","onUpdate:modelValue":e[2]||(e[2]=o=>i.passphrase=o),placeholder:"Enter passphrase",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[el,i.passphrase]])]),Qe("div",null,[e[7]||(e[7]=Qe("label",{for:"confirmPassphrase",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Confirm Passphrase:",-1)),Pc(Qe("input",{id:"confirmPassphrase",type:"password","onUpdate:modelValue":e[3]||(e[3]=o=>i.confirmPassphrase=o),placeholder:"Confirm passphrase",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[el,i.confirmPassphrase]])]),Qe("button",{onClick:e[4]||(e[4]=(...o)=>s.generateKey&&s.generateKey(...o)),class:"w-full px-4 py-2 text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-300"}," Set Key ")])),i.errorMessage?(nt(),pt("p",t0e,or(i.errorMessage),1)):Br("",!0),i.successMessage?(nt(),pt("p",n0e,or(i.successMessage),1)):Br("",!0)])}const i0e=go(Jve,[["render",r0e]]),s0e="modulepreload",o0e=function(n,e){return new URL(n,e).href},P2={},a0e=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(c=>{if(c=o0e(c,r),c in P2)return;P2[c]=!0;const h=c.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(!!r)for(let w=o.length-1;w>=0;w--){const S=o[w];if(S.href===c&&(!h||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${d}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":s0e,h||(y.as="script"),y.crossOrigin="",y.href=c,l&&y.setAttribute("nonce",l),document.head.appendChild(y),h)return new Promise((w,S)=>{y.addEventListener("load",w),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function l0e(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=n;let a,l,c;const h=async(p=!0)=>{await l,c==null||c()};async function d(){if("serviceWorker"in navigator){if(a=await a0e(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:p}},[],import.meta.url).then(({Workbox:p})=>new p("./sw.js",{scope:"./",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;c=()=>{a==null||a.messageSkipWaiting()};{let p=!1;const y=()=>{p=!0,a==null||a.addEventListener("controlling",w=>{w.isUpdate&&window.location.reload()}),t==null||t()};a.addEventListener("installed",w=>{typeof w.isUpdate>"u"?typeof w.isExternal<"u"&&w.isExternal?y():!p&&(r==null||r()):w.isUpdate||r==null||r()}),a.addEventListener("waiting",y)}a.register({immediate:e}).then(p=>{s?s("./sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return l=d(),h}const D2="hidePwaInstallPrompt",c0e=60*60*1e3;function u0e(){const n=Nt(!1),e=Nt(!1),t=Nt(!1);let r;const i=Nt(null),s=gn(()=>!!i.value),o=Nt(localStorage.getItem(D2)==="true"),a=gn(()=>!!(typeof window<"u"&&(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0))),l=async()=>{const y=i.value;if(!y){console.warn("Install prompt not available");return}try{await y.prompt();const{outcome:w}=await y.userChoice;console.log(`User response to the install prompt: ${w}`),i.value=null}catch(w){console.error("Error showing install prompt:",w),i.value=null}},c=()=>{i.value=null,o.value=!0,localStorage.setItem(D2,"true")},h=y=>{y.preventDefault(),console.log("beforeinstallprompt event captured"),i.value=y},d=()=>{console.log("PWA installed"),i.value=null},p=()=>{r=l0e({immediate:!0,onNeedRefresh(){console.log("PWA: New content available, need refresh."),e.value=!0},onOfflineReady(){console.log("PWA: App ready to work offline."),n.value=!0},onRegistered(y){console.log("PWA: Service Worker registered successfully.",y),y&&setInterval(async()=>{if(!y.installing&&navigator.onLine)try{await y.update()}catch(w){console.error("PWA: Error checking for updates:",w)}},c0e)},onRegisterError(y){console.error("PWA: Service Worker registration error:",y)}})};return Fs(()=>{window.addEventListener("beforeinstallprompt",h),window.addEventListener("appinstalled",d),p()}),by(()=>{window.removeEventListener("beforeinstallprompt",h),window.removeEventListener("appinstalled",d)}),{offlineReady:n,needRefresh:e,reloading:t,updateServiceWorker:async()=>{t.value=!0,r&&await r()},showInstallPrompt:s,hideInstallPrompt:o,isInstalled:a,install:l,cancelInstall:c}}const h0e={key:0,class:"pwa-indicator p-3 bg-blue-100 dark:bg-blue-900 border border-blue-300 dark:border-blue-700 rounded shadow-md text-sm text-blue-800 dark:text-blue-200"},f0e={key:0,class:"flex items-center justify-between gap-3"},d0e=["disabled"],p0e={key:0,class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},m0e={key:1,class:"flex items-center justify-between gap-3"},g0e={__name:"PWAIndicator",setup(n){const{needRefresh:e,updateServiceWorker:t,reloading:r,showInstallPrompt:i,hideInstallPrompt:s,isInstalled:o,install:a,cancelInstall:l}=u0e(),c=gn(()=>i.value&&!o.value&&!s.value),h=()=>{t()},d=()=>{a()},p=()=>{l()},y={xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",width:"40",height:"40",viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"};return(w,S)=>sa(e)||c.value?(nt(),pt("div",h0e,[sa(e)?(nt(),pt("div",f0e,[S[3]||(S[3]=Qe("span",null,"New content available, click reload to update.",-1)),Qe("button",{onClick:h,disabled:sa(r),class:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2"},[sa(r)?(nt(),pt("svg",p0e,S[0]||(S[0]=[Qe("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Qe("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(nt(),pt("svg",cA(NA({key:1},y)),S[1]||(S[1]=[Qe("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},null,-1),Qe("path",{d:"M19.933 13.041a8 8 0 1 1 -9.925 -8.788c3.899 -1 7.935 1.007 9.425 4.747"},null,-1),Qe("path",{d:"M20 4v5h-5"},null,-1)]),16)),S[2]||(S[2]=Qe("span",null,"Reload",-1))],8,d0e)])):c.value?(nt(),pt("div",m0e,[S[4]||(S[4]=Qe("span",null,"Install this app?",-1)),Qe("div",{class:"flex gap-2"},[Qe("button",{onClick:d,class:"px-3 py-1 bg-green-500 hover:bg-green-600 text-white rounded inline-flex items-center"}," Install "),Qe("button",{onClick:p,class:"px-3 py-1 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded inline-flex items-center"}," Dismiss ")])])):Br("",!0)])):Br("",!0)}},y0e=go(g0e,[["__scopeId","data-v-9ae558fe"]]),vc={MAIN_PANE_SIZE:"mainPaneSize",IS_SIDEBAR_OPEN:"isSidebarOpen",IS_EVENTBAR_OPEN:"isEventbarOpen",LAST_SELECTED_PAGE_ID:"lastSelectedPageId"},hr={LOADING:"loading",NEEDS_AUTH:"needsAuth",NEEDS_VAULT_SETUP:"needsVaultSetup",NEEDS_VAULT_UNLOCK:"needsVaultUnlock",OFFLINE_NEEDS_CHECK:"offlineNeedsCheck",READY:"ready",ERROR:"error"},v0e={name:"App",components:{SidebarComponent:nhe,EditorComponent:Ave,TopBar:xae,CalendarEventList:zve,VaultUnlock:Xve,PassphraseSetup:i0e,Splitpanes:jie,Pane:Kie,PWAIndicator:y0e},setup(){const n=Nt(null),e=Nt(hr.LOADING),t=XY(),r=eF({selector:"body",attribute:"class",valueDark:"dark",valueLight:""}),i=NY(r),s=$A(),o=gn(()=>s.groupedByMonth&&Object.keys(s.groupedByMonth).length>0),a=Nt(null);kl("syncManager",a);const l=()=>{a.value||(a.value=zie(mi,Bn))},c=async()=>{if(!t.value){console.log("Sync skipped: Application is offline.");return}if(!a.value){console.warn("Sync Manager not initialized.");return}try{console.log("Attempting global sync (Online)...");const re=await a.value.syncAll({forceAll:!1});console.log("Global sync result:",re)}catch(re){console.error("Global sync failed:",re)}},h=Nt(!1),d=Nt(!1),p=Nt(70),y=Nt(null),w=Nt(null),S=gn(()=>p.value),E=gn(()=>100-p.value),C=async()=>{try{const[re,ae,Ce,He]=await Promise.all([Bn.getItem(vc.IS_SIDEBAR_OPEN),Bn.getItem(vc.IS_EVENTBAR_OPEN),Bn.getItem(vc.MAIN_PANE_SIZE),Bn.getItem(vc.LAST_SELECTED_PAGE_ID)]);h.value=re===1||re===!0,d.value=ae===1||ae===!0;const Ge=(Ce==null?void 0:Ce.value)??Ce;typeof Ge=="number"&&Ge>=10&&Ge<=100?p.value=Ge:(p.value=70,Ge!=null&&console.warn(`Invalid stored pane size (${Ge}), using default.`)),He&&await U(He)}catch(re){console.error("Failed to load layout state:",re)}},L=async()=>{h.value=!h.value;try{await Bn.setItem(vc.IS_SIDEBAR_OPEN,h.value?1:0)}catch(re){console.error("Failed to save sidebar state:",re)}},P=async()=>{d.value=!d.value;try{await Bn.setItem(vc.IS_EVENTBAR_OPEN,d.value?1:0)}catch(re){console.error("Failed to save event bar state:",re)}},F=async({panes:re})=>{var Ce;const ae=(Ce=re[0])==null?void 0:Ce.size;if(typeof ae=="number"){p.value=ae;try{await Bn.setItem(vc.MAIN_PANE_SIZE,ae)}catch(He){console.error("Failed to save pane size:",He)}}},U=async re=>{if(y.value=re,re)try{w.value=re,await Bn.setItem(vc.LAST_SELECTED_PAGE_ID,re)}catch(ae){console.error("Failed to load or set last page:",ae),w.value=null}else w.value=null,await Bn.removeItem(vc.LAST_SELECTED_PAGE_ID)},j=re=>{var ae;(ae=n.value)==null||ae.scrollToLine(re)},N=Nt(!1),O=Nt(!1),A=Nt(null),R=Nt(!1),k=async re=>{if(!t.value)return console.log("Offline: Cannot check encrypted key status online."),{status:"offline"};try{const ae=await GI(re);return console.log("Online check: Encrypted key exists in Firestore."),{status:"online",exists:!!ae}}catch(ae){return ae.message.includes("offline")||ae.code==="unavailable"?(console.warn("Offline detected during Firestore key check:",ae),{status:"offline"}):(console.error("Failed to fetch encrypted key:",ae),{status:"error",error:ae})}},V=re=>{console.log("Vault unlocked successfully."),A.value=re,R.value=!0,e.value=hr.READY,l(),t.value?jp():console.log("Vault unlocked, but offline. Sync deferred.")},D=async re=>{if(!t.value){console.error("Cannot set up passphrase while offline.");return}console.log("Passphrase set by user (Online).");const ae=re;A.value=ae,O.value=!0,R.value=!0,e.value=hr.READY,l(),await c()},Z=()=>{N.value=!1,O.value=!1,A.value=null,R.value=!1};let le=!1;const Q=async()=>{console.log(`Initializing App. Online: ${t.value}`),e.value!==hr.READY&&e.value!==hr.OFFLINE_NEEDS_CHECK&&(e.value=hr.LOADING);try{if(await C(),!le)le=!0,LF(Mc,async re=>{if(console.log(`Auth State Changed. User: ${re?re.uid:"null"}. Online: ${t.value}`),re){N.value=!0;const ae=await k(re.uid);ae.status==="online"?(O.value=ae.exists,R.value=!1,A.value=null,O.value?e.value=hr.NEEDS_VAULT_UNLOCK:e.value=hr.NEEDS_VAULT_SETUP):ae.status==="offline"?R.value&&A.value?(console.log("Offline, but vault was already unlocked. Entering Ready state (offline)."),e.value=hr.READY):(console.log("Offline: Cannot verify vault status. Blocking until online."),e.value=hr.OFFLINE_NEEDS_CHECK,R.value=!1,A.value=null,O.value=!1):(console.error("Error checking key online:",ae.error),e.value=hr.ERROR)}else Z(),e.value=hr.NEEDS_AUTH;console.log(`App State after auth check: ${e.value}`)});else if(t.value){console.log("Re-evaluating state after coming online...");const re=Mc.currentUser;if(re)if(e.value===hr.OFFLINE_NEEDS_CHECK||e.value===hr.NEEDS_AUTH){const ae=await k(re.uid);ae.status==="online"?(O.value=ae.exists,R.value=!1,A.value=null,e.value=O.value?hr.NEEDS_VAULT_UNLOCK:hr.NEEDS_VAULT_SETUP):ae.status==="error"&&(e.value=hr.ERROR)}else e.value===hr.READY&&R.value&&c();else Z(),e.value=hr.NEEDS_AUTH}}catch(re){console.error("Critical Initialization Error:",re),Z(),e.value=hr.ERROR}};return Fs(()=>{Q()}),wi(t,(re,ae)=>{console.log(`Network status changed. Was Online: ${ae}, Is Online: ${re}`),re?Q():(console.log("Application went offline."),e.value===hr.NEEDS_AUTH||e.value===hr.NEEDS_VAULT_SETUP||e.value===hr.NEEDS_VAULT_UNLOCK?console.warn(`App state ${e.value} may be blocked until online.`):(e.value,hr.READY))}),{appState:e,APP_STATES:hr,isOnline:t,isSidebarOpen:h,isEventbarOpen:d,mainPaneSize:p,midPaneSize:S,eventPaneSize:E,selectedPageId:y,selectedPage:w,editorRef:n,toggleSidebar:L,toggleEventbar:P,handlePaneResize:F,handlePageSelect:U,handleSidebarClick:j,isDark:r,toggleDark:i,isVaultUnlocked:R,userVaultKey:A,handleVaultUnlocked:V,handlePassphraseSet:D,hasEvents:o,performGlobalSync:c}}},b0e={key:0,class:"flex items-center justify-center h-full"},w0e={key:1,class:"flex items-center justify-center h-full"},S0e={key:0,class:"bg-yellow-500 text-black text-center p-1 text-sm"},E0e={class:"flex flex-1"},T0e={key:2,class:"flex-1 flex flex-col items-center justify-center"},_0e={key:0,class:"text-sm text-orange-600 dark:text-orange-400 mt-2"},x0e={key:3,class:"flex-1 flex flex-col items-center justify-center"},A0e={key:4,class:"flex flex-1"},I0e={key:0,class:"w-64 mr-2"},C0e={class:"flex-1 overflow-y-auto"};function O0e(n,e,t,r,i,s){const o=es("TopBar"),a=es("PWAIndicator"),l=es("PassphraseSetup"),c=es("VaultUnlock"),h=es("SidebarComponent"),d=es("EditorComponent"),p=es("pane"),y=es("CalendarEventList"),w=es("splitpanes");return nt(),pt("div",{class:pi([{dark:r.isDark},"h-screen w-full text-gray-900 bg-white dark:bg-custom-dark dark:text-white"])},[r.appState===r.APP_STATES.LOADING?(nt(),pt("div",b0e,e[2]||(e[2]=[Qe("p",null,"Loading application...",-1)]))):r.appState===r.APP_STATES.ERROR?(nt(),pt("div",w0e,e[3]||(e[3]=[Qe("p",{class:"text-red-500"},"Failed to initialize the application. Please try refreshing.",-1)]))):(nt(),pt(lr,{key:2},[hn(o,{isSidebarOpen:r.isSidebarOpen,isEventbarOpen:r.isEventbarOpen,onToggleSidebar:r.toggleSidebar,onToggleEventbar:r.toggleEventbar,isDark:r.isDark,toggleDark:r.toggleDark,componentToShow:r.appState,isVaultUnlocked:r.isVaultUnlocked,isOnline:r.isOnline},null,8,["isSidebarOpen","isEventbarOpen","onToggleSidebar","onToggleEventbar","isDark","toggleDark","componentToShow","isVaultUnlocked","isOnline"]),hn(a),!r.isOnline&&r.appState!==r.APP_STATES.LOADING?(nt(),pt("div",S0e," You are currently offline. Some features may be unavailable. Changes are saved locally. ")):Br("",!0),Qe("div",E0e,[r.appState===r.APP_STATES.NEEDS_VAULT_SETUP?(nt(),Za(l,{key:0,onPassphraseSet:r.handlePassphraseSet,"is-online":r.isOnline,class:"flex-1"},null,8,["onPassphraseSet","is-online"])):r.appState===r.APP_STATES.NEEDS_VAULT_UNLOCK?(nt(),Za(c,{key:1,onVaultUnlocked:r.handleVaultUnlocked,isDark:r.isDark,"is-online":r.isOnline,class:"flex-1"},null,8,["onVaultUnlocked","isDark","is-online"])):r.appState===r.APP_STATES.NEEDS_AUTH?(nt(),pt("div",T0e,[e[4]||(e[4]=Qe("p",null,"Please log in to continue.",-1)),r.isOnline?Br("",!0):(nt(),pt("p",_0e,"(Requires internet connection)"))])):r.appState===r.APP_STATES.OFFLINE_NEEDS_CHECK?(nt(),pt("div",x0e,e[5]||(e[5]=[Qe("p",null,"Cannot verify vault status while offline.",-1),Qe("p",{class:"text-sm text-orange-600 dark:text-orange-400 mt-2"},"Please connect to the internet to continue.",-1)]))):r.appState===r.APP_STATES.READY?(nt(),pt("div",A0e,[hn(d_,{name:"sidebar"},{default:Tc(()=>[r.isSidebarOpen?(nt(),pt("aside",I0e,[hn(h,{isSidebarOpen:r.isSidebarOpen,"onUpdate:isSidebarOpen":e[0]||(e[0]=S=>r.isSidebarOpen=S),selectedPageId:r.selectedPageId,onPageSelected:r.handlePageSelect},null,8,["isSidebarOpen","selectedPageId","onPageSelected"])])):Br("",!0)]),_:1}),hn(w,{class:pi([{dark:r.isDark},"default-theme"]),onResized:r.handlePaneResize},{default:Tc(()=>[hn(p,{size:r.midPaneSize,"min-size":"30"},{default:Tc(()=>[hn(d_,{name:"main-content"},{default:Tc(()=>[Qe("main",C0e,[hn(d,{ref:"editorRef",currentPage:r.selectedPage,isDarkMode:r.isDark,vaultKey:r.userVaultKey,"is-read-only":!r.userVaultKey},null,8,["currentPage","isDarkMode","vaultKey","is-read-only"])])]),_:1})]),_:1},8,["size"]),r.hasEvents&&r.isEventbarOpen?(nt(),Za(p,{key:0,size:r.eventPaneSize,"min-size":"15"},{default:Tc(()=>[hn(y,{onJumpToLine:r.handleSidebarClick,isEventbarOpen:r.isEventbarOpen,"onUpdate:isEventbarOpen":e[1]||(e[1]=S=>r.isEventbarOpen=S),class:""},null,8,["onJumpToLine","isEventbarOpen"])]),_:1},8,["size"])):Br("",!0)]),_:1},8,["class","onResized"])])):Br("",!0)])],64))],2)}const k0e=go(v0e,[["render",O0e],["__scopeId","data-v-600be920"]]),S9=Vb(k0e),E9=yY();S9.use(E9);iA.init(E9);S9.mount("#app");
